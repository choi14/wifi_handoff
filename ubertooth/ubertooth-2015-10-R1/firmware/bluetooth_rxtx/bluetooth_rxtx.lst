ARM GAS  /tmp/ccHz27EZ.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccHz27EZ.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	whitening:
  81 002c 01       		.byte	1
  82 002d 01       		.byte	1
  83 002e 01       		.byte	1
  84 002f 01       		.byte	1
  85 0030 00       		.byte	0
  86 0031 01       		.byte	1
  87 0032 00       		.byte	0
  88 0033 01       		.byte	1
  89 0034 00       		.byte	0
  90 0035 01       		.byte	1
  91 0036 00       		.byte	0
  92 0037 00       		.byte	0
  93 0038 00       		.byte	0
  94 0039 00       		.byte	0
  95 003a 01       		.byte	1
  96 003b 00       		.byte	0
  97 003c 01       		.byte	1
  98 003d 01       		.byte	1
  99 003e 00       		.byte	0
 100 003f 01       		.byte	1
 101 0040 01       		.byte	1
 102 0041 01       		.byte	1
 103 0042 01       		.byte	1
 104 0043 00       		.byte	0
 105 0044 00       		.byte	0
 106 0045 01       		.byte	1
 107 0046 01       		.byte	1
 108 0047 01       		.byte	1
 109 0048 00       		.byte	0
 110 0049 00       		.byte	0
 111 004a 01       		.byte	1
 112 004b 00       		.byte	0
 113 004c 01       		.byte	1
 114 004d 00       		.byte	0
 115 004e 01       		.byte	1
 116 004f 01       		.byte	1
 117 0050 00       		.byte	0
 118 0051 00       		.byte	0
 119 0052 01       		.byte	1
 120 0053 01       		.byte	1
 121 0054 00       		.byte	0
 122 0055 00       		.byte	0
ARM GAS  /tmp/ccHz27EZ.s 			page 3


 123 0056 00       		.byte	0
 124 0057 00       		.byte	0
 125 0058 00       		.byte	0
 126 0059 01       		.byte	1
 127 005a 01       		.byte	1
 128 005b 00       		.byte	0
 129 005c 01       		.byte	1
 130 005d 01       		.byte	1
 131 005e 00       		.byte	0
 132 005f 01       		.byte	1
 133 0060 00       		.byte	0
 134 0061 01       		.byte	1
 135 0062 01       		.byte	1
 136 0063 01       		.byte	1
 137 0064 00       		.byte	0
 138 0065 01       		.byte	1
 139 0066 00       		.byte	0
 140 0067 00       		.byte	0
 141 0068 00       		.byte	0
 142 0069 01       		.byte	1
 143 006a 01       		.byte	1
 144 006b 00       		.byte	0
 145 006c 00       		.byte	0
 146 006d 01       		.byte	1
 147 006e 00       		.byte	0
 148 006f 00       		.byte	0
 149 0070 00       		.byte	0
 150 0071 01       		.byte	1
 151 0072 00       		.byte	0
 152 0073 00       		.byte	0
 153 0074 00       		.byte	0
 154 0075 00       		.byte	0
 155 0076 00       		.byte	0
 156 0077 00       		.byte	0
 157 0078 01       		.byte	1
 158 0079 00       		.byte	0
 159 007a 00       		.byte	0
 160 007b 01       		.byte	1
 161 007c 00       		.byte	0
 162 007d 00       		.byte	0
 163 007e 01       		.byte	1
 164 007f 01       		.byte	1
 165 0080 00       		.byte	0
 166 0081 01       		.byte	1
 167 0082 00       		.byte	0
 168 0083 00       		.byte	0
 169 0084 01       		.byte	1
 170 0085 01       		.byte	1
 171 0086 01       		.byte	1
 172 0087 01       		.byte	1
 173 0088 00       		.byte	0
 174 0089 01       		.byte	1
 175 008a 01       		.byte	1
 176 008b 01       		.byte	1
 177 008c 00       		.byte	0
 178 008d 00       		.byte	0
 179 008e 00       		.byte	0
ARM GAS  /tmp/ccHz27EZ.s 			page 4


 180 008f 00       		.byte	0
 181 0090 01       		.byte	1
 182 0091 01       		.byte	1
 183 0092 01       		.byte	1
 184 0093 01       		.byte	1
 185 0094 01       		.byte	1
 186 0095 01       		.byte	1
 187 0096 01       		.byte	1
 188 0097 00       		.byte	0
 189 0098 00       		.byte	0
 190 0099 00       		.byte	0
 191 009a 01       		.byte	1
 192 009b 01       		.byte	1
 193 009c 01       		.byte	1
 194 009d 00       		.byte	0
 195 009e 01       		.byte	1
 196 009f 01       		.byte	1
 197 00a0 00       		.byte	0
 198 00a1 00       		.byte	0
 199 00a2 00       		.byte	0
 200 00a3 01       		.byte	1
 201 00a4 00       		.byte	0
 202 00a5 01       		.byte	1
 203 00a6 00       		.byte	0
 204 00a7 00       		.byte	0
 205 00a8 01       		.byte	1
 206 00a9 00       		.byte	0
 207 00aa 01       		.byte	1
 208 00ab 00       		.align	2
 211              	whitening_index:
 212 00ac 46       		.byte	70
 213 00ad 3E       		.byte	62
 214 00ae 78       		.byte	120
 215 00af 6F       		.byte	111
 216 00b0 4D       		.byte	77
 217 00b1 2E       		.byte	46
 218 00b2 0F       		.byte	15
 219 00b3 65       		.byte	101
 220 00b4 42       		.byte	66
 221 00b5 27       		.byte	39
 222 00b6 1F       		.byte	31
 223 00b7 1A       		.byte	26
 224 00b8 50       		.byte	80
 225 00b9 53       		.byte	83
 226 00ba 7D       		.byte	125
 227 00bb 59       		.byte	89
 228 00bc 0A       		.byte	10
 229 00bd 23       		.byte	35
 230 00be 08       		.byte	8
 231 00bf 36       		.byte	54
 232 00c0 7A       		.byte	122
 233 00c1 11       		.byte	17
 234 00c2 21       		.byte	33
 235 00c3 00       		.byte	0
 236 00c4 3A       		.byte	58
 237 00c5 73       		.byte	115
 238 00c6 06       		.byte	6
ARM GAS  /tmp/ccHz27EZ.s 			page 5


 239 00c7 5E       		.byte	94
 240 00c8 56       		.byte	86
 241 00c9 31       		.byte	49
 242 00ca 34       		.byte	52
 243 00cb 14       		.byte	20
 244 00cc 28       		.byte	40
 245 00cd 1B       		.byte	27
 246 00ce 54       		.byte	84
 247 00cf 5A       		.byte	90
 248 00d0 3F       		.byte	63
 249 00d1 70       		.byte	112
 250 00d2 2F       		.byte	47
 251 00d3 66       		.byte	102
 252              		.align	2
 255              	hop_interval_lut:
 256 00d4 00       		.byte	0
 257 00d5 01       		.byte	1
 258 00d6 13       		.byte	19
 259 00d7 19       		.byte	25
 260 00d8 1C       		.byte	28
 261 00d9 0F       		.byte	15
 262 00da 1F       		.byte	31
 263 00db 10       		.byte	16
 264 00dc 0E       		.byte	14
 265 00dd 21       		.byte	33
 266 00de 1A       		.byte	26
 267 00df 1B       		.byte	27
 268 00e0 22       		.byte	34
 269 00e1 14       		.byte	20
 270 00e2 08       		.byte	8
 271 00e3 05       		.byte	5
 272 00e4 07       		.byte	7
 273 00e5 18       		.byte	24
 274 00e6 23       		.byte	35
 275 00e7 02       		.byte	2
 276 00e8 0D       		.byte	13
 277 00e9 1E       		.byte	30
 278 00ea 20       		.byte	32
 279 00eb 1D       		.byte	29
 280 00ec 11       		.byte	17
 281 00ed 03       		.byte	3
 282 00ee 0A       		.byte	10
 283 00ef 0B       		.byte	11
 284 00f0 04       		.byte	4
 285 00f1 17       		.byte	23
 286 00f2 15       		.byte	21
 287 00f3 06       		.byte	6
 288 00f4 16       		.byte	22
 289 00f5 09       		.byte	9
 290 00f6 0C       		.byte	12
 291 00f7 12       		.byte	18
 292 00f8 24       		.byte	36
 293 00f9 000000   		.align	2
 296              	whitening_word:
 297 00fc 40B2BCC3 		.word	-1011043776
 298 0100 1F374A5F 		.word	1598699295
 299 0104 85F69C9A 		.word	-1700989307
ARM GAS  /tmp/ccHz27EZ.s 			page 6


 300 0108 C1D6C544 		.word	1153816257
 301 010c 2059DEE1 		.word	-505521888
 302 0110 8F1BA5AF 		.word	-1348134001
 303 0114 427B4ECD 		.word	-850494654
 304 0118 60EB6222 		.word	576908128
 305 011c 902CEFF0 		.word	-252760944
 306 0120 C78DD257 		.word	1473416647
 307 0124 A13DA766 		.word	1722236321
 308 0128 B0753111 		.word	288454064
 309 012c 8940B2BC 		.word	-1129168759
 310 0130 C31F374A 		.word	1245126595
 311 0134 5F85F69C 		.word	-1661565601
 312 0138 9AC1D6C5 		.word	-975781478
 313 013c 442059DE 		.word	-564584380
 314 0140 E18F1BA5 		.word	-1524920351
 315 0144 AF427B4E 		.word	1316700847
 316 0148 CD60EB62 		.word	1659592909
 317 014c 22902CEF 		.word	-282292190
 318 0150 F0C78DD2 		.word	-762460176
 319 0154 57A13DA7 		.word	-1489133225
 320 0158 66B07531 		.word	829796454
 321 015c D257A13D 		.word	1033983954
 322 0160 A766B075 		.word	1974494887
 323 0164 31114896 		.word	-1773661903
 324 0168 77F8E346 		.word	1189345399
 325 016c E9ABD09E 		.word	-1630491671
 326 0170 5333D8BA 		.word	-1160236205
 327 0174 980824CB 		.word	-886830952
 328 0178 3BFC71A3 		.word	-1552810949
 329 017c F45568CF 		.word	-815245836
 330 0180 A9196C5D 		.word	1567365545
 331 0184 4C0492E5 		.word	-443415476
 332 0188 1DFEB851 		.word	1371078173
 333 018c 1BA5AF42 		.word	1118807323
 334 0190 7B4ECD60 		.word	1624067707
 335 0194 EB622290 		.word	-1876794645
 336 0198 2CEFF0C7 		.word	-940511444
 337 019c 8DD257A1 		.word	-1588079987
 338 01a0 3DA766B0 		.word	-1335449795
 339 01a4 75311148 		.word	1209086325
 340 01a8 9677F8E3 		.word	-470255722
 341 01ac 46E9ABD0 		.word	-794039994
 342 01b0 9E5333D8 		.word	-667724898
 343 01b4 BA980824 		.word	604543162
 344 01b8 CB3BFC71 		.word	1912355787
 345 01bc 6479873F 		.word	1065843044
 346 01c0 6E94BE0A 		.word	180261998
 347 01c4 ED393583 		.word	-2093663763
 348 01c8 AD8B8940 		.word	1082756013
 349 01cc B2BCC31F 		.word	532921522
 350 01d0 374A5F85 		.word	-2057352649
 351 01d4 F69C9AC1 		.word	-1046831882
 352 01d8 D6C54420 		.word	541378006
 353 01dc 59DEE18F 		.word	-1881022887
 354 01e0 1BA5AF42 		.word	1118807323
 355 01e4 7B4ECD60 		.word	1624067707
 356 01e8 EB622290 		.word	-1876794645
ARM GAS  /tmp/ccHz27EZ.s 			page 7


 357 01ec AD8B8940 		.word	1082756013
 358 01f0 B2BCC31F 		.word	532921522
 359 01f4 374A5F85 		.word	-2057352649
 360 01f8 F69C9AC1 		.word	-1046831882
 361 01fc D6C54420 		.word	541378006
 362 0200 59DEE18F 		.word	-1881022887
 363 0204 1BA5AF42 		.word	1118807323
 364 0208 7B4ECD60 		.word	1624067707
 365 020c EB622290 		.word	-1876794645
 366 0210 2CEFF0C7 		.word	-940511444
 367 0214 8DD257A1 		.word	-1588079987
 368 0218 3DA766B0 		.word	-1335449795
 369 021c F69C9AC1 		.word	-1046831882
 370 0220 D6C54420 		.word	541378006
 371 0224 59DEE18F 		.word	-1881022887
 372 0228 1BA5AF42 		.word	1118807323
 373 022c 7B4ECD60 		.word	1624067707
 374 0230 EB622290 		.word	-1876794645
 375 0234 2CEFF0C7 		.word	-940511444
 376 0238 8DD257A1 		.word	-1588079987
 377 023c 3DA766B0 		.word	-1335449795
 378 0240 75311148 		.word	1209086325
 379 0244 9677F8E3 		.word	-470255722
 380 0248 46E9ABD0 		.word	-794039994
 381 024c 3F6E94BE 		.word	-1097568705
 382 0250 0AED3935 		.word	892988682
 383 0254 83AD8B89 		.word	-1987334781
 384 0258 40B2BCC3 		.word	-1011043776
 385 025c 1F374A5F 		.word	1598699295
 386 0260 85F69C9A 		.word	-1700989307
 387 0264 C1D6C544 		.word	1153816257
 388 0268 2059DEE1 		.word	-505521888
 389 026c 8F1BA5AF 		.word	-1348134001
 390 0270 427B4ECD 		.word	-850494654
 391 0274 60EB6222 		.word	576908128
 392 0278 902CEFF0 		.word	-252760944
 393 027c 0824CB3B 		.word	1003168776
 394 0280 FC71A3F4 		.word	-190615044
 395 0284 5568CFA9 		.word	-1446025131
 396 0288 196C5D4C 		.word	1281190937
 397 028c 0492E51D 		.word	501584388
 398 0290 FEB851FA 		.word	-95307522
 399 0294 2AB4E7D4 		.word	-723012566
 400 0298 0CB62E26 		.word	640595468
 401 029c 02C9F20E 		.word	250792194
 402 02a0 7FDC287D 		.word	2099829887
 403 02a4 15DA736A 		.word	1785977365
 404 02a8 065B1713 		.word	320297734
 405 02ac C1D6C544 		.word	1153816257
 406 02b0 2059DEE1 		.word	-505521888
 407 02b4 8F1BA5AF 		.word	-1348134001
 408 02b8 427B4ECD 		.word	-850494654
 409 02bc 60EB6222 		.word	576908128
 410 02c0 902CEFF0 		.word	-252760944
 411 02c4 C78DD257 		.word	1473416647
 412 02c8 A13DA766 		.word	1722236321
 413 02cc B0753111 		.word	288454064
ARM GAS  /tmp/ccHz27EZ.s 			page 8


 414 02d0 489677F8 		.word	-126380472
 415 02d4 E346E9AB 		.word	-1410775325
 416 02d8 D09E5333 		.word	861118160
 417 02dc 9AC1D6C5 		.word	-975781478
 418 02e0 442059DE 		.word	-564584380
 419 02e4 E18F1BA5 		.word	-1524920351
 420 02e8 AF427B4E 		.word	1316700847
 421 02ec CD60EB62 		.word	1659592909
 422 02f0 22902CEF 		.word	-282292190
 423 02f4 F0C78DD2 		.word	-762460176
 424 02f8 57A13DA7 		.word	-1489133225
 425 02fc 66B07531 		.word	829796454
 426 0300 11489677 		.word	2006337553
 427 0304 F8E346E9 		.word	-381230088
 428 0308 ABD09E53 		.word	1402917035
 429 030c 5333D8BA 		.word	-1160236205
 430 0310 980824CB 		.word	-886830952
 431 0314 3BFC71A3 		.word	-1552810949
 432 0318 F45568CF 		.word	-815245836
 433 031c A9196C5D 		.word	1567365545
 434 0320 4C0492E5 		.word	-443415476
 435 0324 1DFEB851 		.word	1371078173
 436 0328 FA2AB4E7 		.word	-407622918
 437 032c D40CB62E 		.word	783682772
 438 0330 2602C9F2 		.word	-221707738
 439 0334 0E7FDC28 		.word	685539086
 440 0338 7D15DA73 		.word	1943672189
 441 033c 2CEFF0C7 		.word	-940511444
 442 0340 8DD257A1 		.word	-1588079987
 443 0344 3DA766B0 		.word	-1335449795
 444 0348 75311148 		.word	1209086325
 445 034c 9677F8E3 		.word	-470255722
 446 0350 46E9ABD0 		.word	-794039994
 447 0354 9E5333D8 		.word	-667724898
 448 0358 BA980824 		.word	604543162
 449 035c CB3BFC71 		.word	1912355787
 450 0360 A3F45568 		.word	1750463651
 451 0364 CFA9196C 		.word	1813621199
 452 0368 5D4C0492 		.word	-1845212067
 453 036c E51DFEB8 		.word	-1191305755
 454 0370 51FA2AB4 		.word	-1272251823
 455 0374 E7D40CB6 		.word	-1240673049
 456 0378 2E2602C9 		.word	-922606034
 457 037c F20E7FDC 		.word	-595652878
 458 0380 287D15DA 		.word	-636125912
 459 0384 736A065B 		.word	1527147123
 460 0388 17138164 		.word	1686180631
 461 038c 79873F6E 		.word	1849657209
 462 0390 94BE0AED 		.word	-318062956
 463 0394 393583AD 		.word	-1383910087
 464 0398 8B8940B2 		.word	-1304393333
 465 039c BE0AED39 		.word	971836094
 466 03a0 3583AD8B 		.word	-1951562955
 467 03a4 8940B2BC 		.word	-1129168759
 468 03a8 C31F374A 		.word	1245126595
 469 03ac 5F85F69C 		.word	-1661565601
 470 03b0 9AC1D6C5 		.word	-975781478
ARM GAS  /tmp/ccHz27EZ.s 			page 9


 471 03b4 442059DE 		.word	-564584380
 472 03b8 E18F1BA5 		.word	-1524920351
 473 03bc AF427B4E 		.word	1316700847
 474 03c0 CD60EB62 		.word	1659592909
 475 03c4 22902CEF 		.word	-282292190
 476 03c8 F0C78DD2 		.word	-762460176
 477 03cc 77F8E346 		.word	1189345399
 478 03d0 E9ABD09E 		.word	-1630491671
 479 03d4 5333D8BA 		.word	-1160236205
 480 03d8 980824CB 		.word	-886830952
 481 03dc 3BFC71A3 		.word	-1552810949
 482 03e0 F45568CF 		.word	-815245836
 483 03e4 A9196C5D 		.word	1567365545
 484 03e8 4C0492E5 		.word	-443415476
 485 03ec 1DFEB851 		.word	1371078173
 486 03f0 FA2AB4E7 		.word	-407622918
 487 03f4 D40CB62E 		.word	783682772
 488 03f8 2602C9F2 		.word	-221707738
 489 03fc D09E5333 		.word	861118160
 490 0400 D8BA9808 		.word	144227032
 491 0404 24CB3BFC 		.word	-63190236
 492 0408 71A3F455 		.word	1442095985
 493 040c 68CFA919 		.word	430559080
 494 0410 6C5D4C04 		.word	72113516
 495 0414 92E51DFE 		.word	-31595118
 496 0418 B851FA2A 		.word	721047992
 497 041c B4E7D40C 		.word	215279540
 498 0420 B62E2602 		.word	36056758
 499 0424 C9F20E7F 		.word	2131686089
 500 0428 DC287D15 		.word	360523996
 501 042c 196C5D4C 		.word	1281190937
 502 0430 0492E51D 		.word	501584388
 503 0434 FEB851FA 		.word	-95307522
 504 0438 2AB4E7D4 		.word	-723012566
 505 043c 0CB62E26 		.word	640595468
 506 0440 02C9F20E 		.word	250792194
 507 0444 7FDC287D 		.word	2099829887
 508 0448 15DA736A 		.word	1785977365
 509 044c 065B1713 		.word	320297734
 510 0450 81647987 		.word	-2022087551
 511 0454 3F6E94BE 		.word	-1097568705
 512 0458 0AED3935 		.word	892988682
 513 045c 427B4ECD 		.word	-850494654
 514 0460 60EB6222 		.word	576908128
 515 0464 902CEFF0 		.word	-252760944
 516 0468 C78DD257 		.word	1473416647
 517 046c A13DA766 		.word	1722236321
 518 0470 B0753111 		.word	288454064
 519 0474 489677F8 		.word	-126380472
 520 0478 E346E9AB 		.word	-1410775325
 521 047c D09E5333 		.word	861118160
 522 0480 D8BA9808 		.word	144227032
 523 0484 24CB3BFC 		.word	-63190236
 524 0488 71A3F455 		.word	1442095985
 525 048c 8B8940B2 		.word	-1304393333
 526 0490 BCC31F37 		.word	924828604
 527 0494 4A5F85F6 		.word	-159031478
ARM GAS  /tmp/ccHz27EZ.s 			page 10


 528 0498 9C9AC1D6 		.word	-691955044
 529 049c C5442059 		.word	1495286981
 530 04a0 DEE18F1B 		.word	462414302
 531 04a4 A5AF427B 		.word	2067967909
 532 04a8 4ECD60EB 		.word	-345977522
 533 04ac 6222902C 		.word	747643490
 534 04b0 EFF0C78D 		.word	-1916276497
 535 04b4 D257A13D 		.word	1033983954
 536 04b8 A766B075 		.word	1974494887
 537 04bc F45568CF 		.word	-815245836
 538 04c0 A9196C5D 		.word	1567365545
 539 04c4 4C0492E5 		.word	-443415476
 540 04c8 1DFEB851 		.word	1371078173
 541 04cc FA2AB4E7 		.word	-407622918
 542 04d0 D40CB62E 		.word	783682772
 543 04d4 2602C9F2 		.word	-221707738
 544 04d8 0E7FDC28 		.word	685539086
 545 04dc 7D15DA73 		.word	1943672189
 546 04e0 6A065B17 		.word	391841386
 547 04e4 13816479 		.word	2036629779
 548 04e8 873F6E94 		.word	-1804714105
 549 04ec 3DA766B0 		.word	-1335449795
 550 04f0 75311148 		.word	1209086325
 551 04f4 9677F8E3 		.word	-470255722
 552 04f8 46E9ABD0 		.word	-794039994
 553 04fc 9E5333D8 		.word	-667724898
 554 0500 BA980824 		.word	604543162
 555 0504 CB3BFC71 		.word	1912355787
 556 0508 A3F45568 		.word	1750463651
 557 050c CFA9196C 		.word	1813621199
 558 0510 5D4C0492 		.word	-1845212067
 559 0514 E51DFEB8 		.word	-1191305755
 560 0518 51FA2AB4 		.word	-1272251823
 561 051c 66B07531 		.word	829796454
 562 0520 11489677 		.word	2006337553
 563 0524 F8E346E9 		.word	-381230088
 564 0528 ABD09E53 		.word	1402917035
 565 052c 33D8BA98 		.word	-1732585421
 566 0530 0824CB3B 		.word	1003168776
 567 0534 FC71A3F4 		.word	-190615044
 568 0538 5568CFA9 		.word	-1446025131
 569 053c 196C5D4C 		.word	1281190937
 570 0540 0492E51D 		.word	501584388
 571 0544 FEB851FA 		.word	-95307522
 572 0548 2AB4E7D4 		.word	-723012566
 573 054c AF427B4E 		.word	1316700847
 574 0550 CD60EB62 		.word	1659592909
 575 0554 22902CEF 		.word	-282292190
 576 0558 F0C78DD2 		.word	-762460176
 577 055c 57A13DA7 		.word	-1489133225
 578 0560 66B07531 		.word	829796454
 579 0564 11489677 		.word	2006337553
 580 0568 F8E346E9 		.word	-381230088
 581 056c ABD09E53 		.word	1402917035
 582 0570 33D8BA98 		.word	-1732585421
 583 0574 0824CB3B 		.word	1003168776
 584 0578 FC71A3F4 		.word	-190615044
ARM GAS  /tmp/ccHz27EZ.s 			page 11


 585 057c 980824CB 		.word	-886830952
 586 0580 3BFC71A3 		.word	-1552810949
 587 0584 F45568CF 		.word	-815245836
 588 0588 A9196C5D 		.word	1567365545
 589 058c 4C0492E5 		.word	-443415476
 590 0590 1DFEB851 		.word	1371078173
 591 0594 FA2AB4E7 		.word	-407622918
 592 0598 D40CB62E 		.word	783682772
 593 059c 2602C9F2 		.word	-221707738
 594 05a0 0E7FDC28 		.word	685539086
 595 05a4 7D15DA73 		.word	1943672189
 596 05a8 6A065B17 		.word	391841386
 597 05ac 51FA2AB4 		.word	-1272251823
 598 05b0 E7D40CB6 		.word	-1240673049
 599 05b4 2E2602C9 		.word	-922606034
 600 05b8 F20E7FDC 		.word	-595652878
 601 05bc 287D15DA 		.word	-636125912
 602 05c0 736A065B 		.word	1527147123
 603 05c4 17138164 		.word	1686180631
 604 05c8 79873F6E 		.word	1849657209
 605 05cc 94BE0AED 		.word	-318062956
 606 05d0 393583AD 		.word	-1383910087
 607 05d4 8B8940B2 		.word	-1304393333
 608 05d8 BCC31F37 		.word	924828604
 609 05dc 0AED3935 		.word	892988682
 610 05e0 83AD8B89 		.word	-1987334781
 611 05e4 40B2BCC3 		.word	-1011043776
 612 05e8 1F374A5F 		.word	1598699295
 613 05ec 85F69C9A 		.word	-1700989307
 614 05f0 C1D6C544 		.word	1153816257
 615 05f4 2059DEE1 		.word	-505521888
 616 05f8 8F1BA5AF 		.word	-1348134001
 617 05fc 427B4ECD 		.word	-850494654
 618 0600 60EB6222 		.word	576908128
 619 0604 902CEFF0 		.word	-252760944
 620 0608 C78DD257 		.word	1473416647
 621 060c C31F374A 		.word	1245126595
 622 0610 5F85F69C 		.word	-1661565601
 623 0614 9AC1D6C5 		.word	-975781478
 624 0618 442059DE 		.word	-564584380
 625 061c E18F1BA5 		.word	-1524920351
 626 0620 AF427B4E 		.word	1316700847
 627 0624 CD60EB62 		.word	1659592909
 628 0628 22902CEF 		.word	-282292190
 629 062c F0C78DD2 		.word	-762460176
 630 0630 57A13DA7 		.word	-1489133225
 631 0634 66B07531 		.word	829796454
 632 0638 11489677 		.word	2006337553
 633 063c BCC31F37 		.word	924828604
 634 0640 4A5F85F6 		.word	-159031478
 635 0644 9C9AC1D6 		.word	-691955044
 636 0648 C5442059 		.word	1495286981
 637 064c DEE18F1B 		.word	462414302
 638 0650 A5AF427B 		.word	2067967909
 639 0654 4ECD60EB 		.word	-345977522
 640 0658 6222902C 		.word	747643490
 641 065c EFF0C78D 		.word	-1916276497
ARM GAS  /tmp/ccHz27EZ.s 			page 12


 642 0660 D257A13D 		.word	1033983954
 643 0664 A766B075 		.word	1974494887
 644 0668 31114896 		.word	-1773661903
 645 066c 75311148 		.word	1209086325
 646 0670 9677F8E3 		.word	-470255722
 647 0674 46E9ABD0 		.word	-794039994
 648 0678 9E5333D8 		.word	-667724898
 649 067c BA980824 		.word	604543162
 650 0680 CB3BFC71 		.word	1912355787
 651 0684 A3F45568 		.word	1750463651
 652 0688 CFA9196C 		.word	1813621199
 653 068c 5D4C0492 		.word	-1845212067
 654 0690 E51DFEB8 		.word	-1191305755
 655 0694 51FA2AB4 		.word	-1272251823
 656 0698 E7D40CB6 		.word	-1240673049
 657 069c 2E2602C9 		.word	-922606034
 658 06a0 F20E7FDC 		.word	-595652878
 659 06a4 287D15DA 		.word	-636125912
 660 06a8 736A065B 		.word	1527147123
 661 06ac 17138164 		.word	1686180631
 662 06b0 79873F6E 		.word	1849657209
 663 06b4 94BE0AED 		.word	-318062956
 664 06b8 393583AD 		.word	-1383910087
 665 06bc 8B8940B2 		.word	-1304393333
 666 06c0 BCC31F37 		.word	924828604
 667 06c4 4A5F85F6 		.word	-159031478
 668 06c8 9C9AC1D6 		.word	-691955044
 669 06cc E7D40CB6 		.word	-1240673049
 670 06d0 2E2602C9 		.word	-922606034
 671 06d4 F20E7FDC 		.word	-595652878
 672 06d8 287D15DA 		.word	-636125912
 673 06dc 736A065B 		.word	1527147123
 674 06e0 17138164 		.word	1686180631
 675 06e4 79873F6E 		.word	1849657209
 676 06e8 94BE0AED 		.word	-318062956
 677 06ec 393583AD 		.word	-1383910087
 678 06f0 8B8940B2 		.word	-1304393333
 679 06f4 BCC31F37 		.word	924828604
 680 06f8 4A5F85F6 		.word	-159031478
 681 06fc 60EB6222 		.word	576908128
 682 0700 902CEFF0 		.word	-252760944
 683 0704 C78DD257 		.word	1473416647
 684 0708 A13DA766 		.word	1722236321
 685 070c B0753111 		.word	288454064
 686 0710 489677F8 		.word	-126380472
 687 0714 E346E9AB 		.word	-1410775325
 688 0718 D09E5333 		.word	861118160
 689 071c D8BA9808 		.word	144227032
 690 0720 24CB3BFC 		.word	-63190236
 691 0724 71A3F455 		.word	1442095985
 692 0728 68CFA919 		.word	430559080
 693 072c A9196C5D 		.word	1567365545
 694 0730 4C0492E5 		.word	-443415476
 695 0734 1DFEB851 		.word	1371078173
 696 0738 FA2AB4E7 		.word	-407622918
 697 073c D40CB62E 		.word	783682772
 698 0740 2602C9F2 		.word	-221707738
ARM GAS  /tmp/ccHz27EZ.s 			page 13


 699 0744 0E7FDC28 		.word	685539086
 700 0748 7D15DA73 		.word	1943672189
 701 074c 6A065B17 		.word	391841386
 702 0750 13816479 		.word	2036629779
 703 0754 873F6E94 		.word	-1804714105
 704 0758 BE0AED39 		.word	971836094
 705 075c F20E7FDC 		.word	-595652878
 706 0760 287D15DA 		.word	-636125912
 707 0764 736A065B 		.word	1527147123
 708 0768 17138164 		.word	1686180631
 709 076c 79873F6E 		.word	1849657209
 710 0770 94BE0AED 		.word	-318062956
 711 0774 393583AD 		.word	-1383910087
 712 0778 8B8940B2 		.word	-1304393333
 713 077c BCC31F37 		.word	924828604
 714 0780 4A5F85F6 		.word	-159031478
 715 0784 9C9AC1D6 		.word	-691955044
 716 0788 C5442059 		.word	1495286981
 717 078c 3BFC71A3 		.word	-1552810949
 718 0790 F45568CF 		.word	-815245836
 719 0794 A9196C5D 		.word	1567365545
 720 0798 4C0492E5 		.word	-443415476
 721 079c 1DFEB851 		.word	1371078173
 722 07a0 FA2AB4E7 		.word	-407622918
 723 07a4 D40CB62E 		.word	783682772
 724 07a8 2602C9F2 		.word	-221707738
 725 07ac 0E7FDC28 		.word	685539086
 726 07b0 7D15DA73 		.word	1943672189
 727 07b4 6A065B17 		.word	391841386
 728 07b8 13816479 		.word	2036629779
 729 07bc 442059DE 		.word	-564584380
 730 07c0 E18F1BA5 		.word	-1524920351
 731 07c4 AF427B4E 		.word	1316700847
 732 07c8 CD60EB62 		.word	1659592909
 733 07cc 22902CEF 		.word	-282292190
 734 07d0 F0C78DD2 		.word	-762460176
 735 07d4 57A13DA7 		.word	-1489133225
 736 07d8 66B07531 		.word	829796454
 737 07dc 11489677 		.word	2006337553
 738 07e0 F8E346E9 		.word	-381230088
 739 07e4 ABD09E53 		.word	1402917035
 740 07e8 33D8BA98 		.word	-1732585421
 741 07ec 8DD257A1 		.word	-1588079987
 742 07f0 3DA766B0 		.word	-1335449795
 743 07f4 75311148 		.word	1209086325
 744 07f8 9677F8E3 		.word	-470255722
 745 07fc 46E9ABD0 		.word	-794039994
 746 0800 9E5333D8 		.word	-667724898
 747 0804 BA980824 		.word	604543162
 748 0808 CB3BFC71 		.word	1912355787
 749 080c A3F45568 		.word	1750463651
 750 0810 CFA9196C 		.word	1813621199
 751 0814 5D4C0492 		.word	-1845212067
 752 0818 E51DFEB8 		.word	-1191305755
 753 081c D6C54420 		.word	541378006
 754 0820 59DEE18F 		.word	-1881022887
 755 0824 1BA5AF42 		.word	1118807323
ARM GAS  /tmp/ccHz27EZ.s 			page 14


 756 0828 7B4ECD60 		.word	1624067707
 757 082c EB622290 		.word	-1876794645
 758 0830 2CEFF0C7 		.word	-940511444
 759 0834 8DD257A1 		.word	-1588079987
 760 0838 3DA766B0 		.word	-1335449795
 761 083c 75311148 		.word	1209086325
 762 0840 9677F8E3 		.word	-470255722
 763 0844 46E9ABD0 		.word	-794039994
 764 0848 9E5333D8 		.word	-667724898
 765 084c 1F374A5F 		.word	1598699295
 766 0850 85F69C9A 		.word	-1700989307
 767 0854 C1D6C544 		.word	1153816257
 768 0858 2059DEE1 		.word	-505521888
 769 085c 8F1BA5AF 		.word	-1348134001
 770 0860 427B4ECD 		.word	-850494654
 771 0864 60EB6222 		.word	576908128
 772 0868 902CEFF0 		.word	-252760944
 773 086c C78DD257 		.word	1473416647
 774 0870 A13DA766 		.word	1722236321
 775 0874 B0753111 		.word	288454064
 776 0878 489677F8 		.word	-126380472
 777              		.comm	rr,5,4
 778              		.global	compile_info
 779              		.align	2
 782              	compile_info:
 783 087c 75626572 		.ascii	"ubertooth 2015-10-R1 (jychoi@jychoi-R540-R580-R780-"
 783      746F6F74 
 783      68203230 
 783      31352D31 
 783      302D5231 
 784 08af 53413431 		.ascii	"SA41-E452-E852) 2016. 06. 20. (\354\233\224) 15:26:"
 784      2D453435 
 784      322D4538 
 784      35322920 
 784      32303136 
 785 08d9 3338204B 		.ascii	"38 KST\000"
 785      535400
 786              		.comm	clkn,4,4
 787              		.global	hop_mode
 788              		.bss
 791              	hop_mode:
 792 0000 00       		.space	1
 793              		.global	do_hop
 796              	do_hop:
 797 0001 00       		.space	1
 798              		.global	cs_no_squelch
 801              	cs_no_squelch:
 802 0002 00       		.space	1
 803              		.global	cs_threshold_req
 804              		.data
 807              	cs_threshold_req:
 808 0004 88       		.byte	-120
 809              		.global	cs_threshold_cur
 812              	cs_threshold_cur:
 813 0005 88       		.byte	-120
 814              		.comm	cs_trigger,1,1
 815              		.comm	keepalive_trigger,1,1
ARM GAS  /tmp/ccHz27EZ.s 			page 15


 816              		.comm	cs_timestamp,4,4
 817              		.global	hop_direct_channel
 818              		.bss
 819 0003 00       		.align	1
 822              	hop_direct_channel:
 823 0004 0000     		.space	2
 824              		.global	clock_trim
 825 0006 0000     		.align	2
 828              	clock_trim:
 829 0008 00000000 		.space	4
 830              		.comm	idle_buf_clkn_high,4,4
 831              		.comm	active_buf_clkn_high,4,4
 832              		.comm	idle_buf_clk100ns,4,4
 833              		.comm	active_buf_clk100ns,4,4
 834              		.global	idle_buf_channel
 835              		.align	1
 838              	idle_buf_channel:
 839 000c 0000     		.space	2
 840              		.global	active_buf_channel
 841              		.align	1
 844              	active_buf_channel:
 845 000e 0000     		.space	2
 846              		.global	slave_mac_address
 847              		.align	2
 850              	slave_mac_address:
 851 0010 00000000 		.space	6
 851      0000
 852              		.comm	rxbuf1,50,4
 853              		.comm	rxbuf2,50,4
 854              		.global	active_rxbuf
 855              		.data
 856 0006 0000     		.align	2
 859              	active_rxbuf:
 860 0008 00000000 		.word	rxbuf1
 861              		.global	idle_rxbuf
 862              		.align	2
 865              	idle_rxbuf:
 866 000c 00000000 		.word	rxbuf2
 867              		.global	le
 868              		.align	2
 871              	le:
 872 0010 D6BE898E 		.word	-1903575338
 873 0014 7D6B     		.short	27517
 874 0016 7191     		.short	-28303
 875 0018 55555500 		.word	5592405
 876 001c AAAAAA00 		.word	11184810
 877 0020 01000000 		.word	1
 878 0024 00       		.byte	0
 879 0025 000000   		.space	3
 880 0028 00000000 		.word	0
 881 002c 00000000 		.space	32
 881      00000000 
 881      00000000 
 881      00000000 
 881      00000000 
 882 004c 00000000 		.word	0
 883 0050 00000000 		.word	0
ARM GAS  /tmp/ccHz27EZ.s 			page 16


 884              		.comm	le_promisc,264,4
 885              		.global	le_jam_count
 886              		.bss
 887 0016 0000     		.align	2
 890              	le_jam_count:
 891 0018 00000000 		.space	4
 892              		.global	data_cb
 893              		.align	2
 896              	data_cb:
 897 001c 00000000 		.space	4
 898              		.global	packet_cb
 899              		.align	2
 902              	packet_cb:
 903 0020 00000000 		.space	4
 904              		.global	rssi_iir
 905              		.align	2
 908              	rssi_iir:
 909 0024 00000000 		.space	158
 909      00000000 
 909      00000000 
 909      00000000 
 909      00000000 
 910              		.comm	unpacked,800,4
 911              		.global	mode
 914              	mode:
 915 00c2 00       		.space	1
 916              		.global	requested_mode
 919              	requested_mode:
 920 00c3 00       		.space	1
 921              		.global	jam_mode
 924              	jam_mode:
 925 00c4 00       		.space	1
 926              		.global	ego_mode
 929              	ego_mode:
 930 00c5 00       		.space	1
 931              		.global	modulation
 934              	modulation:
 935 00c6 00       		.space	1
 936              		.global	channel
 937              		.data
 938              		.align	1
 941              	channel:
 942 0054 6209     		.short	2402
 943              		.global	requested_channel
 944              		.bss
 945 00c7 00       		.align	1
 948              	requested_channel:
 949 00c8 0000     		.space	2
 950              		.global	saved_request
 951              		.align	1
 954              	saved_request:
 955 00ca 0000     		.space	2
 956              		.global	low_freq
 957              		.data
 958              		.align	1
 961              	low_freq:
 962 0056 6009     		.short	2400
ARM GAS  /tmp/ccHz27EZ.s 			page 17


 963              		.global	high_freq
 964              		.align	1
 967              	high_freq:
 968 0058 B309     		.short	2483
 969              		.global	rssi_threshold
 972              	rssi_threshold:
 973 005a E2       		.byte	-30
 974              		.comm	rx_dma_lli1,16,4
 975              		.comm	rx_dma_lli2,16,4
 976              		.comm	le_dma_lli,176,4
 977              		.comm	rx_tc,4,4
 978              		.comm	rx_err,4,4
 979              		.global	status
 980              		.bss
 983              	status:
 984 00cc 00       		.space	1
 985              		.comm	rssi_max,1,1
 986              		.comm	rssi_min,1,1
 987              		.global	rssi_count
 990              	rssi_count:
 991 00cd 00       		.space	1
 992              		.global	rssi_sum
 993 00ce 0000     		.align	2
 996              	rssi_sum:
 997 00d0 00000000 		.space	4
 998              		.comm	rssi_avg,1,1
 999              		.comm	rssi_sample,72,4
 1000              		.section	.text.rssi_reset,"ax",%progbits
 1001              		.align	2
 1002              		.thumb
 1003              		.thumb_func
 1005              	rssi_reset:
 1006              	.LFB0:
 1007              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
ARM GAS  /tmp/ccHz27EZ.s 			page 18


  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  50:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  51:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  52:bluetooth_rxtx.c **** 
  53:bluetooth_rxtx.c **** #define HOP_NONE      0
  54:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  55:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  56:bluetooth_rxtx.c **** #define HOP_BTLE      3
  57:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  58:bluetooth_rxtx.c **** 
  59:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  60:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  61:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  62:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  63:bluetooth_rxtx.c **** 
  64:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  65:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  66:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  67:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  68:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  69:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  70:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  71:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  72:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  73:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  74:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  75:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  76:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  77:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  78:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  79:bluetooth_rxtx.c **** 
  80:bluetooth_rxtx.c **** /* DMA buffers */
ARM GAS  /tmp/ccHz27EZ.s 			page 19


  81:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  82:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  83:bluetooth_rxtx.c **** 
  84:bluetooth_rxtx.c **** /*
  85:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  86:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  87:bluetooth_rxtx.c ****  */
  88:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  89:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  90:bluetooth_rxtx.c **** 
  91:bluetooth_rxtx.c **** le_state_t le = {
  92:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  93:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  94:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  95:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  96:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
  97:bluetooth_rxtx.c **** 	.crc_verify = 1,
  98:bluetooth_rxtx.c **** 
  99:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 100:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 101:bluetooth_rxtx.c **** 	.target_set = 0,
 102:bluetooth_rxtx.c **** 	.last_packet = 0,
 103:bluetooth_rxtx.c **** };
 104:bluetooth_rxtx.c **** 
 105:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 106:bluetooth_rxtx.c **** 	u32 aa;
 107:bluetooth_rxtx.c **** 	int count;
 108:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 109:bluetooth_rxtx.c **** 
 110:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 111:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 112:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 113:bluetooth_rxtx.c **** 
 114:bluetooth_rxtx.c **** 	// recovering hop interval
 115:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 116:bluetooth_rxtx.c **** 	int consec_intervals;
 117:bluetooth_rxtx.c **** } le_promisc_state_t;
 118:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 119:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 120:bluetooth_rxtx.c **** 
 121:bluetooth_rxtx.c **** /* LE jamming */
 122:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 123:bluetooth_rxtx.c **** int le_jam_count = 0;
 124:bluetooth_rxtx.c **** 
 125:bluetooth_rxtx.c **** /* set LE access address */
 126:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 127:bluetooth_rxtx.c **** 
 128:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 129:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 132:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 133:bluetooth_rxtx.c **** 
 134:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 135:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 136:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 137:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 20


 138:bluetooth_rxtx.c **** /*
 139:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 140:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 141:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 142:bluetooth_rxtx.c **** */
 143:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 144:bluetooth_rxtx.c **** 
 145:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 146:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 147:bluetooth_rxtx.c **** 
 148:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 149:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 150:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 151:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 152:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 153:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 154:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 155:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 156:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 157:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 158:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 159:bluetooth_rxtx.c **** 
 160:bluetooth_rxtx.c **** /* DMA linked list items */
 161:bluetooth_rxtx.c **** typedef struct {
 162:bluetooth_rxtx.c **** 	u32 src;
 163:bluetooth_rxtx.c **** 	u32 dest;
 164:bluetooth_rxtx.c **** 	u32 next_lli;
 165:bluetooth_rxtx.c **** 	u32 control;
 166:bluetooth_rxtx.c **** } dma_lli;
 167:bluetooth_rxtx.c **** 
 168:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 169:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 170:bluetooth_rxtx.c **** 
 171:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 174:bluetooth_rxtx.c **** volatile u32 rx_tc;
 175:bluetooth_rxtx.c **** volatile u32 rx_err;
 176:bluetooth_rxtx.c **** 
 177:bluetooth_rxtx.c **** /* status information byte */
 178:bluetooth_rxtx.c **** volatile u8 status = 0;
 179:bluetooth_rxtx.c **** 
 180:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 181:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 182:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 183:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 184:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 185:bluetooth_rxtx.c **** 
 186:bluetooth_rxtx.c **** /*
 187:bluetooth_rxtx.c ****  * RSSI
 188:bluetooth_rxtx.c ****  */
 189:bluetooth_rxtx.c **** int8_t rssi_max;
 190:bluetooth_rxtx.c **** int8_t rssi_min;
 191:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 192:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 193:bluetooth_rxtx.c **** int8_t rssi_avg;
 194:bluetooth_rxtx.c **** rssi_s rssi_sample[9];
ARM GAS  /tmp/ccHz27EZ.s 			page 21


 195:bluetooth_rxtx.c **** 
 196:bluetooth_rxtx.c **** static void rssi_reset(void)
 197:bluetooth_rxtx.c **** {
 1008              		.loc 1 197 0
 1009              		.cfi_startproc
 1010              		@ args = 0, pretend = 0, frame = 0
 1011              		@ frame_needed = 1, uses_anonymous_args = 0
 1012 0000 80B5     		push	{r7, lr}
 1013              		.cfi_def_cfa_offset 8
 1014              		.cfi_offset 7, -8
 1015              		.cfi_offset 14, -4
 1016 0002 00AF     		add	r7, sp, #0
 1017              		.cfi_def_cfa_register 7
 198:bluetooth_rxtx.c **** 	rssi_count = 0;
 1018              		.loc 1 198 0
 1019 0004 0A4B     		ldr	r3, .L2
 1020 0006 0022     		movs	r2, #0
 1021 0008 1A70     		strb	r2, [r3]
 199:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1022              		.loc 1 199 0
 1023 000a 0A4B     		ldr	r3, .L2+4
 1024 000c 0022     		movs	r2, #0
 1025 000e 1A60     		str	r2, [r3]
 200:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1026              		.loc 1 200 0
 1027 0010 094B     		ldr	r3, .L2+8
 1028 0012 8022     		movs	r2, #128
 1029 0014 1A70     		strb	r2, [r3]
 201:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1030              		.loc 1 201 0
 1031 0016 094B     		ldr	r3, .L2+12
 1032 0018 7F22     		movs	r2, #127
 1033 001a 1A70     		strb	r2, [r3]
 202:bluetooth_rxtx.c **** 	rssi_avg = 0;
 1034              		.loc 1 202 0
 1035 001c 084B     		ldr	r3, .L2+16
 1036 001e 0022     		movs	r2, #0
 1037 0020 1A70     		strb	r2, [r3]
 203:bluetooth_rxtx.c **** 	memset(rssi_sample, 0, sizeof(rssi_sample)*9);
 1038              		.loc 1 203 0
 1039 0022 0848     		ldr	r0, .L2+20
 1040 0024 0021     		movs	r1, #0
 1041 0026 4FF42272 		mov	r2, #648
 1042 002a FFF7FEFF 		bl	memset
 204:bluetooth_rxtx.c **** }
 1043              		.loc 1 204 0
 1044 002e 80BD     		pop	{r7, pc}
 1045              	.L3:
 1046              		.align	2
 1047              	.L2:
 1048 0030 00000000 		.word	rssi_count
 1049 0034 00000000 		.word	rssi_sum
 1050 0038 00000000 		.word	rssi_max
 1051 003c 00000000 		.word	rssi_min
 1052 0040 00000000 		.word	rssi_avg
 1053 0044 00000000 		.word	rssi_sample
 1054              		.cfi_endproc
ARM GAS  /tmp/ccHz27EZ.s 			page 22


 1055              	.LFE0:
 1057              		.section	.text.rssi_add,"ax",%progbits
 1058              		.align	2
 1059              		.thumb
 1060              		.thumb_func
 1062              	rssi_add:
 1063              	.LFB1:
 205:bluetooth_rxtx.c **** 
 206:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 207:bluetooth_rxtx.c **** {
 1064              		.loc 1 207 0
 1065              		.cfi_startproc
 1066              		@ args = 0, pretend = 0, frame = 8
 1067              		@ frame_needed = 1, uses_anonymous_args = 0
 1068              		@ link register save eliminated.
 1069 0000 80B4     		push	{r7}
 1070              		.cfi_def_cfa_offset 4
 1071              		.cfi_offset 7, -4
 1072 0002 83B0     		sub	sp, sp, #12
 1073              		.cfi_def_cfa_offset 16
 1074 0004 00AF     		add	r7, sp, #0
 1075              		.cfi_def_cfa_register 7
 1076 0006 0346     		mov	r3, r0
 1077 0008 FB71     		strb	r3, [r7, #7]
 208:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1078              		.loc 1 208 0
 1079 000a 144B     		ldr	r3, .L5
 1080 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1081 000e 5AB2     		sxtb	r2, r3
 1082 0010 97F90730 		ldrsb	r3, [r7, #7]
 1083 0014 9342     		cmp	r3, r2
 1084 0016 B8BF     		it	lt
 1085 0018 1346     		movlt	r3, r2
 1086 001a DAB2     		uxtb	r2, r3
 1087 001c 0F4B     		ldr	r3, .L5
 1088 001e 1A70     		strb	r2, [r3]
 209:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1089              		.loc 1 209 0
 1090 0020 0F4B     		ldr	r3, .L5+4
 1091 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1092 0024 5AB2     		sxtb	r2, r3
 1093 0026 97F90730 		ldrsb	r3, [r7, #7]
 1094 002a 9342     		cmp	r3, r2
 1095 002c A8BF     		it	ge
 1096 002e 1346     		movge	r3, r2
 1097 0030 DAB2     		uxtb	r2, r3
 1098 0032 0B4B     		ldr	r3, .L5+4
 1099 0034 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1100              		.loc 1 210 0
 1101 0036 97F90730 		ldrsb	r3, [r7, #7]
 1102 003a 1A02     		lsls	r2, r3, #8
 1103 003c 094B     		ldr	r3, .L5+8
 1104 003e 1B68     		ldr	r3, [r3]
 1105 0040 1344     		add	r3, r3, r2
 1106 0042 084A     		ldr	r2, .L5+8
 1107 0044 1360     		str	r3, [r2]
ARM GAS  /tmp/ccHz27EZ.s 			page 23


 211:bluetooth_rxtx.c **** 	rssi_count += 1;
 1108              		.loc 1 211 0
 1109 0046 084B     		ldr	r3, .L5+12
 1110 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1111 004a 0133     		adds	r3, r3, #1
 1112 004c DAB2     		uxtb	r2, r3
 1113 004e 064B     		ldr	r3, .L5+12
 1114 0050 1A70     		strb	r2, [r3]
 212:bluetooth_rxtx.c **** }
 1115              		.loc 1 212 0
 1116 0052 0C37     		adds	r7, r7, #12
 1117              		.cfi_def_cfa_offset 4
 1118 0054 BD46     		mov	sp, r7
 1119              		.cfi_def_cfa_register 13
 1120              		@ sp needed
 1121 0056 5DF8047B 		ldr	r7, [sp], #4
 1122              		.cfi_restore 7
 1123              		.cfi_def_cfa_offset 0
 1124 005a 7047     		bx	lr
 1125              	.L6:
 1126              		.align	2
 1127              	.L5:
 1128 005c 00000000 		.word	rssi_max
 1129 0060 00000000 		.word	rssi_min
 1130 0064 00000000 		.word	rssi_sum
 1131 0068 00000000 		.word	rssi_count
 1132              		.cfi_endproc
 1133              	.LFE1:
 1135              		.section	.text.rssi_add_pkt,"ax",%progbits
 1136              		.align	2
 1137              		.thumb
 1138              		.thumb_func
 1140              	rssi_add_pkt:
 1141              	.LFB2:
 213:bluetooth_rxtx.c **** 
 214:bluetooth_rxtx.c **** //gjlee
 215:bluetooth_rxtx.c **** static void rssi_add_pkt(int8_t v)
 216:bluetooth_rxtx.c **** {
 1142              		.loc 1 216 0
 1143              		.cfi_startproc
 1144              		@ args = 0, pretend = 0, frame = 8
 1145              		@ frame_needed = 1, uses_anonymous_args = 0
 1146              		@ link register save eliminated.
 1147 0000 80B4     		push	{r7}
 1148              		.cfi_def_cfa_offset 4
 1149              		.cfi_offset 7, -4
 1150 0002 83B0     		sub	sp, sp, #12
 1151              		.cfi_def_cfa_offset 16
 1152 0004 00AF     		add	r7, sp, #0
 1153              		.cfi_def_cfa_register 7
 1154 0006 0346     		mov	r3, r0
 1155 0008 FB71     		strb	r3, [r7, #7]
 217:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1156              		.loc 1 217 0
 1157 000a 294B     		ldr	r3, .L9
 1158 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1159 000e 5AB2     		sxtb	r2, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 24


 1160 0010 97F90730 		ldrsb	r3, [r7, #7]
 1161 0014 9342     		cmp	r3, r2
 1162 0016 B8BF     		it	lt
 1163 0018 1346     		movlt	r3, r2
 1164 001a DAB2     		uxtb	r2, r3
 1165 001c 244B     		ldr	r3, .L9
 1166 001e 1A70     		strb	r2, [r3]
 218:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1167              		.loc 1 218 0
 1168 0020 244B     		ldr	r3, .L9+4
 1169 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1170 0024 5AB2     		sxtb	r2, r3
 1171 0026 97F90730 		ldrsb	r3, [r7, #7]
 1172 002a 9342     		cmp	r3, r2
 1173 002c A8BF     		it	ge
 1174 002e 1346     		movge	r3, r2
 1175 0030 DAB2     		uxtb	r2, r3
 1176 0032 204B     		ldr	r3, .L9+4
 1177 0034 1A70     		strb	r2, [r3]
 219:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1178              		.loc 1 219 0
 1179 0036 97F90730 		ldrsb	r3, [r7, #7]
 1180 003a 1A02     		lsls	r2, r3, #8
 1181 003c 1E4B     		ldr	r3, .L9+8
 1182 003e 1B68     		ldr	r3, [r3]
 1183 0040 1344     		add	r3, r3, r2
 1184 0042 1D4A     		ldr	r2, .L9+8
 1185 0044 1360     		str	r3, [r2]
 220:bluetooth_rxtx.c **** 	if(rssi_count < 9){
 1186              		.loc 1 220 0
 1187 0046 1D4B     		ldr	r3, .L9+12
 1188 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1189 004a 082B     		cmp	r3, #8
 1190 004c 24D8     		bhi	.L8
 221:bluetooth_rxtx.c **** 		rssi_sample[rssi_count].rssi = v;
 1191              		.loc 1 221 0
 1192 004e 1B4B     		ldr	r3, .L9+12
 1193 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1194 0052 1A46     		mov	r2, r3
 1195 0054 F979     		ldrb	r1, [r7, #7]	@ zero_extendqisi2
 1196 0056 1A4B     		ldr	r3, .L9+16
 1197 0058 03F83210 		strb	r1, [r3, r2, lsl #3]
 222:bluetooth_rxtx.c **** 		rssi_sample[rssi_count].clkn_high = (clkn >> 20) & 0xff;
 1198              		.loc 1 222 0
 1199 005c 174B     		ldr	r3, .L9+12
 1200 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1201 0060 1846     		mov	r0, r3
 1202 0062 184B     		ldr	r3, .L9+20
 1203 0064 1B68     		ldr	r3, [r3]
 1204 0066 1B0D     		lsrs	r3, r3, #20
 1205 0068 D9B2     		uxtb	r1, r3
 1206 006a 154A     		ldr	r2, .L9+16
 1207 006c C300     		lsls	r3, r0, #3
 1208 006e 1344     		add	r3, r3, r2
 1209 0070 0A46     		mov	r2, r1
 1210 0072 5A70     		strb	r2, [r3, #1]
 223:bluetooth_rxtx.c **** 		rssi_sample[rssi_count].clk100ns = CLK100NS;
ARM GAS  /tmp/ccHz27EZ.s 			page 25


 1211              		.loc 1 223 0
 1212 0074 114B     		ldr	r3, .L9+12
 1213 0076 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1214 0078 1846     		mov	r0, r3
 1215 007a 124B     		ldr	r3, .L9+20
 1216 007c 1B68     		ldr	r3, [r3]
 1217 007e C3F31303 		ubfx	r3, r3, #0, #20
 1218 0082 40F63542 		movw	r2, #3125
 1219 0086 02FB03F2 		mul	r2, r2, r3
 1220 008a 0F4B     		ldr	r3, .L9+24
 1221 008c 1B68     		ldr	r3, [r3]
 1222 008e 1A44     		add	r2, r2, r3
 1223 0090 0B49     		ldr	r1, .L9+16
 1224 0092 C300     		lsls	r3, r0, #3
 1225 0094 0B44     		add	r3, r3, r1
 1226 0096 5A60     		str	r2, [r3, #4]
 1227              	.L8:
 224:bluetooth_rxtx.c **** 	}
 225:bluetooth_rxtx.c **** 	rssi_count += 1;
 1228              		.loc 1 225 0
 1229 0098 084B     		ldr	r3, .L9+12
 1230 009a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1231 009c 0133     		adds	r3, r3, #1
 1232 009e DAB2     		uxtb	r2, r3
 1233 00a0 064B     		ldr	r3, .L9+12
 1234 00a2 1A70     		strb	r2, [r3]
 226:bluetooth_rxtx.c **** }
 1235              		.loc 1 226 0
 1236 00a4 0C37     		adds	r7, r7, #12
 1237              		.cfi_def_cfa_offset 4
 1238 00a6 BD46     		mov	sp, r7
 1239              		.cfi_def_cfa_register 13
 1240              		@ sp needed
 1241 00a8 5DF8047B 		ldr	r7, [sp], #4
 1242              		.cfi_restore 7
 1243              		.cfi_def_cfa_offset 0
 1244 00ac 7047     		bx	lr
 1245              	.L10:
 1246 00ae 00BF     		.align	2
 1247              	.L9:
 1248 00b0 00000000 		.word	rssi_max
 1249 00b4 00000000 		.word	rssi_min
 1250 00b8 00000000 		.word	rssi_sum
 1251 00bc 00000000 		.word	rssi_count
 1252 00c0 00000000 		.word	rssi_sample
 1253 00c4 00000000 		.word	clkn
 1254 00c8 08400040 		.word	1073758216
 1255              		.cfi_endproc
 1256              	.LFE2:
 1258              		.section	.text.rssi_update_pkt,"ax",%progbits
 1259              		.align	2
 1260              		.thumb
 1261              		.thumb_func
 1263              	rssi_update_pkt:
 1264              	.LFB3:
 227:bluetooth_rxtx.c **** 
 228:bluetooth_rxtx.c **** //gjlee
ARM GAS  /tmp/ccHz27EZ.s 			page 26


 229:bluetooth_rxtx.c **** static void rssi_update_pkt(void)
 230:bluetooth_rxtx.c **** {
 1265              		.loc 1 230 0
 1266              		.cfi_startproc
 1267              		@ args = 0, pretend = 0, frame = 8
 1268              		@ frame_needed = 1, uses_anonymous_args = 0
 1269              		@ link register save eliminated.
 1270 0000 80B4     		push	{r7}
 1271              		.cfi_def_cfa_offset 4
 1272              		.cfi_offset 7, -4
 1273 0002 83B0     		sub	sp, sp, #12
 1274              		.cfi_def_cfa_offset 16
 1275 0004 00AF     		add	r7, sp, #0
 1276              		.cfi_def_cfa_register 7
 231:bluetooth_rxtx.c **** 	int i, j;
 232:bluetooth_rxtx.c **** 	int32_t avg;
 233:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1277              		.loc 1 233 0
 1278 0006 0D4B     		ldr	r3, .L14
 1279 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1280 000a 002B     		cmp	r3, #0
 1281 000c 07D0     		beq	.L12
 234:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1282              		.loc 1 234 0
 1283 000e 0C4B     		ldr	r3, .L14+4
 1284 0010 1B68     		ldr	r3, [r3]
 1285 0012 8033     		adds	r3, r3, #128
 1286 0014 094A     		ldr	r2, .L14
 1287 0016 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1288 0018 93FBF2F3 		sdiv	r3, r3, r2
 1289 001c 7B60     		str	r3, [r7, #4]
 1290              	.L12:
 235:bluetooth_rxtx.c **** 	rssi_avg = (int8_t)((avg + 128) / 256);
 1291              		.loc 1 235 0
 1292 001e 7B68     		ldr	r3, [r7, #4]
 1293 0020 8033     		adds	r3, r3, #128
 1294 0022 002B     		cmp	r3, #0
 1295 0024 00DA     		bge	.L13
 1296 0026 FF33     		adds	r3, r3, #255
 1297              	.L13:
 1298 0028 1B12     		asrs	r3, r3, #8
 1299 002a DAB2     		uxtb	r2, r3
 1300 002c 054B     		ldr	r3, .L14+8
 1301 002e 1A70     		strb	r2, [r3]
 236:bluetooth_rxtx.c **** }
 1302              		.loc 1 236 0
 1303 0030 0C37     		adds	r7, r7, #12
 1304              		.cfi_def_cfa_offset 4
 1305 0032 BD46     		mov	sp, r7
 1306              		.cfi_def_cfa_register 13
 1307              		@ sp needed
 1308 0034 5DF8047B 		ldr	r7, [sp], #4
 1309              		.cfi_restore 7
 1310              		.cfi_def_cfa_offset 0
 1311 0038 7047     		bx	lr
 1312              	.L15:
 1313 003a 00BF     		.align	2
ARM GAS  /tmp/ccHz27EZ.s 			page 27


 1314              	.L14:
 1315 003c 00000000 		.word	rssi_count
 1316 0040 00000000 		.word	rssi_sum
 1317 0044 00000000 		.word	rssi_avg
 1318              		.cfi_endproc
 1319              	.LFE3:
 1321              		.section	.text.rssi_iir_update,"ax",%progbits
 1322              		.align	2
 1323              		.thumb
 1324              		.thumb_func
 1326              	rssi_iir_update:
 1327              	.LFB4:
 237:bluetooth_rxtx.c **** 
 238:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 239:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 240:bluetooth_rxtx.c **** {
 1328              		.loc 1 240 0
 1329              		.cfi_startproc
 1330              		@ args = 0, pretend = 0, frame = 16
 1331              		@ frame_needed = 1, uses_anonymous_args = 0
 1332              		@ link register save eliminated.
 1333 0000 80B4     		push	{r7}
 1334              		.cfi_def_cfa_offset 4
 1335              		.cfi_offset 7, -4
 1336 0002 85B0     		sub	sp, sp, #20
 1337              		.cfi_def_cfa_offset 24
 1338 0004 00AF     		add	r7, sp, #0
 1339              		.cfi_def_cfa_register 7
 241:bluetooth_rxtx.c **** 	int i;
 242:bluetooth_rxtx.c **** 	int32_t avg;
 243:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 244:bluetooth_rxtx.c **** 
 245:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 246:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 247:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1340              		.loc 1 247 0
 1341 0006 1F4B     		ldr	r3, .L22
 1342 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1343 000a 002B     		cmp	r3, #0
 1344 000c 06D0     		beq	.L17
 248:bluetooth_rxtx.c **** 		i = channel - 2402;
 1345              		.loc 1 248 0
 1346 000e 1E4B     		ldr	r3, .L22+4
 1347 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1348 0012 9BB2     		uxth	r3, r3
 1349 0014 A3F66213 		subw	r3, r3, #2402
 1350 0018 FB60     		str	r3, [r7, #12]
 1351 001a 01E0     		b	.L18
 1352              	.L17:
 249:bluetooth_rxtx.c **** 	else
 250:bluetooth_rxtx.c **** 		i = 0;
 1353              		.loc 1 250 0
 1354 001c 0023     		movs	r3, #0
 1355 001e FB60     		str	r3, [r7, #12]
 1356              	.L18:
 251:bluetooth_rxtx.c **** 
 252:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
ARM GAS  /tmp/ccHz27EZ.s 			page 28


 253:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1357              		.loc 1 253 0
 1358 0020 1A4B     		ldr	r3, .L22+8
 1359 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1360 0024 002B     		cmp	r3, #0
 1361 0026 08D0     		beq	.L19
 254:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1362              		.loc 1 254 0
 1363 0028 194B     		ldr	r3, .L22+12
 1364 002a 1B68     		ldr	r3, [r3]
 1365 002c 8033     		adds	r3, r3, #128
 1366 002e 174A     		ldr	r2, .L22+8
 1367 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1368 0032 93FBF2F3 		sdiv	r3, r3, r2
 1369 0036 BB60     		str	r3, [r7, #8]
 1370 0038 01E0     		b	.L20
 1371              	.L19:
 255:bluetooth_rxtx.c **** 	else
 256:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1372              		.loc 1 256 0
 1373 003a 0023     		movs	r3, #0
 1374 003c BB60     		str	r3, [r7, #8]
 1375              	.L20:
 257:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1376              		.loc 1 257 0
 1377 003e 154A     		ldr	r2, .L22+16
 1378 0040 FB68     		ldr	r3, [r7, #12]
 1379 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1380 0046 1AB2     		sxth	r2, r3
 1381 0048 1346     		mov	r3, r2
 1382 004a 9B01     		lsls	r3, r3, #6
 1383 004c 9B1A     		subs	r3, r3, r2
 1384 004e 9B00     		lsls	r3, r3, #2
 1385 0050 1344     		add	r3, r3, r2
 1386 0052 7B60     		str	r3, [r7, #4]
 258:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1387              		.loc 1 258 0
 1388 0054 BA68     		ldr	r2, [r7, #8]
 1389 0056 1346     		mov	r3, r2
 1390 0058 5B00     		lsls	r3, r3, #1
 1391 005a 1344     		add	r3, r3, r2
 1392 005c 7A68     		ldr	r2, [r7, #4]
 1393 005e 1344     		add	r3, r3, r2
 1394 0060 7B60     		str	r3, [r7, #4]
 259:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1395              		.loc 1 259 0
 1396 0062 7B68     		ldr	r3, [r7, #4]
 1397 0064 8033     		adds	r3, r3, #128
 1398 0066 002B     		cmp	r3, #0
 1399 0068 00DA     		bge	.L21
 1400 006a FF33     		adds	r3, r3, #255
 1401              	.L21:
 1402 006c 1B12     		asrs	r3, r3, #8
 1403 006e 99B2     		uxth	r1, r3
 1404 0070 084A     		ldr	r2, .L22+16
 1405 0072 FB68     		ldr	r3, [r7, #12]
 1406 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
ARM GAS  /tmp/ccHz27EZ.s 			page 29


 260:bluetooth_rxtx.c **** }
 1407              		.loc 1 260 0
 1408 0078 1437     		adds	r7, r7, #20
 1409              		.cfi_def_cfa_offset 4
 1410 007a BD46     		mov	sp, r7
 1411              		.cfi_def_cfa_register 13
 1412              		@ sp needed
 1413 007c 5DF8047B 		ldr	r7, [sp], #4
 1414              		.cfi_restore 7
 1415              		.cfi_def_cfa_offset 0
 1416 0080 7047     		bx	lr
 1417              	.L23:
 1418 0082 00BF     		.align	2
 1419              	.L22:
 1420 0084 00000000 		.word	hop_mode
 1421 0088 00000000 		.word	channel
 1422 008c 00000000 		.word	rssi_count
 1423 0090 00000000 		.word	rssi_sum
 1424 0094 00000000 		.word	rssi_iir
 1425              		.cfi_endproc
 1426              	.LFE4:
 1428              		.section	.text.cs_threshold_set,"ax",%progbits
 1429              		.align	2
 1430              		.thumb
 1431              		.thumb_func
 1433              	cs_threshold_set:
 1434              	.LFB5:
 261:bluetooth_rxtx.c **** 
 262:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 263:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 264:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 265:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 266:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 267:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 268:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 269:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 270:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 271:bluetooth_rxtx.c **** {
 1435              		.loc 1 271 0
 1436              		.cfi_startproc
 1437              		@ args = 0, pretend = 0, frame = 8
 1438              		@ frame_needed = 1, uses_anonymous_args = 0
 1439 0000 80B5     		push	{r7, lr}
 1440              		.cfi_def_cfa_offset 8
 1441              		.cfi_offset 7, -8
 1442              		.cfi_offset 14, -4
 1443 0002 82B0     		sub	sp, sp, #8
 1444              		.cfi_def_cfa_offset 16
 1445 0004 00AF     		add	r7, sp, #0
 1446              		.cfi_def_cfa_register 7
 1447 0006 0346     		mov	r3, r0
 1448 0008 0A46     		mov	r2, r1
 1449 000a FB71     		strb	r3, [r7, #7]
 1450 000c 1346     		mov	r3, r2
 1451 000e BB71     		strb	r3, [r7, #6]
 272:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1452              		.loc 1 272 0
ARM GAS  /tmp/ccHz27EZ.s 			page 30


 1453 0010 97F90730 		ldrsb	r3, [r7, #7]
 1454 0014 13F1140F 		cmn	r3, #20
 1455 0018 0DD0     		beq	.L25
 1456              		.loc 1 272 0 is_stmt 0 discriminator 1
 1457 001a 97F90730 		ldrsb	r3, [r7, #7]
 1458 001e 13F1130F 		cmn	r3, #19
 1459 0022 08DA     		bge	.L25
 1460              		.loc 1 272 0 discriminator 3
 1461 0024 97F90730 		ldrsb	r3, [r7, #7]
 1462 0028 6FF07702 		mvn	r2, #119
 1463 002c 9342     		cmp	r3, r2
 1464 002e B8BF     		it	lt
 1465 0030 1346     		movlt	r3, r2
 1466 0032 DBB2     		uxtb	r3, r3
 1467 0034 00E0     		b	.L26
 1468              	.L25:
 1469              		.loc 1 272 0 discriminator 4
 1470 0036 EC23     		movs	r3, #236
 1471              	.L26:
 1472              		.loc 1 272 0 discriminator 6
 1473 0038 FB71     		strb	r3, [r7, #7]
 273:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1474              		.loc 1 273 0 is_stmt 1 discriminator 6
 1475 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1476 003c 3833     		adds	r3, r3, #56
 1477 003e DBB2     		uxtb	r3, r3
 1478 0040 9BB2     		uxth	r3, r3
 1479 0042 03F0FC03 		and	r3, r3, #252
 1480 0046 9AB2     		uxth	r2, r3
 1481 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1482 004a 9BB2     		uxth	r3, r3
 1483 004c 03F00303 		and	r3, r3, #3
 1484 0050 9BB2     		uxth	r3, r3
 1485 0052 1343     		orrs	r3, r3, r2
 1486 0054 9BB2     		uxth	r3, r3
 1487 0056 9BB2     		uxth	r3, r3
 1488 0058 0620     		movs	r0, #6
 1489 005a 1946     		mov	r1, r3
 1490 005c FFF7FEFF 		bl	cc2400_set
 274:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1491              		.loc 1 274 0 discriminator 6
 1492 0060 084A     		ldr	r2, .L27
 1493 0062 FB79     		ldrb	r3, [r7, #7]
 1494 0064 1370     		strb	r3, [r2]
 275:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1495              		.loc 1 275 0 discriminator 6
 1496 0066 97F90730 		ldrsb	r3, [r7, #7]
 1497 006a 13F1770F 		cmn	r3, #119
 1498 006e B4BF     		ite	lt
 1499 0070 0123     		movlt	r3, #1
 1500 0072 0023     		movge	r3, #0
 1501 0074 DBB2     		uxtb	r3, r3
 1502 0076 1A46     		mov	r2, r3
 1503 0078 034B     		ldr	r3, .L27+4
 1504 007a 1A70     		strb	r2, [r3]
 276:bluetooth_rxtx.c **** }
 1505              		.loc 1 276 0 discriminator 6
ARM GAS  /tmp/ccHz27EZ.s 			page 31


 1506 007c 0837     		adds	r7, r7, #8
 1507              		.cfi_def_cfa_offset 8
 1508 007e BD46     		mov	sp, r7
 1509              		.cfi_def_cfa_register 13
 1510              		@ sp needed
 1511 0080 80BD     		pop	{r7, pc}
 1512              	.L28:
 1513 0082 00BF     		.align	2
 1514              	.L27:
 1515 0084 00000000 		.word	cs_threshold_cur
 1516 0088 00000000 		.word	cs_no_squelch
 1517              		.cfi_endproc
 1518              	.LFE5:
 1520              		.section	.text.enqueue_rssi,"ax",%progbits
 1521              		.align	2
 1522              		.thumb
 1523              		.thumb_func
 1525              	enqueue_rssi:
 1526              	.LFB6:
 277:bluetooth_rxtx.c **** 
 278:bluetooth_rxtx.c **** static int enqueue_rssi()
 279:bluetooth_rxtx.c **** {
 1527              		.loc 1 279 0
 1528              		.cfi_startproc
 1529              		@ args = 0, pretend = 0, frame = 8
 1530              		@ frame_needed = 1, uses_anonymous_args = 0
 1531 0000 80B5     		push	{r7, lr}
 1532              		.cfi_def_cfa_offset 8
 1533              		.cfi_offset 7, -8
 1534              		.cfi_offset 14, -4
 1535 0002 82B0     		sub	sp, sp, #8
 1536              		.cfi_def_cfa_offset 16
 1537 0004 00AF     		add	r7, sp, #0
 1538              		.cfi_def_cfa_register 7
 280:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1539              		.loc 1 280 0
 1540 0006 FFF7FEFF 		bl	usb_enqueue
 1541 000a 7860     		str	r0, [r7, #4]
 281:bluetooth_rxtx.c **** 
 282:bluetooth_rxtx.c **** 	/* fail if queue is full */
 283:bluetooth_rxtx.c **** 	if (f == NULL) {
 1542              		.loc 1 283 0
 1543 000c 7B68     		ldr	r3, [r7, #4]
 1544 000e 002B     		cmp	r3, #0
 1545 0010 09D1     		bne	.L30
 284:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1546              		.loc 1 284 0
 1547 0012 404B     		ldr	r3, .L32
 1548 0014 1B78     		ldrb	r3, [r3]
 1549 0016 DBB2     		uxtb	r3, r3
 1550 0018 43F00403 		orr	r3, r3, #4
 1551 001c DAB2     		uxtb	r2, r3
 1552 001e 3D4B     		ldr	r3, .L32
 1553 0020 1A70     		strb	r2, [r3]
 285:bluetooth_rxtx.c **** 		return 0;
 1554              		.loc 1 285 0
 1555 0022 0023     		movs	r3, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 32


 1556 0024 72E0     		b	.L31
 1557              	.L30:
 286:bluetooth_rxtx.c **** 	}
 287:bluetooth_rxtx.c **** 
 288:bluetooth_rxtx.c **** 	usb_pkt_rssi *fr = (usb_pkt_rssi *) f;
 1558              		.loc 1 288 0
 1559 0026 7B68     		ldr	r3, [r7, #4]
 1560 0028 3B60     		str	r3, [r7]
 289:bluetooth_rxtx.c **** 
 290:bluetooth_rxtx.c **** 	fr->pkt_type = RSSI_PACKET;
 1561              		.loc 1 290 0
 1562 002a 3B68     		ldr	r3, [r7]
 1563 002c 0722     		movs	r2, #7
 1564 002e 1A70     		strb	r2, [r3]
 291:bluetooth_rxtx.c **** 	fr->channel = channel - 2402;
 1565              		.loc 1 291 0
 1566 0030 394B     		ldr	r3, .L32+4
 1567 0032 1B88     		ldrh	r3, [r3]	@ movhi
 1568 0034 9BB2     		uxth	r3, r3
 1569 0036 DBB2     		uxtb	r3, r3
 1570 0038 623B     		subs	r3, r3, #98
 1571 003a DAB2     		uxtb	r2, r3
 1572 003c 3B68     		ldr	r3, [r7]
 1573 003e 9A70     		strb	r2, [r3, #2]
 292:bluetooth_rxtx.c **** 	fr->rssi_max = rssi_max;
 1574              		.loc 1 292 0
 1575 0040 364B     		ldr	r3, .L32+8
 1576 0042 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1577 0044 DAB2     		uxtb	r2, r3
 1578 0046 3B68     		ldr	r3, [r7]
 1579 0048 DA70     		strb	r2, [r3, #3]
 293:bluetooth_rxtx.c **** 	fr->rssi_min = rssi_min;
 1580              		.loc 1 293 0
 1581 004a 354B     		ldr	r3, .L32+12
 1582 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1583 004e DAB2     		uxtb	r2, r3
 1584 0050 3B68     		ldr	r3, [r7]
 1585 0052 1A71     		strb	r2, [r3, #4]
 294:bluetooth_rxtx.c **** 	fr->rssi_avg = rssi_avg;
 1586              		.loc 1 294 0
 1587 0054 334B     		ldr	r3, .L32+16
 1588 0056 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1589 0058 DAB2     		uxtb	r2, r3
 1590 005a 3B68     		ldr	r3, [r7]
 1591 005c 5A71     		strb	r2, [r3, #5]
 295:bluetooth_rxtx.c **** 	fr->rssi_count = rssi_count;
 1592              		.loc 1 295 0
 1593 005e 324B     		ldr	r3, .L32+20
 1594 0060 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1595 0062 3B68     		ldr	r3, [r7]
 1596 0064 9A71     		strb	r2, [r3, #6]
 296:bluetooth_rxtx.c **** 	
 297:bluetooth_rxtx.c **** 	USRLED_SET;
 1597              		.loc 1 297 0
 1598 0066 314B     		ldr	r3, .L32+24
 1599 0068 0222     		movs	r2, #2
 1600 006a 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 33


 298:bluetooth_rxtx.c **** 	
 299:bluetooth_rxtx.c **** 	fr->rssi_sample[0] = rssi_sample[0];
 1601              		.loc 1 299 0
 1602 006c 3B68     		ldr	r3, [r7]
 1603 006e 304A     		ldr	r2, .L32+28
 1604 0070 0833     		adds	r3, r3, #8
 1605 0072 92E80300 		ldmia	r2, {r0, r1}
 1606 0076 83E80300 		stmia	r3, {r0, r1}
 300:bluetooth_rxtx.c **** 	fr->rssi_sample[1] = rssi_sample[1];
 1607              		.loc 1 300 0
 1608 007a 3B68     		ldr	r3, [r7]
 1609 007c 2C4A     		ldr	r2, .L32+28
 1610 007e 1033     		adds	r3, r3, #16
 1611 0080 0832     		adds	r2, r2, #8
 1612 0082 92E80300 		ldmia	r2, {r0, r1}
 1613 0086 83E80300 		stmia	r3, {r0, r1}
 301:bluetooth_rxtx.c **** 	fr->rssi_sample[2] = rssi_sample[2];
 1614              		.loc 1 301 0
 1615 008a 3B68     		ldr	r3, [r7]
 1616 008c 284A     		ldr	r2, .L32+28
 1617 008e 1833     		adds	r3, r3, #24
 1618 0090 1032     		adds	r2, r2, #16
 1619 0092 92E80300 		ldmia	r2, {r0, r1}
 1620 0096 83E80300 		stmia	r3, {r0, r1}
 302:bluetooth_rxtx.c **** 	fr->rssi_sample[3] = rssi_sample[3];
 1621              		.loc 1 302 0
 1622 009a 3B68     		ldr	r3, [r7]
 1623 009c 244A     		ldr	r2, .L32+28
 1624 009e 2033     		adds	r3, r3, #32
 1625 00a0 1832     		adds	r2, r2, #24
 1626 00a2 92E80300 		ldmia	r2, {r0, r1}
 1627 00a6 83E80300 		stmia	r3, {r0, r1}
 303:bluetooth_rxtx.c **** 	fr->rssi_sample[4] = rssi_sample[4];
 1628              		.loc 1 303 0
 1629 00aa 3B68     		ldr	r3, [r7]
 1630 00ac 204A     		ldr	r2, .L32+28
 1631 00ae 2833     		adds	r3, r3, #40
 1632 00b0 2032     		adds	r2, r2, #32
 1633 00b2 92E80300 		ldmia	r2, {r0, r1}
 1634 00b6 83E80300 		stmia	r3, {r0, r1}
 304:bluetooth_rxtx.c **** 	fr->rssi_sample[5] = rssi_sample[5];
 1635              		.loc 1 304 0
 1636 00ba 3B68     		ldr	r3, [r7]
 1637 00bc 1C4A     		ldr	r2, .L32+28
 1638 00be 3033     		adds	r3, r3, #48
 1639 00c0 2832     		adds	r2, r2, #40
 1640 00c2 92E80300 		ldmia	r2, {r0, r1}
 1641 00c6 83E80300 		stmia	r3, {r0, r1}
 305:bluetooth_rxtx.c **** 	fr->rssi_sample[6] = rssi_sample[6];
 1642              		.loc 1 305 0
 1643 00ca 3B68     		ldr	r3, [r7]
 1644 00cc 184A     		ldr	r2, .L32+28
 1645 00ce 3833     		adds	r3, r3, #56
 1646 00d0 3032     		adds	r2, r2, #48
 1647 00d2 92E80300 		ldmia	r2, {r0, r1}
 1648 00d6 83E80300 		stmia	r3, {r0, r1}
 306:bluetooth_rxtx.c **** 	fr->rssi_sample[7] = rssi_sample[7];
ARM GAS  /tmp/ccHz27EZ.s 			page 34


 1649              		.loc 1 306 0
 1650 00da 3B68     		ldr	r3, [r7]
 1651 00dc 144A     		ldr	r2, .L32+28
 1652 00de 4033     		adds	r3, r3, #64
 1653 00e0 3832     		adds	r2, r2, #56
 1654 00e2 92E80300 		ldmia	r2, {r0, r1}
 1655 00e6 83E80300 		stmia	r3, {r0, r1}
 307:bluetooth_rxtx.c **** 	fr->rssi_sample[8] = rssi_sample[8];
 1656              		.loc 1 307 0
 1657 00ea 3B68     		ldr	r3, [r7]
 1658 00ec 104A     		ldr	r2, .L32+28
 1659 00ee 4833     		adds	r3, r3, #72
 1660 00f0 4032     		adds	r2, r2, #64
 1661 00f2 92E80300 		ldmia	r2, {r0, r1}
 1662 00f6 83E80300 		stmia	r3, {r0, r1}
 308:bluetooth_rxtx.c **** 
 309:bluetooth_rxtx.c **** 	fr->status = status;
 1663              		.loc 1 309 0
 1664 00fa 064B     		ldr	r3, .L32
 1665 00fc 1B78     		ldrb	r3, [r3]
 1666 00fe DAB2     		uxtb	r2, r3
 1667 0100 3B68     		ldr	r3, [r7]
 1668 0102 5A70     		strb	r2, [r3, #1]
 310:bluetooth_rxtx.c **** 	status = 0;
 1669              		.loc 1 310 0
 1670 0104 034B     		ldr	r3, .L32
 1671 0106 0022     		movs	r2, #0
 1672 0108 1A70     		strb	r2, [r3]
 311:bluetooth_rxtx.c **** 	
 312:bluetooth_rxtx.c **** 	return 1;
 1673              		.loc 1 312 0
 1674 010a 0123     		movs	r3, #1
 1675              	.L31:
 313:bluetooth_rxtx.c **** }
 1676              		.loc 1 313 0
 1677 010c 1846     		mov	r0, r3
 1678 010e 0837     		adds	r7, r7, #8
 1679              		.cfi_def_cfa_offset 8
 1680 0110 BD46     		mov	sp, r7
 1681              		.cfi_def_cfa_register 13
 1682              		@ sp needed
 1683 0112 80BD     		pop	{r7, pc}
 1684              	.L33:
 1685              		.align	2
 1686              	.L32:
 1687 0114 00000000 		.word	status
 1688 0118 00000000 		.word	channel
 1689 011c 00000000 		.word	rssi_max
 1690 0120 00000000 		.word	rssi_min
 1691 0124 00000000 		.word	rssi_avg
 1692 0128 00000000 		.word	rssi_count
 1693 012c 38C00920 		.word	537509944
 1694 0130 00000000 		.word	rssi_sample
 1695              		.cfi_endproc
 1696              	.LFE6:
 1698              		.section	.text.enqueue,"ax",%progbits
 1699              		.align	2
ARM GAS  /tmp/ccHz27EZ.s 			page 35


 1700              		.thumb
 1701              		.thumb_func
 1703              	enqueue:
 1704              	.LFB7:
 314:bluetooth_rxtx.c **** 
 315:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 316:bluetooth_rxtx.c **** {
 1705              		.loc 1 316 0
 1706              		.cfi_startproc
 1707              		@ args = 0, pretend = 0, frame = 32
 1708              		@ frame_needed = 1, uses_anonymous_args = 0
 1709 0000 80B5     		push	{r7, lr}
 1710              		.cfi_def_cfa_offset 8
 1711              		.cfi_offset 7, -8
 1712              		.cfi_offset 14, -4
 1713 0002 88B0     		sub	sp, sp, #32
 1714              		.cfi_def_cfa_offset 40
 1715 0004 00AF     		add	r7, sp, #0
 1716              		.cfi_def_cfa_register 7
 1717 0006 0346     		mov	r3, r0
 1718 0008 3960     		str	r1, [r7]
 1719 000a FB71     		strb	r3, [r7, #7]
 317:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1720              		.loc 1 317 0
 1721 000c FFF7FEFF 		bl	usb_enqueue
 1722 0010 F861     		str	r0, [r7, #28]
 318:bluetooth_rxtx.c **** 
 319:bluetooth_rxtx.c **** 	/* fail if queue is full */
 320:bluetooth_rxtx.c **** 	if (f == NULL) {
 1723              		.loc 1 320 0
 1724 0012 FB69     		ldr	r3, [r7, #28]
 1725 0014 002B     		cmp	r3, #0
 1726 0016 09D1     		bne	.L35
 321:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1727              		.loc 1 321 0
 1728 0018 504B     		ldr	r3, .L39
 1729 001a 1B78     		ldrb	r3, [r3]
 1730 001c DBB2     		uxtb	r3, r3
 1731 001e 43F00403 		orr	r3, r3, #4
 1732 0022 DAB2     		uxtb	r2, r3
 1733 0024 4D4B     		ldr	r3, .L39
 1734 0026 1A70     		strb	r2, [r3]
 322:bluetooth_rxtx.c **** 		return 0;
 1735              		.loc 1 322 0
 1736 0028 0023     		movs	r3, #0
 1737 002a 93E0     		b	.L36
 1738              	.L35:
 323:bluetooth_rxtx.c **** 	}
 324:bluetooth_rxtx.c **** 
 325:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1739              		.loc 1 325 0
 1740 002c FB69     		ldr	r3, [r7, #28]
 1741 002e FA79     		ldrb	r2, [r7, #7]
 1742 0030 1A70     		strb	r2, [r3]
 326:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1743              		.loc 1 326 0
 1744 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
ARM GAS  /tmp/ccHz27EZ.s 			page 36


 1745 0034 042B     		cmp	r3, #4
 1746 0036 13D1     		bne	.L37
 327:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1747              		.loc 1 327 0
 1748 0038 494B     		ldr	r3, .L39+4
 1749 003a 1B68     		ldr	r3, [r3]
 1750 003c 1B0D     		lsrs	r3, r3, #20
 1751 003e DAB2     		uxtb	r2, r3
 1752 0040 FB69     		ldr	r3, [r7, #28]
 1753 0042 DA70     		strb	r2, [r3, #3]
 328:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1754              		.loc 1 328 0
 1755 0044 464B     		ldr	r3, .L39+4
 1756 0046 1B68     		ldr	r3, [r3]
 1757 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1758 004c 40F63542 		movw	r2, #3125
 1759 0050 02FB03F2 		mul	r2, r2, r3
 1760 0054 434B     		ldr	r3, .L39+8
 1761 0056 1B68     		ldr	r3, [r3]
 1762 0058 1A44     		add	r2, r2, r3
 1763 005a FB69     		ldr	r3, [r7, #28]
 1764 005c 5A60     		str	r2, [r3, #4]
 1765 005e 08E0     		b	.L38
 1766              	.L37:
 329:bluetooth_rxtx.c **** 	} else {
 330:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1767              		.loc 1 330 0
 1768 0060 414B     		ldr	r3, .L39+12
 1769 0062 1B68     		ldr	r3, [r3]
 1770 0064 DAB2     		uxtb	r2, r3
 1771 0066 FB69     		ldr	r3, [r7, #28]
 1772 0068 DA70     		strb	r2, [r3, #3]
 331:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1773              		.loc 1 331 0
 1774 006a 404B     		ldr	r3, .L39+16
 1775 006c 1A68     		ldr	r2, [r3]
 1776 006e FB69     		ldr	r3, [r7, #28]
 1777 0070 5A60     		str	r2, [r3, #4]
 1778              	.L38:
 332:bluetooth_rxtx.c **** 	}
 333:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1779              		.loc 1 333 0
 1780 0072 3F4B     		ldr	r3, .L39+20
 1781 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1782 0076 9BB2     		uxth	r3, r3
 1783 0078 DBB2     		uxtb	r3, r3
 1784 007a 623B     		subs	r3, r3, #98
 1785 007c DAB2     		uxtb	r2, r3
 1786 007e FB69     		ldr	r3, [r7, #28]
 1787 0080 9A70     		strb	r2, [r3, #2]
 334:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1788              		.loc 1 334 0
 1789 0082 3C4B     		ldr	r3, .L39+24
 1790 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1791 0086 DAB2     		uxtb	r2, r3
 1792 0088 FB69     		ldr	r3, [r7, #28]
 1793 008a 5A72     		strb	r2, [r3, #9]
ARM GAS  /tmp/ccHz27EZ.s 			page 37


 335:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1794              		.loc 1 335 0
 1795 008c 3A4B     		ldr	r3, .L39+28
 1796 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1797 0090 DAB2     		uxtb	r2, r3
 1798 0092 FB69     		ldr	r3, [r7, #28]
 1799 0094 1A72     		strb	r2, [r3, #8]
 336:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 1800              		.loc 1 336 0
 1801 0096 394B     		ldr	r3, .L39+32
 1802 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1803 009a DAB2     		uxtb	r2, r3
 1804 009c FB69     		ldr	r3, [r7, #28]
 1805 009e 9A72     		strb	r2, [r3, #10]
 337:bluetooth_rxtx.c **** 	//if (hop_mode != HOP_NONE)
 338:bluetooth_rxtx.c **** 	//	f->rssi_avg = (int8_t)((rssi_iir[idle_buf_channel-2402] + 128)/256);
 339:bluetooth_rxtx.c **** 	//else
 340:bluetooth_rxtx.c **** 	//	f->rssi_avg = (int8_t)((rssi_iir[0] + 128)/256);
 341:bluetooth_rxtx.c **** 	f->rssi_count = rssi_count;
 1806              		.loc 1 341 0
 1807 00a0 374B     		ldr	r3, .L39+36
 1808 00a2 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1809 00a4 FB69     		ldr	r3, [r7, #28]
 1810 00a6 DA72     		strb	r2, [r3, #11]
 342:bluetooth_rxtx.c **** 
 343:bluetooth_rxtx.c **** 	USRLED_SET;
 1811              		.loc 1 343 0
 1812 00a8 364B     		ldr	r3, .L39+40
 1813 00aa 0222     		movs	r2, #2
 1814 00ac 1A60     		str	r2, [r3]
 344:bluetooth_rxtx.c **** 
 345:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 346:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1815              		.loc 1 346 0
 1816 00ae FB69     		ldr	r3, [r7, #28]
 1817 00b0 0E33     		adds	r3, r3, #14
 1818 00b2 BB61     		str	r3, [r7, #24]
 347:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1819              		.loc 1 347 0
 1820 00b4 3B68     		ldr	r3, [r7]
 1821 00b6 7B61     		str	r3, [r7, #20]
 348:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1822              		.loc 1 348 0
 1823 00b8 7B69     		ldr	r3, [r7, #20]
 1824 00ba 1A68     		ldr	r2, [r3]
 1825 00bc BB69     		ldr	r3, [r7, #24]
 1826 00be 1A60     		str	r2, [r3]
 349:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1827              		.loc 1 349 0
 1828 00c0 BB69     		ldr	r3, [r7, #24]
 1829 00c2 0433     		adds	r3, r3, #4
 1830 00c4 7A69     		ldr	r2, [r7, #20]
 1831 00c6 5268     		ldr	r2, [r2, #4]
 1832 00c8 1A60     		str	r2, [r3]
 350:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1833              		.loc 1 350 0
 1834 00ca BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccHz27EZ.s 			page 38


 1835 00cc 0833     		adds	r3, r3, #8
 1836 00ce 7A69     		ldr	r2, [r7, #20]
 1837 00d0 9268     		ldr	r2, [r2, #8]
 1838 00d2 1A60     		str	r2, [r3]
 351:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1839              		.loc 1 351 0
 1840 00d4 BB69     		ldr	r3, [r7, #24]
 1841 00d6 0C33     		adds	r3, r3, #12
 1842 00d8 7A69     		ldr	r2, [r7, #20]
 1843 00da D268     		ldr	r2, [r2, #12]
 1844 00dc 1A60     		str	r2, [r3]
 352:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1845              		.loc 1 352 0
 1846 00de BB69     		ldr	r3, [r7, #24]
 1847 00e0 1033     		adds	r3, r3, #16
 1848 00e2 7A69     		ldr	r2, [r7, #20]
 1849 00e4 1269     		ldr	r2, [r2, #16]
 1850 00e6 1A60     		str	r2, [r3]
 353:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1851              		.loc 1 353 0
 1852 00e8 BB69     		ldr	r3, [r7, #24]
 1853 00ea 1433     		adds	r3, r3, #20
 1854 00ec 7A69     		ldr	r2, [r7, #20]
 1855 00ee 5269     		ldr	r2, [r2, #20]
 1856 00f0 1A60     		str	r2, [r3]
 354:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1857              		.loc 1 354 0
 1858 00f2 BB69     		ldr	r3, [r7, #24]
 1859 00f4 1833     		adds	r3, r3, #24
 1860 00f6 7A69     		ldr	r2, [r7, #20]
 1861 00f8 9269     		ldr	r2, [r2, #24]
 1862 00fa 1A60     		str	r2, [r3]
 355:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1863              		.loc 1 355 0
 1864 00fc BB69     		ldr	r3, [r7, #24]
 1865 00fe 1C33     		adds	r3, r3, #28
 1866 0100 7A69     		ldr	r2, [r7, #20]
 1867 0102 D269     		ldr	r2, [r2, #28]
 1868 0104 1A60     		str	r2, [r3]
 356:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1869              		.loc 1 356 0
 1870 0106 BB69     		ldr	r3, [r7, #24]
 1871 0108 2033     		adds	r3, r3, #32
 1872 010a 7A69     		ldr	r2, [r7, #20]
 1873 010c 126A     		ldr	r2, [r2, #32]
 1874 010e 1A60     		str	r2, [r3]
 357:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1875              		.loc 1 357 0
 1876 0110 BB69     		ldr	r3, [r7, #24]
 1877 0112 2433     		adds	r3, r3, #36
 1878 0114 7A69     		ldr	r2, [r7, #20]
 1879 0116 526A     		ldr	r2, [r2, #36]
 1880 0118 1A60     		str	r2, [r3]
 358:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1881              		.loc 1 358 0
 1882 011a BB69     		ldr	r3, [r7, #24]
 1883 011c 2833     		adds	r3, r3, #40
ARM GAS  /tmp/ccHz27EZ.s 			page 39


 1884 011e 7A69     		ldr	r2, [r7, #20]
 1885 0120 926A     		ldr	r2, [r2, #40]
 1886 0122 1A60     		str	r2, [r3]
 359:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1887              		.loc 1 359 0
 1888 0124 BB69     		ldr	r3, [r7, #24]
 1889 0126 2C33     		adds	r3, r3, #44
 1890 0128 7A69     		ldr	r2, [r7, #20]
 1891 012a D26A     		ldr	r2, [r2, #44]
 1892 012c 1A60     		str	r2, [r3]
 360:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 361:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1893              		.loc 1 361 0
 1894 012e FB69     		ldr	r3, [r7, #28]
 1895 0130 0E33     		adds	r3, r3, #14
 1896 0132 3B61     		str	r3, [r7, #16]
 362:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1897              		.loc 1 362 0
 1898 0134 3B68     		ldr	r3, [r7]
 1899 0136 FB60     		str	r3, [r7, #12]
 363:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1900              		.loc 1 363 0
 1901 0138 3B69     		ldr	r3, [r7, #16]
 1902 013a 3033     		adds	r3, r3, #48
 1903 013c FA68     		ldr	r2, [r7, #12]
 1904 013e 128E     		ldrh	r2, [r2, #48]
 1905 0140 1A80     		strh	r2, [r3]	@ movhi
 364:bluetooth_rxtx.c **** 
 365:bluetooth_rxtx.c **** 	f->status = status;
 1906              		.loc 1 365 0
 1907 0142 064B     		ldr	r3, .L39
 1908 0144 1B78     		ldrb	r3, [r3]
 1909 0146 DAB2     		uxtb	r2, r3
 1910 0148 FB69     		ldr	r3, [r7, #28]
 1911 014a 5A70     		strb	r2, [r3, #1]
 366:bluetooth_rxtx.c **** 	status = 0;
 1912              		.loc 1 366 0
 1913 014c 034B     		ldr	r3, .L39
 1914 014e 0022     		movs	r2, #0
 1915 0150 1A70     		strb	r2, [r3]
 367:bluetooth_rxtx.c **** 
 368:bluetooth_rxtx.c **** 	return 1;
 1916              		.loc 1 368 0
 1917 0152 0123     		movs	r3, #1
 1918              	.L36:
 369:bluetooth_rxtx.c **** }
 1919              		.loc 1 369 0
 1920 0154 1846     		mov	r0, r3
 1921 0156 2037     		adds	r7, r7, #32
 1922              		.cfi_def_cfa_offset 8
 1923 0158 BD46     		mov	sp, r7
 1924              		.cfi_def_cfa_register 13
 1925              		@ sp needed
 1926 015a 80BD     		pop	{r7, pc}
 1927              	.L40:
 1928              		.align	2
 1929              	.L39:
ARM GAS  /tmp/ccHz27EZ.s 			page 40


 1930 015c 00000000 		.word	status
 1931 0160 00000000 		.word	clkn
 1932 0164 08400040 		.word	1073758216
 1933 0168 00000000 		.word	idle_buf_clkn_high
 1934 016c 00000000 		.word	idle_buf_clk100ns
 1935 0170 00000000 		.word	idle_buf_channel
 1936 0174 00000000 		.word	rssi_min
 1937 0178 00000000 		.word	rssi_max
 1938 017c 00000000 		.word	rssi_avg
 1939 0180 00000000 		.word	rssi_count
 1940 0184 38C00920 		.word	537509944
 1941              		.cfi_endproc
 1942              	.LFE7:
 1944              		.section	.text.enqueue_with_ts,"ax",%progbits
 1945              		.align	2
 1946              		.global	enqueue_with_ts
 1947              		.thumb
 1948              		.thumb_func
 1950              	enqueue_with_ts:
 1951              	.LFB8:
 370:bluetooth_rxtx.c **** 
 371:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 372:bluetooth_rxtx.c **** {
 1952              		.loc 1 372 0
 1953              		.cfi_startproc
 1954              		@ args = 0, pretend = 0, frame = 40
 1955              		@ frame_needed = 1, uses_anonymous_args = 0
 1956 0000 80B5     		push	{r7, lr}
 1957              		.cfi_def_cfa_offset 8
 1958              		.cfi_offset 7, -8
 1959              		.cfi_offset 14, -4
 1960 0002 8AB0     		sub	sp, sp, #40
 1961              		.cfi_def_cfa_offset 48
 1962 0004 00AF     		add	r7, sp, #0
 1963              		.cfi_def_cfa_register 7
 1964 0006 0346     		mov	r3, r0
 1965 0008 B960     		str	r1, [r7, #8]
 1966 000a 7A60     		str	r2, [r7, #4]
 1967 000c FB73     		strb	r3, [r7, #15]
 373:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1968              		.loc 1 373 0
 1969 000e FFF7FEFF 		bl	usb_enqueue
 1970 0012 7862     		str	r0, [r7, #36]
 374:bluetooth_rxtx.c **** 
 375:bluetooth_rxtx.c **** 	/* fail if queue is full */
 376:bluetooth_rxtx.c **** 	if (f == NULL) {
 1971              		.loc 1 376 0
 1972 0014 7B6A     		ldr	r3, [r7, #36]
 1973 0016 002B     		cmp	r3, #0
 1974 0018 09D1     		bne	.L42
 377:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1975              		.loc 1 377 0
 1976 001a 3C4B     		ldr	r3, .L44
 1977 001c 1B78     		ldrb	r3, [r3]
 1978 001e DBB2     		uxtb	r3, r3
 1979 0020 43F00403 		orr	r3, r3, #4
 1980 0024 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 41


 1981 0026 394B     		ldr	r3, .L44
 1982 0028 1A70     		strb	r2, [r3]
 378:bluetooth_rxtx.c **** 		return 0;
 1983              		.loc 1 378 0
 1984 002a 0023     		movs	r3, #0
 1985 002c 69E0     		b	.L43
 1986              	.L42:
 379:bluetooth_rxtx.c **** 	}
 380:bluetooth_rxtx.c **** 
 381:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 1987              		.loc 1 381 0
 1988 002e 7B6A     		ldr	r3, [r7, #36]
 1989 0030 0022     		movs	r2, #0
 1990 0032 DA70     		strb	r2, [r3, #3]
 382:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1991              		.loc 1 382 0
 1992 0034 7B6A     		ldr	r3, [r7, #36]
 1993 0036 7A68     		ldr	r2, [r7, #4]
 1994 0038 5A60     		str	r2, [r3, #4]
 383:bluetooth_rxtx.c **** 
 384:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1995              		.loc 1 384 0
 1996 003a 354B     		ldr	r3, .L44+4
 1997 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1998 003e 9BB2     		uxth	r3, r3
 1999 0040 DBB2     		uxtb	r3, r3
 2000 0042 623B     		subs	r3, r3, #98
 2001 0044 DAB2     		uxtb	r2, r3
 2002 0046 7B6A     		ldr	r3, [r7, #36]
 2003 0048 9A70     		strb	r2, [r3, #2]
 385:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2004              		.loc 1 385 0
 2005 004a 7B6A     		ldr	r3, [r7, #36]
 2006 004c 0022     		movs	r2, #0
 2007 004e 9A72     		strb	r2, [r3, #10]
 386:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 2008              		.loc 1 386 0
 2009 0050 7B6A     		ldr	r3, [r7, #36]
 2010 0052 0022     		movs	r2, #0
 2011 0054 DA72     		strb	r2, [r3, #11]
 387:bluetooth_rxtx.c **** 
 388:bluetooth_rxtx.c **** 	USRLED_SET;
 2012              		.loc 1 388 0
 2013 0056 2F4B     		ldr	r3, .L44+8
 2014 0058 0222     		movs	r2, #2
 2015 005a 1A60     		str	r2, [r3]
 389:bluetooth_rxtx.c **** 
 390:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 391:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 2016              		.loc 1 391 0
 2017 005c 7B6A     		ldr	r3, [r7, #36]
 2018 005e 0E33     		adds	r3, r3, #14
 2019 0060 3B62     		str	r3, [r7, #32]
 392:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 2020              		.loc 1 392 0
 2021 0062 BB68     		ldr	r3, [r7, #8]
 2022 0064 FB61     		str	r3, [r7, #28]
ARM GAS  /tmp/ccHz27EZ.s 			page 42


 393:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 2023              		.loc 1 393 0
 2024 0066 FB69     		ldr	r3, [r7, #28]
 2025 0068 1A68     		ldr	r2, [r3]
 2026 006a 3B6A     		ldr	r3, [r7, #32]
 2027 006c 1A60     		str	r2, [r3]
 394:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 2028              		.loc 1 394 0
 2029 006e 3B6A     		ldr	r3, [r7, #32]
 2030 0070 0433     		adds	r3, r3, #4
 2031 0072 FA69     		ldr	r2, [r7, #28]
 2032 0074 5268     		ldr	r2, [r2, #4]
 2033 0076 1A60     		str	r2, [r3]
 395:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 2034              		.loc 1 395 0
 2035 0078 3B6A     		ldr	r3, [r7, #32]
 2036 007a 0833     		adds	r3, r3, #8
 2037 007c FA69     		ldr	r2, [r7, #28]
 2038 007e 9268     		ldr	r2, [r2, #8]
 2039 0080 1A60     		str	r2, [r3]
 396:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 2040              		.loc 1 396 0
 2041 0082 3B6A     		ldr	r3, [r7, #32]
 2042 0084 0C33     		adds	r3, r3, #12
 2043 0086 FA69     		ldr	r2, [r7, #28]
 2044 0088 D268     		ldr	r2, [r2, #12]
 2045 008a 1A60     		str	r2, [r3]
 397:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 2046              		.loc 1 397 0
 2047 008c 3B6A     		ldr	r3, [r7, #32]
 2048 008e 1033     		adds	r3, r3, #16
 2049 0090 FA69     		ldr	r2, [r7, #28]
 2050 0092 1269     		ldr	r2, [r2, #16]
 2051 0094 1A60     		str	r2, [r3]
 398:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 2052              		.loc 1 398 0
 2053 0096 3B6A     		ldr	r3, [r7, #32]
 2054 0098 1433     		adds	r3, r3, #20
 2055 009a FA69     		ldr	r2, [r7, #28]
 2056 009c 5269     		ldr	r2, [r2, #20]
 2057 009e 1A60     		str	r2, [r3]
 399:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 2058              		.loc 1 399 0
 2059 00a0 3B6A     		ldr	r3, [r7, #32]
 2060 00a2 1833     		adds	r3, r3, #24
 2061 00a4 FA69     		ldr	r2, [r7, #28]
 2062 00a6 9269     		ldr	r2, [r2, #24]
 2063 00a8 1A60     		str	r2, [r3]
 400:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 2064              		.loc 1 400 0
 2065 00aa 3B6A     		ldr	r3, [r7, #32]
 2066 00ac 1C33     		adds	r3, r3, #28
 2067 00ae FA69     		ldr	r2, [r7, #28]
 2068 00b0 D269     		ldr	r2, [r2, #28]
 2069 00b2 1A60     		str	r2, [r3]
 401:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 2070              		.loc 1 401 0
ARM GAS  /tmp/ccHz27EZ.s 			page 43


 2071 00b4 3B6A     		ldr	r3, [r7, #32]
 2072 00b6 2033     		adds	r3, r3, #32
 2073 00b8 FA69     		ldr	r2, [r7, #28]
 2074 00ba 126A     		ldr	r2, [r2, #32]
 2075 00bc 1A60     		str	r2, [r3]
 402:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 2076              		.loc 1 402 0
 2077 00be 3B6A     		ldr	r3, [r7, #32]
 2078 00c0 2433     		adds	r3, r3, #36
 2079 00c2 FA69     		ldr	r2, [r7, #28]
 2080 00c4 526A     		ldr	r2, [r2, #36]
 2081 00c6 1A60     		str	r2, [r3]
 403:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 2082              		.loc 1 403 0
 2083 00c8 3B6A     		ldr	r3, [r7, #32]
 2084 00ca 2833     		adds	r3, r3, #40
 2085 00cc FA69     		ldr	r2, [r7, #28]
 2086 00ce 926A     		ldr	r2, [r2, #40]
 2087 00d0 1A60     		str	r2, [r3]
 404:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 2088              		.loc 1 404 0
 2089 00d2 3B6A     		ldr	r3, [r7, #32]
 2090 00d4 2C33     		adds	r3, r3, #44
 2091 00d6 FA69     		ldr	r2, [r7, #28]
 2092 00d8 D26A     		ldr	r2, [r2, #44]
 2093 00da 1A60     		str	r2, [r3]
 405:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 406:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 2094              		.loc 1 406 0
 2095 00dc 7B6A     		ldr	r3, [r7, #36]
 2096 00de 0E33     		adds	r3, r3, #14
 2097 00e0 BB61     		str	r3, [r7, #24]
 407:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 2098              		.loc 1 407 0
 2099 00e2 BB68     		ldr	r3, [r7, #8]
 2100 00e4 7B61     		str	r3, [r7, #20]
 408:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 2101              		.loc 1 408 0
 2102 00e6 BB69     		ldr	r3, [r7, #24]
 2103 00e8 3033     		adds	r3, r3, #48
 2104 00ea 7A69     		ldr	r2, [r7, #20]
 2105 00ec 128E     		ldrh	r2, [r2, #48]
 2106 00ee 1A80     		strh	r2, [r3]	@ movhi
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	f->status = status;
 2107              		.loc 1 410 0
 2108 00f0 064B     		ldr	r3, .L44
 2109 00f2 1B78     		ldrb	r3, [r3]
 2110 00f4 DAB2     		uxtb	r2, r3
 2111 00f6 7B6A     		ldr	r3, [r7, #36]
 2112 00f8 5A70     		strb	r2, [r3, #1]
 411:bluetooth_rxtx.c **** 	status = 0;
 2113              		.loc 1 411 0
 2114 00fa 044B     		ldr	r3, .L44
 2115 00fc 0022     		movs	r2, #0
 2116 00fe 1A70     		strb	r2, [r3]
 412:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 44


 413:bluetooth_rxtx.c **** 	return 1;
 2117              		.loc 1 413 0
 2118 0100 0123     		movs	r3, #1
 2119              	.L43:
 414:bluetooth_rxtx.c **** }
 2120              		.loc 1 414 0
 2121 0102 1846     		mov	r0, r3
 2122 0104 2837     		adds	r7, r7, #40
 2123              		.cfi_def_cfa_offset 8
 2124 0106 BD46     		mov	sp, r7
 2125              		.cfi_def_cfa_register 13
 2126              		@ sp needed
 2127 0108 80BD     		pop	{r7, pc}
 2128              	.L45:
 2129 010a 00BF     		.align	2
 2130              	.L44:
 2131 010c 00000000 		.word	status
 2132 0110 00000000 		.word	channel
 2133 0114 38C00920 		.word	537509944
 2134              		.cfi_endproc
 2135              	.LFE8:
 2137              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 2138              		.align	2
 2139              		.thumb
 2140              		.thumb_func
 2142              	cs_threshold_calc_and_set:
 2143              	.LFB9:
 415:bluetooth_rxtx.c **** 
 416:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 417:bluetooth_rxtx.c **** {
 2144              		.loc 1 417 0
 2145              		.cfi_startproc
 2146              		@ args = 0, pretend = 0, frame = 8
 2147              		@ frame_needed = 1, uses_anonymous_args = 0
 2148 0000 80B5     		push	{r7, lr}
 2149              		.cfi_def_cfa_offset 8
 2150              		.cfi_offset 7, -8
 2151              		.cfi_offset 14, -4
 2152 0002 82B0     		sub	sp, sp, #8
 2153              		.cfi_def_cfa_offset 16
 2154 0004 00AF     		add	r7, sp, #0
 2155              		.cfi_def_cfa_register 7
 418:bluetooth_rxtx.c **** 	int8_t level;
 419:bluetooth_rxtx.c **** 
 420:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 421:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 422:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 423:bluetooth_rxtx.c **** 	 * value for it. */
 424:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 2156              		.loc 1 424 0
 2157 0006 174B     		ldr	r3, .L50
 2158 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2159 000a 002B     		cmp	r3, #0
 2160 000c 1DD0     		beq	.L47
 2161              		.loc 1 424 0 is_stmt 0 discriminator 1
 2162 000e 164B     		ldr	r3, .L50+4
 2163 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccHz27EZ.s 			page 45


 2164 0012 5BB2     		sxtb	r3, r3
 2165 0014 002B     		cmp	r3, #0
 2166 0016 18DD     		ble	.L47
 2167              	.LBB2:
 425:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2168              		.loc 1 425 0 is_stmt 1
 2169 0018 144B     		ldr	r3, .L50+8
 2170 001a 1B88     		ldrh	r3, [r3]	@ movhi
 2171 001c 9BB2     		uxth	r3, r3
 2172 001e A3F66213 		subw	r3, r3, #2402
 2173 0022 134A     		ldr	r2, .L50+12
 2174 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 2175 0028 1BB2     		sxth	r3, r3
 2176 002a 8033     		adds	r3, r3, #128
 2177 002c 002B     		cmp	r3, #0
 2178 002e 00DA     		bge	.L48
 2179 0030 FF33     		adds	r3, r3, #255
 2180              	.L48:
 2181 0032 1B12     		asrs	r3, r3, #8
 2182 0034 BB71     		strb	r3, [r7, #6]
 426:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 2183              		.loc 1 426 0
 2184 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 2185 0038 0B4B     		ldr	r3, .L50+4
 2186 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2187 003c DBB2     		uxtb	r3, r3
 2188 003e 1344     		add	r3, r3, r2
 2189 0040 DBB2     		uxtb	r3, r3
 2190 0042 363B     		subs	r3, r3, #54
 2191 0044 DBB2     		uxtb	r3, r3
 2192 0046 FB71     		strb	r3, [r7, #7]
 2193              	.LBE2:
 424:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2194              		.loc 1 424 0
 2195 0048 02E0     		b	.L49
 2196              	.L47:
 427:bluetooth_rxtx.c **** 	}
 428:bluetooth_rxtx.c **** 	else {
 429:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 2197              		.loc 1 429 0
 2198 004a 074B     		ldr	r3, .L50+4
 2199 004c 1B78     		ldrb	r3, [r3]
 2200 004e FB71     		strb	r3, [r7, #7]
 2201              	.L49:
 430:bluetooth_rxtx.c **** 	}
 431:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 2202              		.loc 1 431 0
 2203 0050 97F90730 		ldrsb	r3, [r7, #7]
 2204 0054 1846     		mov	r0, r3
 2205 0056 0321     		movs	r1, #3
 2206 0058 FFF7FEFF 		bl	cs_threshold_set
 432:bluetooth_rxtx.c **** }
 2207              		.loc 1 432 0
 2208 005c 0837     		adds	r7, r7, #8
 2209              		.cfi_def_cfa_offset 8
 2210 005e BD46     		mov	sp, r7
 2211              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccHz27EZ.s 			page 46


 2212              		@ sp needed
 2213 0060 80BD     		pop	{r7, pc}
 2214              	.L51:
 2215 0062 00BF     		.align	2
 2216              	.L50:
 2217 0064 00000000 		.word	hop_mode
 2218 0068 00000000 		.word	cs_threshold_req
 2219 006c 00000000 		.word	channel
 2220 0070 00000000 		.word	rssi_iir
 2221              		.cfi_endproc
 2222              	.LFE9:
 2224              		.section	.text.cs_trigger_enable,"ax",%progbits
 2225              		.align	2
 2226              		.thumb
 2227              		.thumb_func
 2229              	cs_trigger_enable:
 2230              	.LFB10:
 433:bluetooth_rxtx.c **** 
 434:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 435:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 436:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 437:bluetooth_rxtx.c ****  * and off here. */
 438:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 439:bluetooth_rxtx.c **** {
 2231              		.loc 1 439 0
 2232              		.cfi_startproc
 2233              		@ args = 0, pretend = 0, frame = 0
 2234              		@ frame_needed = 1, uses_anonymous_args = 0
 2235              		@ link register save eliminated.
 2236 0000 80B4     		push	{r7}
 2237              		.cfi_def_cfa_offset 4
 2238              		.cfi_offset 7, -4
 2239 0002 00AF     		add	r7, sp, #0
 2240              		.cfi_def_cfa_register 7
 440:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2241              		.loc 1 440 0
 2242 0004 094B     		ldr	r3, .L53
 2243 0006 0022     		movs	r2, #0
 2244 0008 1A70     		strb	r2, [r3]
 441:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 2245              		.loc 1 441 0
 2246 000a 094B     		ldr	r3, .L53+4
 2247 000c 4FF40012 		mov	r2, #2097152
 2248 0010 1A60     		str	r2, [r3]
 442:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2249              		.loc 1 442 0
 2250 0012 084B     		ldr	r3, .L53+8
 2251 0014 0422     		movs	r2, #4
 2252 0016 1A60     		str	r2, [r3]
 443:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 2253              		.loc 1 443 0
 2254 0018 074A     		ldr	r2, .L53+12
 2255 001a 074B     		ldr	r3, .L53+12
 2256 001c 1B68     		ldr	r3, [r3]
 2257 001e 43F00403 		orr	r3, r3, #4
 2258 0022 1360     		str	r3, [r2]
 444:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccHz27EZ.s 			page 47


 2259              		.loc 1 444 0
 2260 0024 BD46     		mov	sp, r7
 2261              		.cfi_def_cfa_register 13
 2262              		@ sp needed
 2263 0026 5DF8047B 		ldr	r7, [sp], #4
 2264              		.cfi_restore 7
 2265              		.cfi_def_cfa_offset 0
 2266 002a 7047     		bx	lr
 2267              	.L54:
 2268              		.align	2
 2269              	.L53:
 2270 002c 00000000 		.word	cs_trigger
 2271 0030 00E100E0 		.word	-536813312
 2272 0034 AC800240 		.word	1073905836
 2273 0038 B4800240 		.word	1073905844
 2274              		.cfi_endproc
 2275              	.LFE10:
 2277              		.section	.text.cs_trigger_disable,"ax",%progbits
 2278              		.align	2
 2279              		.thumb
 2280              		.thumb_func
 2282              	cs_trigger_disable:
 2283              	.LFB11:
 445:bluetooth_rxtx.c **** 
 446:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 447:bluetooth_rxtx.c **** {
 2284              		.loc 1 447 0
 2285              		.cfi_startproc
 2286              		@ args = 0, pretend = 0, frame = 0
 2287              		@ frame_needed = 1, uses_anonymous_args = 0
 2288              		@ link register save eliminated.
 2289 0000 80B4     		push	{r7}
 2290              		.cfi_def_cfa_offset 4
 2291              		.cfi_offset 7, -4
 2292 0002 00AF     		add	r7, sp, #0
 2293              		.cfi_def_cfa_register 7
 448:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 2294              		.loc 1 448 0
 2295 0004 094A     		ldr	r2, .L56
 2296 0006 094B     		ldr	r3, .L56
 2297 0008 1B68     		ldr	r3, [r3]
 2298 000a 23F00403 		bic	r3, r3, #4
 2299 000e 1360     		str	r3, [r2]
 449:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2300              		.loc 1 449 0
 2301 0010 074B     		ldr	r3, .L56+4
 2302 0012 0422     		movs	r2, #4
 2303 0014 1A60     		str	r2, [r3]
 450:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 2304              		.loc 1 450 0
 2305 0016 074B     		ldr	r3, .L56+8
 2306 0018 4FF40012 		mov	r2, #2097152
 2307 001c 1A60     		str	r2, [r3]
 451:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2308              		.loc 1 451 0
 2309 001e 064B     		ldr	r3, .L56+12
 2310 0020 0022     		movs	r2, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 48


 2311 0022 1A70     		strb	r2, [r3]
 452:bluetooth_rxtx.c **** }
 2312              		.loc 1 452 0
 2313 0024 BD46     		mov	sp, r7
 2314              		.cfi_def_cfa_register 13
 2315              		@ sp needed
 2316 0026 5DF8047B 		ldr	r7, [sp], #4
 2317              		.cfi_restore 7
 2318              		.cfi_def_cfa_offset 0
 2319 002a 7047     		bx	lr
 2320              	.L57:
 2321              		.align	2
 2322              	.L56:
 2323 002c B4800240 		.word	1073905844
 2324 0030 AC800240 		.word	1073905836
 2325 0034 80E100E0 		.word	-536813184
 2326 0038 00000000 		.word	cs_trigger
 2327              		.cfi_endproc
 2328              	.LFE11:
 2330              		.section	.rodata
 2331              		.align	2
 2332              	.LC3:
 2333 08e0 32303135 		.ascii	"2015-10-R1\000"
 2333      2D31302D 
 2333      523100
 2334              		.section	.text.vendor_request_handler,"ax",%progbits
 2335              		.align	2
 2336              		.thumb
 2337              		.thumb_func
 2339              	vendor_request_handler:
 2340              	.LFB12:
 453:bluetooth_rxtx.c **** 
 454:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 455:bluetooth_rxtx.c **** {
 2341              		.loc 1 455 0
 2342              		.cfi_startproc
 2343              		@ args = 0, pretend = 0, frame = 80
 2344              		@ frame_needed = 1, uses_anonymous_args = 0
 2345 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2346              		.cfi_def_cfa_offset 36
 2347              		.cfi_offset 4, -36
 2348              		.cfi_offset 5, -32
 2349              		.cfi_offset 6, -28
 2350              		.cfi_offset 7, -24
 2351              		.cfi_offset 8, -20
 2352              		.cfi_offset 9, -16
 2353              		.cfi_offset 10, -12
 2354              		.cfi_offset 11, -8
 2355              		.cfi_offset 14, -4
 2356 0004 95B0     		sub	sp, sp, #84
 2357              		.cfi_def_cfa_offset 120
 2358 0006 00AF     		add	r7, sp, #0
 2359              		.cfi_def_cfa_register 7
 2360 0008 B960     		str	r1, [r7, #8]
 2361 000a 7A60     		str	r2, [r7, #4]
 2362 000c 3B60     		str	r3, [r7]
 2363 000e 0346     		mov	r3, r0
ARM GAS  /tmp/ccHz27EZ.s 			page 49


 2364 0010 FB73     		strb	r3, [r7, #15]
 456:bluetooth_rxtx.c **** 	u32 command[5];
 457:bluetooth_rxtx.c **** 	u32 result[5];
 458:bluetooth_rxtx.c **** 	u64 ac_copy;
 459:bluetooth_rxtx.c **** 	int i; // loop counter
 460:bluetooth_rxtx.c **** 	u32 clock;
 461:bluetooth_rxtx.c **** 	int clock_offset;
 462:bluetooth_rxtx.c **** 	u8 length; // string length
 463:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2365              		.loc 1 463 0
 2366 0012 0023     		movs	r3, #0
 2367 0014 7B64     		str	r3, [r7, #68]
 464:bluetooth_rxtx.c **** 	u16 reg_val;
 465:bluetooth_rxtx.c **** 
 466:bluetooth_rxtx.c **** 	switch (request) {
 2368              		.loc 1 466 0
 2369 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2370 0018 3C2B     		cmp	r3, #60
 2371 001a 00F25185 		bhi	.L59
 2372 001e 01A2     		adr	r2, .L61
 2373 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2374              		.p2align 2
 2375              	.L61:
 2376 0024 19010000 		.word	.L60+1
 2377 0028 23010000 		.word	.L62+1
 2378 002c C10A0000 		.word	.L59+1
 2379 0030 33010000 		.word	.L63+1
 2380 0034 55010000 		.word	.L64+1
 2381 0038 71010000 		.word	.L65+1
 2382 003c 93010000 		.word	.L66+1
 2383 0040 AF010000 		.word	.L67+1
 2384 0044 D1010000 		.word	.L68+1
 2385 0048 F1010000 		.word	.L69+1
 2386 004c 13020000 		.word	.L70+1
 2387 0050 B7040000 		.word	.L71+1
 2388 0054 DD040000 		.word	.L72+1
 2389 0058 89020000 		.word	.L73+1
 2390 005c 93020000 		.word	.L74+1
 2391 0060 33020000 		.word	.L75+1
 2392 0064 71030000 		.word	.L76+1
 2393 0068 91030000 		.word	.L77+1
 2394 006c C9030000 		.word	.L78+1
 2395 0070 E9030000 		.word	.L79+1
 2396 0074 05040000 		.word	.L80+1
 2397 0078 91040000 		.word	.L81+1
 2398 007c 99040000 		.word	.L82+1
 2399 0080 AB040000 		.word	.L83+1
 2400 0084 67050000 		.word	.L84+1
 2401 0088 85050000 		.word	.L85+1
 2402 008c C10A0000 		.word	.L59+1
 2403 0090 91050000 		.word	.L86+1
 2404 0094 0D040000 		.word	.L87+1
 2405 0098 29040000 		.word	.L88+1
 2406 009c 51040000 		.word	.L89+1
 2407 00a0 49040000 		.word	.L90+1
 2408 00a4 59040000 		.word	.L91+1
 2409 00a8 55060000 		.word	.L92+1
ARM GAS  /tmp/ccHz27EZ.s 			page 50


 2410 00ac ED050000 		.word	.L93+1
 2411 00b0 C9060000 		.word	.L94+1
 2412 00b4 D7060000 		.word	.L95+1
 2413 00b8 E7060000 		.word	.L96+1
 2414 00bc F9060000 		.word	.L97+1
 2415 00c0 C5070000 		.word	.L98+1
 2416 00c4 0B080000 		.word	.L99+1
 2417 00c8 99080000 		.word	.L100+1
 2418 00cc CD080000 		.word	.L101+1
 2419 00d0 EF080000 		.word	.L102+1
 2420 00d4 47090000 		.word	.L103+1
 2421 00d8 C50A0000 		.word	.L162+1
 2422 00dc 79090000 		.word	.L105+1
 2423 00e0 8F090000 		.word	.L106+1
 2424 00e4 AB090000 		.word	.L107+1
 2425 00e8 C1090000 		.word	.L108+1
 2426 00ec ED090000 		.word	.L109+1
 2427 00f0 3D080000 		.word	.L110+1
 2428 00f4 6F080000 		.word	.L111+1
 2429 00f8 090A0000 		.word	.L112+1
 2430 00fc 4D0A0000 		.word	.L113+1
 2431 0100 97060000 		.word	.L114+1
 2432 0104 5F0A0000 		.word	.L115+1
 2433 0108 C10A0000 		.word	.L59+1
 2434 010c 370A0000 		.word	.L116+1
 2435 0110 A30A0000 		.word	.L117+1
 2436 0114 AF0A0000 		.word	.L118+1
 2437              		.p2align 1
 2438              	.L60:
 467:bluetooth_rxtx.c **** 
 468:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 469:bluetooth_rxtx.c **** 		*data_len = 0;
 2439              		.loc 1 469 0
 2440 0118 3B68     		ldr	r3, [r7]
 2441 011a 0022     		movs	r2, #0
 2442 011c 1A60     		str	r2, [r3]
 470:bluetooth_rxtx.c **** 		break;
 2443              		.loc 1 470 0
 2444 011e 00F0D2BC 		b	.L119
 2445              	.L62:
 471:bluetooth_rxtx.c **** 
 472:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 473:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2446              		.loc 1 473 0
 2447 0122 A14B     		ldr	r3, .L163
 2448 0124 0122     		movs	r2, #1
 2449 0126 1A70     		strb	r2, [r3]
 474:bluetooth_rxtx.c **** 		*data_len = 0;
 2450              		.loc 1 474 0
 2451 0128 3B68     		ldr	r3, [r7]
 2452 012a 0022     		movs	r2, #0
 2453 012c 1A60     		str	r2, [r3]
 475:bluetooth_rxtx.c **** 		break;
 2454              		.loc 1 475 0
 2455 012e 00F0CABC 		b	.L119
 2456              	.L63:
 476:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 51


 477:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 478:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2457              		.loc 1 478 0
 2458 0132 9E4B     		ldr	r3, .L163+4
 2459 0134 1B68     		ldr	r3, [r3]
 2460 0136 03F00203 		and	r3, r3, #2
 2461 013a 002B     		cmp	r3, #0
 2462 013c 14BF     		ite	ne
 2463 013e 0123     		movne	r3, #1
 2464 0140 0023     		moveq	r3, #0
 2465 0142 DBB2     		uxtb	r3, r3
 2466 0144 1A46     		mov	r2, r3
 2467 0146 7B68     		ldr	r3, [r7, #4]
 2468 0148 1A70     		strb	r2, [r3]
 479:bluetooth_rxtx.c **** 		*data_len = 1;
 2469              		.loc 1 479 0
 2470 014a 3B68     		ldr	r3, [r7]
 2471 014c 0122     		movs	r2, #1
 2472 014e 1A60     		str	r2, [r3]
 480:bluetooth_rxtx.c **** 		break;
 2473              		.loc 1 480 0
 2474 0150 00F0B9BC 		b	.L119
 2475              	.L64:
 481:bluetooth_rxtx.c **** 
 482:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 483:bluetooth_rxtx.c **** 		if (request_params[0])
 2476              		.loc 1 483 0
 2477 0154 BB68     		ldr	r3, [r7, #8]
 2478 0156 1B88     		ldrh	r3, [r3]
 2479 0158 002B     		cmp	r3, #0
 2480 015a 04D0     		beq	.L120
 484:bluetooth_rxtx.c **** 			USRLED_SET;
 2481              		.loc 1 484 0
 2482 015c 944B     		ldr	r3, .L163+8
 2483 015e 0222     		movs	r2, #2
 2484 0160 1A60     		str	r2, [r3]
 485:bluetooth_rxtx.c **** 		else
 486:bluetooth_rxtx.c **** 			USRLED_CLR;
 487:bluetooth_rxtx.c **** 		break;
 2485              		.loc 1 487 0
 2486 0162 00F0B0BC 		b	.L119
 2487              	.L120:
 486:bluetooth_rxtx.c **** 		break;
 2488              		.loc 1 486 0
 2489 0166 934B     		ldr	r3, .L163+12
 2490 0168 0222     		movs	r2, #2
 2491 016a 1A60     		str	r2, [r3]
 2492              		.loc 1 487 0
 2493 016c 00F0ABBC 		b	.L119
 2494              	.L65:
 488:bluetooth_rxtx.c **** 
 489:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 490:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2495              		.loc 1 490 0
 2496 0170 8E4B     		ldr	r3, .L163+4
 2497 0172 1B68     		ldr	r3, [r3]
 2498 0174 03F01003 		and	r3, r3, #16
ARM GAS  /tmp/ccHz27EZ.s 			page 52


 2499 0178 002B     		cmp	r3, #0
 2500 017a 14BF     		ite	ne
 2501 017c 0123     		movne	r3, #1
 2502 017e 0023     		moveq	r3, #0
 2503 0180 DBB2     		uxtb	r3, r3
 2504 0182 1A46     		mov	r2, r3
 2505 0184 7B68     		ldr	r3, [r7, #4]
 2506 0186 1A70     		strb	r2, [r3]
 491:bluetooth_rxtx.c **** 		*data_len = 1;
 2507              		.loc 1 491 0
 2508 0188 3B68     		ldr	r3, [r7]
 2509 018a 0122     		movs	r2, #1
 2510 018c 1A60     		str	r2, [r3]
 492:bluetooth_rxtx.c **** 		break;
 2511              		.loc 1 492 0
 2512 018e 00F09ABC 		b	.L119
 2513              	.L66:
 493:bluetooth_rxtx.c **** 
 494:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 495:bluetooth_rxtx.c **** 		if (request_params[0])
 2514              		.loc 1 495 0
 2515 0192 BB68     		ldr	r3, [r7, #8]
 2516 0194 1B88     		ldrh	r3, [r3]
 2517 0196 002B     		cmp	r3, #0
 2518 0198 04D0     		beq	.L122
 496:bluetooth_rxtx.c **** 			RXLED_SET;
 2519              		.loc 1 496 0
 2520 019a 854B     		ldr	r3, .L163+8
 2521 019c 1022     		movs	r2, #16
 2522 019e 1A60     		str	r2, [r3]
 497:bluetooth_rxtx.c **** 		else
 498:bluetooth_rxtx.c **** 			RXLED_CLR;
 499:bluetooth_rxtx.c **** 		break;
 2523              		.loc 1 499 0
 2524 01a0 00F091BC 		b	.L119
 2525              	.L122:
 498:bluetooth_rxtx.c **** 		break;
 2526              		.loc 1 498 0
 2527 01a4 834B     		ldr	r3, .L163+12
 2528 01a6 1022     		movs	r2, #16
 2529 01a8 1A60     		str	r2, [r3]
 2530              		.loc 1 499 0
 2531 01aa 00F08CBC 		b	.L119
 2532              	.L67:
 500:bluetooth_rxtx.c **** 
 501:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 502:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2533              		.loc 1 502 0
 2534 01ae 7F4B     		ldr	r3, .L163+4
 2535 01b0 1B68     		ldr	r3, [r3]
 2536 01b2 03F48073 		and	r3, r3, #256
 2537 01b6 002B     		cmp	r3, #0
 2538 01b8 14BF     		ite	ne
 2539 01ba 0123     		movne	r3, #1
 2540 01bc 0023     		moveq	r3, #0
 2541 01be DBB2     		uxtb	r3, r3
 2542 01c0 1A46     		mov	r2, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 53


 2543 01c2 7B68     		ldr	r3, [r7, #4]
 2544 01c4 1A70     		strb	r2, [r3]
 503:bluetooth_rxtx.c **** 		*data_len = 1;
 2545              		.loc 1 503 0
 2546 01c6 3B68     		ldr	r3, [r7]
 2547 01c8 0122     		movs	r2, #1
 2548 01ca 1A60     		str	r2, [r3]
 504:bluetooth_rxtx.c **** 		break;
 2549              		.loc 1 504 0
 2550 01cc 00F07BBC 		b	.L119
 2551              	.L68:
 505:bluetooth_rxtx.c **** 
 506:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 507:bluetooth_rxtx.c **** 		if (request_params[0])
 2552              		.loc 1 507 0
 2553 01d0 BB68     		ldr	r3, [r7, #8]
 2554 01d2 1B88     		ldrh	r3, [r3]
 2555 01d4 002B     		cmp	r3, #0
 2556 01d6 05D0     		beq	.L124
 508:bluetooth_rxtx.c **** 			TXLED_SET;
 2557              		.loc 1 508 0
 2558 01d8 754B     		ldr	r3, .L163+8
 2559 01da 4FF48072 		mov	r2, #256
 2560 01de 1A60     		str	r2, [r3]
 509:bluetooth_rxtx.c **** 		else
 510:bluetooth_rxtx.c **** 			TXLED_CLR;
 511:bluetooth_rxtx.c **** 		break;
 2561              		.loc 1 511 0
 2562 01e0 00F071BC 		b	.L119
 2563              	.L124:
 510:bluetooth_rxtx.c **** 		break;
 2564              		.loc 1 510 0
 2565 01e4 734B     		ldr	r3, .L163+12
 2566 01e6 4FF48072 		mov	r2, #256
 2567 01ea 1A60     		str	r2, [r3]
 2568              		.loc 1 511 0
 2569 01ec 00F06BBC 		b	.L119
 2570              	.L69:
 512:bluetooth_rxtx.c **** 
 513:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 514:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2571              		.loc 1 514 0
 2572 01f0 6E4B     		ldr	r3, .L163+4
 2573 01f2 1B68     		ldr	r3, [r3]
 2574 01f4 03F40073 		and	r3, r3, #512
 2575 01f8 002B     		cmp	r3, #0
 2576 01fa 14BF     		ite	ne
 2577 01fc 0123     		movne	r3, #1
 2578 01fe 0023     		moveq	r3, #0
 2579 0200 DBB2     		uxtb	r3, r3
 2580 0202 1A46     		mov	r2, r3
 2581 0204 7B68     		ldr	r3, [r7, #4]
 2582 0206 1A70     		strb	r2, [r3]
 515:bluetooth_rxtx.c **** 		*data_len = 1;
 2583              		.loc 1 515 0
 2584 0208 3B68     		ldr	r3, [r7]
 2585 020a 0122     		movs	r2, #1
ARM GAS  /tmp/ccHz27EZ.s 			page 54


 2586 020c 1A60     		str	r2, [r3]
 516:bluetooth_rxtx.c **** 		break;
 2587              		.loc 1 516 0
 2588 020e 00F05ABC 		b	.L119
 2589              	.L70:
 517:bluetooth_rxtx.c **** 
 518:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 519:bluetooth_rxtx.c **** 		if (request_params[0])
 2590              		.loc 1 519 0
 2591 0212 BB68     		ldr	r3, [r7, #8]
 2592 0214 1B88     		ldrh	r3, [r3]
 2593 0216 002B     		cmp	r3, #0
 2594 0218 05D0     		beq	.L126
 520:bluetooth_rxtx.c **** 			CC1V8_SET;
 2595              		.loc 1 520 0
 2596 021a 654B     		ldr	r3, .L163+8
 2597 021c 4FF40072 		mov	r2, #512
 2598 0220 1A60     		str	r2, [r3]
 521:bluetooth_rxtx.c **** 		else
 522:bluetooth_rxtx.c **** 			CC1V8_CLR;
 523:bluetooth_rxtx.c **** 		break;
 2599              		.loc 1 523 0
 2600 0222 00F050BC 		b	.L119
 2601              	.L126:
 522:bluetooth_rxtx.c **** 		break;
 2602              		.loc 1 522 0
 2603 0226 634B     		ldr	r3, .L163+12
 2604 0228 4FF40072 		mov	r2, #512
 2605 022c 1A60     		str	r2, [r3]
 2606              		.loc 1 523 0
 2607 022e 00F04ABC 		b	.L119
 2608              	.L75:
 524:bluetooth_rxtx.c **** 
 525:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 526:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2609              		.loc 1 526 0
 2610 0232 3623     		movs	r3, #54
 2611 0234 7B62     		str	r3, [r7, #36]
 527:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2612              		.loc 1 527 0
 2613 0236 604B     		ldr	r3, .L163+16
 2614 0238 1B68     		ldr	r3, [r3]
 2615 023a 07F12401 		add	r1, r7, #36
 2616 023e 07F11002 		add	r2, r7, #16
 2617 0242 0846     		mov	r0, r1
 2618 0244 1146     		mov	r1, r2
 2619 0246 9847     		blx	r3
 528:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2620              		.loc 1 528 0
 2621 0248 3B69     		ldr	r3, [r7, #16]
 2622 024a DAB2     		uxtb	r2, r3
 2623 024c 7B68     		ldr	r3, [r7, #4]
 2624 024e 1A70     		strb	r2, [r3]
 529:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2625              		.loc 1 529 0
 2626 0250 7B68     		ldr	r3, [r7, #4]
 2627 0252 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccHz27EZ.s 			page 55


 2628 0254 7A69     		ldr	r2, [r7, #20]
 2629 0256 D2B2     		uxtb	r2, r2
 2630 0258 1A70     		strb	r2, [r3]
 530:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2631              		.loc 1 530 0
 2632 025a 7B68     		ldr	r3, [r7, #4]
 2633 025c 0233     		adds	r3, r3, #2
 2634 025e 7A69     		ldr	r2, [r7, #20]
 2635 0260 120A     		lsrs	r2, r2, #8
 2636 0262 D2B2     		uxtb	r2, r2
 2637 0264 1A70     		strb	r2, [r3]
 531:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2638              		.loc 1 531 0
 2639 0266 7B68     		ldr	r3, [r7, #4]
 2640 0268 0333     		adds	r3, r3, #3
 2641 026a 7A69     		ldr	r2, [r7, #20]
 2642 026c 120C     		lsrs	r2, r2, #16
 2643 026e D2B2     		uxtb	r2, r2
 2644 0270 1A70     		strb	r2, [r3]
 532:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2645              		.loc 1 532 0
 2646 0272 7B68     		ldr	r3, [r7, #4]
 2647 0274 0433     		adds	r3, r3, #4
 2648 0276 7A69     		ldr	r2, [r7, #20]
 2649 0278 120E     		lsrs	r2, r2, #24
 2650 027a D2B2     		uxtb	r2, r2
 2651 027c 1A70     		strb	r2, [r3]
 533:bluetooth_rxtx.c **** 		*data_len = 5;
 2652              		.loc 1 533 0
 2653 027e 3B68     		ldr	r3, [r7]
 2654 0280 0522     		movs	r2, #5
 2655 0282 1A60     		str	r2, [r3]
 534:bluetooth_rxtx.c **** 		break;
 2656              		.loc 1 534 0
 2657 0284 00F01FBC 		b	.L119
 2658              	.L73:
 535:bluetooth_rxtx.c **** 
 536:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 537:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2659              		.loc 1 537 0
 2660 0288 474B     		ldr	r3, .L163
 2661 028a 0B22     		movs	r2, #11
 2662 028c 1A70     		strb	r2, [r3]
 538:bluetooth_rxtx.c **** 		break;
 2663              		.loc 1 538 0
 2664 028e 00F01ABC 		b	.L119
 2665              	.L74:
 539:bluetooth_rxtx.c **** 
 540:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 541:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2666              		.loc 1 541 0
 2667 0292 3A23     		movs	r3, #58
 2668 0294 7B62     		str	r3, [r7, #36]
 542:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2669              		.loc 1 542 0
 2670 0296 484B     		ldr	r3, .L163+16
 2671 0298 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 56


 2672 029a 07F12401 		add	r1, r7, #36
 2673 029e 07F11002 		add	r2, r7, #16
 2674 02a2 0846     		mov	r0, r1
 2675 02a4 1146     		mov	r1, r2
 2676 02a6 9847     		blx	r3
 543:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2677              		.loc 1 543 0
 2678 02a8 3B69     		ldr	r3, [r7, #16]
 2679 02aa DAB2     		uxtb	r2, r3
 2680 02ac 7B68     		ldr	r3, [r7, #4]
 2681 02ae 1A70     		strb	r2, [r3]
 544:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2682              		.loc 1 544 0
 2683 02b0 7B68     		ldr	r3, [r7, #4]
 2684 02b2 0133     		adds	r3, r3, #1
 2685 02b4 7A69     		ldr	r2, [r7, #20]
 2686 02b6 D2B2     		uxtb	r2, r2
 2687 02b8 1A70     		strb	r2, [r3]
 545:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2688              		.loc 1 545 0
 2689 02ba 7B68     		ldr	r3, [r7, #4]
 2690 02bc 0233     		adds	r3, r3, #2
 2691 02be 7A69     		ldr	r2, [r7, #20]
 2692 02c0 120A     		lsrs	r2, r2, #8
 2693 02c2 D2B2     		uxtb	r2, r2
 2694 02c4 1A70     		strb	r2, [r3]
 546:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2695              		.loc 1 546 0
 2696 02c6 7B68     		ldr	r3, [r7, #4]
 2697 02c8 0333     		adds	r3, r3, #3
 2698 02ca 7A69     		ldr	r2, [r7, #20]
 2699 02cc 120C     		lsrs	r2, r2, #16
 2700 02ce D2B2     		uxtb	r2, r2
 2701 02d0 1A70     		strb	r2, [r3]
 547:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2702              		.loc 1 547 0
 2703 02d2 7B68     		ldr	r3, [r7, #4]
 2704 02d4 0433     		adds	r3, r3, #4
 2705 02d6 7A69     		ldr	r2, [r7, #20]
 2706 02d8 120E     		lsrs	r2, r2, #24
 2707 02da D2B2     		uxtb	r2, r2
 2708 02dc 1A70     		strb	r2, [r3]
 548:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2709              		.loc 1 548 0
 2710 02de 7B68     		ldr	r3, [r7, #4]
 2711 02e0 0533     		adds	r3, r3, #5
 2712 02e2 BA69     		ldr	r2, [r7, #24]
 2713 02e4 D2B2     		uxtb	r2, r2
 2714 02e6 1A70     		strb	r2, [r3]
 549:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2715              		.loc 1 549 0
 2716 02e8 7B68     		ldr	r3, [r7, #4]
 2717 02ea 0633     		adds	r3, r3, #6
 2718 02ec BA69     		ldr	r2, [r7, #24]
 2719 02ee 120A     		lsrs	r2, r2, #8
 2720 02f0 D2B2     		uxtb	r2, r2
 2721 02f2 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 57


 550:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2722              		.loc 1 550 0
 2723 02f4 7B68     		ldr	r3, [r7, #4]
 2724 02f6 0733     		adds	r3, r3, #7
 2725 02f8 BA69     		ldr	r2, [r7, #24]
 2726 02fa 120C     		lsrs	r2, r2, #16
 2727 02fc D2B2     		uxtb	r2, r2
 2728 02fe 1A70     		strb	r2, [r3]
 551:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2729              		.loc 1 551 0
 2730 0300 7B68     		ldr	r3, [r7, #4]
 2731 0302 0833     		adds	r3, r3, #8
 2732 0304 BA69     		ldr	r2, [r7, #24]
 2733 0306 120E     		lsrs	r2, r2, #24
 2734 0308 D2B2     		uxtb	r2, r2
 2735 030a 1A70     		strb	r2, [r3]
 552:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2736              		.loc 1 552 0
 2737 030c 7B68     		ldr	r3, [r7, #4]
 2738 030e 0933     		adds	r3, r3, #9
 2739 0310 FA69     		ldr	r2, [r7, #28]
 2740 0312 D2B2     		uxtb	r2, r2
 2741 0314 1A70     		strb	r2, [r3]
 553:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2742              		.loc 1 553 0
 2743 0316 7B68     		ldr	r3, [r7, #4]
 2744 0318 0A33     		adds	r3, r3, #10
 2745 031a FA69     		ldr	r2, [r7, #28]
 2746 031c 120A     		lsrs	r2, r2, #8
 2747 031e D2B2     		uxtb	r2, r2
 2748 0320 1A70     		strb	r2, [r3]
 554:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2749              		.loc 1 554 0
 2750 0322 7B68     		ldr	r3, [r7, #4]
 2751 0324 0B33     		adds	r3, r3, #11
 2752 0326 FA69     		ldr	r2, [r7, #28]
 2753 0328 120C     		lsrs	r2, r2, #16
 2754 032a D2B2     		uxtb	r2, r2
 2755 032c 1A70     		strb	r2, [r3]
 555:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2756              		.loc 1 555 0
 2757 032e 7B68     		ldr	r3, [r7, #4]
 2758 0330 0C33     		adds	r3, r3, #12
 2759 0332 FA69     		ldr	r2, [r7, #28]
 2760 0334 120E     		lsrs	r2, r2, #24
 2761 0336 D2B2     		uxtb	r2, r2
 2762 0338 1A70     		strb	r2, [r3]
 556:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2763              		.loc 1 556 0
 2764 033a 7B68     		ldr	r3, [r7, #4]
 2765 033c 0D33     		adds	r3, r3, #13
 2766 033e 3A6A     		ldr	r2, [r7, #32]
 2767 0340 D2B2     		uxtb	r2, r2
 2768 0342 1A70     		strb	r2, [r3]
 557:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2769              		.loc 1 557 0
 2770 0344 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccHz27EZ.s 			page 58


 2771 0346 0E33     		adds	r3, r3, #14
 2772 0348 3A6A     		ldr	r2, [r7, #32]
 2773 034a 120A     		lsrs	r2, r2, #8
 2774 034c D2B2     		uxtb	r2, r2
 2775 034e 1A70     		strb	r2, [r3]
 558:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2776              		.loc 1 558 0
 2777 0350 7B68     		ldr	r3, [r7, #4]
 2778 0352 0F33     		adds	r3, r3, #15
 2779 0354 3A6A     		ldr	r2, [r7, #32]
 2780 0356 120C     		lsrs	r2, r2, #16
 2781 0358 D2B2     		uxtb	r2, r2
 2782 035a 1A70     		strb	r2, [r3]
 559:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2783              		.loc 1 559 0
 2784 035c 7B68     		ldr	r3, [r7, #4]
 2785 035e 1033     		adds	r3, r3, #16
 2786 0360 3A6A     		ldr	r2, [r7, #32]
 2787 0362 120E     		lsrs	r2, r2, #24
 2788 0364 D2B2     		uxtb	r2, r2
 2789 0366 1A70     		strb	r2, [r3]
 560:bluetooth_rxtx.c **** 		*data_len = 17;
 2790              		.loc 1 560 0
 2791 0368 3B68     		ldr	r3, [r7]
 2792 036a 1122     		movs	r2, #17
 2793 036c 1A60     		str	r2, [r3]
 561:bluetooth_rxtx.c **** 		break;
 2794              		.loc 1 561 0
 2795 036e AAE3     		b	.L119
 2796              	.L76:
 562:bluetooth_rxtx.c **** 
 563:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 564:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 565:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2797              		.loc 1 565 0
 2798 0370 124B     		ldr	r3, .L163+20
 2799 0372 1B68     		ldr	r3, [r3]
 2800 0374 03F08003 		and	r3, r3, #128
 2801 0378 002B     		cmp	r3, #0
 2802 037a 14BF     		ite	ne
 2803 037c 0123     		movne	r3, #1
 2804 037e 0023     		moveq	r3, #0
 2805 0380 DBB2     		uxtb	r3, r3
 2806 0382 1A46     		mov	r2, r3
 2807 0384 7B68     		ldr	r3, [r7, #4]
 2808 0386 1A70     		strb	r2, [r3]
 566:bluetooth_rxtx.c **** 		*data_len = 1;
 2809              		.loc 1 566 0
 2810 0388 3B68     		ldr	r3, [r7]
 2811 038a 0122     		movs	r2, #1
 2812 038c 1A60     		str	r2, [r3]
 567:bluetooth_rxtx.c **** 		break;
 2813              		.loc 1 567 0
 2814 038e 9AE3     		b	.L119
 2815              	.L77:
 568:bluetooth_rxtx.c **** 
 569:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
ARM GAS  /tmp/ccHz27EZ.s 			page 59


 570:bluetooth_rxtx.c **** 		if (request_params[0])
 2816              		.loc 1 570 0
 2817 0390 BB68     		ldr	r3, [r7, #8]
 2818 0392 1B88     		ldrh	r3, [r3]
 2819 0394 002B     		cmp	r3, #0
 2820 0396 03D0     		beq	.L128
 571:bluetooth_rxtx.c **** 			PAEN_SET;
 2821              		.loc 1 571 0
 2822 0398 094B     		ldr	r3, .L163+24
 2823 039a 8022     		movs	r2, #128
 2824 039c 1A60     		str	r2, [r3]
 572:bluetooth_rxtx.c **** 		else
 573:bluetooth_rxtx.c **** 			PAEN_CLR;
 574:bluetooth_rxtx.c **** 		break;
 2825              		.loc 1 574 0
 2826 039e 92E3     		b	.L119
 2827              	.L128:
 573:bluetooth_rxtx.c **** 		break;
 2828              		.loc 1 573 0
 2829 03a0 084B     		ldr	r3, .L163+28
 2830 03a2 8022     		movs	r2, #128
 2831 03a4 1A60     		str	r2, [r3]
 2832              		.loc 1 574 0
 2833 03a6 8EE3     		b	.L119
 2834              	.L164:
 2835              		.align	2
 2836              	.L163:
 2837 03a8 00000000 		.word	requested_mode
 2838 03ac 34C00920 		.word	537509940
 2839 03b0 38C00920 		.word	537509944
 2840 03b4 3CC00920 		.word	537509948
 2841 03b8 00000000 		.word	iap_entry
 2842 03bc 54C00920 		.word	537509972
 2843 03c0 58C00920 		.word	537509976
 2844 03c4 5CC00920 		.word	537509980
 2845              	.L78:
 575:bluetooth_rxtx.c **** 
 576:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 577:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2846              		.loc 1 577 0
 2847 03c8 924B     		ldr	r3, .L165
 2848 03ca 1B68     		ldr	r3, [r3]
 2849 03cc 03F48073 		and	r3, r3, #256
 2850 03d0 002B     		cmp	r3, #0
 2851 03d2 14BF     		ite	ne
 2852 03d4 0123     		movne	r3, #1
 2853 03d6 0023     		moveq	r3, #0
 2854 03d8 DBB2     		uxtb	r3, r3
 2855 03da 1A46     		mov	r2, r3
 2856 03dc 7B68     		ldr	r3, [r7, #4]
 2857 03de 1A70     		strb	r2, [r3]
 578:bluetooth_rxtx.c **** 		*data_len = 1;
 2858              		.loc 1 578 0
 2859 03e0 3B68     		ldr	r3, [r7]
 2860 03e2 0122     		movs	r2, #1
 2861 03e4 1A60     		str	r2, [r3]
 579:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccHz27EZ.s 			page 60


 2862              		.loc 1 579 0
 2863 03e6 6EE3     		b	.L119
 2864              	.L79:
 580:bluetooth_rxtx.c **** 
 581:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 582:bluetooth_rxtx.c **** 		if (request_params[0])
 2865              		.loc 1 582 0
 2866 03e8 BB68     		ldr	r3, [r7, #8]
 2867 03ea 1B88     		ldrh	r3, [r3]
 2868 03ec 002B     		cmp	r3, #0
 2869 03ee 04D0     		beq	.L130
 583:bluetooth_rxtx.c **** 			HGM_SET;
 2870              		.loc 1 583 0
 2871 03f0 894B     		ldr	r3, .L165+4
 2872 03f2 4FF48072 		mov	r2, #256
 2873 03f6 1A60     		str	r2, [r3]
 584:bluetooth_rxtx.c **** 		else
 585:bluetooth_rxtx.c **** 			HGM_CLR;
 586:bluetooth_rxtx.c **** 		break;
 2874              		.loc 1 586 0
 2875 03f8 65E3     		b	.L119
 2876              	.L130:
 585:bluetooth_rxtx.c **** 		break;
 2877              		.loc 1 585 0
 2878 03fa 884B     		ldr	r3, .L165+8
 2879 03fc 4FF48072 		mov	r2, #256
 2880 0400 1A60     		str	r2, [r3]
 2881              		.loc 1 586 0
 2882 0402 60E3     		b	.L119
 2883              	.L80:
 587:bluetooth_rxtx.c **** #endif
 588:bluetooth_rxtx.c **** 
 589:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 590:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 591:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2884              		.loc 1 591 0
 2885 0404 864B     		ldr	r3, .L165+12
 2886 0406 0322     		movs	r2, #3
 2887 0408 1A70     		strb	r2, [r3]
 592:bluetooth_rxtx.c **** 		break;
 2888              		.loc 1 592 0
 2889 040a 5CE3     		b	.L119
 2890              	.L87:
 593:bluetooth_rxtx.c **** 
 594:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 595:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2891              		.loc 1 595 0
 2892 040c 0520     		movs	r0, #5
 2893 040e FFF7FEFF 		bl	cc2400_get
 2894 0412 0346     		mov	r3, r0
 2895 0414 DBB2     		uxtb	r3, r3
 2896 0416 03F00703 		and	r3, r3, #7
 2897 041a DAB2     		uxtb	r2, r3
 2898 041c 7B68     		ldr	r3, [r7, #4]
 2899 041e 1A70     		strb	r2, [r3]
 596:bluetooth_rxtx.c **** 		*data_len = 1;
 2900              		.loc 1 596 0
ARM GAS  /tmp/ccHz27EZ.s 			page 61


 2901 0420 3B68     		ldr	r3, [r7]
 2902 0422 0122     		movs	r2, #1
 2903 0424 1A60     		str	r2, [r3]
 597:bluetooth_rxtx.c **** 		break;
 2904              		.loc 1 597 0
 2905 0426 4EE3     		b	.L119
 2906              	.L88:
 598:bluetooth_rxtx.c **** 
 599:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 600:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2907              		.loc 1 600 0
 2908 0428 BB68     		ldr	r3, [r7, #8]
 2909 042a 1B88     		ldrh	r3, [r3]
 2910 042c 072B     		cmp	r3, #7
 2911 042e 09D8     		bhi	.L132
 601:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2912              		.loc 1 601 0
 2913 0430 BB68     		ldr	r3, [r7, #8]
 2914 0432 1B88     		ldrh	r3, [r3]
 2915 0434 43F00803 		orr	r3, r3, #8
 2916 0438 9BB2     		uxth	r3, r3
 2917 043a 0520     		movs	r0, #5
 2918 043c 1946     		mov	r1, r3
 2919 043e FFF7FEFF 		bl	cc2400_set
 602:bluetooth_rxtx.c **** 		} else {
 603:bluetooth_rxtx.c **** 			return 0;
 604:bluetooth_rxtx.c **** 		}
 605:bluetooth_rxtx.c **** 		break;
 2920              		.loc 1 605 0
 2921 0442 40E3     		b	.L119
 2922              	.L132:
 603:bluetooth_rxtx.c **** 		}
 2923              		.loc 1 603 0
 2924 0444 0023     		movs	r3, #0
 2925 0446 3FE3     		b	.L161
 2926              	.L90:
 606:bluetooth_rxtx.c **** 
 607:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 608:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2927              		.loc 1 608 0
 2928 0448 754B     		ldr	r3, .L165+12
 2929 044a 0522     		movs	r2, #5
 2930 044c 1A70     		strb	r2, [r3]
 609:bluetooth_rxtx.c **** 		break;
 2931              		.loc 1 609 0
 2932 044e 3AE3     		b	.L119
 2933              	.L89:
 610:bluetooth_rxtx.c **** 
 611:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 612:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2934              		.loc 1 612 0
 2935 0450 734B     		ldr	r3, .L165+12
 2936 0452 0622     		movs	r2, #6
 2937 0454 1A70     		strb	r2, [r3]
 613:bluetooth_rxtx.c **** 		break;
 2938              		.loc 1 613 0
 2939 0456 36E3     		b	.L119
ARM GAS  /tmp/ccHz27EZ.s 			page 62


 2940              	.L91:
 614:bluetooth_rxtx.c **** #endif
 615:bluetooth_rxtx.c **** 
 616:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 617:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2941              		.loc 1 617 0
 2942 0458 724B     		ldr	r3, .L165+16
 2943 045a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2944 045c 7B68     		ldr	r3, [r7, #4]
 2945 045e 1A70     		strb	r2, [r3]
 618:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2946              		.loc 1 618 0
 2947 0460 7B68     		ldr	r3, [r7, #4]
 2948 0462 0133     		adds	r3, r3, #1
 2949 0464 6F4A     		ldr	r2, .L165+16
 2950 0466 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2951 0468 1A70     		strb	r2, [r3]
 619:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2952              		.loc 1 619 0
 2953 046a 7B68     		ldr	r3, [r7, #4]
 2954 046c 0233     		adds	r3, r3, #2
 2955 046e 6D4A     		ldr	r2, .L165+16
 2956 0470 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2957 0472 1A70     		strb	r2, [r3]
 620:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2958              		.loc 1 620 0
 2959 0474 7B68     		ldr	r3, [r7, #4]
 2960 0476 0333     		adds	r3, r3, #3
 2961 0478 6A4A     		ldr	r2, .L165+16
 2962 047a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2963 047c 1A70     		strb	r2, [r3]
 621:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2964              		.loc 1 621 0
 2965 047e 7B68     		ldr	r3, [r7, #4]
 2966 0480 0433     		adds	r3, r3, #4
 2967 0482 684A     		ldr	r2, .L165+16
 2968 0484 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2969 0486 1A70     		strb	r2, [r3]
 622:bluetooth_rxtx.c **** 		*data_len = 5;
 2970              		.loc 1 622 0
 2971 0488 3B68     		ldr	r3, [r7]
 2972 048a 0522     		movs	r2, #5
 2973 048c 1A60     		str	r2, [r3]
 623:bluetooth_rxtx.c **** 		break;
 2974              		.loc 1 623 0
 2975 048e 1AE3     		b	.L119
 2976              	.L81:
 624:bluetooth_rxtx.c **** 
 625:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 626:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2977              		.loc 1 626 0
 2978 0490 634B     		ldr	r3, .L165+12
 2979 0492 0022     		movs	r2, #0
 2980 0494 1A70     		strb	r2, [r3]
 627:bluetooth_rxtx.c **** 		break;
 2981              		.loc 1 627 0
 2982 0496 16E3     		b	.L119
ARM GAS  /tmp/ccHz27EZ.s 			page 63


 2983              	.L82:
 628:bluetooth_rxtx.c **** 
 629:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 630:bluetooth_rxtx.c **** 		data[0] = modulation;
 2984              		.loc 1 630 0
 2985 0498 634B     		ldr	r3, .L165+20
 2986 049a 1B78     		ldrb	r3, [r3]
 2987 049c DAB2     		uxtb	r2, r3
 2988 049e 7B68     		ldr	r3, [r7, #4]
 2989 04a0 1A70     		strb	r2, [r3]
 631:bluetooth_rxtx.c **** 		*data_len = 1;
 2990              		.loc 1 631 0
 2991 04a2 3B68     		ldr	r3, [r7]
 2992 04a4 0122     		movs	r2, #1
 2993 04a6 1A60     		str	r2, [r3]
 632:bluetooth_rxtx.c **** 		break;
 2994              		.loc 1 632 0
 2995 04a8 0DE3     		b	.L119
 2996              	.L83:
 633:bluetooth_rxtx.c **** 
 634:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 635:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2997              		.loc 1 635 0
 2998 04aa BB68     		ldr	r3, [r7, #8]
 2999 04ac 1B88     		ldrh	r3, [r3]
 3000 04ae DAB2     		uxtb	r2, r3
 3001 04b0 5D4B     		ldr	r3, .L165+20
 3002 04b2 1A70     		strb	r2, [r3]
 636:bluetooth_rxtx.c **** 		break;
 3003              		.loc 1 636 0
 3004 04b4 07E3     		b	.L119
 3005              	.L71:
 637:bluetooth_rxtx.c **** 
 638:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 639:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 3006              		.loc 1 639 0
 3007 04b6 5D4B     		ldr	r3, .L165+24
 3008 04b8 1B88     		ldrh	r3, [r3]	@ movhi
 3009 04ba 9BB2     		uxth	r3, r3
 3010 04bc DAB2     		uxtb	r2, r3
 3011 04be 7B68     		ldr	r3, [r7, #4]
 3012 04c0 1A70     		strb	r2, [r3]
 640:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 3013              		.loc 1 640 0
 3014 04c2 7B68     		ldr	r3, [r7, #4]
 3015 04c4 0133     		adds	r3, r3, #1
 3016 04c6 594A     		ldr	r2, .L165+24
 3017 04c8 1288     		ldrh	r2, [r2]	@ movhi
 3018 04ca 92B2     		uxth	r2, r2
 3019 04cc 120A     		lsrs	r2, r2, #8
 3020 04ce 92B2     		uxth	r2, r2
 3021 04d0 D2B2     		uxtb	r2, r2
 3022 04d2 1A70     		strb	r2, [r3]
 641:bluetooth_rxtx.c **** 		*data_len = 2;
 3023              		.loc 1 641 0
 3024 04d4 3B68     		ldr	r3, [r7]
 3025 04d6 0222     		movs	r2, #2
ARM GAS  /tmp/ccHz27EZ.s 			page 64


 3026 04d8 1A60     		str	r2, [r3]
 642:bluetooth_rxtx.c **** 		break;
 3027              		.loc 1 642 0
 3028 04da F4E2     		b	.L119
 3029              	.L72:
 643:bluetooth_rxtx.c **** 
 644:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 645:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 3030              		.loc 1 645 0
 3031 04dc BB68     		ldr	r3, [r7, #8]
 3032 04de 1A88     		ldrh	r2, [r3]
 3033 04e0 534B     		ldr	r3, .L165+28
 3034 04e2 1A80     		strh	r2, [r3]	@ movhi
 646:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 647:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 3035              		.loc 1 647 0
 3036 04e4 524B     		ldr	r3, .L165+28
 3037 04e6 1B88     		ldrh	r3, [r3]	@ movhi
 3038 04e8 9BB2     		uxth	r3, r3
 3039 04ea 40F6EA22 		movw	r2, #2794
 3040 04ee 9342     		cmp	r3, r2
 3041 04f0 07D9     		bls	.L135
 648:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 3042              		.loc 1 648 0
 3043 04f2 504B     		ldr	r3, .L165+32
 3044 04f4 0122     		movs	r2, #1
 3045 04f6 1A70     		strb	r2, [r3]
 649:bluetooth_rxtx.c **** 			requested_channel = 2402;
 3046              		.loc 1 649 0
 3047 04f8 4D4B     		ldr	r3, .L165+28
 3048 04fa 40F66212 		movw	r2, #2402
 3049 04fe 1A80     		strh	r2, [r3]	@ movhi
 3050 0500 20E0     		b	.L136
 3051              	.L135:
 650:bluetooth_rxtx.c **** 		}
 651:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 652:bluetooth_rxtx.c **** 		else {
 653:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 3052              		.loc 1 653 0
 3053 0502 4C4B     		ldr	r3, .L165+32
 3054 0504 0022     		movs	r2, #0
 3055 0506 1A70     		strb	r2, [r3]
 654:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 3056              		.loc 1 654 0
 3057 0508 494B     		ldr	r3, .L165+28
 3058 050a 1B88     		ldrh	r3, [r3]	@ movhi
 3059 050c 9BB2     		uxth	r3, r3
 3060 050e 40F6DC02 		movw	r2, #2268
 3061 0512 9342     		cmp	r3, r2
 3062 0514 03D9     		bls	.L137
 3063              		.loc 1 654 0 is_stmt 0 discriminator 1
 3064 0516 464B     		ldr	r3, .L165+28
 3065 0518 1B88     		ldrh	r3, [r3]	@ movhi
 3066 051a 9BB2     		uxth	r3, r3
 3067 051c 01E0     		b	.L138
 3068              	.L137:
 3069              		.loc 1 654 0 discriminator 2
ARM GAS  /tmp/ccHz27EZ.s 			page 65


 3070 051e 40F6DC03 		movw	r3, #2268
 3071              	.L138:
 3072              		.loc 1 654 0 discriminator 4
 3073 0522 434A     		ldr	r2, .L165+28
 3074 0524 1380     		strh	r3, [r2]	@ movhi
 655:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 3075              		.loc 1 655 0 is_stmt 1 discriminator 4
 3076 0526 424B     		ldr	r3, .L165+28
 3077 0528 1B88     		ldrh	r3, [r3]	@ movhi
 3078 052a 9BB2     		uxth	r3, r3
 3079 052c 40F6E922 		movw	r2, #2793
 3080 0530 9342     		cmp	r3, r2
 3081 0532 03D8     		bhi	.L139
 3082              		.loc 1 655 0 is_stmt 0 discriminator 1
 3083 0534 3E4B     		ldr	r3, .L165+28
 3084 0536 1B88     		ldrh	r3, [r3]	@ movhi
 3085 0538 9BB2     		uxth	r3, r3
 3086 053a 01E0     		b	.L140
 3087              	.L139:
 3088              		.loc 1 655 0 discriminator 2
 3089 053c 40F6EA23 		movw	r3, #2794
 3090              	.L140:
 3091              		.loc 1 655 0 discriminator 4
 3092 0540 3B4A     		ldr	r2, .L165+28
 3093 0542 1380     		strh	r3, [r2]	@ movhi
 3094              	.L136:
 656:bluetooth_rxtx.c **** 		}
 657:bluetooth_rxtx.c **** 
 658:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 3095              		.loc 1 658 0 is_stmt 1
 3096 0544 3C4B     		ldr	r3, .L165+36
 3097 0546 1B78     		ldrb	r3, [r3]
 3098 0548 DBB2     		uxtb	r3, r3
 3099 054a 092B     		cmp	r3, #9
 3100 054c 0AD0     		beq	.L141
 659:bluetooth_rxtx.c **** 			channel = requested_channel;
 3101              		.loc 1 659 0
 3102 054e 384B     		ldr	r3, .L165+28
 3103 0550 1B88     		ldrh	r3, [r3]	@ movhi
 3104 0552 9AB2     		uxth	r2, r3
 3105 0554 354B     		ldr	r3, .L165+24
 3106 0556 1A80     		strh	r2, [r3]	@ movhi
 660:bluetooth_rxtx.c **** 			requested_channel = 0;
 3107              		.loc 1 660 0
 3108 0558 354B     		ldr	r3, .L165+28
 3109 055a 0022     		movs	r2, #0
 3110 055c 1A80     		strh	r2, [r3]	@ movhi
 661:bluetooth_rxtx.c **** 
 662:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 663:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 664:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 3111              		.loc 1 664 0
 3112 055e FFF7FEFF 		bl	cs_threshold_calc_and_set
 665:bluetooth_rxtx.c **** 		}
 666:bluetooth_rxtx.c **** 		break;
 3113              		.loc 1 666 0
 3114 0562 B0E2     		b	.L119
ARM GAS  /tmp/ccHz27EZ.s 			page 66


 3115              	.L141:
 3116 0564 AFE2     		b	.L119
 3117              	.L84:
 667:bluetooth_rxtx.c **** 
 668:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 669:bluetooth_rxtx.c **** 		command[0] = 57;
 3118              		.loc 1 669 0
 3119 0566 3923     		movs	r3, #57
 3120 0568 7B62     		str	r3, [r7, #36]
 670:bluetooth_rxtx.c **** 		iap_entry(command, result);
 3121              		.loc 1 670 0
 3122 056a 344B     		ldr	r3, .L165+40
 3123 056c 1B68     		ldr	r3, [r3]
 3124 056e 07F12401 		add	r1, r7, #36
 3125 0572 07F11002 		add	r2, r7, #16
 3126 0576 0846     		mov	r0, r1
 3127 0578 1146     		mov	r1, r2
 3128 057a 9847     		blx	r3
 671:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 3129              		.loc 1 671 0
 3130 057c 3B68     		ldr	r3, [r7]
 3131 057e 0022     		movs	r2, #0
 3132 0580 1A60     		str	r2, [r3]
 672:bluetooth_rxtx.c **** 		break;
 3133              		.loc 1 672 0
 3134 0582 A0E2     		b	.L119
 3135              	.L85:
 673:bluetooth_rxtx.c **** 
 674:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 675:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 3136              		.loc 1 675 0
 3137 0584 2E4B     		ldr	r3, .L165+44
 3138 0586 2F4A     		ldr	r2, .L165+48
 3139 0588 1A60     		str	r2, [r3]
 676:bluetooth_rxtx.c **** 		reset();
 3140              		.loc 1 676 0
 3141 058a FFF7FEFF 		bl	reset
 677:bluetooth_rxtx.c **** 		break;
 3142              		.loc 1 677 0
 3143 058e 9AE2     		b	.L119
 3144              	.L86:
 678:bluetooth_rxtx.c **** 
 679:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 680:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 3145              		.loc 1 680 0
 3146 0590 BB68     		ldr	r3, [r7, #8]
 3147 0592 1B88     		ldrh	r3, [r3]
 3148 0594 B3F5006F 		cmp	r3, #2048
 3149 0598 17D9     		bls	.L142
 3150              		.loc 1 680 0 is_stmt 0 discriminator 1
 3151 059a BB68     		ldr	r3, [r7, #8]
 3152 059c 1B88     		ldrh	r3, [r3]
 3153 059e B3F5406F 		cmp	r3, #3072
 3154 05a2 12D8     		bhi	.L142
 681:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3155              		.loc 1 681 0 is_stmt 1 discriminator 2
 3156 05a4 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccHz27EZ.s 			page 67


 3157 05a6 0233     		adds	r3, r3, #2
 3158 05a8 1B88     		ldrh	r3, [r3]
 680:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3159              		.loc 1 680 0 discriminator 2
 3160 05aa B3F5006F 		cmp	r3, #2048
 3161 05ae 0CD9     		bls	.L142
 3162              		.loc 1 681 0
 3163 05b0 BB68     		ldr	r3, [r7, #8]
 3164 05b2 0233     		adds	r3, r3, #2
 3165 05b4 1B88     		ldrh	r3, [r3]
 3166 05b6 B3F5406F 		cmp	r3, #3072
 3167 05ba 06D8     		bhi	.L142
 682:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 3168              		.loc 1 682 0 discriminator 1
 3169 05bc BB68     		ldr	r3, [r7, #8]
 3170 05be 0233     		adds	r3, r3, #2
 3171 05c0 1A88     		ldrh	r2, [r3]
 3172 05c2 BB68     		ldr	r3, [r7, #8]
 3173 05c4 1B88     		ldrh	r3, [r3]
 681:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3174              		.loc 1 681 0 discriminator 1
 3175 05c6 9A42     		cmp	r2, r3
 3176 05c8 01D2     		bcs	.L143
 3177              	.L142:
 683:bluetooth_rxtx.c **** 			return 0;
 3178              		.loc 1 683 0
 3179 05ca 0023     		movs	r3, #0
 3180 05cc 7CE2     		b	.L161
 3181              	.L143:
 684:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 3182              		.loc 1 684 0
 3183 05ce BB68     		ldr	r3, [r7, #8]
 3184 05d0 1A88     		ldrh	r2, [r3]
 3185 05d2 1D4B     		ldr	r3, .L165+52
 3186 05d4 1A80     		strh	r2, [r3]	@ movhi
 685:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 3187              		.loc 1 685 0
 3188 05d6 BB68     		ldr	r3, [r7, #8]
 3189 05d8 5A88     		ldrh	r2, [r3, #2]
 3190 05da 1C4B     		ldr	r3, .L165+56
 3191 05dc 1A80     		strh	r2, [r3]	@ movhi
 686:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 3192              		.loc 1 686 0
 3193 05de 104B     		ldr	r3, .L165+12
 3194 05e0 0422     		movs	r2, #4
 3195 05e2 1A70     		strb	r2, [r3]
 687:bluetooth_rxtx.c **** 		*data_len = 0;
 3196              		.loc 1 687 0
 3197 05e4 3B68     		ldr	r3, [r7]
 3198 05e6 0022     		movs	r2, #0
 3199 05e8 1A60     		str	r2, [r3]
 688:bluetooth_rxtx.c **** 		break;
 3200              		.loc 1 688 0
 3201 05ea 6CE2     		b	.L119
 3202              	.L93:
 689:bluetooth_rxtx.c **** 
 690:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
ARM GAS  /tmp/ccHz27EZ.s 			page 68


 691:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 3203              		.loc 1 691 0
 3204 05ec BB68     		ldr	r3, [r7, #8]
 3205 05ee 1B88     		ldrh	r3, [r3]
 3206 05f0 B3F5807F 		cmp	r3, #256
 3207 05f4 01D9     		bls	.L144
 692:bluetooth_rxtx.c **** 			return 0;
 3208              		.loc 1 692 0
 3209 05f6 0023     		movs	r3, #0
 3210 05f8 66E2     		b	.L161
 3211              	.L144:
 693:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 3212              		.loc 1 693 0
 3213 05fa BB68     		ldr	r3, [r7, #8]
 3214 05fc 1B88     		ldrh	r3, [r3]
 3215 05fe DAB2     		uxtb	r2, r3
 3216 0600 134B     		ldr	r3, .L165+60
 3217 0602 1A70     		strb	r2, [r3]
 694:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 3218              		.loc 1 694 0
 3219 0604 064B     		ldr	r3, .L165+12
 3220 0606 0722     		movs	r2, #7
 3221 0608 1A70     		strb	r2, [r3]
 695:bluetooth_rxtx.c **** 		*data_len = 0;
 3222              		.loc 1 695 0
 3223 060a 3B68     		ldr	r3, [r7]
 3224 060c 0022     		movs	r2, #0
 3225 060e 1A60     		str	r2, [r3]
 696:bluetooth_rxtx.c **** 		break;
 3226              		.loc 1 696 0
 3227 0610 59E2     		b	.L119
 3228              	.L166:
 3229 0612 00BF     		.align	2
 3230              	.L165:
 3231 0614 54C00920 		.word	537509972
 3232 0618 58C00920 		.word	537509976
 3233 061c 5CC00920 		.word	537509980
 3234 0620 00000000 		.word	requested_mode
 3235 0624 00000000 		.word	rr
 3236 0628 00000000 		.word	modulation
 3237 062c 00000000 		.word	channel
 3238 0630 00000000 		.word	requested_channel
 3239 0634 00000000 		.word	hop_mode
 3240 0638 00000000 		.word	mode
 3241 063c 00000000 		.word	iap_entry
 3242 0640 00000000 		.word	bootloader_ctrl
 3243 0644 21BB0543 		.word	1124449057
 3244 0648 00000000 		.word	low_freq
 3245 064c 00000000 		.word	high_freq
 3246 0650 00000000 		.word	rssi_threshold
 3247              	.L92:
 697:bluetooth_rxtx.c **** 
 698:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 699:bluetooth_rxtx.c **** 		data[0] = 0x00;
 3248              		.loc 1 699 0
 3249 0654 7B68     		ldr	r3, [r7, #4]
 3250 0656 0022     		movs	r2, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 69


 3251 0658 1A70     		strb	r2, [r3]
 700:bluetooth_rxtx.c **** 		data[1] = 0x00;
 3252              		.loc 1 700 0
 3253 065a 7B68     		ldr	r3, [r7, #4]
 3254 065c 0133     		adds	r3, r3, #1
 3255 065e 0022     		movs	r2, #0
 3256 0660 1A70     		strb	r2, [r3]
 701:bluetooth_rxtx.c **** 
 702:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 3257              		.loc 1 702 0
 3258 0662 A448     		ldr	r0, .L167
 3259 0664 FFF7FEFF 		bl	strlen
 3260 0668 0346     		mov	r3, r0
 3261 066a 87F84330 		strb	r3, [r7, #67]
 703:bluetooth_rxtx.c **** 		data[2] = length;
 3262              		.loc 1 703 0
 3263 066e 7B68     		ldr	r3, [r7, #4]
 3264 0670 0233     		adds	r3, r3, #2
 3265 0672 97F84320 		ldrb	r2, [r7, #67]
 3266 0676 1A70     		strb	r2, [r3]
 704:bluetooth_rxtx.c **** 
 705:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 3267              		.loc 1 705 0
 3268 0678 7B68     		ldr	r3, [r7, #4]
 3269 067a DA1C     		adds	r2, r3, #3
 3270 067c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3271 0680 1046     		mov	r0, r2
 3272 0682 9C49     		ldr	r1, .L167
 3273 0684 1A46     		mov	r2, r3
 3274 0686 FFF7FEFF 		bl	memcpy
 706:bluetooth_rxtx.c **** 
 707:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 3275              		.loc 1 707 0
 3276 068a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3277 068e DA1C     		adds	r2, r3, #3
 3278 0690 3B68     		ldr	r3, [r7]
 3279 0692 1A60     		str	r2, [r3]
 708:bluetooth_rxtx.c **** 		break;
 3280              		.loc 1 708 0
 3281 0694 17E2     		b	.L119
 3282              	.L114:
 709:bluetooth_rxtx.c **** 
 710:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 711:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 3283              		.loc 1 711 0
 3284 0696 9848     		ldr	r0, .L167+4
 3285 0698 FFF7FEFF 		bl	strlen
 3286 069c 0346     		mov	r3, r0
 3287 069e 87F84330 		strb	r3, [r7, #67]
 712:bluetooth_rxtx.c **** 		data[0] = length;
 3288              		.loc 1 712 0
 3289 06a2 7B68     		ldr	r3, [r7, #4]
 3290 06a4 97F84320 		ldrb	r2, [r7, #67]
 3291 06a8 1A70     		strb	r2, [r3]
 713:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 3292              		.loc 1 713 0
 3293 06aa 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccHz27EZ.s 			page 70


 3294 06ac 5A1C     		adds	r2, r3, #1
 3295 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3296 06b2 1046     		mov	r0, r2
 3297 06b4 9049     		ldr	r1, .L167+4
 3298 06b6 1A46     		mov	r2, r3
 3299 06b8 FFF7FEFF 		bl	memcpy
 714:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 3300              		.loc 1 714 0
 3301 06bc 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3302 06c0 5A1C     		adds	r2, r3, #1
 3303 06c2 3B68     		ldr	r3, [r7]
 3304 06c4 1A60     		str	r2, [r3]
 715:bluetooth_rxtx.c **** 		break;
 3305              		.loc 1 715 0
 3306 06c6 FEE1     		b	.L119
 3307              	.L94:
 716:bluetooth_rxtx.c **** 
 717:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 718:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 3308              		.loc 1 718 0
 3309 06c8 7B68     		ldr	r3, [r7, #4]
 3310 06ca 0122     		movs	r2, #1
 3311 06cc 1A70     		strb	r2, [r3]
 719:bluetooth_rxtx.c **** 		*data_len = 1;
 3312              		.loc 1 719 0
 3313 06ce 3B68     		ldr	r3, [r7]
 3314 06d0 0122     		movs	r2, #1
 3315 06d2 1A60     		str	r2, [r3]
 720:bluetooth_rxtx.c **** 		break;
 3316              		.loc 1 720 0
 3317 06d4 F7E1     		b	.L119
 3318              	.L95:
 721:bluetooth_rxtx.c **** 
 722:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 723:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 3319              		.loc 1 723 0
 3320 06d6 BB68     		ldr	r3, [r7, #8]
 3321 06d8 1B88     		ldrh	r3, [r3]
 3322 06da DAB2     		uxtb	r2, r3
 3323 06dc 874B     		ldr	r3, .L167+8
 3324 06de 1A70     		strb	r2, [r3]
 724:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3325              		.loc 1 724 0
 3326 06e0 FFF7FEFF 		bl	cs_threshold_calc_and_set
 725:bluetooth_rxtx.c **** 		break;
 3327              		.loc 1 725 0
 3328 06e4 EFE1     		b	.L119
 3329              	.L96:
 726:bluetooth_rxtx.c **** 
 727:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 728:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 3330              		.loc 1 728 0
 3331 06e6 854B     		ldr	r3, .L167+8
 3332 06e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3333 06ea DAB2     		uxtb	r2, r3
 3334 06ec 7B68     		ldr	r3, [r7, #4]
 3335 06ee 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 71


 729:bluetooth_rxtx.c **** 		*data_len = 1;
 3336              		.loc 1 729 0
 3337 06f0 3B68     		ldr	r3, [r7]
 3338 06f2 0122     		movs	r2, #1
 3339 06f4 1A60     		str	r2, [r3]
 730:bluetooth_rxtx.c **** 		break;
 3340              		.loc 1 730 0
 3341 06f6 E6E1     		b	.L119
 3342              	.L97:
 731:bluetooth_rxtx.c **** 
 732:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 733:bluetooth_rxtx.c **** 		target.address = 0;
 3343              		.loc 1 733 0
 3344 06f8 8149     		ldr	r1, .L167+12
 3345 06fa 4FF00002 		mov	r2, #0
 3346 06fe 4FF00003 		mov	r3, #0
 3347 0702 C1E90023 		strd	r2, [r1]
 734:bluetooth_rxtx.c **** 		target.access_code = 0;
 3348              		.loc 1 734 0
 3349 0706 7E49     		ldr	r1, .L167+12
 3350 0708 4FF00002 		mov	r2, #0
 3351 070c 4FF00003 		mov	r3, #0
 3352 0710 C1E90223 		strd	r2, [r1, #8]
 735:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3353              		.loc 1 735 0
 3354 0714 0023     		movs	r3, #0
 3355 0716 FB64     		str	r3, [r7, #76]
 3356 0718 25E0     		b	.L145
 3357              	.L146:
 736:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3358              		.loc 1 736 0 discriminator 3
 3359 071a 794B     		ldr	r3, .L167+12
 3360 071c D3E900AB 		ldrd	r10, [r3]
 3361 0720 FB6C     		ldr	r3, [r7, #76]
 3362 0722 7A68     		ldr	r2, [r7, #4]
 3363 0724 1344     		add	r3, r3, r2
 3364 0726 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3365 0728 DAB2     		uxtb	r2, r3
 3366 072a 4FF00003 		mov	r3, #0
 3367 072e F96C     		ldr	r1, [r7, #76]
 3368 0730 C900     		lsls	r1, r1, #3
 3369 0732 A1F12006 		sub	r6, r1, #32
 3370 0736 C1F12000 		rsb	r0, r1, #32
 3371 073a 03FA01F9 		lsl	r9, r3, r1
 3372 073e 02FA06F6 		lsl	r6, r2, r6
 3373 0742 49EA0609 		orr	r9, r9, r6
 3374 0746 22FA00F0 		lsr	r0, r2, r0
 3375 074a 49EA0009 		orr	r9, r9, r0
 3376 074e 02FA01F8 		lsl	r8, r2, r1
 3377 0752 4AEA0802 		orr	r2, r10, r8
 3378 0756 4BEA0903 		orr	r3, fp, r9
 3379 075a 6949     		ldr	r1, .L167+12
 3380 075c C1E90023 		strd	r2, [r1]
 735:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3381              		.loc 1 735 0 discriminator 3
 3382 0760 FB6C     		ldr	r3, [r7, #76]
 3383 0762 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccHz27EZ.s 			page 72


 3384 0764 FB64     		str	r3, [r7, #76]
 3385              	.L145:
 735:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3386              		.loc 1 735 0 is_stmt 0 discriminator 1
 3387 0766 FB6C     		ldr	r3, [r7, #76]
 3388 0768 072B     		cmp	r3, #7
 3389 076a D6DD     		ble	.L146
 737:bluetooth_rxtx.c **** 		}
 738:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3390              		.loc 1 738 0 is_stmt 1
 3391 076c 0023     		movs	r3, #0
 3392 076e FB64     		str	r3, [r7, #76]
 3393 0770 24E0     		b	.L147
 3394              	.L148:
 739:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3395              		.loc 1 739 0 discriminator 3
 3396 0772 634B     		ldr	r3, .L167+12
 3397 0774 D3E90289 		ldrd	r8, [r3, #8]
 3398 0778 FB6C     		ldr	r3, [r7, #76]
 3399 077a 0833     		adds	r3, r3, #8
 3400 077c 7A68     		ldr	r2, [r7, #4]
 3401 077e 1344     		add	r3, r3, r2
 3402 0780 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3403 0782 DAB2     		uxtb	r2, r3
 3404 0784 4FF00003 		mov	r3, #0
 3405 0788 F96C     		ldr	r1, [r7, #76]
 3406 078a C900     		lsls	r1, r1, #3
 3407 078c A1F12006 		sub	r6, r1, #32
 3408 0790 C1F12000 		rsb	r0, r1, #32
 3409 0794 03FA01F5 		lsl	r5, r3, r1
 3410 0798 02FA06F6 		lsl	r6, r2, r6
 3411 079c 3543     		orrs	r5, r5, r6
 3412 079e 22FA00F0 		lsr	r0, r2, r0
 3413 07a2 0543     		orrs	r5, r5, r0
 3414 07a4 02FA01F4 		lsl	r4, r2, r1
 3415 07a8 48EA0402 		orr	r2, r8, r4
 3416 07ac 49EA0503 		orr	r3, r9, r5
 3417 07b0 5349     		ldr	r1, .L167+12
 3418 07b2 C1E90223 		strd	r2, [r1, #8]
 738:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3419              		.loc 1 738 0 discriminator 3
 3420 07b6 FB6C     		ldr	r3, [r7, #76]
 3421 07b8 0133     		adds	r3, r3, #1
 3422 07ba FB64     		str	r3, [r7, #76]
 3423              	.L147:
 738:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3424              		.loc 1 738 0 is_stmt 0 discriminator 1
 3425 07bc FB6C     		ldr	r3, [r7, #76]
 3426 07be 072B     		cmp	r3, #7
 3427 07c0 D7DD     		ble	.L148
 740:bluetooth_rxtx.c **** 		}
 741:bluetooth_rxtx.c **** 		break;
 3428              		.loc 1 741 0 is_stmt 1
 3429 07c2 80E1     		b	.L119
 3430              	.L98:
 742:bluetooth_rxtx.c **** 
 743:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
ARM GAS  /tmp/ccHz27EZ.s 			page 73


 744:bluetooth_rxtx.c **** 		clock_offset = 0;
 3431              		.loc 1 744 0
 3432 07c4 0023     		movs	r3, #0
 3433 07c6 BB64     		str	r3, [r7, #72]
 745:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3434              		.loc 1 745 0
 3435 07c8 0023     		movs	r3, #0
 3436 07ca FB64     		str	r3, [r7, #76]
 3437 07cc 0DE0     		b	.L149
 3438              	.L150:
 746:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3439              		.loc 1 746 0 discriminator 3
 3440 07ce BB6C     		ldr	r3, [r7, #72]
 3441 07d0 1B02     		lsls	r3, r3, #8
 3442 07d2 BB64     		str	r3, [r7, #72]
 747:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3443              		.loc 1 747 0 discriminator 3
 3444 07d4 FB6C     		ldr	r3, [r7, #76]
 3445 07d6 7A68     		ldr	r2, [r7, #4]
 3446 07d8 1344     		add	r3, r3, r2
 3447 07da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3448 07dc 1A46     		mov	r2, r3
 3449 07de BB6C     		ldr	r3, [r7, #72]
 3450 07e0 1343     		orrs	r3, r3, r2
 3451 07e2 BB64     		str	r3, [r7, #72]
 745:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3452              		.loc 1 745 0 discriminator 3
 3453 07e4 FB6C     		ldr	r3, [r7, #76]
 3454 07e6 0133     		adds	r3, r3, #1
 3455 07e8 FB64     		str	r3, [r7, #76]
 3456              	.L149:
 745:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3457              		.loc 1 745 0 is_stmt 0 discriminator 1
 3458 07ea FB6C     		ldr	r3, [r7, #76]
 3459 07ec 032B     		cmp	r3, #3
 3460 07ee EEDD     		ble	.L150
 748:bluetooth_rxtx.c **** 		}
 749:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3461              		.loc 1 749 0 is_stmt 1
 3462 07f0 444B     		ldr	r3, .L167+16
 3463 07f2 1A68     		ldr	r2, [r3]
 3464 07f4 BB6C     		ldr	r3, [r7, #72]
 3465 07f6 1344     		add	r3, r3, r2
 3466 07f8 424A     		ldr	r2, .L167+16
 3467 07fa 1360     		str	r3, [r2]
 750:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3468              		.loc 1 750 0
 3469 07fc 424B     		ldr	r3, .L167+20
 3470 07fe 0222     		movs	r2, #2
 3471 0800 1A70     		strb	r2, [r3]
 751:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3472              		.loc 1 751 0
 3473 0802 424B     		ldr	r3, .L167+24
 3474 0804 0822     		movs	r2, #8
 3475 0806 1A70     		strb	r2, [r3]
 752:bluetooth_rxtx.c **** 		break;
 3476              		.loc 1 752 0
ARM GAS  /tmp/ccHz27EZ.s 			page 74


 3477 0808 5DE1     		b	.L119
 3478              	.L99:
 753:bluetooth_rxtx.c **** 
 754:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 755:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3479              		.loc 1 755 0
 3480 080a 7B68     		ldr	r3, [r7, #4]
 3481 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3482 080e 1A46     		mov	r2, r3
 3483 0810 7B68     		ldr	r3, [r7, #4]
 3484 0812 0133     		adds	r3, r3, #1
 3485 0814 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3486 0816 1B02     		lsls	r3, r3, #8
 3487 0818 1A43     		orrs	r2, r2, r3
 3488 081a 7B68     		ldr	r3, [r7, #4]
 3489 081c 0233     		adds	r3, r3, #2
 3490 081e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3491 0820 1B04     		lsls	r3, r3, #16
 3492 0822 1A43     		orrs	r2, r2, r3
 3493 0824 7B68     		ldr	r3, [r7, #4]
 3494 0826 0333     		adds	r3, r3, #3
 3495 0828 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3496 082a 1B06     		lsls	r3, r3, #24
 3497 082c 1343     		orrs	r3, r3, r2
 3498 082e FB63     		str	r3, [r7, #60]
 756:bluetooth_rxtx.c **** 		clkn = clock;
 3499              		.loc 1 756 0
 3500 0830 344A     		ldr	r2, .L167+16
 3501 0832 FB6B     		ldr	r3, [r7, #60]
 3502 0834 1360     		str	r3, [r2]
 757:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3503              		.loc 1 757 0
 3504 0836 FFF7FEFF 		bl	cs_threshold_calc_and_set
 758:bluetooth_rxtx.c **** 		break;
 3505              		.loc 1 758 0
 3506 083a 44E1     		b	.L119
 3507              	.L110:
 759:bluetooth_rxtx.c **** 
 760:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 761:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3508              		.loc 1 761 0
 3509 083c 0023     		movs	r3, #0
 3510 083e FB64     		str	r3, [r7, #76]
 3511 0840 0BE0     		b	.L151
 3512              	.L152:
 762:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3513              		.loc 1 762 0 discriminator 3
 3514 0842 FB6C     		ldr	r3, [r7, #76]
 3515 0844 7A68     		ldr	r2, [r7, #4]
 3516 0846 1344     		add	r3, r3, r2
 3517 0848 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3518 084a 314A     		ldr	r2, .L167+28
 3519 084c FB6C     		ldr	r3, [r7, #76]
 3520 084e 1344     		add	r3, r3, r2
 3521 0850 0A46     		mov	r2, r1
 3522 0852 1A70     		strb	r2, [r3]
 761:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
ARM GAS  /tmp/ccHz27EZ.s 			page 75


 3523              		.loc 1 761 0 discriminator 3
 3524 0854 FB6C     		ldr	r3, [r7, #76]
 3525 0856 0133     		adds	r3, r3, #1
 3526 0858 FB64     		str	r3, [r7, #76]
 3527              	.L151:
 761:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3528              		.loc 1 761 0 is_stmt 0 discriminator 1
 3529 085a FB6C     		ldr	r3, [r7, #76]
 3530 085c 092B     		cmp	r3, #9
 3531 085e F0DD     		ble	.L152
 763:bluetooth_rxtx.c **** 		}
 764:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3532              		.loc 1 764 0 is_stmt 1
 3533 0860 2C4B     		ldr	r3, .L167+32
 3534 0862 0122     		movs	r2, #1
 3535 0864 1A70     		strb	r2, [r3]
 765:bluetooth_rxtx.c **** 		*data_len = 10;
 3536              		.loc 1 765 0
 3537 0866 3B68     		ldr	r3, [r7]
 3538 0868 0A22     		movs	r2, #10
 3539 086a 1A60     		str	r2, [r3]
 766:bluetooth_rxtx.c **** 		break;
 3540              		.loc 1 766 0
 3541 086c 2BE1     		b	.L119
 3542              	.L111:
 767:bluetooth_rxtx.c **** 
 768:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 769:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3543              		.loc 1 769 0
 3544 086e 0023     		movs	r3, #0
 3545 0870 FB64     		str	r3, [r7, #76]
 3546 0872 07E0     		b	.L153
 3547              	.L154:
 770:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3548              		.loc 1 770 0 discriminator 3
 3549 0874 264A     		ldr	r2, .L167+28
 3550 0876 FB6C     		ldr	r3, [r7, #76]
 3551 0878 1344     		add	r3, r3, r2
 3552 087a 0022     		movs	r2, #0
 3553 087c 1A70     		strb	r2, [r3]
 769:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3554              		.loc 1 769 0 discriminator 3
 3555 087e FB6C     		ldr	r3, [r7, #76]
 3556 0880 0133     		adds	r3, r3, #1
 3557 0882 FB64     		str	r3, [r7, #76]
 3558              	.L153:
 769:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3559              		.loc 1 769 0 is_stmt 0 discriminator 1
 3560 0884 FB6C     		ldr	r3, [r7, #76]
 3561 0886 092B     		cmp	r3, #9
 3562 0888 F4DD     		ble	.L154
 771:bluetooth_rxtx.c **** 		}
 772:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3563              		.loc 1 772 0 is_stmt 1
 3564 088a 224B     		ldr	r3, .L167+32
 3565 088c 0022     		movs	r2, #0
 3566 088e 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 76


 773:bluetooth_rxtx.c **** 		*data_len = 10;
 3567              		.loc 1 773 0
 3568 0890 3B68     		ldr	r3, [r7]
 3569 0892 0A22     		movs	r2, #10
 3570 0894 1A60     		str	r2, [r3]
 774:bluetooth_rxtx.c **** 		break;
 3571              		.loc 1 774 0
 3572 0896 16E1     		b	.L119
 3573              	.L100:
 775:bluetooth_rxtx.c **** 
 776:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 777:bluetooth_rxtx.c **** 		clock = clkn;
 3574              		.loc 1 777 0
 3575 0898 1A4B     		ldr	r3, .L167+16
 3576 089a 1B68     		ldr	r3, [r3]
 3577 089c FB63     		str	r3, [r7, #60]
 778:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3578              		.loc 1 778 0
 3579 089e 0023     		movs	r3, #0
 3580 08a0 FB64     		str	r3, [r7, #76]
 3581 08a2 0CE0     		b	.L155
 3582              	.L156:
 779:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3583              		.loc 1 779 0 discriminator 3
 3584 08a4 FB6C     		ldr	r3, [r7, #76]
 3585 08a6 7A68     		ldr	r2, [r7, #4]
 3586 08a8 1344     		add	r3, r3, r2
 3587 08aa FA6C     		ldr	r2, [r7, #76]
 3588 08ac D200     		lsls	r2, r2, #3
 3589 08ae F96B     		ldr	r1, [r7, #60]
 3590 08b0 21FA02F2 		lsr	r2, r1, r2
 3591 08b4 D2B2     		uxtb	r2, r2
 3592 08b6 1A70     		strb	r2, [r3]
 778:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3593              		.loc 1 778 0 discriminator 3
 3594 08b8 FB6C     		ldr	r3, [r7, #76]
 3595 08ba 0133     		adds	r3, r3, #1
 3596 08bc FB64     		str	r3, [r7, #76]
 3597              	.L155:
 778:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3598              		.loc 1 778 0 is_stmt 0 discriminator 1
 3599 08be FB6C     		ldr	r3, [r7, #76]
 3600 08c0 032B     		cmp	r3, #3
 3601 08c2 EFDD     		ble	.L156
 780:bluetooth_rxtx.c **** 		}
 781:bluetooth_rxtx.c **** 		*data_len = 4;
 3602              		.loc 1 781 0 is_stmt 1
 3603 08c4 3B68     		ldr	r3, [r7]
 3604 08c6 0422     		movs	r2, #4
 3605 08c8 1A60     		str	r2, [r3]
 782:bluetooth_rxtx.c **** 		break;
 3606              		.loc 1 782 0
 3607 08ca FCE0     		b	.L119
 3608              	.L101:
 783:bluetooth_rxtx.c **** 
 784:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 785:bluetooth_rxtx.c **** 		*data_len = 0;
ARM GAS  /tmp/ccHz27EZ.s 			page 77


 3609              		.loc 1 785 0
 3610 08cc 3B68     		ldr	r3, [r7]
 3611 08ce 0022     		movs	r2, #0
 3612 08d0 1A60     		str	r2, [r3]
 786:bluetooth_rxtx.c **** 
 787:bluetooth_rxtx.c **** 		do_hop = 0;
 3613              		.loc 1 787 0
 3614 08d2 114B     		ldr	r3, .L167+36
 3615 08d4 0022     		movs	r2, #0
 3616 08d6 1A70     		strb	r2, [r3]
 788:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3617              		.loc 1 788 0
 3618 08d8 0B4B     		ldr	r3, .L167+20
 3619 08da 0322     		movs	r2, #3
 3620 08dc 1A70     		strb	r2, [r3]
 789:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3621              		.loc 1 789 0
 3622 08de 0B4B     		ldr	r3, .L167+24
 3623 08e0 0922     		movs	r2, #9
 3624 08e2 1A70     		strb	r2, [r3]
 790:bluetooth_rxtx.c **** 
 791:bluetooth_rxtx.c **** 		queue_init();
 3625              		.loc 1 791 0
 3626 08e4 FFF7FEFF 		bl	queue_init
 792:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3627              		.loc 1 792 0
 3628 08e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 793:bluetooth_rxtx.c **** 		break;
 3629              		.loc 1 793 0
 3630 08ec EBE0     		b	.L119
 3631              	.L102:
 794:bluetooth_rxtx.c **** 
 795:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 796:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3632              		.loc 1 796 0
 3633 08ee 0023     		movs	r3, #0
 3634 08f0 FB64     		str	r3, [r7, #76]
 3635 08f2 21E0     		b	.L157
 3636              	.L168:
 3637              		.align	2
 3638              	.L167:
 3639 08f4 E0080000 		.word	.LC3
 3640 08f8 00000000 		.word	compile_info
 3641 08fc 00000000 		.word	cs_threshold_req
 3642 0900 00000000 		.word	target
 3643 0904 00000000 		.word	clkn
 3644 0908 00000000 		.word	hop_mode
 3645 090c 00000000 		.word	requested_mode
 3646 0910 00000000 		.word	afh_map
 3647 0914 00000000 		.word	afh_enabled
 3648 0918 00000000 		.word	do_hop
 3649              	.L158:
 797:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3650              		.loc 1 797 0 discriminator 3
 3651 091c FB6C     		ldr	r3, [r7, #76]
 3652 091e 7A68     		ldr	r2, [r7, #4]
 3653 0920 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccHz27EZ.s 			page 78


 3654 0922 6C4A     		ldr	r2, .L169
 3655 0924 1168     		ldr	r1, [r2]
 3656 0926 FA6C     		ldr	r2, [r7, #76]
 3657 0928 D200     		lsls	r2, r2, #3
 3658 092a 21FA02F2 		lsr	r2, r1, r2
 3659 092e D2B2     		uxtb	r2, r2
 3660 0930 1A70     		strb	r2, [r3]
 796:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3661              		.loc 1 796 0 discriminator 3
 3662 0932 FB6C     		ldr	r3, [r7, #76]
 3663 0934 0133     		adds	r3, r3, #1
 3664 0936 FB64     		str	r3, [r7, #76]
 3665              	.L157:
 796:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3666              		.loc 1 796 0 is_stmt 0 discriminator 1
 3667 0938 FB6C     		ldr	r3, [r7, #76]
 3668 093a 032B     		cmp	r3, #3
 3669 093c EEDD     		ble	.L158
 798:bluetooth_rxtx.c **** 		}
 799:bluetooth_rxtx.c **** 		*data_len = 4;
 3670              		.loc 1 799 0 is_stmt 1
 3671 093e 3B68     		ldr	r3, [r7]
 3672 0940 0422     		movs	r2, #4
 3673 0942 1A60     		str	r2, [r3]
 800:bluetooth_rxtx.c **** 		break;
 3674              		.loc 1 800 0
 3675 0944 BFE0     		b	.L119
 3676              	.L103:
 801:bluetooth_rxtx.c **** 
 802:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 803:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3677              		.loc 1 803 0
 3678 0946 7B68     		ldr	r3, [r7, #4]
 3679 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3680 094a 1A46     		mov	r2, r3
 3681 094c 7B68     		ldr	r3, [r7, #4]
 3682 094e 0133     		adds	r3, r3, #1
 3683 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3684 0952 1B02     		lsls	r3, r3, #8
 3685 0954 1A43     		orrs	r2, r2, r3
 3686 0956 7B68     		ldr	r3, [r7, #4]
 3687 0958 0233     		adds	r3, r3, #2
 3688 095a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3689 095c 1B04     		lsls	r3, r3, #16
 3690 095e 1A43     		orrs	r2, r2, r3
 3691 0960 7B68     		ldr	r3, [r7, #4]
 3692 0962 0333     		adds	r3, r3, #3
 3693 0964 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3694 0966 1B06     		lsls	r3, r3, #24
 3695 0968 1343     		orrs	r3, r3, r2
 3696 096a 1846     		mov	r0, r3
 3697 096c FFF7FEFF 		bl	le_set_access_address
 804:bluetooth_rxtx.c **** 		le.target_set = 1;
 3698              		.loc 1 804 0
 3699 0970 584B     		ldr	r3, .L169
 3700 0972 0122     		movs	r2, #1
 3701 0974 DA63     		str	r2, [r3, #60]
ARM GAS  /tmp/ccHz27EZ.s 			page 79


 805:bluetooth_rxtx.c **** 		break;
 3702              		.loc 1 805 0
 3703 0976 A6E0     		b	.L119
 3704              	.L105:
 806:bluetooth_rxtx.c **** 
 807:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 808:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 809:bluetooth_rxtx.c **** 		break;
 810:bluetooth_rxtx.c **** 
 811:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 812:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 813:bluetooth_rxtx.c **** 		// don't commit here please
 814:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3705              		.loc 1 814 0
 3706 0978 7B68     		ldr	r3, [r7, #4]
 3707 097a 1322     		movs	r2, #19
 3708 097c 1A70     		strb	r2, [r3]
 815:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3709              		.loc 1 815 0
 3710 097e 7B68     		ldr	r3, [r7, #4]
 3711 0980 0133     		adds	r3, r3, #1
 3712 0982 3722     		movs	r2, #55
 3713 0984 1A70     		strb	r2, [r3]
 816:bluetooth_rxtx.c **** 		*data_len = 2;
 3714              		.loc 1 816 0
 3715 0986 3B68     		ldr	r3, [r7]
 3716 0988 0222     		movs	r2, #2
 3717 098a 1A60     		str	r2, [r3]
 817:bluetooth_rxtx.c **** 		break;
 3718              		.loc 1 817 0
 3719 098c 9BE0     		b	.L119
 3720              	.L106:
 818:bluetooth_rxtx.c **** 
 819:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 820:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3721              		.loc 1 820 0
 3722 098e 514B     		ldr	r3, .L169
 3723 0990 1B69     		ldr	r3, [r3, #16]
 3724 0992 002B     		cmp	r3, #0
 3725 0994 14BF     		ite	ne
 3726 0996 0123     		movne	r3, #1
 3727 0998 0023     		moveq	r3, #0
 3728 099a DBB2     		uxtb	r3, r3
 3729 099c 1A46     		mov	r2, r3
 3730 099e 7B68     		ldr	r3, [r7, #4]
 3731 09a0 1A70     		strb	r2, [r3]
 821:bluetooth_rxtx.c **** 		*data_len = 1;
 3732              		.loc 1 821 0
 3733 09a2 3B68     		ldr	r3, [r7]
 3734 09a4 0122     		movs	r2, #1
 3735 09a6 1A60     		str	r2, [r3]
 822:bluetooth_rxtx.c **** 		break;
 3736              		.loc 1 822 0
 3737 09a8 8DE0     		b	.L119
 3738              	.L107:
 823:bluetooth_rxtx.c **** 
 824:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
ARM GAS  /tmp/ccHz27EZ.s 			page 80


 825:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3739              		.loc 1 825 0
 3740 09aa BB68     		ldr	r3, [r7, #8]
 3741 09ac 1B88     		ldrh	r3, [r3]
 3742 09ae 002B     		cmp	r3, #0
 3743 09b0 14BF     		ite	ne
 3744 09b2 0123     		movne	r3, #1
 3745 09b4 0023     		moveq	r3, #0
 3746 09b6 DBB2     		uxtb	r3, r3
 3747 09b8 1A46     		mov	r2, r3
 3748 09ba 464B     		ldr	r3, .L169
 3749 09bc 1A61     		str	r2, [r3, #16]
 826:bluetooth_rxtx.c **** 		break;
 3750              		.loc 1 826 0
 3751 09be 82E0     		b	.L119
 3752              	.L108:
 827:bluetooth_rxtx.c **** 
 828:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 829:bluetooth_rxtx.c **** 		p = dequeue();
 3753              		.loc 1 829 0
 3754 09c0 FFF7FEFF 		bl	dequeue
 3755 09c4 7864     		str	r0, [r7, #68]
 830:bluetooth_rxtx.c **** 		if (p != NULL) {
 3756              		.loc 1 830 0
 3757 09c6 7B6C     		ldr	r3, [r7, #68]
 3758 09c8 002B     		cmp	r3, #0
 3759 09ca 08D0     		beq	.L159
 831:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3760              		.loc 1 831 0
 3761 09cc 7868     		ldr	r0, [r7, #4]
 3762 09ce 796C     		ldr	r1, [r7, #68]
 3763 09d0 4022     		movs	r2, #64
 3764 09d2 FFF7FEFF 		bl	memcpy
 832:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3765              		.loc 1 832 0
 3766 09d6 3B68     		ldr	r3, [r7]
 3767 09d8 4022     		movs	r2, #64
 3768 09da 1A60     		str	r2, [r3]
 833:bluetooth_rxtx.c **** 		} else {
 834:bluetooth_rxtx.c **** 			data[0] = 0;
 835:bluetooth_rxtx.c **** 			*data_len = 1;
 836:bluetooth_rxtx.c **** 		}
 837:bluetooth_rxtx.c **** 		break;
 3769              		.loc 1 837 0
 3770 09dc 73E0     		b	.L119
 3771              	.L159:
 834:bluetooth_rxtx.c **** 			*data_len = 1;
 3772              		.loc 1 834 0
 3773 09de 7B68     		ldr	r3, [r7, #4]
 3774 09e0 0022     		movs	r2, #0
 3775 09e2 1A70     		strb	r2, [r3]
 835:bluetooth_rxtx.c **** 		}
 3776              		.loc 1 835 0
 3777 09e4 3B68     		ldr	r3, [r7]
 3778 09e6 0122     		movs	r2, #1
 3779 09e8 1A60     		str	r2, [r3]
 3780              		.loc 1 837 0
ARM GAS  /tmp/ccHz27EZ.s 			page 81


 3781 09ea 6CE0     		b	.L119
 3782              	.L109:
 838:bluetooth_rxtx.c **** 
 839:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 840:bluetooth_rxtx.c **** 		*data_len = 0;
 3783              		.loc 1 840 0
 3784 09ec 3B68     		ldr	r3, [r7]
 3785 09ee 0022     		movs	r2, #0
 3786 09f0 1A60     		str	r2, [r3]
 841:bluetooth_rxtx.c **** 
 842:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3787              		.loc 1 842 0
 3788 09f2 394B     		ldr	r3, .L169+4
 3789 09f4 0022     		movs	r2, #0
 3790 09f6 1A70     		strb	r2, [r3]
 843:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3791              		.loc 1 843 0
 3792 09f8 384B     		ldr	r3, .L169+8
 3793 09fa 0A22     		movs	r2, #10
 3794 09fc 1A70     		strb	r2, [r3]
 844:bluetooth_rxtx.c **** 
 845:bluetooth_rxtx.c **** 		queue_init();
 3795              		.loc 1 845 0
 3796 09fe FFF7FEFF 		bl	queue_init
 846:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3797              		.loc 1 846 0
 3798 0a02 FFF7FEFF 		bl	cs_threshold_calc_and_set
 847:bluetooth_rxtx.c **** 		break;
 3799              		.loc 1 847 0
 3800 0a06 5EE0     		b	.L119
 3801              	.L112:
 848:bluetooth_rxtx.c **** 
 849:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 850:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3802              		.loc 1 850 0
 3803 0a08 BB68     		ldr	r3, [r7, #8]
 3804 0a0a 1B88     		ldrh	r3, [r3]
 3805 0a0c DBB2     		uxtb	r3, r3
 3806 0a0e 1846     		mov	r0, r3
 3807 0a10 FFF7FEFF 		bl	cc2400_get
 3808 0a14 0346     		mov	r3, r0
 3809 0a16 7B87     		strh	r3, [r7, #58]	@ movhi
 851:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3810              		.loc 1 851 0
 3811 0a18 7B8F     		ldrh	r3, [r7, #58]
 3812 0a1a 1B0A     		lsrs	r3, r3, #8
 3813 0a1c 9BB2     		uxth	r3, r3
 3814 0a1e DAB2     		uxtb	r2, r3
 3815 0a20 7B68     		ldr	r3, [r7, #4]
 3816 0a22 1A70     		strb	r2, [r3]
 852:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3817              		.loc 1 852 0
 3818 0a24 7B68     		ldr	r3, [r7, #4]
 3819 0a26 0133     		adds	r3, r3, #1
 3820 0a28 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3821 0a2a D2B2     		uxtb	r2, r2
 3822 0a2c 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 82


 853:bluetooth_rxtx.c **** 		*data_len = 2;
 3823              		.loc 1 853 0
 3824 0a2e 3B68     		ldr	r3, [r7]
 3825 0a30 0222     		movs	r2, #2
 3826 0a32 1A60     		str	r2, [r3]
 854:bluetooth_rxtx.c **** 		break;
 3827              		.loc 1 854 0
 3828 0a34 47E0     		b	.L119
 3829              	.L116:
 855:bluetooth_rxtx.c **** 
 856:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 857:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3830              		.loc 1 857 0
 3831 0a36 BB68     		ldr	r3, [r7, #8]
 3832 0a38 1B88     		ldrh	r3, [r3]
 3833 0a3a DAB2     		uxtb	r2, r3
 3834 0a3c BB68     		ldr	r3, [r7, #8]
 3835 0a3e 0233     		adds	r3, r3, #2
 3836 0a40 1B88     		ldrh	r3, [r3]
 3837 0a42 1046     		mov	r0, r2
 3838 0a44 1946     		mov	r1, r3
 3839 0a46 FFF7FEFF 		bl	cc2400_set
 858:bluetooth_rxtx.c **** 		break;
 3840              		.loc 1 858 0
 3841 0a4a 3CE0     		b	.L119
 3842              	.L113:
 859:bluetooth_rxtx.c **** 
 860:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 861:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3843              		.loc 1 861 0
 3844 0a4c 2448     		ldr	r0, .L169+12
 3845 0a4e 7968     		ldr	r1, [r7, #4]
 3846 0a50 0622     		movs	r2, #6
 3847 0a52 FFF7FEFF 		bl	memcpy
 862:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3848              		.loc 1 862 0
 3849 0a56 214B     		ldr	r3, .L169+8
 3850 0a58 0C22     		movs	r2, #12
 3851 0a5a 1A70     		strb	r2, [r3]
 863:bluetooth_rxtx.c **** 		break;
 3852              		.loc 1 863 0
 3853 0a5c 33E0     		b	.L119
 3854              	.L115:
 864:bluetooth_rxtx.c **** 
 865:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 866:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 867:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 868:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3855              		.loc 1 868 0
 3856 0a5e 7B68     		ldr	r3, [r7, #4]
 3857 0a60 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3858 0a62 1C4B     		ldr	r3, .L169
 3859 0a64 83F83420 		strb	r2, [r3, #52]
 869:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3860              		.loc 1 869 0
 3861 0a68 7B68     		ldr	r3, [r7, #4]
 3862 0a6a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
ARM GAS  /tmp/ccHz27EZ.s 			page 83


 3863 0a6c 194B     		ldr	r3, .L169
 3864 0a6e 83F83520 		strb	r2, [r3, #53]
 870:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3865              		.loc 1 870 0
 3866 0a72 7B68     		ldr	r3, [r7, #4]
 3867 0a74 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3868 0a76 174B     		ldr	r3, .L169
 3869 0a78 83F83620 		strb	r2, [r3, #54]
 871:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3870              		.loc 1 871 0
 3871 0a7c 7B68     		ldr	r3, [r7, #4]
 3872 0a7e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3873 0a80 144B     		ldr	r3, .L169
 3874 0a82 83F83720 		strb	r2, [r3, #55]
 872:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3875              		.loc 1 872 0
 3876 0a86 7B68     		ldr	r3, [r7, #4]
 3877 0a88 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3878 0a8a 124B     		ldr	r3, .L169
 3879 0a8c 83F83820 		strb	r2, [r3, #56]
 873:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3880              		.loc 1 873 0
 3881 0a90 7B68     		ldr	r3, [r7, #4]
 3882 0a92 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3883 0a94 0F4B     		ldr	r3, .L169
 3884 0a96 83F83920 		strb	r2, [r3, #57]
 874:bluetooth_rxtx.c **** 		le.target_set = 1;
 3885              		.loc 1 874 0
 3886 0a9a 0E4B     		ldr	r3, .L169
 3887 0a9c 0122     		movs	r2, #1
 3888 0a9e DA63     		str	r2, [r3, #60]
 875:bluetooth_rxtx.c **** 		break;
 3889              		.loc 1 875 0
 3890 0aa0 11E0     		b	.L119
 3891              	.L117:
 876:bluetooth_rxtx.c **** 
 877:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 878:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 879:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3892              		.loc 1 879 0
 3893 0aa2 BB68     		ldr	r3, [r7, #8]
 3894 0aa4 1B88     		ldrh	r3, [r3]
 3895 0aa6 DAB2     		uxtb	r2, r3
 3896 0aa8 0E4B     		ldr	r3, .L169+16
 3897 0aaa 1A70     		strb	r2, [r3]
 880:bluetooth_rxtx.c **** 		break;
 3898              		.loc 1 880 0
 3899 0aac 0BE0     		b	.L119
 3900              	.L118:
 881:bluetooth_rxtx.c **** #endif
 882:bluetooth_rxtx.c **** 
 883:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 884:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 885:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 886:bluetooth_rxtx.c **** 			return 0;
 887:bluetooth_rxtx.c **** #endif
 888:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
ARM GAS  /tmp/ccHz27EZ.s 			page 84


 3901              		.loc 1 888 0
 3902 0aae 0B4B     		ldr	r3, .L169+8
 3903 0ab0 0D22     		movs	r2, #13
 3904 0ab2 1A70     		strb	r2, [r3]
 889:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3905              		.loc 1 889 0
 3906 0ab4 BB68     		ldr	r3, [r7, #8]
 3907 0ab6 1B88     		ldrh	r3, [r3]
 3908 0ab8 DAB2     		uxtb	r2, r3
 3909 0aba 0B4B     		ldr	r3, .L169+20
 3910 0abc 1A70     		strb	r2, [r3]
 890:bluetooth_rxtx.c **** 		break;
 3911              		.loc 1 890 0
 3912 0abe 02E0     		b	.L119
 3913              	.L59:
 891:bluetooth_rxtx.c **** 
 892:bluetooth_rxtx.c **** 	default:
 893:bluetooth_rxtx.c **** 		return 0;
 3914              		.loc 1 893 0
 3915 0ac0 0023     		movs	r3, #0
 3916 0ac2 01E0     		b	.L161
 3917              	.L162:
 809:bluetooth_rxtx.c **** 
 3918              		.loc 1 809 0
 3919 0ac4 00BF     		nop
 3920              	.L119:
 894:bluetooth_rxtx.c **** 	}
 895:bluetooth_rxtx.c **** 	return 1;
 3921              		.loc 1 895 0
 3922 0ac6 0123     		movs	r3, #1
 3923              	.L161:
 896:bluetooth_rxtx.c **** }
 3924              		.loc 1 896 0 discriminator 1
 3925 0ac8 1846     		mov	r0, r3
 3926 0aca 5437     		adds	r7, r7, #84
 3927              		.cfi_def_cfa_offset 36
 3928 0acc BD46     		mov	sp, r7
 3929              		.cfi_def_cfa_register 13
 3930              		@ sp needed
 3931 0ace BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3932              	.L170:
 3933 0ad2 00BF     		.align	2
 3934              	.L169:
 3935 0ad4 00000000 		.word	le
 3936 0ad8 00000000 		.word	hop_mode
 3937 0adc 00000000 		.word	requested_mode
 3938 0ae0 00000000 		.word	slave_mac_address
 3939 0ae4 00000000 		.word	jam_mode
 3940 0ae8 00000000 		.word	ego_mode
 3941              		.cfi_endproc
 3942              	.LFE12:
 3944              		.section	.text.clkn_init,"ax",%progbits
 3945              		.align	2
 3946              		.thumb
 3947              		.thumb_func
 3949              	clkn_init:
 3950              	.LFB13:
ARM GAS  /tmp/ccHz27EZ.s 			page 85


 897:bluetooth_rxtx.c **** 
 898:bluetooth_rxtx.c **** static void clkn_init()
 899:bluetooth_rxtx.c **** {
 3951              		.loc 1 899 0
 3952              		.cfi_startproc
 3953              		@ args = 0, pretend = 0, frame = 0
 3954              		@ frame_needed = 1, uses_anonymous_args = 0
 3955              		@ link register save eliminated.
 3956 0000 80B4     		push	{r7}
 3957              		.cfi_def_cfa_offset 4
 3958              		.cfi_offset 7, -4
 3959 0002 00AF     		add	r7, sp, #0
 3960              		.cfi_def_cfa_register 7
 900:bluetooth_rxtx.c **** 	/*
 901:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 902:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 903:bluetooth_rxtx.c **** 	 * clock_start().
 904:bluetooth_rxtx.c **** 	 */
 905:bluetooth_rxtx.c **** 
 906:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 907:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3961              		.loc 1 907 0
 3962 0004 0C4B     		ldr	r3, .L172
 3963 0006 0222     		movs	r2, #2
 3964 0008 1A60     		str	r2, [r3]
 908:bluetooth_rxtx.c **** 	clkn = 0;
 3965              		.loc 1 908 0
 3966 000a 0C4B     		ldr	r3, .L172+4
 3967 000c 0022     		movs	r2, #0
 3968 000e 1A60     		str	r2, [r3]
 909:bluetooth_rxtx.c **** 
 910:bluetooth_rxtx.c **** #ifdef TC13BADGE
 911:bluetooth_rxtx.c **** 	/*
 912:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 913:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 914:bluetooth_rxtx.c **** 	 */
 915:bluetooth_rxtx.c **** 	T0PR = 2;
 916:bluetooth_rxtx.c **** #else
 917:bluetooth_rxtx.c **** 	/*
 918:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 919:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 920:bluetooth_rxtx.c **** 	 */
 921:bluetooth_rxtx.c **** 	T0PR = 4;
 3969              		.loc 1 921 0
 3970 0010 0B4B     		ldr	r3, .L172+8
 3971 0012 0422     		movs	r2, #4
 3972 0014 1A60     		str	r2, [r3]
 922:bluetooth_rxtx.c **** #endif
 923:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 924:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3973              		.loc 1 924 0
 3974 0016 0B4B     		ldr	r3, .L172+12
 3975 0018 40F63442 		movw	r2, #3124
 3976 001c 1A60     		str	r2, [r3]
 925:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3977              		.loc 1 925 0
 3978 001e 0A4B     		ldr	r3, .L172+16
ARM GAS  /tmp/ccHz27EZ.s 			page 86


 3979 0020 0322     		movs	r2, #3
 3980 0022 1A60     		str	r2, [r3]
 926:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3981              		.loc 1 926 0
 3982 0024 094B     		ldr	r3, .L172+20
 3983 0026 0222     		movs	r2, #2
 3984 0028 1A60     		str	r2, [r3]
 927:bluetooth_rxtx.c **** 
 928:bluetooth_rxtx.c **** 	/* start timer */
 929:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3985              		.loc 1 929 0
 3986 002a 034B     		ldr	r3, .L172
 3987 002c 0122     		movs	r2, #1
 3988 002e 1A60     		str	r2, [r3]
 930:bluetooth_rxtx.c **** }
 3989              		.loc 1 930 0
 3990 0030 BD46     		mov	sp, r7
 3991              		.cfi_def_cfa_register 13
 3992              		@ sp needed
 3993 0032 5DF8047B 		ldr	r7, [sp], #4
 3994              		.cfi_restore 7
 3995              		.cfi_def_cfa_offset 0
 3996 0036 7047     		bx	lr
 3997              	.L173:
 3998              		.align	2
 3999              	.L172:
 4000 0038 04400040 		.word	1073758212
 4001 003c 00000000 		.word	clkn
 4002 0040 0C400040 		.word	1073758220
 4003 0044 18400040 		.word	1073758232
 4004 0048 14400040 		.word	1073758228
 4005 004c 00E100E0 		.word	-536813312
 4006              		.cfi_endproc
 4007              	.LFE13:
 4009              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 4010              		.align	2
 4011              		.global	TIMER0_IRQHandler
 4012              		.thumb
 4013              		.thumb_func
 4015              	TIMER0_IRQHandler:
 4016              	.LFB14:
 931:bluetooth_rxtx.c **** 
 932:bluetooth_rxtx.c **** /* Update CLKN. */
 933:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 934:bluetooth_rxtx.c **** {
 4017              		.loc 1 934 0
 4018              		.cfi_startproc
 4019              		@ args = 0, pretend = 0, frame = 8
 4020              		@ frame_needed = 1, uses_anonymous_args = 0
 4021              		@ link register save eliminated.
 4022 0000 80B4     		push	{r7}
 4023              		.cfi_def_cfa_offset 4
 4024              		.cfi_offset 7, -4
 4025 0002 83B0     		sub	sp, sp, #12
 4026              		.cfi_def_cfa_offset 16
 4027 0004 00AF     		add	r7, sp, #0
 4028              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccHz27EZ.s 			page 87


 935:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 936:bluetooth_rxtx.c **** 	u32 next;
 937:bluetooth_rxtx.c **** 	u32 le_clk;
 938:bluetooth_rxtx.c **** 
 939:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 4029              		.loc 1 939 0
 4030 0006 4FF04023 		mov	r3, #1073758208
 4031 000a 1B68     		ldr	r3, [r3]
 4032 000c 03F00103 		and	r3, r3, #1
 4033 0010 002B     		cmp	r3, #0
 4034 0012 6DD0     		beq	.L174
 940:bluetooth_rxtx.c **** 
 941:bluetooth_rxtx.c **** 		clkn++;
 4035              		.loc 1 941 0
 4036 0014 394B     		ldr	r3, .L184
 4037 0016 1B68     		ldr	r3, [r3]
 4038 0018 0133     		adds	r3, r3, #1
 4039 001a 384A     		ldr	r2, .L184
 4040 001c 1360     		str	r3, [r2]
 942:bluetooth_rxtx.c **** 		next = clkn;
 4041              		.loc 1 942 0
 4042 001e 374B     		ldr	r3, .L184
 4043 0020 1B68     		ldr	r3, [r3]
 4044 0022 7B60     		str	r3, [r7, #4]
 943:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 4045              		.loc 1 943 0
 4046 0024 364B     		ldr	r3, .L184+4
 4047 0026 9B69     		ldr	r3, [r3, #24]
 4048 0028 7A68     		ldr	r2, [r7, #4]
 4049 002a D31A     		subs	r3, r2, r3
 4050 002c 03F00303 		and	r3, r3, #3
 4051 0030 3B60     		str	r3, [r7]
 944:bluetooth_rxtx.c **** 
 945:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 946:bluetooth_rxtx.c **** 
 947:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 948:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 4052              		.loc 1 948 0
 4053 0032 344B     		ldr	r3, .L184+8
 4054 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4055 0036 002B     		cmp	r3, #0
 4056 0038 03D0     		beq	.L176
 4057              		.loc 1 948 0 is_stmt 0 discriminator 1
 4058 003a 324B     		ldr	r3, .L184+8
 4059 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4060 003e 012B     		cmp	r3, #1
 4061 0040 09D1     		bne	.L177
 4062              	.L176:
 949:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4063              		.loc 1 949 0 is_stmt 1
 4064 0042 7B68     		ldr	r3, [r7, #4]
 4065 0044 03F07F03 		and	r3, r3, #127
 4066 0048 002B     		cmp	r3, #0
 4067 004a 03D1     		bne	.L178
 950:bluetooth_rxtx.c **** 				do_hop = 1;
 4068              		.loc 1 950 0
 4069 004c 2E4B     		ldr	r3, .L184+12
ARM GAS  /tmp/ccHz27EZ.s 			page 88


 4070 004e 0122     		movs	r2, #1
 4071 0050 1A70     		strb	r2, [r3]
 949:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4072              		.loc 1 949 0
 4073 0052 37E0     		b	.L179
 4074              	.L178:
 4075 0054 36E0     		b	.L179
 4076              	.L177:
 951:bluetooth_rxtx.c **** 		}
 952:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 953:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 4077              		.loc 1 953 0
 4078 0056 2B4B     		ldr	r3, .L184+8
 4079 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4080 005a 022B     		cmp	r3, #2
 4081 005c 08D1     		bne	.L180
 954:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 4082              		.loc 1 954 0
 4083 005e 7B68     		ldr	r3, [r7, #4]
 4084 0060 03F00103 		and	r3, r3, #1
 4085 0064 002B     		cmp	r3, #0
 4086 0066 2DD1     		bne	.L179
 955:bluetooth_rxtx.c **** 				do_hop = 1;
 4087              		.loc 1 955 0
 4088 0068 274B     		ldr	r3, .L184+12
 4089 006a 0122     		movs	r2, #1
 4090 006c 1A70     		strb	r2, [r3]
 4091 006e 29E0     		b	.L179
 4092              	.L180:
 956:bluetooth_rxtx.c **** 		}
 957:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 958:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 4093              		.loc 1 958 0
 4094 0070 244B     		ldr	r3, .L184+8
 4095 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4096 0074 032B     		cmp	r3, #3
 4097 0076 25D1     		bne	.L179
 959:bluetooth_rxtx.c **** 			// Only hop if connected
 960:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 4098              		.loc 1 960 0
 4099 0078 214B     		ldr	r3, .L184+4
 4100 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 4101 007c 032B     		cmp	r3, #3
 4102 007e 21D1     		bne	.L179
 4103              		.loc 1 960 0 is_stmt 0 discriminator 1
 4104 0080 3B68     		ldr	r3, [r7]
 4105 0082 002B     		cmp	r3, #0
 4106 0084 1ED1     		bne	.L179
 961:bluetooth_rxtx.c **** 				--le.interval_timer;
 4107              		.loc 1 961 0 is_stmt 1
 4108 0086 1E4B     		ldr	r3, .L184+4
 4109 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4110 008a 9BB2     		uxth	r3, r3
 4111 008c 013B     		subs	r3, r3, #1
 4112 008e 9AB2     		uxth	r2, r3
 4113 0090 1B4B     		ldr	r3, .L184+4
 4114 0092 9A83     		strh	r2, [r3, #28]	@ movhi
ARM GAS  /tmp/ccHz27EZ.s 			page 89


 962:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 4115              		.loc 1 962 0
 4116 0094 1A4B     		ldr	r3, .L184+4
 4117 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4118 0098 9BB2     		uxth	r3, r3
 4119 009a 002B     		cmp	r3, #0
 4120 009c 0ED1     		bne	.L182
 963:bluetooth_rxtx.c **** 					do_hop = 1;
 4121              		.loc 1 963 0
 4122 009e 1A4B     		ldr	r3, .L184+12
 4123 00a0 0122     		movs	r2, #1
 4124 00a2 1A70     		strb	r2, [r3]
 964:bluetooth_rxtx.c **** 					++le.conn_count;
 4125              		.loc 1 964 0
 4126 00a4 164B     		ldr	r3, .L184+4
 4127 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 4128 00a8 9BB2     		uxth	r3, r3
 4129 00aa 0133     		adds	r3, r3, #1
 4130 00ac 9AB2     		uxth	r2, r3
 4131 00ae 144B     		ldr	r3, .L184+4
 4132 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 965:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 4133              		.loc 1 965 0
 4134 00b2 134B     		ldr	r3, .L184+4
 4135 00b4 DA8B     		ldrh	r2, [r3, #30]
 4136 00b6 124B     		ldr	r3, .L184+4
 4137 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 4138 00ba 03E0     		b	.L179
 4139              	.L182:
 966:bluetooth_rxtx.c **** 				} else {
 967:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 4140              		.loc 1 967 0
 4141 00bc 134B     		ldr	r3, .L184+16
 4142 00be 4FF48072 		mov	r2, #256
 4143 00c2 1A60     		str	r2, [r3]
 4144              	.L179:
 968:bluetooth_rxtx.c **** 				}
 969:bluetooth_rxtx.c **** 			}
 970:bluetooth_rxtx.c **** 		}
 971:bluetooth_rxtx.c **** 
 972:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 973:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 4145              		.loc 1 973 0
 4146 00c4 7B68     		ldr	r3, [r7, #4]
 4147 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 4148 00ca 002B     		cmp	r3, #0
 4149 00cc 02D1     		bne	.L183
 974:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 4150              		.loc 1 974 0
 4151 00ce 104B     		ldr	r3, .L184+20
 4152 00d0 0122     		movs	r2, #1
 4153 00d2 1A70     		strb	r2, [r3]
 4154              	.L183:
 975:bluetooth_rxtx.c **** 
 976:bluetooth_rxtx.c **** 		/* Ack interrupt */
 977:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 4155              		.loc 1 977 0
ARM GAS  /tmp/ccHz27EZ.s 			page 90


 4156 00d4 0F4A     		ldr	r2, .L184+24
 4157 00d6 104B     		ldr	r3, .L184+28
 4158 00d8 1B68     		ldr	r3, [r3]
 4159 00da C3F54363 		rsb	r3, r3, #3120
 4160 00de 0433     		adds	r3, r3, #4
 4161 00e0 1360     		str	r3, [r2]
 978:bluetooth_rxtx.c **** 		clock_trim = 0;
 4162              		.loc 1 978 0
 4163 00e2 0D4B     		ldr	r3, .L184+28
 4164 00e4 0022     		movs	r2, #0
 4165 00e6 1A60     		str	r2, [r3]
 979:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 4166              		.loc 1 979 0
 4167 00e8 4FF04023 		mov	r3, #1073758208
 4168 00ec 0122     		movs	r2, #1
 4169 00ee 1A60     		str	r2, [r3]
 4170              	.L174:
 980:bluetooth_rxtx.c **** 	}
 981:bluetooth_rxtx.c **** }
 4171              		.loc 1 981 0
 4172 00f0 0C37     		adds	r7, r7, #12
 4173              		.cfi_def_cfa_offset 4
 4174 00f2 BD46     		mov	sp, r7
 4175              		.cfi_def_cfa_register 13
 4176              		@ sp needed
 4177 00f4 5DF8047B 		ldr	r7, [sp], #4
 4178              		.cfi_restore 7
 4179              		.cfi_def_cfa_offset 0
 4180 00f8 7047     		bx	lr
 4181              	.L185:
 4182 00fa 00BF     		.align	2
 4183              	.L184:
 4184 00fc 00000000 		.word	clkn
 4185 0100 00000000 		.word	le
 4186 0104 00000000 		.word	hop_mode
 4187 0108 00000000 		.word	do_hop
 4188 010c 3CC00920 		.word	537509948
 4189 0110 00000000 		.word	keepalive_trigger
 4190 0114 18400040 		.word	1073758232
 4191 0118 00000000 		.word	clock_trim
 4192              		.cfi_endproc
 4193              	.LFE14:
 4195              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 4196              		.align	2
 4197              		.global	EINT3_IRQHandler
 4198              		.thumb
 4199              		.thumb_func
 4201              	EINT3_IRQHandler:
 4202              	.LFB15:
 982:bluetooth_rxtx.c **** 
 983:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 984:bluetooth_rxtx.c **** #ifndef TC13BADGE
 985:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 986:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 987:bluetooth_rxtx.c **** {
 4203              		.loc 1 987 0
 4204              		.cfi_startproc
ARM GAS  /tmp/ccHz27EZ.s 			page 91


 4205              		@ args = 0, pretend = 0, frame = 0
 4206              		@ frame_needed = 1, uses_anonymous_args = 0
 4207              		@ link register save eliminated.
 4208 0000 80B4     		push	{r7}
 4209              		.cfi_def_cfa_offset 4
 4210              		.cfi_offset 7, -4
 4211 0002 00AF     		add	r7, sp, #0
 4212              		.cfi_def_cfa_register 7
 988:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 989:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 4213              		.loc 1 989 0
 4214 0004 0B4B     		ldr	r3, .L187
 4215 0006 0422     		movs	r2, #4
 4216 0008 1A60     		str	r2, [r3]
 990:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 4217              		.loc 1 990 0
 4218 000a 0B4B     		ldr	r3, .L187+4
 4219 000c 0122     		movs	r2, #1
 4220 000e 1A70     		strb	r2, [r3]
 991:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 4221              		.loc 1 991 0
 4222 0010 0A4B     		ldr	r3, .L187+8
 4223 0012 1B68     		ldr	r3, [r3]
 4224 0014 C3F31303 		ubfx	r3, r3, #0, #20
 4225 0018 40F63542 		movw	r2, #3125
 4226 001c 02FB03F2 		mul	r2, r2, r3
 4227 0020 074B     		ldr	r3, .L187+12
 4228 0022 1B68     		ldr	r3, [r3]
 4229 0024 1344     		add	r3, r3, r2
 4230 0026 074A     		ldr	r2, .L187+16
 4231 0028 1360     		str	r3, [r2]
 992:bluetooth_rxtx.c **** }
 4232              		.loc 1 992 0
 4233 002a BD46     		mov	sp, r7
 4234              		.cfi_def_cfa_register 13
 4235              		@ sp needed
 4236 002c 5DF8047B 		ldr	r7, [sp], #4
 4237              		.cfi_restore 7
 4238              		.cfi_def_cfa_offset 0
 4239 0030 7047     		bx	lr
 4240              	.L188:
 4241 0032 00BF     		.align	2
 4242              	.L187:
 4243 0034 AC800240 		.word	1073905836
 4244 0038 00000000 		.word	cs_trigger
 4245 003c 00000000 		.word	clkn
 4246 0040 08400040 		.word	1073758216
 4247 0044 00000000 		.word	cs_timestamp
 4248              		.cfi_endproc
 4249              	.LFE15:
 4251              		.section	.text.msleep,"ax",%progbits
 4252              		.align	2
 4253              		.thumb
 4254              		.thumb_func
 4256              	msleep:
 4257              	.LFB16:
 993:bluetooth_rxtx.c **** #endif // TC13BADGE
ARM GAS  /tmp/ccHz27EZ.s 			page 92


 994:bluetooth_rxtx.c **** 
 995:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 996:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 997:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 998:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 999:bluetooth_rxtx.c **** {
 4258              		.loc 1 999 0
 4259              		.cfi_startproc
 4260              		@ args = 0, pretend = 0, frame = 16
 4261              		@ frame_needed = 1, uses_anonymous_args = 0
 4262              		@ link register save eliminated.
 4263 0000 80B4     		push	{r7}
 4264              		.cfi_def_cfa_offset 4
 4265              		.cfi_offset 7, -4
 4266 0002 85B0     		sub	sp, sp, #20
 4267              		.cfi_def_cfa_offset 24
 4268 0004 00AF     		add	r7, sp, #0
 4269              		.cfi_def_cfa_register 7
 4270 0006 7860     		str	r0, [r7, #4]
1000:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 3125 / 1000;  // millis -> clkn ticks
 4271              		.loc 1 1000 0
 4272 0008 7B68     		ldr	r3, [r7, #4]
 4273 000a 40F63542 		movw	r2, #3125
 4274 000e 02FB03F3 		mul	r3, r2, r3
 4275 0012 094A     		ldr	r2, .L191
 4276 0014 A2FB0323 		umull	r2, r3, r2, r3
 4277 0018 9A09     		lsrs	r2, r3, #6
 4278 001a 084B     		ldr	r3, .L191+4
 4279 001c 1B68     		ldr	r3, [r3]
 4280 001e 1344     		add	r3, r3, r2
 4281 0020 FB60     		str	r3, [r7, #12]
 4282              	.L190:
1001:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 4283              		.loc 1 1001 0 discriminator 1
 4284 0022 064B     		ldr	r3, .L191+4
 4285 0024 1A68     		ldr	r2, [r3]
 4286 0026 FB68     		ldr	r3, [r7, #12]
 4287 0028 9A42     		cmp	r2, r3
 4288 002a FAD3     		bcc	.L190
1002:bluetooth_rxtx.c **** }
 4289              		.loc 1 1002 0
 4290 002c 1437     		adds	r7, r7, #20
 4291              		.cfi_def_cfa_offset 4
 4292 002e BD46     		mov	sp, r7
 4293              		.cfi_def_cfa_register 13
 4294              		@ sp needed
 4295 0030 5DF8047B 		ldr	r7, [sp], #4
 4296              		.cfi_restore 7
 4297              		.cfi_def_cfa_offset 0
 4298 0034 7047     		bx	lr
 4299              	.L192:
 4300 0036 00BF     		.align	2
 4301              	.L191:
 4302 0038 D34D6210 		.word	274877907
 4303 003c 00000000 		.word	clkn
 4304              		.cfi_endproc
 4305              	.LFE16:
ARM GAS  /tmp/ccHz27EZ.s 			page 93


 4307              		.section	.text.dma_init,"ax",%progbits
 4308              		.align	2
 4309              		.thumb
 4310              		.thumb_func
 4312              	dma_init:
 4313              	.LFB17:
1003:bluetooth_rxtx.c **** 
1004:bluetooth_rxtx.c **** static void dma_init()
1005:bluetooth_rxtx.c **** {
 4314              		.loc 1 1005 0
 4315              		.cfi_startproc
 4316              		@ args = 0, pretend = 0, frame = 0
 4317              		@ frame_needed = 1, uses_anonymous_args = 0
 4318              		@ link register save eliminated.
 4319 0000 80B4     		push	{r7}
 4320              		.cfi_def_cfa_offset 4
 4321              		.cfi_offset 7, -4
 4322 0002 00AF     		add	r7, sp, #0
 4323              		.cfi_def_cfa_register 7
1006:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1007:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4324              		.loc 1 1007 0
 4325 0004 3F4A     		ldr	r2, .L195
 4326 0006 3F4B     		ldr	r3, .L195
 4327 0008 1B68     		ldr	r3, [r3]
 4328 000a 43F00053 		orr	r3, r3, #536870912
 4329 000e 1360     		str	r3, [r2]
1008:bluetooth_rxtx.c **** 
1009:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1010:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4330              		.loc 1 1010 0
 4331 0010 3D4B     		ldr	r3, .L195+4
 4332 0012 0022     		movs	r2, #0
 4333 0014 1A60     		str	r2, [r3]
1011:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4334              		.loc 1 1011 0
 4335 0016 3D4B     		ldr	r3, .L195+8
 4336 0018 0022     		movs	r2, #0
 4337 001a 1A60     		str	r2, [r3]
1012:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4338              		.loc 1 1012 0
 4339 001c 3C4B     		ldr	r3, .L195+12
 4340 001e 0022     		movs	r2, #0
 4341 0020 1A60     		str	r2, [r3]
1013:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4342              		.loc 1 1013 0
 4343 0022 3C4B     		ldr	r3, .L195+16
 4344 0024 0022     		movs	r2, #0
 4345 0026 1A60     		str	r2, [r3]
1014:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4346              		.loc 1 1014 0
 4347 0028 3B4B     		ldr	r3, .L195+20
 4348 002a 0022     		movs	r2, #0
 4349 002c 1A60     		str	r2, [r3]
1015:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4350              		.loc 1 1015 0
 4351 002e 3B4B     		ldr	r3, .L195+24
ARM GAS  /tmp/ccHz27EZ.s 			page 94


 4352 0030 0022     		movs	r2, #0
 4353 0032 1A60     		str	r2, [r3]
1016:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4354              		.loc 1 1016 0
 4355 0034 3A4B     		ldr	r3, .L195+28
 4356 0036 0022     		movs	r2, #0
 4357 0038 1A60     		str	r2, [r3]
1017:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4358              		.loc 1 1017 0
 4359 003a 3A4B     		ldr	r3, .L195+32
 4360 003c 0022     		movs	r2, #0
 4361 003e 1A60     		str	r2, [r3]
1018:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4362              		.loc 1 1018 0
 4363 0040 394B     		ldr	r3, .L195+36
 4364 0042 FF22     		movs	r2, #255
 4365 0044 1A60     		str	r2, [r3]
1019:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4366              		.loc 1 1019 0
 4367 0046 394B     		ldr	r3, .L195+40
 4368 0048 FF22     		movs	r2, #255
 4369 004a 1A60     		str	r2, [r3]
1020:bluetooth_rxtx.c **** 
1021:bluetooth_rxtx.c **** 	/* DMA linked lists */
1022:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4370              		.loc 1 1022 0
 4371 004c 384B     		ldr	r3, .L195+44
 4372 004e 394A     		ldr	r2, .L195+48
 4373 0050 1A60     		str	r2, [r3]
1023:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4374              		.loc 1 1023 0
 4375 0052 394A     		ldr	r2, .L195+52
 4376 0054 364B     		ldr	r3, .L195+44
 4377 0056 5A60     		str	r2, [r3, #4]
1024:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4378              		.loc 1 1024 0
 4379 0058 384A     		ldr	r2, .L195+56
 4380 005a 354B     		ldr	r3, .L195+44
 4381 005c 9A60     		str	r2, [r3, #8]
1025:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4382              		.loc 1 1025 0
 4383 005e 344B     		ldr	r3, .L195+44
 4384 0060 374A     		ldr	r2, .L195+60
 4385 0062 DA60     		str	r2, [r3, #12]
1026:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1027:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1028:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1029:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1030:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1031:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1032:bluetooth_rxtx.c **** 
1033:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4386              		.loc 1 1033 0
 4387 0064 354B     		ldr	r3, .L195+56
 4388 0066 334A     		ldr	r2, .L195+48
 4389 0068 1A60     		str	r2, [r3]
1034:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
ARM GAS  /tmp/ccHz27EZ.s 			page 95


 4390              		.loc 1 1034 0
 4391 006a 364A     		ldr	r2, .L195+64
 4392 006c 334B     		ldr	r3, .L195+56
 4393 006e 5A60     		str	r2, [r3, #4]
1035:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4394              		.loc 1 1035 0
 4395 0070 2F4A     		ldr	r2, .L195+44
 4396 0072 324B     		ldr	r3, .L195+56
 4397 0074 9A60     		str	r2, [r3, #8]
1036:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4398              		.loc 1 1036 0
 4399 0076 314B     		ldr	r3, .L195+56
 4400 0078 314A     		ldr	r2, .L195+60
 4401 007a DA60     		str	r2, [r3, #12]
1037:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1038:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1039:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1040:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1041:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1042:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1043:bluetooth_rxtx.c **** 
1044:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
1045:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4402              		.loc 1 1045 0
 4403 007c 324B     		ldr	r3, .L195+68
 4404 007e 4FF08062 		mov	r2, #67108864
 4405 0082 1A60     		str	r2, [r3]
1046:bluetooth_rxtx.c **** 
1047:bluetooth_rxtx.c **** 	/* enable DMA globally */
1048:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4406              		.loc 1 1048 0
 4407 0084 314B     		ldr	r3, .L195+72
 4408 0086 0122     		movs	r2, #1
 4409 0088 1A60     		str	r2, [r3]
1049:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4410              		.loc 1 1049 0
 4411 008a 00BF     		nop
 4412              	.L194:
 4413              		.loc 1 1049 0 is_stmt 0 discriminator 1
 4414 008c 2F4B     		ldr	r3, .L195+72
 4415 008e 1B68     		ldr	r3, [r3]
 4416 0090 03F00103 		and	r3, r3, #1
 4417 0094 002B     		cmp	r3, #0
 4418 0096 F9D0     		beq	.L194
1050:bluetooth_rxtx.c **** 
1051:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
1052:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4419              		.loc 1 1052 0 is_stmt 1
 4420 0098 2D4A     		ldr	r2, .L195+76
 4421 009a 254B     		ldr	r3, .L195+44
 4422 009c 1B68     		ldr	r3, [r3]
 4423 009e 1360     		str	r3, [r2]
1053:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4424              		.loc 1 1053 0
 4425 00a0 2C4A     		ldr	r2, .L195+80
 4426 00a2 234B     		ldr	r3, .L195+44
 4427 00a4 5B68     		ldr	r3, [r3, #4]
ARM GAS  /tmp/ccHz27EZ.s 			page 96


 4428 00a6 1360     		str	r3, [r2]
1054:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4429              		.loc 1 1054 0
 4430 00a8 2B4A     		ldr	r2, .L195+84
 4431 00aa 214B     		ldr	r3, .L195+44
 4432 00ac 9B68     		ldr	r3, [r3, #8]
 4433 00ae 1360     		str	r3, [r2]
1055:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4434              		.loc 1 1055 0
 4435 00b0 2A4A     		ldr	r2, .L195+88
 4436 00b2 1F4B     		ldr	r3, .L195+44
 4437 00b4 DB68     		ldr	r3, [r3, #12]
 4438 00b6 1360     		str	r3, [r2]
1056:bluetooth_rxtx.c **** 	DMACC0Config =
 4439              		.loc 1 1056 0
 4440 00b8 134B     		ldr	r3, .L195+4
 4441 00ba 4DF20602 		movw	r2, #53254
 4442 00be 1A60     		str	r2, [r3]
1057:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1058:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1059:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1060:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1061:bluetooth_rxtx.c **** 
1062:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4443              		.loc 1 1062 0
 4444 00c0 274B     		ldr	r3, .L195+92
 4445 00c2 1B68     		ldr	r3, [r3]
 4446 00c4 1B0D     		lsrs	r3, r3, #20
 4447 00c6 DBB2     		uxtb	r3, r3
 4448 00c8 264A     		ldr	r2, .L195+96
 4449 00ca 1360     		str	r3, [r2]
1063:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4450              		.loc 1 1063 0
 4451 00cc 244B     		ldr	r3, .L195+92
 4452 00ce 1B68     		ldr	r3, [r3]
 4453 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4454 00d4 40F63542 		movw	r2, #3125
 4455 00d8 02FB03F2 		mul	r2, r2, r3
 4456 00dc 224B     		ldr	r3, .L195+100
 4457 00de 1B68     		ldr	r3, [r3]
 4458 00e0 1344     		add	r3, r3, r2
 4459 00e2 224A     		ldr	r2, .L195+104
 4460 00e4 1360     		str	r3, [r2]
1064:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4461              		.loc 1 1064 0
 4462 00e6 224B     		ldr	r3, .L195+108
 4463 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4464 00ea 9AB2     		uxth	r2, r3
 4465 00ec 214B     		ldr	r3, .L195+112
 4466 00ee 1A80     		strh	r2, [r3]	@ movhi
1065:bluetooth_rxtx.c **** 
1066:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1067:bluetooth_rxtx.c **** 	rx_tc = 0;
 4467              		.loc 1 1067 0
 4468 00f0 214B     		ldr	r3, .L195+116
 4469 00f2 0022     		movs	r2, #0
 4470 00f4 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 97


1068:bluetooth_rxtx.c **** 	rx_err = 0;
 4471              		.loc 1 1068 0
 4472 00f6 214B     		ldr	r3, .L195+120
 4473 00f8 0022     		movs	r2, #0
 4474 00fa 1A60     		str	r2, [r3]
1069:bluetooth_rxtx.c **** }
 4475              		.loc 1 1069 0
 4476 00fc BD46     		mov	sp, r7
 4477              		.cfi_def_cfa_register 13
 4478              		@ sp needed
 4479 00fe 5DF8047B 		ldr	r7, [sp], #4
 4480              		.cfi_restore 7
 4481              		.cfi_def_cfa_offset 0
 4482 0102 7047     		bx	lr
 4483              	.L196:
 4484              		.align	2
 4485              	.L195:
 4486 0104 C4C00F40 		.word	1074774212
 4487 0108 10410050 		.word	1342193936
 4488 010c 30410050 		.word	1342193968
 4489 0110 50410050 		.word	1342194000
 4490 0114 70410050 		.word	1342194032
 4491 0118 90410050 		.word	1342194064
 4492 011c B0410050 		.word	1342194096
 4493 0120 D0410050 		.word	1342194128
 4494 0124 F0410050 		.word	1342194160
 4495 0128 08400050 		.word	1342193672
 4496 012c 10400050 		.word	1342193680
 4497 0130 00000000 		.word	rx_dma_lli1
 4498 0134 08000340 		.word	1073938440
 4499 0138 00000000 		.word	rxbuf1
 4500 013c 00000000 		.word	rx_dma_lli2
 4501 0140 32900088 		.word	-2013229006
 4502 0144 00000000 		.word	rxbuf2
 4503 0148 80E100E0 		.word	-536813184
 4504 014c 30400050 		.word	1342193712
 4505 0150 00410050 		.word	1342193920
 4506 0154 04410050 		.word	1342193924
 4507 0158 08410050 		.word	1342193928
 4508 015c 0C410050 		.word	1342193932
 4509 0160 00000000 		.word	clkn
 4510 0164 00000000 		.word	active_buf_clkn_high
 4511 0168 08400040 		.word	1073758216
 4512 016c 00000000 		.word	active_buf_clk100ns
 4513 0170 00000000 		.word	channel
 4514 0174 00000000 		.word	active_buf_channel
 4515 0178 00000000 		.word	rx_tc
 4516 017c 00000000 		.word	rx_err
 4517              		.cfi_endproc
 4518              	.LFE17:
 4520              		.section	.text.dma_init_le,"ax",%progbits
 4521              		.align	2
 4522              		.thumb
 4523              		.thumb_func
 4525              	dma_init_le:
 4526              	.LFB18:
1070:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 98


1071:bluetooth_rxtx.c **** static void dma_init_le()
1072:bluetooth_rxtx.c **** {
 4527              		.loc 1 1072 0
 4528              		.cfi_startproc
 4529              		@ args = 0, pretend = 0, frame = 8
 4530              		@ frame_needed = 1, uses_anonymous_args = 0
 4531              		@ link register save eliminated.
 4532 0000 80B4     		push	{r7}
 4533              		.cfi_def_cfa_offset 4
 4534              		.cfi_offset 7, -4
 4535 0002 83B0     		sub	sp, sp, #12
 4536              		.cfi_def_cfa_offset 16
 4537 0004 00AF     		add	r7, sp, #0
 4538              		.cfi_def_cfa_register 7
1073:bluetooth_rxtx.c **** 	int i;
1074:bluetooth_rxtx.c **** 
1075:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1076:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4539              		.loc 1 1076 0
 4540 0006 4B4A     		ldr	r2, .L203
 4541 0008 4A4B     		ldr	r3, .L203
 4542 000a 1B68     		ldr	r3, [r3]
 4543 000c 43F00053 		orr	r3, r3, #536870912
 4544 0010 1360     		str	r3, [r2]
1077:bluetooth_rxtx.c **** 
1078:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1079:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4545              		.loc 1 1079 0
 4546 0012 494B     		ldr	r3, .L203+4
 4547 0014 0022     		movs	r2, #0
 4548 0016 1A60     		str	r2, [r3]
1080:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4549              		.loc 1 1080 0
 4550 0018 484B     		ldr	r3, .L203+8
 4551 001a 0022     		movs	r2, #0
 4552 001c 1A60     		str	r2, [r3]
1081:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4553              		.loc 1 1081 0
 4554 001e 484B     		ldr	r3, .L203+12
 4555 0020 0022     		movs	r2, #0
 4556 0022 1A60     		str	r2, [r3]
1082:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4557              		.loc 1 1082 0
 4558 0024 474B     		ldr	r3, .L203+16
 4559 0026 0022     		movs	r2, #0
 4560 0028 1A60     		str	r2, [r3]
1083:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4561              		.loc 1 1083 0
 4562 002a 474B     		ldr	r3, .L203+20
 4563 002c 0022     		movs	r2, #0
 4564 002e 1A60     		str	r2, [r3]
1084:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4565              		.loc 1 1084 0
 4566 0030 464B     		ldr	r3, .L203+24
 4567 0032 0022     		movs	r2, #0
 4568 0034 1A60     		str	r2, [r3]
1085:bluetooth_rxtx.c **** 	DMACC6Config = 0;
ARM GAS  /tmp/ccHz27EZ.s 			page 99


 4569              		.loc 1 1085 0
 4570 0036 464B     		ldr	r3, .L203+28
 4571 0038 0022     		movs	r2, #0
 4572 003a 1A60     		str	r2, [r3]
1086:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4573              		.loc 1 1086 0
 4574 003c 454B     		ldr	r3, .L203+32
 4575 003e 0022     		movs	r2, #0
 4576 0040 1A60     		str	r2, [r3]
1087:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4577              		.loc 1 1087 0
 4578 0042 454B     		ldr	r3, .L203+36
 4579 0044 FF22     		movs	r2, #255
 4580 0046 1A60     		str	r2, [r3]
1088:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4581              		.loc 1 1088 0
 4582 0048 444B     		ldr	r3, .L203+40
 4583 004a FF22     		movs	r2, #255
 4584 004c 1A60     		str	r2, [r3]
1089:bluetooth_rxtx.c **** 
1090:bluetooth_rxtx.c **** 	/* enable DMA globally */
1091:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4585              		.loc 1 1091 0
 4586 004e 444B     		ldr	r3, .L203+44
 4587 0050 0122     		movs	r2, #1
 4588 0052 1A60     		str	r2, [r3]
1092:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4589              		.loc 1 1092 0
 4590 0054 00BF     		nop
 4591              	.L198:
 4592              		.loc 1 1092 0 is_stmt 0 discriminator 1
 4593 0056 424B     		ldr	r3, .L203+44
 4594 0058 1B68     		ldr	r3, [r3]
 4595 005a 03F00103 		and	r3, r3, #1
 4596 005e 002B     		cmp	r3, #0
 4597 0060 F9D0     		beq	.L198
1093:bluetooth_rxtx.c **** 
1094:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4598              		.loc 1 1094 0 is_stmt 1
 4599 0062 0023     		movs	r3, #0
 4600 0064 7B60     		str	r3, [r7, #4]
 4601 0066 2AE0     		b	.L199
 4602              	.L202:
1095:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4603              		.loc 1 1095 0
 4604 0068 3E4A     		ldr	r2, .L203+48
 4605 006a 7B68     		ldr	r3, [r7, #4]
 4606 006c 1B01     		lsls	r3, r3, #4
 4607 006e 1344     		add	r3, r3, r2
 4608 0070 3D4A     		ldr	r2, .L203+52
 4609 0072 1A60     		str	r2, [r3]
1096:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4610              		.loc 1 1096 0
 4611 0074 7B68     		ldr	r3, [r7, #4]
 4612 0076 9B00     		lsls	r3, r3, #2
 4613 0078 3C4A     		ldr	r2, .L203+56
 4614 007a 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccHz27EZ.s 			page 100


 4615 007c 1946     		mov	r1, r3
 4616 007e 394A     		ldr	r2, .L203+48
 4617 0080 7B68     		ldr	r3, [r7, #4]
 4618 0082 1B01     		lsls	r3, r3, #4
 4619 0084 1344     		add	r3, r3, r2
 4620 0086 5960     		str	r1, [r3, #4]
1097:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4621              		.loc 1 1097 0
 4622 0088 7B68     		ldr	r3, [r7, #4]
 4623 008a 092B     		cmp	r3, #9
 4624 008c 06DC     		bgt	.L200
 4625              		.loc 1 1097 0 is_stmt 0 discriminator 1
 4626 008e 7B68     		ldr	r3, [r7, #4]
 4627 0090 0133     		adds	r3, r3, #1
 4628 0092 1B01     		lsls	r3, r3, #4
 4629 0094 334A     		ldr	r2, .L203+48
 4630 0096 1344     		add	r3, r3, r2
 4631 0098 1A46     		mov	r2, r3
 4632 009a 00E0     		b	.L201
 4633              	.L200:
 4634              		.loc 1 1097 0 discriminator 2
 4635 009c 0022     		movs	r2, #0
 4636              	.L201:
 4637              		.loc 1 1097 0 discriminator 4
 4638 009e 3149     		ldr	r1, .L203+48
 4639 00a0 7B68     		ldr	r3, [r7, #4]
 4640 00a2 1B01     		lsls	r3, r3, #4
 4641 00a4 0B44     		add	r3, r3, r1
 4642 00a6 0833     		adds	r3, r3, #8
 4643 00a8 1A60     		str	r2, [r3]
1098:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4644              		.loc 1 1098 0 is_stmt 1 discriminator 4
 4645 00aa 2E4A     		ldr	r2, .L203+48
 4646 00ac 7B68     		ldr	r3, [r7, #4]
 4647 00ae 1B01     		lsls	r3, r3, #4
 4648 00b0 1344     		add	r3, r3, r2
 4649 00b2 0833     		adds	r3, r3, #8
 4650 00b4 2E4A     		ldr	r2, .L203+60
 4651 00b6 5A60     		str	r2, [r3, #4]
1094:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4652              		.loc 1 1094 0 discriminator 4
 4653 00b8 7B68     		ldr	r3, [r7, #4]
 4654 00ba 0133     		adds	r3, r3, #1
 4655 00bc 7B60     		str	r3, [r7, #4]
 4656              	.L199:
1094:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4657              		.loc 1 1094 0 is_stmt 0 discriminator 2
 4658 00be 7B68     		ldr	r3, [r7, #4]
 4659 00c0 0A2B     		cmp	r3, #10
 4660 00c2 D1DD     		ble	.L202
1099:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1100:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1101:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1102:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1103:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1104:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1105:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccHz27EZ.s 			page 101


1106:bluetooth_rxtx.c **** 
1107:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1108:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4661              		.loc 1 1108 0 is_stmt 1
 4662 00c4 2B4A     		ldr	r2, .L203+64
 4663 00c6 274B     		ldr	r3, .L203+48
 4664 00c8 1B68     		ldr	r3, [r3]
 4665 00ca 1360     		str	r3, [r2]
1109:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4666              		.loc 1 1109 0
 4667 00cc 2A4A     		ldr	r2, .L203+68
 4668 00ce 254B     		ldr	r3, .L203+48
 4669 00d0 5B68     		ldr	r3, [r3, #4]
 4670 00d2 1360     		str	r3, [r2]
1110:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4671              		.loc 1 1110 0
 4672 00d4 294A     		ldr	r2, .L203+72
 4673 00d6 234B     		ldr	r3, .L203+48
 4674 00d8 9B68     		ldr	r3, [r3, #8]
 4675 00da 1360     		str	r3, [r2]
1111:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4676              		.loc 1 1111 0
 4677 00dc 284A     		ldr	r2, .L203+76
 4678 00de 214B     		ldr	r3, .L203+48
 4679 00e0 DB68     		ldr	r3, [r3, #12]
 4680 00e2 1360     		str	r3, [r2]
1112:bluetooth_rxtx.c **** 	DMACC0Config =
 4681              		.loc 1 1112 0
 4682 00e4 144B     		ldr	r3, .L203+4
 4683 00e6 4DF20602 		movw	r2, #53254
 4684 00ea 1A60     		str	r2, [r3]
1113:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1114:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1115:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1116:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1117:bluetooth_rxtx.c **** 
1118:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4685              		.loc 1 1118 0
 4686 00ec 254B     		ldr	r3, .L203+80
 4687 00ee 1B68     		ldr	r3, [r3]
 4688 00f0 1B0D     		lsrs	r3, r3, #20
 4689 00f2 DBB2     		uxtb	r3, r3
 4690 00f4 244A     		ldr	r2, .L203+84
 4691 00f6 1360     		str	r3, [r2]
1119:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4692              		.loc 1 1119 0
 4693 00f8 224B     		ldr	r3, .L203+80
 4694 00fa 1B68     		ldr	r3, [r3]
 4695 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4696 0100 40F63542 		movw	r2, #3125
 4697 0104 02FB03F2 		mul	r2, r2, r3
 4698 0108 204B     		ldr	r3, .L203+88
 4699 010a 1B68     		ldr	r3, [r3]
 4700 010c 1344     		add	r3, r3, r2
 4701 010e 204A     		ldr	r2, .L203+92
 4702 0110 1360     		str	r3, [r2]
1120:bluetooth_rxtx.c **** 	active_buf_channel = channel;
ARM GAS  /tmp/ccHz27EZ.s 			page 102


 4703              		.loc 1 1120 0
 4704 0112 204B     		ldr	r3, .L203+96
 4705 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4706 0116 9AB2     		uxth	r2, r3
 4707 0118 1F4B     		ldr	r3, .L203+100
 4708 011a 1A80     		strh	r2, [r3]	@ movhi
1121:bluetooth_rxtx.c **** 
1122:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1123:bluetooth_rxtx.c **** 	rx_tc = 0;
 4709              		.loc 1 1123 0
 4710 011c 1F4B     		ldr	r3, .L203+104
 4711 011e 0022     		movs	r2, #0
 4712 0120 1A60     		str	r2, [r3]
1124:bluetooth_rxtx.c **** 	rx_err = 0;
 4713              		.loc 1 1124 0
 4714 0122 1F4B     		ldr	r3, .L203+108
 4715 0124 0022     		movs	r2, #0
 4716 0126 1A60     		str	r2, [r3]
1125:bluetooth_rxtx.c **** }
 4717              		.loc 1 1125 0
 4718 0128 0C37     		adds	r7, r7, #12
 4719              		.cfi_def_cfa_offset 4
 4720 012a BD46     		mov	sp, r7
 4721              		.cfi_def_cfa_register 13
 4722              		@ sp needed
 4723 012c 5DF8047B 		ldr	r7, [sp], #4
 4724              		.cfi_restore 7
 4725              		.cfi_def_cfa_offset 0
 4726 0130 7047     		bx	lr
 4727              	.L204:
 4728 0132 00BF     		.align	2
 4729              	.L203:
 4730 0134 C4C00F40 		.word	1074774212
 4731 0138 10410050 		.word	1342193936
 4732 013c 30410050 		.word	1342193968
 4733 0140 50410050 		.word	1342194000
 4734 0144 70410050 		.word	1342194032
 4735 0148 90410050 		.word	1342194064
 4736 014c B0410050 		.word	1342194096
 4737 0150 D0410050 		.word	1342194128
 4738 0154 F0410050 		.word	1342194160
 4739 0158 08400050 		.word	1342193672
 4740 015c 10400050 		.word	1342193680
 4741 0160 30400050 		.word	1342193712
 4742 0164 00000000 		.word	le_dma_lli
 4743 0168 08000340 		.word	1073938440
 4744 016c 00000000 		.word	rxbuf1
 4745 0170 04100088 		.word	-2013261820
 4746 0174 00410050 		.word	1342193920
 4747 0178 04410050 		.word	1342193924
 4748 017c 08410050 		.word	1342193928
 4749 0180 0C410050 		.word	1342193932
 4750 0184 00000000 		.word	clkn
 4751 0188 00000000 		.word	active_buf_clkn_high
 4752 018c 08400040 		.word	1073758216
 4753 0190 00000000 		.word	active_buf_clk100ns
 4754 0194 00000000 		.word	channel
ARM GAS  /tmp/ccHz27EZ.s 			page 103


 4755 0198 00000000 		.word	active_buf_channel
 4756 019c 00000000 		.word	rx_tc
 4757 01a0 00000000 		.word	rx_err
 4758              		.cfi_endproc
 4759              	.LFE18:
 4761              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4762              		.align	2
 4763              		.global	bt_stream_dma_handler
 4764              		.thumb
 4765              		.thumb_func
 4767              	bt_stream_dma_handler:
 4768              	.LFB19:
1126:bluetooth_rxtx.c **** 
1127:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4769              		.loc 1 1127 0
 4770              		.cfi_startproc
 4771              		@ args = 0, pretend = 0, frame = 0
 4772              		@ frame_needed = 1, uses_anonymous_args = 0
 4773              		@ link register save eliminated.
 4774 0000 80B4     		push	{r7}
 4775              		.cfi_def_cfa_offset 4
 4776              		.cfi_offset 7, -4
 4777 0002 00AF     		add	r7, sp, #0
 4778              		.cfi_def_cfa_register 7
1128:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4779              		.loc 1 1128 0
 4780 0004 254B     		ldr	r3, .L208
 4781 0006 1B68     		ldr	r3, [r3]
 4782 0008 254A     		ldr	r2, .L208+4
 4783 000a 1360     		str	r3, [r2]
1129:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4784              		.loc 1 1129 0
 4785 000c 254B     		ldr	r3, .L208+8
 4786 000e 1B68     		ldr	r3, [r3]
 4787 0010 1B0D     		lsrs	r3, r3, #20
 4788 0012 DBB2     		uxtb	r3, r3
 4789 0014 214A     		ldr	r2, .L208
 4790 0016 1360     		str	r3, [r2]
1130:bluetooth_rxtx.c **** 
1131:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4791              		.loc 1 1131 0
 4792 0018 234B     		ldr	r3, .L208+12
 4793 001a 1B68     		ldr	r3, [r3]
 4794 001c 234A     		ldr	r2, .L208+16
 4795 001e 1360     		str	r3, [r2]
1132:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4796              		.loc 1 1132 0
 4797 0020 204B     		ldr	r3, .L208+8
 4798 0022 1B68     		ldr	r3, [r3]
 4799 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4800 0028 40F63542 		movw	r2, #3125
 4801 002c 02FB03F2 		mul	r2, r2, r3
 4802 0030 1F4B     		ldr	r3, .L208+20
 4803 0032 1B68     		ldr	r3, [r3]
 4804 0034 1344     		add	r3, r3, r2
 4805 0036 1C4A     		ldr	r2, .L208+12
 4806 0038 1360     		str	r3, [r2]
ARM GAS  /tmp/ccHz27EZ.s 			page 104


1133:bluetooth_rxtx.c **** 
1134:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4807              		.loc 1 1134 0
 4808 003a 1E4B     		ldr	r3, .L208+24
 4809 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4810 003e 9AB2     		uxth	r2, r3
 4811 0040 1D4B     		ldr	r3, .L208+28
 4812 0042 1A80     		strh	r2, [r3]	@ movhi
1135:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4813              		.loc 1 1135 0
 4814 0044 1D4B     		ldr	r3, .L208+32
 4815 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4816 0048 9AB2     		uxth	r2, r3
 4817 004a 1A4B     		ldr	r3, .L208+24
 4818 004c 1A80     		strh	r2, [r3]	@ movhi
1136:bluetooth_rxtx.c **** 
1137:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1138:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4819              		.loc 1 1138 0
 4820 004e 1C4B     		ldr	r3, .L208+36
 4821 0050 1B68     		ldr	r3, [r3]
 4822 0052 03F00103 		and	r3, r3, #1
 4823 0056 002B     		cmp	r3, #0
 4824 0058 1BD0     		beq	.L205
1139:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4825              		.loc 1 1139 0
 4826 005a 1A4B     		ldr	r3, .L208+40
 4827 005c 1B68     		ldr	r3, [r3]
 4828 005e 03F00103 		and	r3, r3, #1
 4829 0062 002B     		cmp	r3, #0
 4830 0064 07D0     		beq	.L207
1140:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4831              		.loc 1 1140 0
 4832 0066 184B     		ldr	r3, .L208+44
 4833 0068 0122     		movs	r2, #1
 4834 006a 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 			++rx_tc;
 4835              		.loc 1 1141 0
 4836 006c 174B     		ldr	r3, .L208+48
 4837 006e 1B68     		ldr	r3, [r3]
 4838 0070 0133     		adds	r3, r3, #1
 4839 0072 164A     		ldr	r2, .L208+48
 4840 0074 1360     		str	r3, [r2]
 4841              	.L207:
1142:bluetooth_rxtx.c **** 		}
1143:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4842              		.loc 1 1143 0
 4843 0076 164B     		ldr	r3, .L208+52
 4844 0078 1B68     		ldr	r3, [r3]
 4845 007a 03F00103 		and	r3, r3, #1
 4846 007e 002B     		cmp	r3, #0
 4847 0080 07D0     		beq	.L205
1144:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4848              		.loc 1 1144 0
 4849 0082 144B     		ldr	r3, .L208+56
 4850 0084 0122     		movs	r2, #1
 4851 0086 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 105


1145:bluetooth_rxtx.c **** 			++rx_err;
 4852              		.loc 1 1145 0
 4853 0088 134B     		ldr	r3, .L208+60
 4854 008a 1B68     		ldr	r3, [r3]
 4855 008c 0133     		adds	r3, r3, #1
 4856 008e 124A     		ldr	r2, .L208+60
 4857 0090 1360     		str	r3, [r2]
 4858              	.L205:
1146:bluetooth_rxtx.c **** 		}
1147:bluetooth_rxtx.c **** 	}
1148:bluetooth_rxtx.c **** }
 4859              		.loc 1 1148 0
 4860 0092 BD46     		mov	sp, r7
 4861              		.cfi_def_cfa_register 13
 4862              		@ sp needed
 4863 0094 5DF8047B 		ldr	r7, [sp], #4
 4864              		.cfi_restore 7
 4865              		.cfi_def_cfa_offset 0
 4866 0098 7047     		bx	lr
 4867              	.L209:
 4868 009a 00BF     		.align	2
 4869              	.L208:
 4870 009c 00000000 		.word	active_buf_clkn_high
 4871 00a0 00000000 		.word	idle_buf_clkn_high
 4872 00a4 00000000 		.word	clkn
 4873 00a8 00000000 		.word	active_buf_clk100ns
 4874 00ac 00000000 		.word	idle_buf_clk100ns
 4875 00b0 08400040 		.word	1073758216
 4876 00b4 00000000 		.word	active_buf_channel
 4877 00b8 00000000 		.word	idle_buf_channel
 4878 00bc 00000000 		.word	channel
 4879 00c0 00400050 		.word	1342193664
 4880 00c4 04400050 		.word	1342193668
 4881 00c8 08400050 		.word	1342193672
 4882 00cc 00000000 		.word	rx_tc
 4883 00d0 0C400050 		.word	1342193676
 4884 00d4 10400050 		.word	1342193680
 4885 00d8 00000000 		.word	rx_err
 4886              		.cfi_endproc
 4887              	.LFE19:
 4889              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4890              		.align	2
 4891              		.global	DMA_IRQHandler
 4892              		.thumb
 4893              		.thumb_func
 4895              	DMA_IRQHandler:
 4896              	.LFB20:
1149:bluetooth_rxtx.c **** 
1150:bluetooth_rxtx.c **** void DMA_IRQHandler()
1151:bluetooth_rxtx.c **** {
 4897              		.loc 1 1151 0
 4898              		.cfi_startproc
 4899              		@ args = 0, pretend = 0, frame = 0
 4900              		@ frame_needed = 1, uses_anonymous_args = 0
 4901 0000 80B5     		push	{r7, lr}
 4902              		.cfi_def_cfa_offset 8
 4903              		.cfi_offset 7, -8
ARM GAS  /tmp/ccHz27EZ.s 			page 106


 4904              		.cfi_offset 14, -4
 4905 0002 00AF     		add	r7, sp, #0
 4906              		.cfi_def_cfa_register 7
1152:bluetooth_rxtx.c **** 	switch (mode) {
 4907              		.loc 1 1152 0
 4908 0004 124B     		ldr	r3, .L214
 4909 0006 1B78     		ldrb	r3, [r3]
 4910 0008 DBB2     		uxtb	r3, r3
 4911 000a 013B     		subs	r3, r3, #1
 4912 000c 0B2B     		cmp	r3, #11
 4913 000e 1ED8     		bhi	.L210
 4914 0010 01A2     		adr	r2, .L213
 4915 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4916 0016 00BF     		.p2align 2
 4917              	.L213:
 4918 0018 49000000 		.word	.L212+1
 4919 001c 4F000000 		.word	.L210+1
 4920 0020 4F000000 		.word	.L210+1
 4921 0024 49000000 		.word	.L212+1
 4922 0028 4F000000 		.word	.L210+1
 4923 002c 4F000000 		.word	.L210+1
 4924 0030 4F000000 		.word	.L210+1
 4925 0034 49000000 		.word	.L212+1
 4926 0038 49000000 		.word	.L212+1
 4927 003c 49000000 		.word	.L212+1
 4928 0040 4F000000 		.word	.L210+1
 4929 0044 49000000 		.word	.L212+1
 4930              		.p2align 1
 4931              	.L212:
1153:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1154:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1155:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1156:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1157:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1158:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1159:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4932              		.loc 1 1159 0
 4933 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1160:bluetooth_rxtx.c **** 			break;
 4934              		.loc 1 1160 0
 4935 004c 00BF     		nop
 4936              	.L210:
1161:bluetooth_rxtx.c **** 	}
1162:bluetooth_rxtx.c **** }
 4937              		.loc 1 1162 0
 4938 004e 80BD     		pop	{r7, pc}
 4939              	.L215:
 4940              		.align	2
 4941              	.L214:
 4942 0050 00000000 		.word	mode
 4943              		.cfi_endproc
 4944              	.LFE20:
 4946              		.section	.text.dio_ssp_start,"ax",%progbits
 4947              		.align	2
 4948              		.thumb
 4949              		.thumb_func
 4951              	dio_ssp_start:
ARM GAS  /tmp/ccHz27EZ.s 			page 107


 4952              	.LFB21:
1163:bluetooth_rxtx.c **** 
1164:bluetooth_rxtx.c **** static void dio_ssp_start()
1165:bluetooth_rxtx.c **** {
 4953              		.loc 1 1165 0
 4954              		.cfi_startproc
 4955              		@ args = 0, pretend = 0, frame = 0
 4956              		@ frame_needed = 1, uses_anonymous_args = 0
 4957              		@ link register save eliminated.
 4958 0000 80B4     		push	{r7}
 4959              		.cfi_def_cfa_offset 4
 4960              		.cfi_offset 7, -4
 4961 0002 00AF     		add	r7, sp, #0
 4962              		.cfi_def_cfa_register 7
1166:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1167:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4963              		.loc 1 1167 0
 4964 0004 104B     		ldr	r3, .L217
 4965 0006 4FF08052 		mov	r2, #268435456
 4966 000a 1A60     		str	r2, [r3]
1168:bluetooth_rxtx.c **** 
1169:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1170:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4967              		.loc 1 1170 0
 4968 000c 0F4A     		ldr	r2, .L217+4
 4969 000e 0F4B     		ldr	r3, .L217+4
 4970 0010 1B68     		ldr	r3, [r3]
 4971 0012 43F00103 		orr	r3, r3, #1
 4972 0016 1360     		str	r3, [r2]
1171:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4973              		.loc 1 1171 0
 4974 0018 0D4A     		ldr	r2, .L217+8
 4975 001a 0D4B     		ldr	r3, .L217+8
 4976 001c 1B68     		ldr	r3, [r3]
 4977 001e 43F00203 		orr	r3, r3, #2
 4978 0022 1360     		str	r3, [r2]
1172:bluetooth_rxtx.c **** 	
1173:bluetooth_rxtx.c **** 	/* enable DMA */
1174:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4979              		.loc 1 1174 0
 4980 0024 0B4A     		ldr	r2, .L217+12
 4981 0026 0B4B     		ldr	r3, .L217+12
 4982 0028 1B68     		ldr	r3, [r3]
 4983 002a 43F00103 		orr	r3, r3, #1
 4984 002e 1360     		str	r3, [r2]
1175:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4985              		.loc 1 1175 0
 4986 0030 094B     		ldr	r3, .L217+16
 4987 0032 4FF08062 		mov	r2, #67108864
 4988 0036 1A60     		str	r2, [r3]
1176:bluetooth_rxtx.c **** 
1177:bluetooth_rxtx.c **** 	/* activate slave select pin */
1178:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4989              		.loc 1 1178 0
 4990 0038 084B     		ldr	r3, .L217+20
 4991 003a 4FF08052 		mov	r2, #268435456
 4992 003e 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 108


1179:bluetooth_rxtx.c **** }
 4993              		.loc 1 1179 0
 4994 0040 BD46     		mov	sp, r7
 4995              		.cfi_def_cfa_register 13
 4996              		@ sp needed
 4997 0042 5DF8047B 		ldr	r7, [sp], #4
 4998              		.cfi_restore 7
 4999              		.cfi_def_cfa_offset 0
 5000 0046 7047     		bx	lr
 5001              	.L218:
 5002              		.align	2
 5003              	.L217:
 5004 0048 98C00920 		.word	537510040
 5005 004c 24000340 		.word	1073938468
 5006 0050 04000340 		.word	1073938436
 5007 0054 10410050 		.word	1342193936
 5008 0058 00E100E0 		.word	-536813312
 5009 005c 9CC00920 		.word	537510044
 5010              		.cfi_endproc
 5011              	.LFE21:
 5013              		.section	.text.dio_ssp_stop,"ax",%progbits
 5014              		.align	2
 5015              		.thumb
 5016              		.thumb_func
 5018              	dio_ssp_stop:
 5019              	.LFB22:
1180:bluetooth_rxtx.c **** 
1181:bluetooth_rxtx.c **** static void dio_ssp_stop()
1182:bluetooth_rxtx.c **** {
 5020              		.loc 1 1182 0
 5021              		.cfi_startproc
 5022              		@ args = 0, pretend = 0, frame = 0
 5023              		@ frame_needed = 1, uses_anonymous_args = 0
 5024              		@ link register save eliminated.
 5025 0000 80B4     		push	{r7}
 5026              		.cfi_def_cfa_offset 4
 5027              		.cfi_offset 7, -4
 5028 0002 00AF     		add	r7, sp, #0
 5029              		.cfi_def_cfa_register 7
1183:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1184:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5030              		.loc 1 1184 0
 5031 0004 214B     		ldr	r3, .L221
 5032 0006 4FF08052 		mov	r2, #268435456
 5033 000a 1A60     		str	r2, [r3]
1185:bluetooth_rxtx.c **** 
1186:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1187:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 5034              		.loc 1 1187 0
 5035 000c 204A     		ldr	r2, .L221+4
 5036 000e 204B     		ldr	r3, .L221+4
 5037 0010 1B68     		ldr	r3, [r3]
 5038 0012 23F00103 		bic	r3, r3, #1
 5039 0016 1360     		str	r3, [r2]
1188:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 5040              		.loc 1 1188 0
 5041 0018 1E4A     		ldr	r2, .L221+8
ARM GAS  /tmp/ccHz27EZ.s 			page 109


 5042 001a 1E4B     		ldr	r3, .L221+8
 5043 001c 1B68     		ldr	r3, [r3]
 5044 001e 23F00203 		bic	r3, r3, #2
 5045 0022 1360     		str	r3, [r2]
1189:bluetooth_rxtx.c **** 
1190:bluetooth_rxtx.c **** 
1191:bluetooth_rxtx.c **** 	// disable DMA engine:
1192:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1193:bluetooth_rxtx.c **** 
1194:bluetooth_rxtx.c **** 	// disable DMA interrupts
1195:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 5046              		.loc 1 1195 0
 5047 0024 1C4B     		ldr	r3, .L221+12
 5048 0026 4FF08062 		mov	r2, #67108864
 5049 002a 1A60     		str	r2, [r3]
1196:bluetooth_rxtx.c **** 
1197:bluetooth_rxtx.c **** 	// disable active channels
1198:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 5050              		.loc 1 1198 0
 5051 002c 1B4B     		ldr	r3, .L221+16
 5052 002e 0022     		movs	r2, #0
 5053 0030 1A60     		str	r2, [r3]
1199:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 5054              		.loc 1 1199 0
 5055 0032 1B4B     		ldr	r3, .L221+20
 5056 0034 0022     		movs	r2, #0
 5057 0036 1A60     		str	r2, [r3]
1200:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 5058              		.loc 1 1200 0
 5059 0038 1A4B     		ldr	r3, .L221+24
 5060 003a 0022     		movs	r2, #0
 5061 003c 1A60     		str	r2, [r3]
1201:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 5062              		.loc 1 1201 0
 5063 003e 1A4B     		ldr	r3, .L221+28
 5064 0040 0022     		movs	r2, #0
 5065 0042 1A60     		str	r2, [r3]
1202:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 5066              		.loc 1 1202 0
 5067 0044 194B     		ldr	r3, .L221+32
 5068 0046 0022     		movs	r2, #0
 5069 0048 1A60     		str	r2, [r3]
1203:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 5070              		.loc 1 1203 0
 5071 004a 194B     		ldr	r3, .L221+36
 5072 004c 0022     		movs	r2, #0
 5073 004e 1A60     		str	r2, [r3]
1204:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 5074              		.loc 1 1204 0
 5075 0050 184B     		ldr	r3, .L221+40
 5076 0052 0022     		movs	r2, #0
 5077 0054 1A60     		str	r2, [r3]
1205:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 5078              		.loc 1 1205 0
 5079 0056 184B     		ldr	r3, .L221+44
 5080 0058 0022     		movs	r2, #0
 5081 005a 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 110


1206:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 5082              		.loc 1 1206 0
 5083 005c 174B     		ldr	r3, .L221+48
 5084 005e FF22     		movs	r2, #255
 5085 0060 1A60     		str	r2, [r3]
1207:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 5086              		.loc 1 1207 0
 5087 0062 174B     		ldr	r3, .L221+52
 5088 0064 FF22     		movs	r2, #255
 5089 0066 1A60     		str	r2, [r3]
1208:bluetooth_rxtx.c **** 
1209:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1210:bluetooth_rxtx.c **** 	// register.
1211:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 5090              		.loc 1 1211 0
 5091 0068 164A     		ldr	r2, .L221+56
 5092 006a 164B     		ldr	r3, .L221+56
 5093 006c 1B68     		ldr	r3, [r3]
 5094 006e 23F00103 		bic	r3, r3, #1
 5095 0072 1360     		str	r3, [r2]
1212:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 5096              		.loc 1 1212 0
 5097 0074 00BF     		nop
 5098              	.L220:
 5099              		.loc 1 1212 0 is_stmt 0 discriminator 1
 5100 0076 134B     		ldr	r3, .L221+56
 5101 0078 1B68     		ldr	r3, [r3]
 5102 007a 03F00103 		and	r3, r3, #1
 5103 007e 002B     		cmp	r3, #0
 5104 0080 F9D1     		bne	.L220
1213:bluetooth_rxtx.c **** }
 5105              		.loc 1 1213 0 is_stmt 1
 5106 0082 BD46     		mov	sp, r7
 5107              		.cfi_def_cfa_register 13
 5108              		@ sp needed
 5109 0084 5DF8047B 		ldr	r7, [sp], #4
 5110              		.cfi_restore 7
 5111              		.cfi_def_cfa_offset 0
 5112 0088 7047     		bx	lr
 5113              	.L222:
 5114 008a 00BF     		.align	2
 5115              	.L221:
 5116 008c 98C00920 		.word	537510040
 5117 0090 24000340 		.word	1073938468
 5118 0094 04000340 		.word	1073938436
 5119 0098 80E100E0 		.word	-536813184
 5120 009c 10410050 		.word	1342193936
 5121 00a0 30410050 		.word	1342193968
 5122 00a4 50410050 		.word	1342194000
 5123 00a8 70410050 		.word	1342194032
 5124 00ac 90410050 		.word	1342194064
 5125 00b0 B0410050 		.word	1342194096
 5126 00b4 D0410050 		.word	1342194128
 5127 00b8 F0410050 		.word	1342194160
 5128 00bc 08400050 		.word	1342193672
 5129 00c0 10400050 		.word	1342193680
 5130 00c4 30400050 		.word	1342193712
ARM GAS  /tmp/ccHz27EZ.s 			page 111


 5131              		.cfi_endproc
 5132              	.LFE22:
 5134              		.section	.text.cc2400_idle,"ax",%progbits
 5135              		.align	2
 5136              		.thumb
 5137              		.thumb_func
 5139              	cc2400_idle:
 5140              	.LFB23:
1214:bluetooth_rxtx.c **** 
1215:bluetooth_rxtx.c **** static void cc2400_idle()
1216:bluetooth_rxtx.c **** {
 5141              		.loc 1 1216 0
 5142              		.cfi_startproc
 5143              		@ args = 0, pretend = 0, frame = 0
 5144              		@ frame_needed = 1, uses_anonymous_args = 0
 5145 0000 80B5     		push	{r7, lr}
 5146              		.cfi_def_cfa_offset 8
 5147              		.cfi_offset 7, -8
 5148              		.cfi_offset 14, -4
 5149 0002 00AF     		add	r7, sp, #0
 5150              		.cfi_def_cfa_register 7
1217:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5151              		.loc 1 1217 0
 5152 0004 6420     		movs	r0, #100
 5153 0006 FFF7FEFF 		bl	cc2400_strobe
1218:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5154              		.loc 1 1218 0
 5155 000a 00BF     		nop
 5156              	.L224:
 5157              		.loc 1 1218 0 is_stmt 0 discriminator 1
 5158 000c FFF7FEFF 		bl	cc2400_status
 5159 0010 0346     		mov	r3, r0
 5160 0012 03F00403 		and	r3, r3, #4
 5161 0016 002B     		cmp	r3, #0
 5162 0018 F8D1     		bne	.L224
1219:bluetooth_rxtx.c **** 
1220:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1221:bluetooth_rxtx.c **** 	PAEN_CLR;
 5163              		.loc 1 1221 0 is_stmt 1
 5164 001a 0A4B     		ldr	r3, .L225
 5165 001c 8022     		movs	r2, #128
 5166 001e 1A60     		str	r2, [r3]
1222:bluetooth_rxtx.c **** 	HGM_CLR;
 5167              		.loc 1 1222 0
 5168 0020 084B     		ldr	r3, .L225
 5169 0022 4FF48072 		mov	r2, #256
 5170 0026 1A60     		str	r2, [r3]
1223:bluetooth_rxtx.c **** #endif
1224:bluetooth_rxtx.c **** 
1225:bluetooth_rxtx.c **** 	RXLED_CLR;
 5171              		.loc 1 1225 0
 5172 0028 074B     		ldr	r3, .L225+4
 5173 002a 1022     		movs	r2, #16
 5174 002c 1A60     		str	r2, [r3]
1226:bluetooth_rxtx.c **** 	TXLED_CLR;
 5175              		.loc 1 1226 0
 5176 002e 064B     		ldr	r3, .L225+4
ARM GAS  /tmp/ccHz27EZ.s 			page 112


 5177 0030 4FF48072 		mov	r2, #256
 5178 0034 1A60     		str	r2, [r3]
1227:bluetooth_rxtx.c **** 	USRLED_CLR;
 5179              		.loc 1 1227 0
 5180 0036 044B     		ldr	r3, .L225+4
 5181 0038 0222     		movs	r2, #2
 5182 003a 1A60     		str	r2, [r3]
1228:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 5183              		.loc 1 1228 0
 5184 003c 034B     		ldr	r3, .L225+8
 5185 003e 0022     		movs	r2, #0
 5186 0040 1A70     		strb	r2, [r3]
1229:bluetooth_rxtx.c **** }
 5187              		.loc 1 1229 0
 5188 0042 80BD     		pop	{r7, pc}
 5189              	.L226:
 5190              		.align	2
 5191              	.L225:
 5192 0044 5CC00920 		.word	537509980
 5193 0048 3CC00920 		.word	537509948
 5194 004c 00000000 		.word	mode
 5195              		.cfi_endproc
 5196              	.LFE23:
 5198              		.section	.text.cc2400_rx,"ax",%progbits
 5199              		.align	2
 5200              		.thumb
 5201              		.thumb_func
 5203              	cc2400_rx:
 5204              	.LFB24:
1230:bluetooth_rxtx.c **** 
1231:bluetooth_rxtx.c **** /* start un-buffered rx */
1232:bluetooth_rxtx.c **** static void cc2400_rx()
1233:bluetooth_rxtx.c **** {
 5205              		.loc 1 1233 0
 5206              		.cfi_startproc
 5207              		@ args = 0, pretend = 0, frame = 8
 5208              		@ frame_needed = 1, uses_anonymous_args = 0
 5209 0000 80B5     		push	{r7, lr}
 5210              		.cfi_def_cfa_offset 8
 5211              		.cfi_offset 7, -8
 5212              		.cfi_offset 14, -4
 5213 0002 82B0     		sub	sp, sp, #8
 5214              		.cfi_def_cfa_offset 16
 5215 0004 00AF     		add	r7, sp, #0
 5216              		.cfi_def_cfa_register 7
1234:bluetooth_rxtx.c **** 	u16 mdmctrl;
1235:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5217              		.loc 1 1235 0
 5218 0006 2A4B     		ldr	r3, .L234
 5219 0008 1B78     		ldrb	r3, [r3]
 5220 000a DBB2     		uxtb	r3, r3
 5221 000c 002B     		cmp	r3, #0
 5222 000e 02D1     		bne	.L228
1236:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5223              		.loc 1 1236 0
 5224 0010 2923     		movs	r3, #41
 5225 0012 FB80     		strh	r3, [r7, #6]	@ movhi
ARM GAS  /tmp/ccHz27EZ.s 			page 113


 5226 0014 08E0     		b	.L229
 5227              	.L228:
1237:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5228              		.loc 1 1237 0
 5229 0016 264B     		ldr	r3, .L234
 5230 0018 1B78     		ldrb	r3, [r3]
 5231 001a DBB2     		uxtb	r3, r3
 5232 001c 012B     		cmp	r3, #1
 5233 001e 02D1     		bne	.L230
1238:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5234              		.loc 1 1238 0
 5235 0020 4023     		movs	r3, #64
 5236 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 5237 0024 00E0     		b	.L229
 5238              	.L230:
1239:bluetooth_rxtx.c **** 	} else {
1240:bluetooth_rxtx.c **** 		/* oops */
1241:bluetooth_rxtx.c **** 		return;
 5239              		.loc 1 1241 0
 5240 0026 3FE0     		b	.L227
 5241              	.L229:
1242:bluetooth_rxtx.c **** 	}
1243:bluetooth_rxtx.c **** 
1244:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5242              		.loc 1 1244 0
 5243 0028 0D20     		movs	r0, #13
 5244 002a 47F6FF71 		movw	r1, #32767
 5245 002e FFF7FEFF 		bl	cc2400_set
1245:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5246              		.loc 1 1245 0
 5247 0032 1220     		movs	r0, #18
 5248 0034 42F62231 		movw	r1, #11042
 5249 0038 FFF7FEFF 		bl	cc2400_set
1246:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x164b); // without PRNG
 5250              		.loc 1 1246 0
 5251 003c 1420     		movs	r0, #20
 5252 003e 41F24B61 		movw	r1, #5707
 5253 0042 FFF7FEFF 		bl	cc2400_set
1247:bluetooth_rxtx.c **** 	//	cc2400_set(GRMDM,   0x0560); // un-buffered mode, GFSK
1248:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0100); // un-buffered mode, GFSK //gjlee
 5254              		.loc 1 1248 0
 5255 0046 2020     		movs	r0, #32
 5256 0048 4FF48071 		mov	r1, #256
 5257 004c FFF7FEFF 		bl	cc2400_set
1249:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1250:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1251:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1252:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1253:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1254:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1255:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5258              		.loc 1 1255 0
 5259 0050 184B     		ldr	r3, .L234+4
 5260 0052 1B88     		ldrh	r3, [r3]	@ movhi
 5261 0054 9BB2     		uxth	r3, r3
 5262 0056 013B     		subs	r3, r3, #1
 5263 0058 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 114


 5264 005a 0220     		movs	r0, #2
 5265 005c 1946     		mov	r1, r3
 5266 005e FFF7FEFF 		bl	cc2400_set
1256:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);
 5267              		.loc 1 1256 0
 5268 0062 0320     		movs	r0, #3
 5269 0064 4021     		movs	r1, #64
 5270 0066 FFF7FEFF 		bl	cc2400_set
1257:bluetooth_rxtx.c **** 
1258:bluetooth_rxtx.c **** 	// Set up CS register
1259:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5271              		.loc 1 1259 0
 5272 006a FFF7FEFF 		bl	cs_threshold_calc_and_set
1260:bluetooth_rxtx.c **** 
1261:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5273              		.loc 1 1261 0
 5274 006e 00BF     		nop
 5275              	.L232:
 5276              		.loc 1 1261 0 is_stmt 0 discriminator 1
 5277 0070 FFF7FEFF 		bl	cc2400_status
 5278 0074 0346     		mov	r3, r0
 5279 0076 03F04003 		and	r3, r3, #64
 5280 007a 002B     		cmp	r3, #0
 5281 007c F8D0     		beq	.L232
1262:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5282              		.loc 1 1262 0 is_stmt 1
 5283 007e 6120     		movs	r0, #97
 5284 0080 FFF7FEFF 		bl	cc2400_strobe
1263:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5285              		.loc 1 1263 0
 5286 0084 00BF     		nop
 5287              	.L233:
 5288              		.loc 1 1263 0 is_stmt 0 discriminator 1
 5289 0086 FFF7FEFF 		bl	cc2400_status
 5290 008a 0346     		mov	r3, r0
 5291 008c 03F00403 		and	r3, r3, #4
 5292 0090 002B     		cmp	r3, #0
 5293 0092 F8D0     		beq	.L233
1264:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5294              		.loc 1 1264 0 is_stmt 1
 5295 0094 6220     		movs	r0, #98
 5296 0096 FFF7FEFF 		bl	cc2400_strobe
1265:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1266:bluetooth_rxtx.c **** 	PAEN_SET;
 5297              		.loc 1 1266 0
 5298 009a 074B     		ldr	r3, .L234+8
 5299 009c 8022     		movs	r2, #128
 5300 009e 1A60     		str	r2, [r3]
1267:bluetooth_rxtx.c **** 	HGM_SET;
 5301              		.loc 1 1267 0
 5302 00a0 054B     		ldr	r3, .L234+8
 5303 00a2 4FF48072 		mov	r2, #256
 5304 00a6 1A60     		str	r2, [r3]
 5305              	.L227:
1268:bluetooth_rxtx.c **** #endif
1269:bluetooth_rxtx.c **** }
 5306              		.loc 1 1269 0
ARM GAS  /tmp/ccHz27EZ.s 			page 115


 5307 00a8 0837     		adds	r7, r7, #8
 5308              		.cfi_def_cfa_offset 8
 5309 00aa BD46     		mov	sp, r7
 5310              		.cfi_def_cfa_register 13
 5311              		@ sp needed
 5312 00ac 80BD     		pop	{r7, pc}
 5313              	.L235:
 5314 00ae 00BF     		.align	2
 5315              	.L234:
 5316 00b0 00000000 		.word	modulation
 5317 00b4 00000000 		.word	channel
 5318 00b8 58C00920 		.word	537509976
 5319              		.cfi_endproc
 5320              	.LFE24:
 5322              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5323              		.align	2
 5324              		.thumb
 5325              		.thumb_func
 5327              	cc2400_rx_sync:
 5328              	.LFB25:
1270:bluetooth_rxtx.c **** 
1271:bluetooth_rxtx.c **** /* start un-buffered rx */
1272:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1273:bluetooth_rxtx.c **** {
 5329              		.loc 1 1273 0
 5330              		.cfi_startproc
 5331              		@ args = 0, pretend = 0, frame = 16
 5332              		@ frame_needed = 1, uses_anonymous_args = 0
 5333 0000 80B5     		push	{r7, lr}
 5334              		.cfi_def_cfa_offset 8
 5335              		.cfi_offset 7, -8
 5336              		.cfi_offset 14, -4
 5337 0002 84B0     		sub	sp, sp, #16
 5338              		.cfi_def_cfa_offset 24
 5339 0004 00AF     		add	r7, sp, #0
 5340              		.cfi_def_cfa_register 7
 5341 0006 7860     		str	r0, [r7, #4]
1274:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1275:bluetooth_rxtx.c **** 
1276:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5342              		.loc 1 1276 0
 5343 0008 334B     		ldr	r3, .L243
 5344 000a 1B78     		ldrb	r3, [r3]
 5345 000c DBB2     		uxtb	r3, r3
 5346 000e 002B     		cmp	r3, #0
 5347 0010 05D1     		bne	.L237
1277:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5348              		.loc 1 1277 0
 5349 0012 2923     		movs	r3, #41
 5350 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1278:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5351              		.loc 1 1278 0
 5352 0016 40F26143 		movw	r3, #1121
 5353 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5354 001c 0BE0     		b	.L238
 5355              	.L237:
1279:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
ARM GAS  /tmp/ccHz27EZ.s 			page 116


1280:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1281:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1282:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1283:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1284:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1285:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1286:bluetooth_rxtx.c **** 
1287:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5356              		.loc 1 1287 0
 5357 001e 2E4B     		ldr	r3, .L243
 5358 0020 1B78     		ldrb	r3, [r3]
 5359 0022 DBB2     		uxtb	r3, r3
 5360 0024 012B     		cmp	r3, #1
 5361 0026 05D1     		bne	.L239
1288:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5362              		.loc 1 1288 0
 5363 0028 4023     		movs	r3, #64
 5364 002a BB81     		strh	r3, [r7, #12]	@ movhi
1289:bluetooth_rxtx.c **** 		grmdm = 0x0560; // un-buffered mode, packet w/ sync word detection //gjlee
 5365              		.loc 1 1289 0
 5366 002c 4FF4AC63 		mov	r3, #1376
 5367 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5368 0032 00E0     		b	.L238
 5369              	.L239:
1290:bluetooth_rxtx.c **** 		//grmdm = 0x0560; // un-buffered mode, packet w/ sync word detection
1291:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1292:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1293:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1294:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1295:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1296:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1297:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1298:bluetooth_rxtx.c **** 
1299:bluetooth_rxtx.c **** 	} else {
1300:bluetooth_rxtx.c **** 		/* oops */
1301:bluetooth_rxtx.c **** 		return;
 5370              		.loc 1 1301 0
 5371 0034 4DE0     		b	.L236
 5372              	.L238:
1302:bluetooth_rxtx.c **** 	}
1303:bluetooth_rxtx.c **** 
1304:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5373              		.loc 1 1304 0
 5374 0036 0D20     		movs	r0, #13
 5375 0038 47F6FF71 		movw	r1, #32767
 5376 003c FFF7FEFF 		bl	cc2400_set
1305:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5377              		.loc 1 1305 0
 5378 0040 1220     		movs	r0, #18
 5379 0042 42F62231 		movw	r1, #11042
 5380 0046 FFF7FEFF 		bl	cc2400_set
1306:bluetooth_rxtx.c **** 
1307:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x164b);
 5381              		.loc 1 1307 0
 5382 004a 1420     		movs	r0, #20
 5383 004c 41F24B61 		movw	r1, #5707
 5384 0050 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccHz27EZ.s 			page 117


1308:bluetooth_rxtx.c **** //	cc2400_set(MDMTST0, 0x124b);
1309:bluetooth_rxtx.c **** 	// 1      2      4b
1310:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1311:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1312:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1313:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1314:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1315:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1316:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1317:bluetooth_rxtx.c **** 	//
1318:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1319:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1320:bluetooth_rxtx.c **** 
1321:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5385              		.loc 1 1321 0
 5386 0054 FB89     		ldrh	r3, [r7, #14]
 5387 0056 2020     		movs	r0, #32
 5388 0058 1946     		mov	r1, r3
 5389 005a FFF7FEFF 		bl	cc2400_set
1322:bluetooth_rxtx.c **** 
1323:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5390              		.loc 1 1323 0
 5391 005e 7B68     		ldr	r3, [r7, #4]
 5392 0060 9BB2     		uxth	r3, r3
 5393 0062 2C20     		movs	r0, #44
 5394 0064 1946     		mov	r1, r3
 5395 0066 FFF7FEFF 		bl	cc2400_set
1324:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5396              		.loc 1 1324 0
 5397 006a 7B68     		ldr	r3, [r7, #4]
 5398 006c 1B0C     		lsrs	r3, r3, #16
 5399 006e 9BB2     		uxth	r3, r3
 5400 0070 2D20     		movs	r0, #45
 5401 0072 1946     		mov	r1, r3
 5402 0074 FFF7FEFF 		bl	cc2400_set
1325:bluetooth_rxtx.c **** 	
1326:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5403              		.loc 1 1326 0
 5404 0078 184B     		ldr	r3, .L243+4
 5405 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5406 007c 9BB2     		uxth	r3, r3
 5407 007e 013B     		subs	r3, r3, #1
 5408 0080 9BB2     		uxth	r3, r3
 5409 0082 0220     		movs	r0, #2
 5410 0084 1946     		mov	r1, r3
 5411 0086 FFF7FEFF 		bl	cc2400_set
1327:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5412              		.loc 1 1327 0
 5413 008a BB89     		ldrh	r3, [r7, #12]
 5414 008c 0320     		movs	r0, #3
 5415 008e 1946     		mov	r1, r3
 5416 0090 FFF7FEFF 		bl	cc2400_set
1328:bluetooth_rxtx.c **** 
1329:bluetooth_rxtx.c **** 	// Set up CS register
1330:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5417              		.loc 1 1330 0
 5418 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
ARM GAS  /tmp/ccHz27EZ.s 			page 118


1331:bluetooth_rxtx.c **** 
1332:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5419              		.loc 1 1332 0
 5420 0098 00BF     		nop
 5421              	.L241:
 5422              		.loc 1 1332 0 is_stmt 0 discriminator 1
 5423 009a FFF7FEFF 		bl	cc2400_status
 5424 009e 0346     		mov	r3, r0
 5425 00a0 03F04003 		and	r3, r3, #64
 5426 00a4 002B     		cmp	r3, #0
 5427 00a6 F8D0     		beq	.L241
1333:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5428              		.loc 1 1333 0 is_stmt 1
 5429 00a8 6120     		movs	r0, #97
 5430 00aa FFF7FEFF 		bl	cc2400_strobe
1334:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5431              		.loc 1 1334 0
 5432 00ae 00BF     		nop
 5433              	.L242:
 5434              		.loc 1 1334 0 is_stmt 0 discriminator 1
 5435 00b0 FFF7FEFF 		bl	cc2400_status
 5436 00b4 0346     		mov	r3, r0
 5437 00b6 03F00403 		and	r3, r3, #4
 5438 00ba 002B     		cmp	r3, #0
 5439 00bc F8D0     		beq	.L242
1335:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5440              		.loc 1 1335 0 is_stmt 1
 5441 00be 6220     		movs	r0, #98
 5442 00c0 FFF7FEFF 		bl	cc2400_strobe
1336:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1337:bluetooth_rxtx.c **** 	PAEN_SET;
 5443              		.loc 1 1337 0
 5444 00c4 064B     		ldr	r3, .L243+8
 5445 00c6 8022     		movs	r2, #128
 5446 00c8 1A60     		str	r2, [r3]
1338:bluetooth_rxtx.c **** 	HGM_SET;
 5447              		.loc 1 1338 0
 5448 00ca 054B     		ldr	r3, .L243+8
 5449 00cc 4FF48072 		mov	r2, #256
 5450 00d0 1A60     		str	r2, [r3]
 5451              	.L236:
1339:bluetooth_rxtx.c **** #endif
1340:bluetooth_rxtx.c **** }
 5452              		.loc 1 1340 0
 5453 00d2 1037     		adds	r7, r7, #16
 5454              		.cfi_def_cfa_offset 8
 5455 00d4 BD46     		mov	sp, r7
 5456              		.cfi_def_cfa_register 13
 5457              		@ sp needed
 5458 00d6 80BD     		pop	{r7, pc}
 5459              	.L244:
 5460              		.align	2
 5461              	.L243:
 5462 00d8 00000000 		.word	modulation
 5463 00dc 00000000 		.word	channel
 5464 00e0 58C00920 		.word	537509976
 5465              		.cfi_endproc
ARM GAS  /tmp/ccHz27EZ.s 			page 119


 5466              	.LFE25:
 5468              		.section	.text.le_transmit,"ax",%progbits
 5469              		.align	2
 5470              		.global	le_transmit
 5471              		.thumb
 5472              		.thumb_func
 5474              	le_transmit:
 5475              	.LFB26:
1341:bluetooth_rxtx.c **** 
1342:bluetooth_rxtx.c **** /*
1343:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1344:bluetooth_rxtx.c ****  *
1345:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1346:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1347:bluetooth_rxtx.c ****  * included in the data length.
1348:bluetooth_rxtx.c ****  */
1349:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1350:bluetooth_rxtx.c **** {
 5476              		.loc 1 1350 0
 5477              		.cfi_startproc
 5478              		@ args = 0, pretend = 0, frame = 104
 5479              		@ frame_needed = 1, uses_anonymous_args = 0
 5480 0000 80B5     		push	{r7, lr}
 5481              		.cfi_def_cfa_offset 8
 5482              		.cfi_offset 7, -8
 5483              		.cfi_offset 14, -4
 5484 0002 9AB0     		sub	sp, sp, #104
 5485              		.cfi_def_cfa_offset 112
 5486 0004 00AF     		add	r7, sp, #0
 5487              		.cfi_def_cfa_register 7
 5488 0006 F860     		str	r0, [r7, #12]
 5489 0008 0B46     		mov	r3, r1
 5490 000a 7A60     		str	r2, [r7, #4]
 5491 000c FB72     		strb	r3, [r7, #11]
1351:bluetooth_rxtx.c **** 	unsigned i, j;
1352:bluetooth_rxtx.c **** 	int bit;
1353:bluetooth_rxtx.c **** 	u8 txbuf[64];
1354:bluetooth_rxtx.c **** 	u8 tx_len;
1355:bluetooth_rxtx.c **** 	u8 byte;
1356:bluetooth_rxtx.c **** 	u16 gio_save;
1357:bluetooth_rxtx.c **** 
1358:bluetooth_rxtx.c **** 	// first four bytes: AA
1359:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5492              		.loc 1 1359 0
 5493 000e 0023     		movs	r3, #0
 5494 0010 7B66     		str	r3, [r7, #100]
 5495 0012 35E0     		b	.L246
 5496              	.L249:
1360:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5497              		.loc 1 1360 0
 5498 0014 FB68     		ldr	r3, [r7, #12]
 5499 0016 87F85F30 		strb	r3, [r7, #95]
1361:bluetooth_rxtx.c **** 		aa >>= 8;
 5500              		.loc 1 1361 0
 5501 001a FB68     		ldr	r3, [r7, #12]
 5502 001c 1B0A     		lsrs	r3, r3, #8
 5503 001e FB60     		str	r3, [r7, #12]
ARM GAS  /tmp/ccHz27EZ.s 			page 120


1362:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5504              		.loc 1 1362 0
 5505 0020 07F11002 		add	r2, r7, #16
 5506 0024 7B6E     		ldr	r3, [r7, #100]
 5507 0026 1344     		add	r3, r3, r2
 5508 0028 0022     		movs	r2, #0
 5509 002a 1A70     		strb	r2, [r3]
1363:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5510              		.loc 1 1363 0
 5511 002c 0023     		movs	r3, #0
 5512 002e 3B66     		str	r3, [r7, #96]
 5513 0030 20E0     		b	.L247
 5514              	.L248:
1364:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5515              		.loc 1 1364 0 discriminator 3
 5516 0032 07F11002 		add	r2, r7, #16
 5517 0036 7B6E     		ldr	r3, [r7, #100]
 5518 0038 1344     		add	r3, r3, r2
 5519 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5520 003c D9B2     		uxtb	r1, r3
 5521 003e 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5522 0042 03F00103 		and	r3, r3, #1
 5523 0046 3A6E     		ldr	r2, [r7, #96]
 5524 0048 C2F10702 		rsb	r2, r2, #7
 5525 004c 9340     		lsls	r3, r3, r2
 5526 004e DBB2     		uxtb	r3, r3
 5527 0050 0A46     		mov	r2, r1
 5528 0052 1343     		orrs	r3, r3, r2
 5529 0054 DBB2     		uxtb	r3, r3
 5530 0056 D9B2     		uxtb	r1, r3
 5531 0058 07F11002 		add	r2, r7, #16
 5532 005c 7B6E     		ldr	r3, [r7, #100]
 5533 005e 1344     		add	r3, r3, r2
 5534 0060 0A46     		mov	r2, r1
 5535 0062 1A70     		strb	r2, [r3]
1365:bluetooth_rxtx.c **** 			byte >>= 1;
 5536              		.loc 1 1365 0 discriminator 3
 5537 0064 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5538 0068 5B08     		lsrs	r3, r3, #1
 5539 006a 87F85F30 		strb	r3, [r7, #95]
1363:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5540              		.loc 1 1363 0 discriminator 3
 5541 006e 3B6E     		ldr	r3, [r7, #96]
 5542 0070 0133     		adds	r3, r3, #1
 5543 0072 3B66     		str	r3, [r7, #96]
 5544              	.L247:
1363:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5545              		.loc 1 1363 0 is_stmt 0 discriminator 1
 5546 0074 3B6E     		ldr	r3, [r7, #96]
 5547 0076 072B     		cmp	r3, #7
 5548 0078 DBD9     		bls	.L248
1359:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5549              		.loc 1 1359 0 is_stmt 1 discriminator 2
 5550 007a 7B6E     		ldr	r3, [r7, #100]
 5551 007c 0133     		adds	r3, r3, #1
 5552 007e 7B66     		str	r3, [r7, #100]
 5553              	.L246:
ARM GAS  /tmp/ccHz27EZ.s 			page 121


1359:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5554              		.loc 1 1359 0 is_stmt 0 discriminator 1
 5555 0080 7B6E     		ldr	r3, [r7, #100]
 5556 0082 032B     		cmp	r3, #3
 5557 0084 C6D9     		bls	.L249
1366:bluetooth_rxtx.c **** 		}
1367:bluetooth_rxtx.c **** 	}
1368:bluetooth_rxtx.c **** 
1369:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1370:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5558              		.loc 1 1370 0 is_stmt 1
 5559 0086 794B     		ldr	r3, .L262
 5560 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5561 008a 9BB2     		uxth	r3, r3
 5562 008c DBB2     		uxtb	r3, r3
 5563 008e 623B     		subs	r3, r3, #98
 5564 0090 DBB2     		uxtb	r3, r3
 5565 0092 1846     		mov	r0, r3
 5566 0094 FFF7FEFF 		bl	btle_channel_index
 5567 0098 0346     		mov	r3, r0
 5568 009a 1A46     		mov	r2, r3
 5569 009c 744B     		ldr	r3, .L262+4
 5570 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5571 00a0 BB65     		str	r3, [r7, #88]
1371:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5572              		.loc 1 1371 0
 5573 00a2 0023     		movs	r3, #0
 5574 00a4 7B66     		str	r3, [r7, #100]
 5575 00a6 50E0     		b	.L250
 5576              	.L253:
1372:bluetooth_rxtx.c **** 		byte = data[i];
 5577              		.loc 1 1372 0
 5578 00a8 7A68     		ldr	r2, [r7, #4]
 5579 00aa 7B6E     		ldr	r3, [r7, #100]
 5580 00ac 1344     		add	r3, r3, r2
 5581 00ae 1B78     		ldrb	r3, [r3]
 5582 00b0 87F85F30 		strb	r3, [r7, #95]
1373:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5583              		.loc 1 1373 0
 5584 00b4 7B6E     		ldr	r3, [r7, #100]
 5585 00b6 0433     		adds	r3, r3, #4
 5586 00b8 07F16802 		add	r2, r7, #104
 5587 00bc 1344     		add	r3, r3, r2
 5588 00be 0022     		movs	r2, #0
 5589 00c0 03F8582C 		strb	r2, [r3, #-88]
1374:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5590              		.loc 1 1374 0
 5591 00c4 0023     		movs	r3, #0
 5592 00c6 3B66     		str	r3, [r7, #96]
 5593 00c8 39E0     		b	.L251
 5594              	.L252:
1375:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5595              		.loc 1 1375 0 discriminator 3
 5596 00ca 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5597 00ce 03F00103 		and	r3, r3, #1
 5598 00d2 6849     		ldr	r1, .L262+8
 5599 00d4 BA6D     		ldr	r2, [r7, #88]
ARM GAS  /tmp/ccHz27EZ.s 			page 122


 5600 00d6 0A44     		add	r2, r2, r1
 5601 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5602 00da 5340     		eors	r3, r3, r2
 5603 00dc 7B65     		str	r3, [r7, #84]
1376:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5604              		.loc 1 1376 0 discriminator 3
 5605 00de BB6D     		ldr	r3, [r7, #88]
 5606 00e0 0133     		adds	r3, r3, #1
 5607 00e2 1946     		mov	r1, r3
 5608 00e4 644B     		ldr	r3, .L262+12
 5609 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5610 00ea C81A     		subs	r0, r1, r3
 5611 00ec 4008     		lsrs	r0, r0, #1
 5612 00ee 0344     		add	r3, r3, r0
 5613 00f0 9A09     		lsrs	r2, r3, #6
 5614 00f2 1346     		mov	r3, r2
 5615 00f4 DB01     		lsls	r3, r3, #7
 5616 00f6 9B1A     		subs	r3, r3, r2
 5617 00f8 CA1A     		subs	r2, r1, r3
 5618 00fa BA65     		str	r2, [r7, #88]
1377:bluetooth_rxtx.c **** 			byte >>= 1;
 5619              		.loc 1 1377 0 discriminator 3
 5620 00fc 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5621 0100 5B08     		lsrs	r3, r3, #1
 5622 0102 87F85F30 		strb	r3, [r7, #95]
1378:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5623              		.loc 1 1378 0 discriminator 3
 5624 0106 7B6E     		ldr	r3, [r7, #100]
 5625 0108 0433     		adds	r3, r3, #4
 5626 010a 7A6E     		ldr	r2, [r7, #100]
 5627 010c 0432     		adds	r2, r2, #4
 5628 010e 07F16801 		add	r1, r7, #104
 5629 0112 0A44     		add	r2, r2, r1
 5630 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5631 0118 D1B2     		uxtb	r1, r2
 5632 011a 3A6E     		ldr	r2, [r7, #96]
 5633 011c C2F10702 		rsb	r2, r2, #7
 5634 0120 1046     		mov	r0, r2
 5635 0122 7A6D     		ldr	r2, [r7, #84]
 5636 0124 8240     		lsls	r2, r2, r0
 5637 0126 D2B2     		uxtb	r2, r2
 5638 0128 0A43     		orrs	r2, r2, r1
 5639 012a D2B2     		uxtb	r2, r2
 5640 012c D2B2     		uxtb	r2, r2
 5641 012e 07F16801 		add	r1, r7, #104
 5642 0132 0B44     		add	r3, r3, r1
 5643 0134 03F8582C 		strb	r2, [r3, #-88]
1374:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5644              		.loc 1 1374 0 discriminator 3
 5645 0138 3B6E     		ldr	r3, [r7, #96]
 5646 013a 0133     		adds	r3, r3, #1
 5647 013c 3B66     		str	r3, [r7, #96]
 5648              	.L251:
1374:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5649              		.loc 1 1374 0 is_stmt 0 discriminator 1
 5650 013e 3B6E     		ldr	r3, [r7, #96]
 5651 0140 072B     		cmp	r3, #7
ARM GAS  /tmp/ccHz27EZ.s 			page 123


 5652 0142 C2D9     		bls	.L252
1371:bluetooth_rxtx.c **** 		byte = data[i];
 5653              		.loc 1 1371 0 is_stmt 1 discriminator 2
 5654 0144 7B6E     		ldr	r3, [r7, #100]
 5655 0146 0133     		adds	r3, r3, #1
 5656 0148 7B66     		str	r3, [r7, #100]
 5657              	.L250:
1371:bluetooth_rxtx.c **** 		byte = data[i];
 5658              		.loc 1 1371 0 is_stmt 0 discriminator 1
 5659 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5660 014c 7B6E     		ldr	r3, [r7, #100]
 5661 014e 9A42     		cmp	r2, r3
 5662 0150 AAD8     		bhi	.L253
1379:bluetooth_rxtx.c **** 		}
1380:bluetooth_rxtx.c **** 	}
1381:bluetooth_rxtx.c **** 
1382:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5663              		.loc 1 1382 0 is_stmt 1
 5664 0152 FB7A     		ldrb	r3, [r7, #11]
 5665 0154 0433     		adds	r3, r3, #4
 5666 0156 FB72     		strb	r3, [r7, #11]
1383:bluetooth_rxtx.c **** 
1384:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1385:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5667              		.loc 1 1385 0
 5668 0158 0D20     		movs	r0, #13
 5669 015a 47F6FF71 		movw	r1, #32767
 5670 015e FFF7FEFF 		bl	cc2400_set
1386:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5671              		.loc 1 1386 0
 5672 0162 1220     		movs	r0, #18
 5673 0164 42F62231 		movw	r1, #11042
 5674 0168 FFF7FEFF 		bl	cc2400_set
1387:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5675              		.loc 1 1387 0
 5676 016c 1420     		movs	r0, #20
 5677 016e 41F24B31 		movw	r1, #4939
 5678 0172 FFF7FEFF 		bl	cc2400_set
1388:bluetooth_rxtx.c **** 
1389:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0d60); //gjlee
 5679              		.loc 1 1389 0
 5680 0176 2020     		movs	r0, #32
 5681 0178 4FF45661 		mov	r1, #3424
 5682 017c FFF7FEFF 		bl	cc2400_set
1390:bluetooth_rxtx.c **** 	//cc2400_set(GRMDM,		0x0c01);
1391:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1392:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1393:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1394:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1395:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1396:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1397:bluetooth_rxtx.c **** 
1398:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   2402);
 5683              		.loc 1 1398 0
 5684 0180 0220     		movs	r0, #2
 5685 0182 40F66211 		movw	r1, #2402
 5686 0186 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccHz27EZ.s 			page 124


1399:bluetooth_rxtx.c **** 	//cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1400:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5687              		.loc 1 1400 0
 5688 018a 0320     		movs	r0, #3
 5689 018c 4021     		movs	r1, #64
 5690 018e FFF7FEFF 		bl	cc2400_set
1401:bluetooth_rxtx.c **** //	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
1402:bluetooth_rxtx.c **** 
1403:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1404:bluetooth_rxtx.c **** 	if (aa & 1)
 5691              		.loc 1 1404 0
 5692 0192 FB68     		ldr	r3, [r7, #12]
 5693 0194 03F00103 		and	r3, r3, #1
 5694 0198 002B     		cmp	r3, #0
 5695 019a 05D0     		beq	.L254
1405:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5696              		.loc 1 1405 0
 5697 019c 2D20     		movs	r0, #45
 5698 019e 4AF6AA21 		movw	r1, #43690
 5699 01a2 FFF7FEFF 		bl	cc2400_set
 5700 01a6 04E0     		b	.L255
 5701              	.L254:
1406:bluetooth_rxtx.c **** 	else
1407:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5702              		.loc 1 1407 0
 5703 01a8 2D20     		movs	r0, #45
 5704 01aa 45F25551 		movw	r1, #21845
 5705 01ae FFF7FEFF 		bl	cc2400_set
 5706              	.L255:
1408:bluetooth_rxtx.c **** 
1409:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1410:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5707              		.loc 1 1410 0
 5708 01b2 0820     		movs	r0, #8
 5709 01b4 FFF7FEFF 		bl	cc2400_get
 5710 01b8 0346     		mov	r3, r0
 5711 01ba A7F85230 		strh	r3, [r7, #82]	@ movhi
1411:bluetooth_rxtx.c **** //	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
1412:bluetooth_rxtx.c **** 
1413:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5712              		.loc 1 1413 0
 5713 01be 00BF     		nop
 5714              	.L256:
 5715              		.loc 1 1413 0 is_stmt 0 discriminator 1
 5716 01c0 FFF7FEFF 		bl	cc2400_status
 5717 01c4 0346     		mov	r3, r0
 5718 01c6 03F04003 		and	r3, r3, #64
 5719 01ca 002B     		cmp	r3, #0
 5720 01cc F8D0     		beq	.L256
1414:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5721              		.loc 1 1414 0 is_stmt 1
 5722 01ce 6120     		movs	r0, #97
 5723 01d0 FFF7FEFF 		bl	cc2400_strobe
1415:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5724              		.loc 1 1415 0
 5725 01d4 00BF     		nop
 5726              	.L257:
ARM GAS  /tmp/ccHz27EZ.s 			page 125


 5727              		.loc 1 1415 0 is_stmt 0 discriminator 1
 5728 01d6 FFF7FEFF 		bl	cc2400_status
 5729 01da 0346     		mov	r3, r0
 5730 01dc 03F00403 		and	r3, r3, #4
 5731 01e0 002B     		cmp	r3, #0
 5732 01e2 F8D0     		beq	.L257
1416:bluetooth_rxtx.c **** 	TXLED_SET;
 5733              		.loc 1 1416 0 is_stmt 1
 5734 01e4 254B     		ldr	r3, .L262+16
 5735 01e6 4FF48072 		mov	r2, #256
 5736 01ea 1A60     		str	r2, [r3]
1417:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1418:bluetooth_rxtx.c **** 	PAEN_SET;
 5737              		.loc 1 1418 0
 5738 01ec 244B     		ldr	r3, .L262+20
 5739 01ee 8022     		movs	r2, #128
 5740 01f0 1A60     		str	r2, [r3]
1419:bluetooth_rxtx.c **** #endif
1420:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5741              		.loc 1 1420 0
 5742 01f2 00BF     		nop
 5743              	.L258:
 5744              		.loc 1 1420 0 is_stmt 0 discriminator 1
 5745 01f4 0E20     		movs	r0, #14
 5746 01f6 FFF7FEFF 		bl	cc2400_get
 5747 01fa 0346     		mov	r3, r0
 5748 01fc 03F01F03 		and	r3, r3, #31
 5749 0200 0F2B     		cmp	r3, #15
 5750 0202 F7D1     		bne	.L258
1421:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5751              		.loc 1 1421 0 is_stmt 1
 5752 0204 6320     		movs	r0, #99
 5753 0206 FFF7FEFF 		bl	cc2400_strobe
1422:bluetooth_rxtx.c **** 
1423:bluetooth_rxtx.c **** 	if (len > 32)
 5754              		.loc 1 1423 0
 5755 020a FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 5756 020c 202B     		cmp	r3, #32
 5757 020e 01D9     		bls	.L259
1424:bluetooth_rxtx.c **** 		len = 32;
 5758              		.loc 1 1424 0
 5759 0210 2023     		movs	r3, #32
 5760 0212 FB72     		strb	r3, [r7, #11]
 5761              	.L259:
1425:bluetooth_rxtx.c **** 	cc2400_spi_buf(FIFOREG, len, txbuf);
 5762              		.loc 1 1425 0
 5763 0214 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5764 0216 07F11003 		add	r3, r7, #16
 5765 021a 7020     		movs	r0, #112
 5766 021c 1146     		mov	r1, r2
 5767 021e 1A46     		mov	r2, r3
 5768 0220 FFF7FEFF 		bl	cc2400_spi_buf
1426:bluetooth_rxtx.c **** 	
1427:bluetooth_rxtx.c **** 	/*
1428:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1429:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
1430:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
ARM GAS  /tmp/ccHz27EZ.s 			page 126


1431:bluetooth_rxtx.c **** 		tx_len = len - i;
1432:bluetooth_rxtx.c **** 		if (tx_len > 16)
1433:bluetooth_rxtx.c **** 			tx_len = 16;
1434:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
1435:bluetooth_rxtx.c **** 	}
1436:bluetooth_rxtx.c **** */
1437:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5769              		.loc 1 1437 0
 5770 0224 00BF     		nop
 5771              	.L260:
 5772              		.loc 1 1437 0 is_stmt 0 discriminator 1
 5773 0226 0E20     		movs	r0, #14
 5774 0228 FFF7FEFF 		bl	cc2400_get
 5775 022c 0346     		mov	r3, r0
 5776 022e 03F01F03 		and	r3, r3, #31
 5777 0232 0F2B     		cmp	r3, #15
 5778 0234 F7D1     		bne	.L260
1438:bluetooth_rxtx.c **** 	TXLED_CLR;
 5779              		.loc 1 1438 0 is_stmt 1
 5780 0236 134B     		ldr	r3, .L262+24
 5781 0238 4FF48072 		mov	r2, #256
 5782 023c 1A60     		str	r2, [r3]
1439:bluetooth_rxtx.c **** 
1440:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5783              		.loc 1 1440 0
 5784 023e 6420     		movs	r0, #100
 5785 0240 FFF7FEFF 		bl	cc2400_strobe
1441:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5786              		.loc 1 1441 0
 5787 0244 00BF     		nop
 5788              	.L261:
 5789              		.loc 1 1441 0 is_stmt 0 discriminator 1
 5790 0246 FFF7FEFF 		bl	cc2400_status
 5791 024a 0346     		mov	r3, r0
 5792 024c 03F00403 		and	r3, r3, #4
 5793 0250 002B     		cmp	r3, #0
 5794 0252 F8D1     		bne	.L261
1442:bluetooth_rxtx.c **** 
1443:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1444:bluetooth_rxtx.c **** 	PAEN_CLR;
 5795              		.loc 1 1444 0 is_stmt 1
 5796 0254 0C4B     		ldr	r3, .L262+28
 5797 0256 8022     		movs	r2, #128
 5798 0258 1A60     		str	r2, [r3]
1445:bluetooth_rxtx.c **** #endif
1446:bluetooth_rxtx.c **** 
1447:bluetooth_rxtx.c **** 	// reset GIO
1448:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5799              		.loc 1 1448 0
 5800 025a B7F85230 		ldrh	r3, [r7, #82]
 5801 025e 0820     		movs	r0, #8
 5802 0260 1946     		mov	r1, r3
 5803 0262 FFF7FEFF 		bl	cc2400_set
1449:bluetooth_rxtx.c **** }
 5804              		.loc 1 1449 0
 5805 0266 6837     		adds	r7, r7, #104
 5806              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccHz27EZ.s 			page 127


 5807 0268 BD46     		mov	sp, r7
 5808              		.cfi_def_cfa_register 13
 5809              		@ sp needed
 5810 026a 80BD     		pop	{r7, pc}
 5811              	.L263:
 5812              		.align	2
 5813              	.L262:
 5814 026c 00000000 		.word	channel
 5815 0270 AC000000 		.word	whitening_index
 5816 0274 2C000000 		.word	whitening
 5817 0278 11080402 		.word	33818641
 5818 027c 38C00920 		.word	537509944
 5819 0280 58C00920 		.word	537509976
 5820 0284 3CC00920 		.word	537509948
 5821 0288 5CC00920 		.word	537509980
 5822              		.cfi_endproc
 5823              	.LFE26:
 5825              		.section	.text.le_jam,"ax",%progbits
 5826              		.align	2
 5827              		.global	le_jam
 5828              		.thumb
 5829              		.thumb_func
 5831              	le_jam:
 5832              	.LFB27:
1450:bluetooth_rxtx.c **** 
1451:bluetooth_rxtx.c **** void le_jam(void) {
 5833              		.loc 1 1451 0
 5834              		.cfi_startproc
 5835              		@ args = 0, pretend = 0, frame = 0
 5836              		@ frame_needed = 1, uses_anonymous_args = 0
 5837 0000 80B5     		push	{r7, lr}
 5838              		.cfi_def_cfa_offset 8
 5839              		.cfi_offset 7, -8
 5840              		.cfi_offset 14, -4
 5841 0002 00AF     		add	r7, sp, #0
 5842              		.cfi_def_cfa_register 7
1452:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1453:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5843              		.loc 1 1453 0
 5844 0004 0D20     		movs	r0, #13
 5845 0006 47F6FF71 		movw	r1, #32767
 5846 000a FFF7FEFF 		bl	cc2400_set
1454:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5847              		.loc 1 1454 0
 5848 000e 1220     		movs	r0, #18
 5849 0010 42F62231 		movw	r1, #11042
 5850 0014 FFF7FEFF 		bl	cc2400_set
1455:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5851              		.loc 1 1455 0
 5852 0018 1420     		movs	r0, #20
 5853 001a 42F24B31 		movw	r1, #9035
 5854 001e FFF7FEFF 		bl	cc2400_set
1456:bluetooth_rxtx.c **** 
1457:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5855              		.loc 1 1457 0
 5856 0022 2020     		movs	r0, #32
 5857 0024 40F60141 		movw	r1, #3073
ARM GAS  /tmp/ccHz27EZ.s 			page 128


 5858 0028 FFF7FEFF 		bl	cc2400_set
1458:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1459:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1460:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1461:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1462:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1463:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1464:bluetooth_rxtx.c **** 
1465:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1466:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5859              		.loc 1 1466 0
 5860 002c 0520     		movs	r0, #5
 5861 002e 0B21     		movs	r1, #11
 5862 0030 FFF7FEFF 		bl	cc2400_set
1467:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5863              		.loc 1 1467 0
 5864 0034 0320     		movs	r0, #3
 5865 0036 4021     		movs	r1, #64
 5866 0038 FFF7FEFF 		bl	cc2400_set
1468:bluetooth_rxtx.c **** 
1469:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5867              		.loc 1 1469 0
 5868 003c 00BF     		nop
 5869              	.L265:
 5870              		.loc 1 1469 0 is_stmt 0 discriminator 1
 5871 003e FFF7FEFF 		bl	cc2400_status
 5872 0042 0346     		mov	r3, r0
 5873 0044 03F04003 		and	r3, r3, #64
 5874 0048 002B     		cmp	r3, #0
 5875 004a F8D0     		beq	.L265
1470:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5876              		.loc 1 1470 0 is_stmt 1
 5877 004c 6120     		movs	r0, #97
 5878 004e FFF7FEFF 		bl	cc2400_strobe
1471:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5879              		.loc 1 1471 0
 5880 0052 00BF     		nop
 5881              	.L266:
 5882              		.loc 1 1471 0 is_stmt 0 discriminator 1
 5883 0054 FFF7FEFF 		bl	cc2400_status
 5884 0058 0346     		mov	r3, r0
 5885 005a 03F00403 		and	r3, r3, #4
 5886 005e 002B     		cmp	r3, #0
 5887 0060 F8D0     		beq	.L266
1472:bluetooth_rxtx.c **** 	TXLED_SET;
 5888              		.loc 1 1472 0 is_stmt 1
 5889 0062 0A4B     		ldr	r3, .L268
 5890 0064 4FF48072 		mov	r2, #256
 5891 0068 1A60     		str	r2, [r3]
1473:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1474:bluetooth_rxtx.c **** 	PAEN_SET;
 5892              		.loc 1 1474 0
 5893 006a 094B     		ldr	r3, .L268+4
 5894 006c 8022     		movs	r2, #128
 5895 006e 1A60     		str	r2, [r3]
1475:bluetooth_rxtx.c **** #endif
1476:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
ARM GAS  /tmp/ccHz27EZ.s 			page 129


 5896              		.loc 1 1476 0
 5897 0070 00BF     		nop
 5898              	.L267:
 5899              		.loc 1 1476 0 is_stmt 0 discriminator 1
 5900 0072 0E20     		movs	r0, #14
 5901 0074 FFF7FEFF 		bl	cc2400_get
 5902 0078 0346     		mov	r3, r0
 5903 007a 03F01F03 		and	r3, r3, #31
 5904 007e 0F2B     		cmp	r3, #15
 5905 0080 F7D1     		bne	.L267
1477:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5906              		.loc 1 1477 0 is_stmt 1
 5907 0082 6320     		movs	r0, #99
 5908 0084 FFF7FEFF 		bl	cc2400_strobe
1478:bluetooth_rxtx.c **** #endif
1479:bluetooth_rxtx.c **** }
 5909              		.loc 1 1479 0
 5910 0088 80BD     		pop	{r7, pc}
 5911              	.L269:
 5912 008a 00BF     		.align	2
 5913              	.L268:
 5914 008c 38C00920 		.word	537509944
 5915 0090 58C00920 		.word	537509976
 5916              		.cfi_endproc
 5917              	.LFE27:
 5919              		.section	.text.hop,"ax",%progbits
 5920              		.align	2
 5921              		.global	hop
 5922              		.thumb
 5923              		.thumb_func
 5925              	hop:
 5926              	.LFB28:
1480:bluetooth_rxtx.c **** 
1481:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1482:bluetooth_rxtx.c ****  * track of this? */
1483:bluetooth_rxtx.c **** void hop(void)
1484:bluetooth_rxtx.c **** {
 5927              		.loc 1 1484 0
 5928              		.cfi_startproc
 5929              		@ args = 0, pretend = 0, frame = 0
 5930              		@ frame_needed = 1, uses_anonymous_args = 0
 5931 0000 80B5     		push	{r7, lr}
 5932              		.cfi_def_cfa_offset 8
 5933              		.cfi_offset 7, -8
 5934              		.cfi_offset 14, -4
 5935 0002 00AF     		add	r7, sp, #0
 5936              		.cfi_def_cfa_register 7
1485:bluetooth_rxtx.c **** 	do_hop = 0;
 5937              		.loc 1 1485 0
 5938 0004 414B     		ldr	r3, .L281
 5939 0006 0022     		movs	r2, #0
 5940 0008 1A70     		strb	r2, [r3]
1486:bluetooth_rxtx.c **** 
1487:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1488:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5941              		.loc 1 1488 0
 5942 000a 414B     		ldr	r3, .L281+4
ARM GAS  /tmp/ccHz27EZ.s 			page 130


 5943 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5944 000e 002B     		cmp	r3, #0
 5945 0010 0BD1     		bne	.L271
1489:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5946              		.loc 1 1489 0
 5947 0012 0220     		movs	r0, #2
 5948 0014 FFF7FEFF 		bl	cc2400_get
 5949 0018 0346     		mov	r3, r0
 5950 001a 1A46     		mov	r2, r3
 5951 001c 3D4B     		ldr	r3, .L281+8
 5952 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5953 0020 9BB2     		uxth	r3, r3
 5954 0022 013B     		subs	r3, r3, #1
 5955 0024 9A42     		cmp	r2, r3
 5956 0026 47D1     		bne	.L272
1490:bluetooth_rxtx.c **** 			return;
 5957              		.loc 1 1490 0
 5958 0028 6EE0     		b	.L270
 5959              	.L271:
1491:bluetooth_rxtx.c **** 	}
1492:bluetooth_rxtx.c **** 
1493:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1494:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5960              		.loc 1 1494 0
 5961 002a 394B     		ldr	r3, .L281+4
 5962 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5963 002e 012B     		cmp	r3, #1
 5964 0030 14D1     		bne	.L274
1495:bluetooth_rxtx.c **** 		channel += 32;
 5965              		.loc 1 1495 0
 5966 0032 384B     		ldr	r3, .L281+8
 5967 0034 1B88     		ldrh	r3, [r3]	@ movhi
 5968 0036 9BB2     		uxth	r3, r3
 5969 0038 2033     		adds	r3, r3, #32
 5970 003a 9AB2     		uxth	r2, r3
 5971 003c 354B     		ldr	r3, .L281+8
 5972 003e 1A80     		strh	r2, [r3]	@ movhi
1496:bluetooth_rxtx.c **** 		if (channel > 2480)
 5973              		.loc 1 1496 0
 5974 0040 344B     		ldr	r3, .L281+8
 5975 0042 1B88     		ldrh	r3, [r3]	@ movhi
 5976 0044 9BB2     		uxth	r3, r3
 5977 0046 B3F51B6F 		cmp	r3, #2480
 5978 004a 35D9     		bls	.L272
1497:bluetooth_rxtx.c **** 			channel -= 79;
 5979              		.loc 1 1497 0
 5980 004c 314B     		ldr	r3, .L281+8
 5981 004e 1B88     		ldrh	r3, [r3]	@ movhi
 5982 0050 9BB2     		uxth	r3, r3
 5983 0052 4F3B     		subs	r3, r3, #79
 5984 0054 9AB2     		uxth	r2, r3
 5985 0056 2F4B     		ldr	r3, .L281+8
 5986 0058 1A80     		strh	r2, [r3]	@ movhi
 5987 005a 2DE0     		b	.L272
 5988              	.L274:
1498:bluetooth_rxtx.c **** 	}
1499:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 131


1500:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 5989              		.loc 1 1500 0
 5990 005c 2C4B     		ldr	r3, .L281+4
 5991 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5992 0060 022B     		cmp	r3, #2
 5993 0062 0DD1     		bne	.L276
1501:bluetooth_rxtx.c **** 		TXLED_SET;
 5994              		.loc 1 1501 0
 5995 0064 2C4B     		ldr	r3, .L281+12
 5996 0066 4FF48072 		mov	r2, #256
 5997 006a 1A60     		str	r2, [r3]
1502:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5998              		.loc 1 1502 0
 5999 006c 2B4B     		ldr	r3, .L281+16
 6000 006e 1B68     		ldr	r3, [r3]
 6001 0070 1846     		mov	r0, r3
 6002 0072 FFF7FEFF 		bl	next_hop
 6003 0076 0346     		mov	r3, r0
 6004 0078 1A46     		mov	r2, r3
 6005 007a 264B     		ldr	r3, .L281+8
 6006 007c 1A80     		strh	r2, [r3]	@ movhi
 6007 007e 1BE0     		b	.L272
 6008              	.L276:
1503:bluetooth_rxtx.c **** 	}
1504:bluetooth_rxtx.c **** 
1505:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 6009              		.loc 1 1505 0
 6010 0080 234B     		ldr	r3, .L281+4
 6011 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6012 0084 032B     		cmp	r3, #3
 6013 0086 0BD1     		bne	.L277
1506:bluetooth_rxtx.c **** 		TXLED_SET;
 6014              		.loc 1 1506 0
 6015 0088 234B     		ldr	r3, .L281+12
 6016 008a 4FF48072 		mov	r2, #256
 6017 008e 1A60     		str	r2, [r3]
1507:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 6018              		.loc 1 1507 0
 6019 0090 2348     		ldr	r0, .L281+20
 6020 0092 FFF7FEFF 		bl	btle_next_hop
 6021 0096 0346     		mov	r3, r0
 6022 0098 1A46     		mov	r2, r3
 6023 009a 1E4B     		ldr	r3, .L281+8
 6024 009c 1A80     		strh	r2, [r3]	@ movhi
 6025 009e 0BE0     		b	.L272
 6026              	.L277:
1508:bluetooth_rxtx.c **** 	}
1509:bluetooth_rxtx.c **** 
1510:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 6027              		.loc 1 1510 0
 6028 00a0 1B4B     		ldr	r3, .L281+4
 6029 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6030 00a4 042B     		cmp	r3, #4
 6031 00a6 07D1     		bne	.L272
1511:bluetooth_rxtx.c **** 		TXLED_SET;
 6032              		.loc 1 1511 0
 6033 00a8 1B4B     		ldr	r3, .L281+12
ARM GAS  /tmp/ccHz27EZ.s 			page 132


 6034 00aa 4FF48072 		mov	r2, #256
 6035 00ae 1A60     		str	r2, [r3]
1512:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 6036              		.loc 1 1512 0
 6037 00b0 1C4B     		ldr	r3, .L281+24
 6038 00b2 1A88     		ldrh	r2, [r3]
 6039 00b4 174B     		ldr	r3, .L281+8
 6040 00b6 1A80     		strh	r2, [r3]	@ movhi
 6041              	.L272:
1513:bluetooth_rxtx.c **** 	}
1514:bluetooth_rxtx.c **** 
1515:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1516:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 6042              		.loc 1 1516 0
 6043 00b8 6420     		movs	r0, #100
 6044 00ba FFF7FEFF 		bl	cc2400_strobe
1517:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6045              		.loc 1 1517 0
 6046 00be 00BF     		nop
 6047              	.L278:
 6048              		.loc 1 1517 0 is_stmt 0 discriminator 1
 6049 00c0 FFF7FEFF 		bl	cc2400_status
 6050 00c4 0346     		mov	r3, r0
 6051 00c6 03F00403 		and	r3, r3, #4
 6052 00ca 002B     		cmp	r3, #0
 6053 00cc F8D1     		bne	.L278
1518:bluetooth_rxtx.c **** 
1519:bluetooth_rxtx.c **** 	/* Retune */
1520:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6054              		.loc 1 1520 0 is_stmt 1
 6055 00ce 114B     		ldr	r3, .L281+8
 6056 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 6057 00d2 9BB2     		uxth	r3, r3
 6058 00d4 013B     		subs	r3, r3, #1
 6059 00d6 9BB2     		uxth	r3, r3
 6060 00d8 0220     		movs	r0, #2
 6061 00da 1946     		mov	r1, r3
 6062 00dc FFF7FEFF 		bl	cc2400_set
1521:bluetooth_rxtx.c **** 	
1522:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1523:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 6063              		.loc 1 1523 0
 6064 00e0 0B4B     		ldr	r3, .L281+4
 6065 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6066 00e4 002B     		cmp	r3, #0
 6067 00e6 01D0     		beq	.L279
1524:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 6068              		.loc 1 1524 0
 6069 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 6070              	.L279:
1525:bluetooth_rxtx.c **** 	}
1526:bluetooth_rxtx.c **** 
1527:bluetooth_rxtx.c **** 	/* Wait for lock */
1528:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6071              		.loc 1 1528 0
 6072 00ec 6120     		movs	r0, #97
 6073 00ee FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/ccHz27EZ.s 			page 133


1529:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6074              		.loc 1 1529 0
 6075 00f2 00BF     		nop
 6076              	.L280:
 6077              		.loc 1 1529 0 is_stmt 0 discriminator 1
 6078 00f4 FFF7FEFF 		bl	cc2400_status
 6079 00f8 0346     		mov	r3, r0
 6080 00fa 03F00403 		and	r3, r3, #4
 6081 00fe 002B     		cmp	r3, #0
 6082 0100 F8D0     		beq	.L280
1530:bluetooth_rxtx.c **** 	
1531:bluetooth_rxtx.c **** 	/* RX mode */
1532:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6083              		.loc 1 1532 0 is_stmt 1
 6084 0102 6220     		movs	r0, #98
 6085 0104 FFF7FEFF 		bl	cc2400_strobe
 6086              	.L270:
1533:bluetooth_rxtx.c **** 
1534:bluetooth_rxtx.c **** }
 6087              		.loc 1 1534 0
 6088 0108 80BD     		pop	{r7, pc}
 6089              	.L282:
 6090 010a 00BF     		.align	2
 6091              	.L281:
 6092 010c 00000000 		.word	do_hop
 6093 0110 00000000 		.word	hop_mode
 6094 0114 00000000 		.word	channel
 6095 0118 38C00920 		.word	537509944
 6096 011c 00000000 		.word	clkn
 6097 0120 00000000 		.word	le
 6098 0124 00000000 		.word	hop_direct_channel
 6099              		.cfi_endproc
 6100              	.LFE28:
 6102              		.section	.text.bt_stream_rx,"ax",%progbits
 6103              		.align	2
 6104              		.global	bt_stream_rx
 6105              		.thumb
 6106              		.thumb_func
 6108              	bt_stream_rx:
 6109              	.LFB29:
1535:bluetooth_rxtx.c **** 
1536:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1537:bluetooth_rxtx.c **** void bt_stream_rx()
1538:bluetooth_rxtx.c **** {
 6110              		.loc 1 1538 0
 6111              		.cfi_startproc
 6112              		@ args = 0, pretend = 0, frame = 8
 6113              		@ frame_needed = 1, uses_anonymous_args = 0
 6114 0000 B0B5     		push	{r4, r5, r7, lr}
 6115              		.cfi_def_cfa_offset 16
 6116              		.cfi_offset 4, -16
 6117              		.cfi_offset 5, -12
 6118              		.cfi_offset 7, -8
 6119              		.cfi_offset 14, -4
 6120 0002 82B0     		sub	sp, sp, #8
 6121              		.cfi_def_cfa_offset 24
 6122 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 134


 6123              		.cfi_def_cfa_register 7
1539:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6124              		.loc 1 1539 0
 6125 0006 0023     		movs	r3, #0
 6126 0008 3B60     		str	r3, [r7]
1540:bluetooth_rxtx.c **** 	u8 hold;
1541:bluetooth_rxtx.c **** 	int8_t rssi;
1542:bluetooth_rxtx.c **** 	int i;
1543:bluetooth_rxtx.c **** 	int16_t packet_offset;
1544:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
1545:bluetooth_rxtx.c **** 	
1546:bluetooth_rxtx.c **** 	RXLED_CLR;
 6127              		.loc 1 1546 0
 6128 000a 834B     		ldr	r3, .L310
 6129 000c 1022     		movs	r2, #16
 6130 000e 1A60     		str	r2, [r3]
1547:bluetooth_rxtx.c **** 
1548:bluetooth_rxtx.c **** 	queue_init();
 6131              		.loc 1 1548 0
 6132 0010 FFF7FEFF 		bl	queue_init
1549:bluetooth_rxtx.c **** 	dio_ssp_init();
 6133              		.loc 1 1549 0
 6134 0014 FFF7FEFF 		bl	dio_ssp_init
1550:bluetooth_rxtx.c **** 	dma_init();
 6135              		.loc 1 1550 0
 6136 0018 FFF7FEFF 		bl	dma_init
1551:bluetooth_rxtx.c **** 	dio_ssp_start();
 6137              		.loc 1 1551 0
 6138 001c FFF7FEFF 		bl	dio_ssp_start
1552:bluetooth_rxtx.c **** 	
1553:bluetooth_rxtx.c **** 	if(mode == MODE_BT_FOLLOW) {
 6139              		.loc 1 1553 0
 6140 0020 7E4B     		ldr	r3, .L310+4
 6141 0022 1B78     		ldrb	r3, [r3]
 6142 0024 DBB2     		uxtb	r3, r3
 6143 0026 082B     		cmp	r3, #8
 6144 0028 0BD1     		bne	.L284
1554:bluetooth_rxtx.c **** 		precalc();
 6145              		.loc 1 1554 0
 6146 002a FFF7FEFF 		bl	precalc
1555:bluetooth_rxtx.c **** 		cc2400_rx_sync((syncword >> 32) & 0xffffffff);
 6147              		.loc 1 1555 0
 6148 002e 7C4B     		ldr	r3, .L310+8
 6149 0030 D3E90023 		ldrd	r2, [r3]
 6150 0034 1C00     		movs	r4, r3
 6151 0036 0025     		movs	r5, #0
 6152 0038 2346     		mov	r3, r4
 6153 003a 1846     		mov	r0, r3
 6154 003c FFF7FEFF 		bl	cc2400_rx_sync
 6155 0040 01E0     		b	.L285
 6156              	.L284:
1556:bluetooth_rxtx.c **** 	} else {
1557:bluetooth_rxtx.c **** 		cc2400_rx();
 6157              		.loc 1 1557 0
 6158 0042 FFF7FEFF 		bl	cc2400_rx
 6159              	.L285:
1558:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccHz27EZ.s 			page 135


1559:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6160              		.loc 1 1559 0
 6161 0046 FFF7FEFF 		bl	cs_trigger_enable
1560:bluetooth_rxtx.c **** 
1561:bluetooth_rxtx.c **** 	hold = 0;
 6162              		.loc 1 1561 0
 6163 004a 0023     		movs	r3, #0
 6164 004c FB71     		strb	r3, [r7, #7]
1562:bluetooth_rxtx.c **** 
1563:bluetooth_rxtx.c **** 	while ((requested_mode == MODE_RX_SYMBOLS) ||
 6165              		.loc 1 1563 0
 6166 004e D0E0     		b	.L286
 6167              	.L307:
1564:bluetooth_rxtx.c **** 		   (requested_mode == MODE_BT_FOLLOW)) {
1565:bluetooth_rxtx.c **** 
1566:bluetooth_rxtx.c **** 		/* If timer says time to hop, do it. TODO - set
1567:bluetooth_rxtx.c **** 		 * per-channel carrier sense threshold. Set by
1568:bluetooth_rxtx.c **** 		 * firmware or host. TODO - if hop happened, clear
1569:bluetooth_rxtx.c **** 		 * hold. */
1570:bluetooth_rxtx.c **** 		if (do_hop)
 6168              		.loc 1 1570 0
 6169 0050 744B     		ldr	r3, .L310+12
 6170 0052 1B78     		ldrb	r3, [r3]
 6171 0054 DBB2     		uxtb	r3, r3
 6172 0056 002B     		cmp	r3, #0
 6173 0058 01D0     		beq	.L287
1571:bluetooth_rxtx.c **** 			hop();
 6174              		.loc 1 1571 0
 6175 005a FFF7FEFF 		bl	hop
 6176              	.L287:
1572:bluetooth_rxtx.c **** 
1573:bluetooth_rxtx.c **** 		RXLED_CLR;
 6177              		.loc 1 1573 0
 6178 005e 6E4B     		ldr	r3, .L310
 6179 0060 1022     		movs	r2, #16
 6180 0062 1A60     		str	r2, [r3]
1574:bluetooth_rxtx.c **** 
1575:bluetooth_rxtx.c **** 		/* Wait for DMA transfer. TODO - need more work on
1576:bluetooth_rxtx.c **** 		 * RSSI. Should send RSSI indications to host even
1577:bluetooth_rxtx.c **** 		 * when not transferring data. That would also keep
1578:bluetooth_rxtx.c **** 		 * the USB stream going. This loop runs 50-80 times
1579:bluetooth_rxtx.c **** 		 * while waiting for DMA, but RSSI sampling does not
1580:bluetooth_rxtx.c **** 		 * cover all the symbols in a DMA transfer. Can not do
1581:bluetooth_rxtx.c **** 		 * RSSI sampling in CS interrupt, but could log time
1582:bluetooth_rxtx.c **** 		 * at multiple trigger points there. The MAX() below
1583:bluetooth_rxtx.c **** 		 * helps with statistics in the case that cs_trigger
1584:bluetooth_rxtx.c **** 		 * happened before the loop started. */
1585:bluetooth_rxtx.c **** 		rssi_reset();
 6181              		.loc 1 1585 0
 6182 0064 FFF7FEFF 		bl	rssi_reset
1586:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6183              		.loc 1 1586 0
 6184 0068 8023     		movs	r3, #128
 6185 006a 7B71     		strb	r3, [r7, #5]
1587:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0)) {
 6186              		.loc 1 1587 0
 6187 006c 22E0     		b	.L288
ARM GAS  /tmp/ccHz27EZ.s 			page 136


 6188              	.L291:
1588:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6189              		.loc 1 1588 0
 6190 006e 0620     		movs	r0, #6
 6191 0070 FFF7FEFF 		bl	cc2400_get
 6192 0074 0346     		mov	r3, r0
 6193 0076 1B0A     		lsrs	r3, r3, #8
 6194 0078 9BB2     		uxth	r3, r3
 6195 007a BB71     		strb	r3, [r7, #6]
1589:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6196              		.loc 1 1589 0
 6197 007c 6A4B     		ldr	r3, .L310+16
 6198 007e 1B78     		ldrb	r3, [r3]
 6199 0080 DBB2     		uxtb	r3, r3
 6200 0082 002B     		cmp	r3, #0
 6201 0084 11D0     		beq	.L289
 6202              		.loc 1 1589 0 is_stmt 0 discriminator 1
 6203 0086 97F90530 		ldrsb	r3, [r7, #5]
 6204 008a 13F1800F 		cmn	r3, #128
 6205 008e 0CD1     		bne	.L289
1590:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6206              		.loc 1 1590 0 is_stmt 1
 6207 0090 664B     		ldr	r3, .L310+20
 6208 0092 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6209 0094 5BB2     		sxtb	r3, r3
 6210 0096 03F13602 		add	r2, r3, #54
 6211 009a 97F90630 		ldrsb	r3, [r7, #6]
 6212 009e 9342     		cmp	r3, r2
 6213 00a0 B8BF     		it	lt
 6214 00a2 1346     		movlt	r3, r2
 6215 00a4 BB71     		strb	r3, [r7, #6]
1591:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6216              		.loc 1 1591 0
 6217 00a6 BB79     		ldrb	r3, [r7, #6]
 6218 00a8 7B71     		strb	r3, [r7, #5]
 6219              	.L289:
1592:bluetooth_rxtx.c **** 			}
1593:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6220              		.loc 1 1593 0
 6221 00aa 97F90630 		ldrsb	r3, [r7, #6]
 6222 00ae 1846     		mov	r0, r3
 6223 00b0 FFF7FEFF 		bl	rssi_add
 6224              	.L288:
1587:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6225              		.loc 1 1587 0
 6226 00b4 5E4B     		ldr	r3, .L310+24
 6227 00b6 1B68     		ldr	r3, [r3]
 6228 00b8 002B     		cmp	r3, #0
 6229 00ba 03D1     		bne	.L290
1587:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6230              		.loc 1 1587 0 is_stmt 0 discriminator 1
 6231 00bc 5D4B     		ldr	r3, .L310+28
 6232 00be 1B68     		ldr	r3, [r3]
 6233 00c0 002B     		cmp	r3, #0
 6234 00c2 D4D0     		beq	.L291
 6235              	.L290:
1594:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccHz27EZ.s 			page 137


1595:bluetooth_rxtx.c **** 
1596:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1597:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6236              		.loc 1 1597 0 is_stmt 1
 6237 00c4 5A4B     		ldr	r3, .L310+24
 6238 00c6 1B68     		ldr	r3, [r3]
 6239 00c8 03F00103 		and	r3, r3, #1
 6240 00cc 002B     		cmp	r3, #0
 6241 00ce 09D0     		beq	.L292
1598:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6242              		.loc 1 1598 0
 6243 00d0 594B     		ldr	r3, .L310+32
 6244 00d2 1B68     		ldr	r3, [r3]
 6245 00d4 3B60     		str	r3, [r7]
1599:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6246              		.loc 1 1599 0
 6247 00d6 594B     		ldr	r3, .L310+36
 6248 00d8 1B68     		ldr	r3, [r3]
 6249 00da 574A     		ldr	r2, .L310+32
 6250 00dc 1360     		str	r3, [r2]
1600:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 6251              		.loc 1 1600 0
 6252 00de 574A     		ldr	r2, .L310+36
 6253 00e0 3B68     		ldr	r3, [r7]
 6254 00e2 1360     		str	r3, [r2]
 6255              	.L292:
1601:bluetooth_rxtx.c **** 		}
1602:bluetooth_rxtx.c **** 
1603:bluetooth_rxtx.c **** 		if (rx_err) {
 6256              		.loc 1 1603 0
 6257 00e4 534B     		ldr	r3, .L310+28
 6258 00e6 1B68     		ldr	r3, [r3]
 6259 00e8 002B     		cmp	r3, #0
 6260 00ea 07D0     		beq	.L293
1604:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6261              		.loc 1 1604 0
 6262 00ec 544B     		ldr	r3, .L310+40
 6263 00ee 1B78     		ldrb	r3, [r3]
 6264 00f0 DBB2     		uxtb	r3, r3
 6265 00f2 43F00203 		orr	r3, r3, #2
 6266 00f6 DAB2     		uxtb	r2, r3
 6267 00f8 514B     		ldr	r3, .L310+40
 6268 00fa 1A70     		strb	r2, [r3]
 6269              	.L293:
1605:bluetooth_rxtx.c **** 		}
1606:bluetooth_rxtx.c **** 
1607:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1608:bluetooth_rxtx.c **** 		if (!rx_tc)
 6270              		.loc 1 1608 0
 6271 00fc 4C4B     		ldr	r3, .L310+24
 6272 00fe 1B68     		ldr	r3, [r3]
 6273 0100 002B     		cmp	r3, #0
 6274 0102 00D1     		bne	.L294
1609:bluetooth_rxtx.c **** 			goto rx_continue;
 6275              		.loc 1 1609 0
 6276 0104 6AE0     		b	.L295
 6277              	.L294:
ARM GAS  /tmp/ccHz27EZ.s 			page 138


1610:bluetooth_rxtx.c **** 
1611:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1612:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6278              		.loc 1 1612 0
 6279 0106 4A4B     		ldr	r3, .L310+24
 6280 0108 1B68     		ldr	r3, [r3]
 6281 010a 012B     		cmp	r3, #1
 6282 010c 07D9     		bls	.L296
1613:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6283              		.loc 1 1613 0
 6284 010e 4C4B     		ldr	r3, .L310+40
 6285 0110 1B78     		ldrb	r3, [r3]
 6286 0112 DBB2     		uxtb	r3, r3
 6287 0114 43F00103 		orr	r3, r3, #1
 6288 0118 DAB2     		uxtb	r2, r3
 6289 011a 494B     		ldr	r3, .L310+40
 6290 011c 1A70     		strb	r2, [r3]
 6291              	.L296:
1614:bluetooth_rxtx.c **** 
1615:bluetooth_rxtx.c **** 		rssi_iir_update();
 6292              		.loc 1 1615 0
 6293 011e FFF7FEFF 		bl	rssi_iir_update
1616:bluetooth_rxtx.c **** 
1617:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1618:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1619:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1620:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1621:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6294              		.loc 1 1621 0
 6295 0122 414B     		ldr	r3, .L310+16
 6296 0124 1B78     		ldrb	r3, [r3]
 6297 0126 DBB2     		uxtb	r3, r3
 6298 0128 002B     		cmp	r3, #0
 6299 012a 03D1     		bne	.L297
 6300              		.loc 1 1621 0 is_stmt 0 discriminator 1
 6301 012c 454B     		ldr	r3, .L310+44
 6302 012e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6303 0130 002B     		cmp	r3, #0
 6304 0132 0CD0     		beq	.L298
 6305              	.L297:
1622:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6306              		.loc 1 1622 0 is_stmt 1
 6307 0134 424B     		ldr	r3, .L310+40
 6308 0136 1B78     		ldrb	r3, [r3]
 6309 0138 DBB2     		uxtb	r3, r3
 6310 013a 43F00803 		orr	r3, r3, #8
 6311 013e DAB2     		uxtb	r2, r3
 6312 0140 3F4B     		ldr	r3, .L310+40
 6313 0142 1A70     		strb	r2, [r3]
1623:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6314              		.loc 1 1623 0
 6315 0144 0223     		movs	r3, #2
 6316 0146 FB71     		strb	r3, [r7, #7]
1624:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6317              		.loc 1 1624 0
 6318 0148 374B     		ldr	r3, .L310+16
 6319 014a 0022     		movs	r2, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 139


 6320 014c 1A70     		strb	r2, [r3]
 6321              	.L298:
1625:bluetooth_rxtx.c **** 		}
1626:bluetooth_rxtx.c **** 
1627:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6322              		.loc 1 1627 0
 6323 014e 3E4B     		ldr	r3, .L310+48
 6324 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6325 0152 5AB2     		sxtb	r2, r3
 6326 0154 354B     		ldr	r3, .L310+20
 6327 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6328 0158 5BB2     		sxtb	r3, r3
 6329 015a 3633     		adds	r3, r3, #54
 6330 015c 9A42     		cmp	r2, r3
 6331 015e 09DB     		blt	.L299
1628:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6332              		.loc 1 1628 0
 6333 0160 374B     		ldr	r3, .L310+40
 6334 0162 1B78     		ldrb	r3, [r3]
 6335 0164 DBB2     		uxtb	r3, r3
 6336 0166 43F01003 		orr	r3, r3, #16
 6337 016a DAB2     		uxtb	r2, r3
 6338 016c 344B     		ldr	r3, .L310+40
 6339 016e 1A70     		strb	r2, [r3]
1629:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6340              		.loc 1 1629 0
 6341 0170 0223     		movs	r3, #2
 6342 0172 FB71     		strb	r3, [r7, #7]
 6343              	.L299:
1630:bluetooth_rxtx.c **** 		}
1631:bluetooth_rxtx.c **** 
1632:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1633:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1634:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6344              		.loc 1 1634 0
 6345 0174 354B     		ldr	r3, .L310+52
 6346 0176 1B78     		ldrb	r3, [r3]
 6347 0178 DBB2     		uxtb	r3, r3
 6348 017a 002B     		cmp	r3, #0
 6349 017c 07D0     		beq	.L300
1635:bluetooth_rxtx.c **** 			if (hold == 0)
 6350              		.loc 1 1635 0
 6351 017e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6352 0180 002B     		cmp	r3, #0
 6353 0182 01D1     		bne	.L301
1636:bluetooth_rxtx.c **** 				hold = 1;
 6354              		.loc 1 1636 0
 6355 0184 0123     		movs	r3, #1
 6356 0186 FB71     		strb	r3, [r7, #7]
 6357              	.L301:
1637:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 6358              		.loc 1 1637 0
 6359 0188 304B     		ldr	r3, .L310+52
 6360 018a 0022     		movs	r2, #0
 6361 018c 1A70     		strb	r2, [r3]
 6362              	.L300:
1638:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccHz27EZ.s 			page 140


1639:bluetooth_rxtx.c **** 
1640:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1641:bluetooth_rxtx.c **** 		if (hold == 0) {
 6363              		.loc 1 1641 0
 6364 018e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6365 0190 002B     		cmp	r3, #0
 6366 0192 00D1     		bne	.L302
1642:bluetooth_rxtx.c **** 			goto rx_continue;
 6367              		.loc 1 1642 0
 6368 0194 22E0     		b	.L295
 6369              	.L302:
1643:bluetooth_rxtx.c **** 		}
1644:bluetooth_rxtx.c **** 		hold--;
 6370              		.loc 1 1644 0
 6371 0196 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6372 0198 013B     		subs	r3, r3, #1
 6373 019a FB71     		strb	r3, [r7, #7]
1645:bluetooth_rxtx.c **** 		
1646:bluetooth_rxtx.c **** 		/* Queue data from DMA buffer. */
1647:bluetooth_rxtx.c **** 		switch (hop_mode) {
 6374              		.loc 1 1647 0
 6375 019c 2C4B     		ldr	r3, .L310+56
 6376 019e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6377 01a0 022B     		cmp	r3, #2
 6378 01a2 0DD1     		bne	.L308
1648:bluetooth_rxtx.c **** 			case HOP_BLUETOOTH:
1649:bluetooth_rxtx.c **** 				//if ((packet_offset = find_access_code(idle_rxbuf)) >= 0) {
1650:bluetooth_rxtx.c **** 				//		clock_trim = 20 - packet_offset;
1651:bluetooth_rxtx.c **** 						if (enqueue(BR_PACKET, idle_rxbuf)) {
 6379              		.loc 1 1651 0
 6380 01a4 254B     		ldr	r3, .L310+36
 6381 01a6 1B68     		ldr	r3, [r3]
 6382 01a8 0020     		movs	r0, #0
 6383 01aa 1946     		mov	r1, r3
 6384 01ac FFF7FEFF 		bl	enqueue
 6385 01b0 0346     		mov	r3, r0
 6386 01b2 002B     		cmp	r3, #0
 6387 01b4 03D0     		beq	.L305
1652:bluetooth_rxtx.c **** 								RXLED_SET;
 6388              		.loc 1 1652 0
 6389 01b6 274B     		ldr	r3, .L310+60
 6390 01b8 1022     		movs	r2, #16
 6391 01ba 1A60     		str	r2, [r3]
1653:bluetooth_rxtx.c **** 						}
1654:bluetooth_rxtx.c **** 				//}
1655:bluetooth_rxtx.c **** 				break;
 6392              		.loc 1 1655 0
 6393 01bc 0EE0     		b	.L295
 6394              	.L305:
 6395 01be 0DE0     		b	.L295
 6396              	.L308:
1656:bluetooth_rxtx.c **** 			default:
1657:bluetooth_rxtx.c **** 				if (enqueue(BR_PACKET, idle_rxbuf)) {
 6397              		.loc 1 1657 0
 6398 01c0 1E4B     		ldr	r3, .L310+36
 6399 01c2 1B68     		ldr	r3, [r3]
 6400 01c4 0020     		movs	r0, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 141


 6401 01c6 1946     		mov	r1, r3
 6402 01c8 FFF7FEFF 		bl	enqueue
 6403 01cc 0346     		mov	r3, r0
 6404 01ce 002B     		cmp	r3, #0
 6405 01d0 03D0     		beq	.L306
1658:bluetooth_rxtx.c **** 						RXLED_SET;
 6406              		.loc 1 1658 0
 6407 01d2 204B     		ldr	r3, .L310+60
 6408 01d4 1022     		movs	r2, #16
 6409 01d6 1A60     		str	r2, [r3]
1659:bluetooth_rxtx.c **** 				}
1660:bluetooth_rxtx.c **** 				break;
 6410              		.loc 1 1660 0
 6411 01d8 FFE7     		b	.L309
 6412              	.L306:
 6413              	.L309:
 6414 01da 00BF     		nop
 6415              	.L295:
1661:bluetooth_rxtx.c **** 		}
1662:bluetooth_rxtx.c **** 
1663:bluetooth_rxtx.c **** 	rx_continue:
1664:bluetooth_rxtx.c **** 		handle_usb(clkn);
 6416              		.loc 1 1664 0
 6417 01dc 1E4B     		ldr	r3, .L310+64
 6418 01de 1B68     		ldr	r3, [r3]
 6419 01e0 1846     		mov	r0, r3
 6420 01e2 FFF7FEFF 		bl	handle_usb
1665:bluetooth_rxtx.c **** 		rx_tc = 0;
 6421              		.loc 1 1665 0
 6422 01e6 124B     		ldr	r3, .L310+24
 6423 01e8 0022     		movs	r2, #0
 6424 01ea 1A60     		str	r2, [r3]
1666:bluetooth_rxtx.c **** 		rx_err = 0;
 6425              		.loc 1 1666 0
 6426 01ec 114B     		ldr	r3, .L310+28
 6427 01ee 0022     		movs	r2, #0
 6428 01f0 1A60     		str	r2, [r3]
 6429              	.L286:
1563:bluetooth_rxtx.c **** 		   (requested_mode == MODE_BT_FOLLOW)) {
 6430              		.loc 1 1563 0
 6431 01f2 1A4B     		ldr	r3, .L310+68
 6432 01f4 1B78     		ldrb	r3, [r3]
 6433 01f6 DBB2     		uxtb	r3, r3
 6434 01f8 012B     		cmp	r3, #1
 6435 01fa 3FF429AF 		beq	.L307
1564:bluetooth_rxtx.c **** 
 6436              		.loc 1 1564 0 discriminator 1
 6437 01fe 174B     		ldr	r3, .L310+68
 6438 0200 1B78     		ldrb	r3, [r3]
 6439 0202 DBB2     		uxtb	r3, r3
1563:bluetooth_rxtx.c **** 		   (requested_mode == MODE_BT_FOLLOW)) {
 6440              		.loc 1 1563 0 discriminator 1
 6441 0204 082B     		cmp	r3, #8
 6442 0206 3FF423AF 		beq	.L307
1667:bluetooth_rxtx.c **** 	}
1668:bluetooth_rxtx.c **** 
1669:bluetooth_rxtx.c **** 	/* This call is a nop so far. Since bt_rx_stream() starts the
ARM GAS  /tmp/ccHz27EZ.s 			page 142


1670:bluetooth_rxtx.c **** 	 * stream, it makes sense that it would stop it. TODO - how
1671:bluetooth_rxtx.c **** 	 * should setup/teardown be handled? Should every new mode be
1672:bluetooth_rxtx.c **** 	 * starting from scratch? */
1673:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6443              		.loc 1 1673 0
 6444 020a FFF7FEFF 		bl	dio_ssp_stop
1674:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6445              		.loc 1 1674 0
 6446 020e FFF7FEFF 		bl	cs_trigger_disable
1675:bluetooth_rxtx.c **** }
 6447              		.loc 1 1675 0
 6448 0212 0837     		adds	r7, r7, #8
 6449              		.cfi_def_cfa_offset 16
 6450 0214 BD46     		mov	sp, r7
 6451              		.cfi_def_cfa_register 13
 6452              		@ sp needed
 6453 0216 B0BD     		pop	{r4, r5, r7, pc}
 6454              	.L311:
 6455              		.align	2
 6456              	.L310:
 6457 0218 3CC00920 		.word	537509948
 6458 021c 00000000 		.word	mode
 6459 0220 00000000 		.word	syncword
 6460 0224 00000000 		.word	do_hop
 6461 0228 00000000 		.word	cs_trigger
 6462 022c 00000000 		.word	cs_threshold_cur
 6463 0230 00000000 		.word	rx_tc
 6464 0234 00000000 		.word	rx_err
 6465 0238 00000000 		.word	active_rxbuf
 6466 023c 00000000 		.word	idle_rxbuf
 6467 0240 00000000 		.word	status
 6468 0244 00000000 		.word	cs_no_squelch
 6469 0248 00000000 		.word	rssi_max
 6470 024c 00000000 		.word	keepalive_trigger
 6471 0250 00000000 		.word	hop_mode
 6472 0254 38C00920 		.word	537509944
 6473 0258 00000000 		.word	clkn
 6474 025c 00000000 		.word	requested_mode
 6475              		.cfi_endproc
 6476              	.LFE29:
 6478              		.section	.text.le_set_access_address,"ax",%progbits
 6479              		.align	2
 6480              		.thumb
 6481              		.thumb_func
 6483              	le_set_access_address:
 6484              	.LFB30:
1676:bluetooth_rxtx.c **** 
1677:bluetooth_rxtx.c **** /* set LE access address */
1678:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 6485              		.loc 1 1678 0
 6486              		.cfi_startproc
 6487              		@ args = 0, pretend = 0, frame = 16
 6488              		@ frame_needed = 1, uses_anonymous_args = 0
 6489 0000 80B5     		push	{r7, lr}
 6490              		.cfi_def_cfa_offset 8
 6491              		.cfi_offset 7, -8
 6492              		.cfi_offset 14, -4
ARM GAS  /tmp/ccHz27EZ.s 			page 143


 6493 0002 84B0     		sub	sp, sp, #16
 6494              		.cfi_def_cfa_offset 24
 6495 0004 00AF     		add	r7, sp, #0
 6496              		.cfi_def_cfa_register 7
 6497 0006 7860     		str	r0, [r7, #4]
1679:bluetooth_rxtx.c **** 	u32 aa_rev;
1680:bluetooth_rxtx.c **** 
1681:bluetooth_rxtx.c **** 	le.access_address = aa;
 6498              		.loc 1 1681 0
 6499 0008 094A     		ldr	r2, .L313
 6500 000a 7B68     		ldr	r3, [r7, #4]
 6501 000c 1360     		str	r3, [r2]
1682:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 6502              		.loc 1 1682 0
 6503 000e 7868     		ldr	r0, [r7, #4]
 6504 0010 FFF7FEFF 		bl	rbit
 6505 0014 F860     		str	r0, [r7, #12]
1683:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6506              		.loc 1 1683 0
 6507 0016 FB68     		ldr	r3, [r7, #12]
 6508 0018 9AB2     		uxth	r2, r3
 6509 001a 054B     		ldr	r3, .L313
 6510 001c DA80     		strh	r2, [r3, #6]	@ movhi
1684:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6511              		.loc 1 1684 0
 6512 001e FB68     		ldr	r3, [r7, #12]
 6513 0020 1B0C     		lsrs	r3, r3, #16
 6514 0022 9AB2     		uxth	r2, r3
 6515 0024 024B     		ldr	r3, .L313
 6516 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1685:bluetooth_rxtx.c **** }
 6517              		.loc 1 1685 0
 6518 0028 1037     		adds	r7, r7, #16
 6519              		.cfi_def_cfa_offset 8
 6520 002a BD46     		mov	sp, r7
 6521              		.cfi_def_cfa_register 13
 6522              		@ sp needed
 6523 002c 80BD     		pop	{r7, pc}
 6524              	.L314:
 6525 002e 00BF     		.align	2
 6526              	.L313:
 6527 0030 00000000 		.word	le
 6528              		.cfi_endproc
 6529              	.LFE30:
 6531              		.section	.text.reset_le,"ax",%progbits
 6532              		.align	2
 6533              		.global	reset_le
 6534              		.thumb
 6535              		.thumb_func
 6537              	reset_le:
 6538              	.LFB31:
1686:bluetooth_rxtx.c **** 
1687:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1688:bluetooth_rxtx.c **** void reset_le() {
 6539              		.loc 1 1688 0
 6540              		.cfi_startproc
 6541              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccHz27EZ.s 			page 144


 6542              		@ frame_needed = 1, uses_anonymous_args = 0
 6543 0000 80B5     		push	{r7, lr}
 6544              		.cfi_def_cfa_offset 8
 6545              		.cfi_offset 7, -8
 6546              		.cfi_offset 14, -4
 6547 0002 00AF     		add	r7, sp, #0
 6548              		.cfi_def_cfa_register 7
1689:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6549              		.loc 1 1689 0
 6550 0004 1F48     		ldr	r0, .L316
 6551 0006 FFF7FEFF 		bl	le_set_access_address
1690:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 6552              		.loc 1 1690 0
 6553 000a 1F4B     		ldr	r3, .L316+4
 6554 000c 1F4A     		ldr	r2, .L316+8
 6555 000e 9A60     		str	r2, [r3, #8]
1691:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6556              		.loc 1 1691 0
 6557 0010 1D4B     		ldr	r3, .L316+4
 6558 0012 1F4A     		ldr	r2, .L316+12
 6559 0014 DA60     		str	r2, [r3, #12]
1692:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6560              		.loc 1 1692 0
 6561 0016 1C4B     		ldr	r3, .L316+4
 6562 0018 0122     		movs	r2, #1
 6563 001a 1A61     		str	r2, [r3, #16]
1693:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6564              		.loc 1 1693 0
 6565 001c 1A4B     		ldr	r3, .L316+4
 6566 001e 0022     		movs	r2, #0
 6567 0020 1A64     		str	r2, [r3, #64]
1694:bluetooth_rxtx.c **** 
1695:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6568              		.loc 1 1695 0
 6569 0022 194B     		ldr	r3, .L316+4
 6570 0024 0022     		movs	r2, #0
 6571 0026 1A75     		strb	r2, [r3, #20]
1696:bluetooth_rxtx.c **** 
1697:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 6572              		.loc 1 1697 0
 6573 0028 174B     		ldr	r3, .L316+4
 6574 002a 0022     		movs	r2, #0
 6575 002c 5A75     		strb	r2, [r3, #21]
1698:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6576              		.loc 1 1698 0
 6577 002e 164B     		ldr	r3, .L316+4
 6578 0030 0022     		movs	r2, #0
 6579 0032 9A75     		strb	r2, [r3, #22]
1699:bluetooth_rxtx.c **** 
1700:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6580              		.loc 1 1700 0
 6581 0034 144B     		ldr	r3, .L316+4
 6582 0036 0022     		movs	r2, #0
 6583 0038 9A61     		str	r2, [r3, #24]
1701:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6584              		.loc 1 1701 0
 6585 003a 134B     		ldr	r3, .L316+4
ARM GAS  /tmp/ccHz27EZ.s 			page 145


 6586 003c 0022     		movs	r2, #0
 6587 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1702:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6588              		.loc 1 1702 0
 6589 0040 114B     		ldr	r3, .L316+4
 6590 0042 0022     		movs	r2, #0
 6591 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1703:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6592              		.loc 1 1703 0
 6593 0046 104B     		ldr	r3, .L316+4
 6594 0048 0022     		movs	r2, #0
 6595 004a DA83     		strh	r2, [r3, #30]	@ movhi
1704:bluetooth_rxtx.c **** 	le.conn_count = 0;
 6596              		.loc 1 1704 0
 6597 004c 0E4B     		ldr	r3, .L316+4
 6598 004e 0022     		movs	r2, #0
 6599 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1705:bluetooth_rxtx.c **** 
1706:bluetooth_rxtx.c **** 	le.win_size = 0;
 6600              		.loc 1 1706 0
 6601 0052 0D4B     		ldr	r3, .L316+4
 6602 0054 0022     		movs	r2, #0
 6603 0056 83F82220 		strb	r2, [r3, #34]
1707:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6604              		.loc 1 1707 0
 6605 005a 0B4B     		ldr	r3, .L316+4
 6606 005c 0022     		movs	r2, #0
 6607 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1708:bluetooth_rxtx.c **** 
1709:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6608              		.loc 1 1709 0
 6609 0060 094B     		ldr	r3, .L316+4
 6610 0062 0022     		movs	r2, #0
 6611 0064 9A62     		str	r2, [r3, #40]
1710:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6612              		.loc 1 1710 0
 6613 0066 084B     		ldr	r3, .L316+4
 6614 0068 0022     		movs	r2, #0
 6615 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1711:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6616              		.loc 1 1711 0
 6617 006c 064B     		ldr	r3, .L316+4
 6618 006e 0022     		movs	r2, #0
 6619 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1712:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6620              		.loc 1 1712 0
 6621 0072 054B     		ldr	r3, .L316+4
 6622 0074 0022     		movs	r2, #0
 6623 0076 83F83020 		strb	r2, [r3, #48]
1713:bluetooth_rxtx.c **** 	le.win_offset_update;
1714:bluetooth_rxtx.c **** 
1715:bluetooth_rxtx.c **** 	do_hop = 0;
 6624              		.loc 1 1715 0
 6625 007a 064B     		ldr	r3, .L316+16
 6626 007c 0022     		movs	r2, #0
 6627 007e 1A70     		strb	r2, [r3]
1716:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccHz27EZ.s 			page 146


 6628              		.loc 1 1716 0
 6629 0080 80BD     		pop	{r7, pc}
 6630              	.L317:
 6631 0082 00BF     		.align	2
 6632              	.L316:
 6633 0084 D6BE898E 		.word	-1903575338
 6634 0088 00000000 		.word	le
 6635 008c 55555500 		.word	5592405
 6636 0090 AAAAAA00 		.word	11184810
 6637 0094 00000000 		.word	do_hop
 6638              		.cfi_endproc
 6639              	.LFE31:
 6641              		.section	.text.reset_le_promisc,"ax",%progbits
 6642              		.align	2
 6643              		.global	reset_le_promisc
 6644              		.thumb
 6645              		.thumb_func
 6647              	reset_le_promisc:
 6648              	.LFB32:
1717:bluetooth_rxtx.c **** 
1718:bluetooth_rxtx.c **** // reset LE Promisc state
1719:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6649              		.loc 1 1719 0
 6650              		.cfi_startproc
 6651              		@ args = 0, pretend = 0, frame = 0
 6652              		@ frame_needed = 1, uses_anonymous_args = 0
 6653 0000 80B5     		push	{r7, lr}
 6654              		.cfi_def_cfa_offset 8
 6655              		.cfi_offset 7, -8
 6656              		.cfi_offset 14, -4
 6657 0002 00AF     		add	r7, sp, #0
 6658              		.cfi_def_cfa_register 7
1720:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6659              		.loc 1 1720 0
 6660 0004 0548     		ldr	r0, .L319
 6661 0006 0021     		movs	r1, #0
 6662 0008 4FF48472 		mov	r2, #264
 6663 000c FFF7FEFF 		bl	memset
1721:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 6664              		.loc 1 1721 0
 6665 0010 024B     		ldr	r3, .L319
 6666 0012 4FF0FF32 		mov	r2, #-1
 6667 0016 C3F80021 		str	r2, [r3, #256]
1722:bluetooth_rxtx.c **** }
 6668              		.loc 1 1722 0
 6669 001a 80BD     		pop	{r7, pc}
 6670              	.L320:
 6671              		.align	2
 6672              	.L319:
 6673 001c 00000000 		.word	le_promisc
 6674              		.cfi_endproc
 6675              	.LFE32:
 6677              		.section	.text.bt_generic_le,"ax",%progbits
 6678              		.align	2
 6679              		.global	bt_generic_le
 6680              		.thumb
 6681              		.thumb_func
ARM GAS  /tmp/ccHz27EZ.s 			page 147


 6683              	bt_generic_le:
 6684              	.LFB33:
1723:bluetooth_rxtx.c **** 
1724:bluetooth_rxtx.c **** /* generic le mode */
1725:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1726:bluetooth_rxtx.c **** {
 6685              		.loc 1 1726 0
 6686              		.cfi_startproc
 6687              		@ args = 0, pretend = 0, frame = 32
 6688              		@ frame_needed = 1, uses_anonymous_args = 0
 6689 0000 80B5     		push	{r7, lr}
 6690              		.cfi_def_cfa_offset 8
 6691              		.cfi_offset 7, -8
 6692              		.cfi_offset 14, -4
 6693 0002 88B0     		sub	sp, sp, #32
 6694              		.cfi_def_cfa_offset 40
 6695 0004 00AF     		add	r7, sp, #0
 6696              		.cfi_def_cfa_register 7
 6697 0006 0346     		mov	r3, r0
 6698 0008 FB71     		strb	r3, [r7, #7]
1727:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6699              		.loc 1 1727 0
 6700 000a 0023     		movs	r3, #0
 6701 000c FB60     		str	r3, [r7, #12]
1728:bluetooth_rxtx.c **** 	u8 hold;
1729:bluetooth_rxtx.c **** 	int i, j;
1730:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1731:bluetooth_rxtx.c **** 
1732:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6702              		.loc 1 1732 0
 6703 000e A44B     		ldr	r3, .L349
 6704 0010 0122     		movs	r2, #1
 6705 0012 1A70     		strb	r2, [r3]
1733:bluetooth_rxtx.c **** 	mode = active_mode;
 6706              		.loc 1 1733 0
 6707 0014 A34A     		ldr	r2, .L349+4
 6708 0016 FB79     		ldrb	r3, [r7, #7]
 6709 0018 1370     		strb	r3, [r2]
1734:bluetooth_rxtx.c **** 
1735:bluetooth_rxtx.c **** 	reset_le();
 6710              		.loc 1 1735 0
 6711 001a FFF7FEFF 		bl	reset_le
1736:bluetooth_rxtx.c **** 
1737:bluetooth_rxtx.c **** 	// enable USB interrupts
1738:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6712              		.loc 1 1738 0
 6713 001e A24B     		ldr	r3, .L349+8
 6714 0020 4FF08072 		mov	r2, #16777216
 6715 0024 1A60     		str	r2, [r3]
1739:bluetooth_rxtx.c **** 
1740:bluetooth_rxtx.c **** 	RXLED_CLR;
 6716              		.loc 1 1740 0
 6717 0026 A14B     		ldr	r3, .L349+12
 6718 0028 1022     		movs	r2, #16
 6719 002a 1A60     		str	r2, [r3]
1741:bluetooth_rxtx.c **** 
1742:bluetooth_rxtx.c **** 	queue_init();
ARM GAS  /tmp/ccHz27EZ.s 			page 148


 6720              		.loc 1 1742 0
 6721 002c FFF7FEFF 		bl	queue_init
1743:bluetooth_rxtx.c **** 	dio_ssp_init();
 6722              		.loc 1 1743 0
 6723 0030 FFF7FEFF 		bl	dio_ssp_init
1744:bluetooth_rxtx.c **** 	dma_init();
 6724              		.loc 1 1744 0
 6725 0034 FFF7FEFF 		bl	dma_init
1745:bluetooth_rxtx.c **** 	dio_ssp_start();
 6726              		.loc 1 1745 0
 6727 0038 FFF7FEFF 		bl	dio_ssp_start
1746:bluetooth_rxtx.c **** 	cc2400_rx();
 6728              		.loc 1 1746 0
 6729 003c FFF7FEFF 		bl	cc2400_rx
1747:bluetooth_rxtx.c **** 
1748:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6730              		.loc 1 1748 0
 6731 0040 FFF7FEFF 		bl	cs_trigger_enable
1749:bluetooth_rxtx.c **** 
1750:bluetooth_rxtx.c **** 	hold = 0;
 6732              		.loc 1 1750 0
 6733 0044 0023     		movs	r3, #0
 6734 0046 FB77     		strb	r3, [r7, #31]
1751:bluetooth_rxtx.c **** 
1752:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6735              		.loc 1 1752 0
 6736 0048 15E1     		b	.L322
 6737              	.L348:
 6738              	.LBB3:
1753:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6739              		.loc 1 1753 0
 6740 004a 994B     		ldr	r3, .L349+16
 6741 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6742 004e 9BB2     		uxth	r3, r3
 6743 0050 002B     		cmp	r3, #0
 6744 0052 24D0     		beq	.L323
1754:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6745              		.loc 1 1754 0
 6746 0054 6420     		movs	r0, #100
 6747 0056 FFF7FEFF 		bl	cc2400_strobe
1755:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6748              		.loc 1 1755 0
 6749 005a 00BF     		nop
 6750              	.L324:
 6751              		.loc 1 1755 0 is_stmt 0 discriminator 1
 6752 005c FFF7FEFF 		bl	cc2400_status
 6753 0060 0346     		mov	r3, r0
 6754 0062 03F00403 		and	r3, r3, #4
 6755 0066 002B     		cmp	r3, #0
 6756 0068 F8D1     		bne	.L324
1756:bluetooth_rxtx.c **** 
1757:bluetooth_rxtx.c **** 			/* Retune */
1758:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6757              		.loc 1 1758 0 is_stmt 1
 6758 006a 924B     		ldr	r3, .L349+20
 6759 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6760 006e 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 149


 6761 0070 013B     		subs	r3, r3, #1
 6762 0072 9BB2     		uxth	r3, r3
 6763 0074 0220     		movs	r0, #2
 6764 0076 1946     		mov	r1, r3
 6765 0078 FFF7FEFF 		bl	cc2400_set
1759:bluetooth_rxtx.c **** 
1760:bluetooth_rxtx.c **** 			/* Wait for lock */
1761:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6766              		.loc 1 1761 0
 6767 007c 6120     		movs	r0, #97
 6768 007e FFF7FEFF 		bl	cc2400_strobe
1762:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6769              		.loc 1 1762 0
 6770 0082 00BF     		nop
 6771              	.L325:
 6772              		.loc 1 1762 0 is_stmt 0 discriminator 1
 6773 0084 FFF7FEFF 		bl	cc2400_status
 6774 0088 0346     		mov	r3, r0
 6775 008a 03F00403 		and	r3, r3, #4
 6776 008e 002B     		cmp	r3, #0
 6777 0090 F8D0     		beq	.L325
1763:bluetooth_rxtx.c **** 
1764:bluetooth_rxtx.c **** 			/* RX mode */
1765:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6778              		.loc 1 1765 0 is_stmt 1
 6779 0092 6220     		movs	r0, #98
 6780 0094 FFF7FEFF 		bl	cc2400_strobe
1766:bluetooth_rxtx.c **** 
1767:bluetooth_rxtx.c **** 			requested_channel = 0;
 6781              		.loc 1 1767 0
 6782 0098 854B     		ldr	r3, .L349+16
 6783 009a 0022     		movs	r2, #0
 6784 009c 1A80     		strh	r2, [r3]	@ movhi
 6785              	.L323:
1768:bluetooth_rxtx.c **** 		}
1769:bluetooth_rxtx.c **** 
1770:bluetooth_rxtx.c **** 		if (do_hop) {
 6786              		.loc 1 1770 0
 6787 009e 864B     		ldr	r3, .L349+24
 6788 00a0 1B78     		ldrb	r3, [r3]
 6789 00a2 DBB2     		uxtb	r3, r3
 6790 00a4 002B     		cmp	r3, #0
 6791 00a6 02D0     		beq	.L326
1771:bluetooth_rxtx.c **** 			hop();
 6792              		.loc 1 1771 0
 6793 00a8 FFF7FEFF 		bl	hop
 6794 00ac 03E0     		b	.L327
 6795              	.L326:
1772:bluetooth_rxtx.c **** 		} else {
1773:bluetooth_rxtx.c **** 			TXLED_CLR;
 6796              		.loc 1 1773 0
 6797 00ae 7F4B     		ldr	r3, .L349+12
 6798 00b0 4FF48072 		mov	r2, #256
 6799 00b4 1A60     		str	r2, [r3]
 6800              	.L327:
1774:bluetooth_rxtx.c **** 		}
1775:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 150


1776:bluetooth_rxtx.c **** 		RXLED_CLR;
 6801              		.loc 1 1776 0
 6802 00b6 7D4B     		ldr	r3, .L349+12
 6803 00b8 1022     		movs	r2, #16
 6804 00ba 1A60     		str	r2, [r3]
1777:bluetooth_rxtx.c **** 
1778:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1779:bluetooth_rxtx.c **** 		rssi_reset();
 6805              		.loc 1 1779 0
 6806 00bc FFF7FEFF 		bl	rssi_reset
1780:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6807              		.loc 1 1780 0
 6808 00c0 8023     		movs	r3, #128
 6809 00c2 BB74     		strb	r3, [r7, #18]
1781:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6810              		.loc 1 1781 0
 6811 00c4 22E0     		b	.L328
 6812              	.L331:
1782:bluetooth_rxtx.c **** 		{
1783:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6813              		.loc 1 1783 0
 6814 00c6 0620     		movs	r0, #6
 6815 00c8 FFF7FEFF 		bl	cc2400_get
 6816 00cc 0346     		mov	r3, r0
 6817 00ce 1B0A     		lsrs	r3, r3, #8
 6818 00d0 9BB2     		uxth	r3, r3
 6819 00d2 FB74     		strb	r3, [r7, #19]
1784:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6820              		.loc 1 1784 0
 6821 00d4 794B     		ldr	r3, .L349+28
 6822 00d6 1B78     		ldrb	r3, [r3]
 6823 00d8 DBB2     		uxtb	r3, r3
 6824 00da 002B     		cmp	r3, #0
 6825 00dc 11D0     		beq	.L329
 6826              		.loc 1 1784 0 is_stmt 0 discriminator 1
 6827 00de 97F91230 		ldrsb	r3, [r7, #18]
 6828 00e2 13F1800F 		cmn	r3, #128
 6829 00e6 0CD1     		bne	.L329
1785:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6830              		.loc 1 1785 0 is_stmt 1
 6831 00e8 754B     		ldr	r3, .L349+32
 6832 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6833 00ec 5BB2     		sxtb	r3, r3
 6834 00ee 03F13602 		add	r2, r3, #54
 6835 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6836 00f6 9342     		cmp	r3, r2
 6837 00f8 B8BF     		it	lt
 6838 00fa 1346     		movlt	r3, r2
 6839 00fc FB74     		strb	r3, [r7, #19]
1786:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6840              		.loc 1 1786 0
 6841 00fe FB7C     		ldrb	r3, [r7, #19]
 6842 0100 BB74     		strb	r3, [r7, #18]
 6843              	.L329:
1787:bluetooth_rxtx.c **** 			}
1788:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6844              		.loc 1 1788 0
ARM GAS  /tmp/ccHz27EZ.s 			page 151


 6845 0102 97F91330 		ldrsb	r3, [r7, #19]
 6846 0106 1846     		mov	r0, r3
 6847 0108 FFF7FEFF 		bl	rssi_add
 6848              	.L328:
1781:bluetooth_rxtx.c **** 		{
 6849              		.loc 1 1781 0
 6850 010c 6D4B     		ldr	r3, .L349+36
 6851 010e 1B68     		ldr	r3, [r3]
 6852 0110 002B     		cmp	r3, #0
 6853 0112 03D1     		bne	.L330
1781:bluetooth_rxtx.c **** 		{
 6854              		.loc 1 1781 0 is_stmt 0 discriminator 1
 6855 0114 6C4B     		ldr	r3, .L349+40
 6856 0116 1B68     		ldr	r3, [r3]
 6857 0118 002B     		cmp	r3, #0
 6858 011a D4D0     		beq	.L331
 6859              	.L330:
1789:bluetooth_rxtx.c **** 		}
1790:bluetooth_rxtx.c **** 
1791:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1792:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6860              		.loc 1 1792 0 is_stmt 1
 6861 011c 694B     		ldr	r3, .L349+36
 6862 011e 1B68     		ldr	r3, [r3]
 6863 0120 03F00103 		and	r3, r3, #1
 6864 0124 002B     		cmp	r3, #0
 6865 0126 09D0     		beq	.L332
1793:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6866              		.loc 1 1793 0
 6867 0128 684B     		ldr	r3, .L349+44
 6868 012a 1B68     		ldr	r3, [r3]
 6869 012c FB60     		str	r3, [r7, #12]
1794:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6870              		.loc 1 1794 0
 6871 012e 684B     		ldr	r3, .L349+48
 6872 0130 1B68     		ldr	r3, [r3]
 6873 0132 664A     		ldr	r2, .L349+44
 6874 0134 1360     		str	r3, [r2]
1795:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 6875              		.loc 1 1795 0
 6876 0136 664A     		ldr	r2, .L349+48
 6877 0138 FB68     		ldr	r3, [r7, #12]
 6878 013a 1360     		str	r3, [r2]
 6879              	.L332:
1796:bluetooth_rxtx.c **** 		}
1797:bluetooth_rxtx.c **** 
1798:bluetooth_rxtx.c **** 		if (rx_err) {
 6880              		.loc 1 1798 0
 6881 013c 624B     		ldr	r3, .L349+40
 6882 013e 1B68     		ldr	r3, [r3]
 6883 0140 002B     		cmp	r3, #0
 6884 0142 07D0     		beq	.L333
1799:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6885              		.loc 1 1799 0
 6886 0144 634B     		ldr	r3, .L349+52
 6887 0146 1B78     		ldrb	r3, [r3]
 6888 0148 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 152


 6889 014a 43F00203 		orr	r3, r3, #2
 6890 014e DAB2     		uxtb	r2, r3
 6891 0150 604B     		ldr	r3, .L349+52
 6892 0152 1A70     		strb	r2, [r3]
 6893              	.L333:
1800:bluetooth_rxtx.c **** 		}
1801:bluetooth_rxtx.c **** 
1802:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1803:bluetooth_rxtx.c **** 		if (!rx_tc)
 6894              		.loc 1 1803 0
 6895 0154 5B4B     		ldr	r3, .L349+36
 6896 0156 1B68     		ldr	r3, [r3]
 6897 0158 002B     		cmp	r3, #0
 6898 015a 00D1     		bne	.L334
1804:bluetooth_rxtx.c **** 			goto rx_continue;
 6899              		.loc 1 1804 0
 6900 015c 85E0     		b	.L335
 6901              	.L334:
1805:bluetooth_rxtx.c **** 
1806:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1807:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6902              		.loc 1 1807 0
 6903 015e 594B     		ldr	r3, .L349+36
 6904 0160 1B68     		ldr	r3, [r3]
 6905 0162 012B     		cmp	r3, #1
 6906 0164 07D9     		bls	.L336
1808:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6907              		.loc 1 1808 0
 6908 0166 5B4B     		ldr	r3, .L349+52
 6909 0168 1B78     		ldrb	r3, [r3]
 6910 016a DBB2     		uxtb	r3, r3
 6911 016c 43F00103 		orr	r3, r3, #1
 6912 0170 DAB2     		uxtb	r2, r3
 6913 0172 584B     		ldr	r3, .L349+52
 6914 0174 1A70     		strb	r2, [r3]
 6915              	.L336:
1809:bluetooth_rxtx.c **** 
1810:bluetooth_rxtx.c **** 		rssi_iir_update();
 6916              		.loc 1 1810 0
 6917 0176 FFF7FEFF 		bl	rssi_iir_update
1811:bluetooth_rxtx.c **** 
1812:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1813:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1814:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1815:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1816:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6918              		.loc 1 1816 0
 6919 017a 504B     		ldr	r3, .L349+28
 6920 017c 1B78     		ldrb	r3, [r3]
 6921 017e DBB2     		uxtb	r3, r3
 6922 0180 002B     		cmp	r3, #0
 6923 0182 03D1     		bne	.L337
 6924              		.loc 1 1816 0 is_stmt 0 discriminator 1
 6925 0184 544B     		ldr	r3, .L349+56
 6926 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6927 0188 002B     		cmp	r3, #0
 6928 018a 0CD0     		beq	.L338
ARM GAS  /tmp/ccHz27EZ.s 			page 153


 6929              	.L337:
1817:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6930              		.loc 1 1817 0 is_stmt 1
 6931 018c 514B     		ldr	r3, .L349+52
 6932 018e 1B78     		ldrb	r3, [r3]
 6933 0190 DBB2     		uxtb	r3, r3
 6934 0192 43F00803 		orr	r3, r3, #8
 6935 0196 DAB2     		uxtb	r2, r3
 6936 0198 4E4B     		ldr	r3, .L349+52
 6937 019a 1A70     		strb	r2, [r3]
1818:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6938              		.loc 1 1818 0
 6939 019c 0223     		movs	r3, #2
 6940 019e FB77     		strb	r3, [r7, #31]
1819:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6941              		.loc 1 1819 0
 6942 01a0 464B     		ldr	r3, .L349+28
 6943 01a2 0022     		movs	r2, #0
 6944 01a4 1A70     		strb	r2, [r3]
 6945              	.L338:
1820:bluetooth_rxtx.c **** 		}
1821:bluetooth_rxtx.c **** 
1822:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6946              		.loc 1 1822 0
 6947 01a6 4D4B     		ldr	r3, .L349+60
 6948 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6949 01aa 5AB2     		sxtb	r2, r3
 6950 01ac 444B     		ldr	r3, .L349+32
 6951 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6952 01b0 5BB2     		sxtb	r3, r3
 6953 01b2 3633     		adds	r3, r3, #54
 6954 01b4 9A42     		cmp	r2, r3
 6955 01b6 09DB     		blt	.L339
1823:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6956              		.loc 1 1823 0
 6957 01b8 464B     		ldr	r3, .L349+52
 6958 01ba 1B78     		ldrb	r3, [r3]
 6959 01bc DBB2     		uxtb	r3, r3
 6960 01be 43F01003 		orr	r3, r3, #16
 6961 01c2 DAB2     		uxtb	r2, r3
 6962 01c4 434B     		ldr	r3, .L349+52
 6963 01c6 1A70     		strb	r2, [r3]
1824:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6964              		.loc 1 1824 0
 6965 01c8 0223     		movs	r3, #2
 6966 01ca FB77     		strb	r3, [r7, #31]
 6967              	.L339:
1825:bluetooth_rxtx.c **** 		}
1826:bluetooth_rxtx.c **** 
1827:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1828:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1829:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6968              		.loc 1 1829 0
 6969 01cc 444B     		ldr	r3, .L349+64
 6970 01ce 1B78     		ldrb	r3, [r3]
 6971 01d0 DBB2     		uxtb	r3, r3
 6972 01d2 002B     		cmp	r3, #0
ARM GAS  /tmp/ccHz27EZ.s 			page 154


 6973 01d4 07D0     		beq	.L340
1830:bluetooth_rxtx.c **** 			if (hold == 0)
 6974              		.loc 1 1830 0
 6975 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6976 01d8 002B     		cmp	r3, #0
 6977 01da 01D1     		bne	.L341
1831:bluetooth_rxtx.c **** 				hold = 1;
 6978              		.loc 1 1831 0
 6979 01dc 0123     		movs	r3, #1
 6980 01de FB77     		strb	r3, [r7, #31]
 6981              	.L341:
1832:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 6982              		.loc 1 1832 0
 6983 01e0 3F4B     		ldr	r3, .L349+64
 6984 01e2 0022     		movs	r2, #0
 6985 01e4 1A70     		strb	r2, [r3]
 6986              	.L340:
1833:bluetooth_rxtx.c **** 		}
1834:bluetooth_rxtx.c **** 
1835:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1836:bluetooth_rxtx.c **** 		if (hold == 0) {
 6987              		.loc 1 1836 0
 6988 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6989 01e8 002B     		cmp	r3, #0
 6990 01ea 00D1     		bne	.L342
1837:bluetooth_rxtx.c **** 			goto rx_continue;
 6991              		.loc 1 1837 0
 6992 01ec 3DE0     		b	.L335
 6993              	.L342:
1838:bluetooth_rxtx.c **** 		}
1839:bluetooth_rxtx.c **** 		hold--;
 6994              		.loc 1 1839 0
 6995 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6996 01f0 013B     		subs	r3, r3, #1
 6997 01f2 FB77     		strb	r3, [r7, #31]
1840:bluetooth_rxtx.c **** 
1841:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1842:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 6998              		.loc 1 1842 0
 6999 01f4 3B48     		ldr	r0, .L349+68
 7000 01f6 3C49     		ldr	r1, .L349+72
 7001 01f8 4FF4C872 		mov	r2, #400
 7002 01fc FFF7FEFF 		bl	memcpy
1843:bluetooth_rxtx.c **** 
1844:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1845:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 7003              		.loc 1 1845 0
 7004 0200 0023     		movs	r3, #0
 7005 0202 BB61     		str	r3, [r7, #24]
 7006 0204 25E0     		b	.L343
 7007              	.L346:
1846:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1847:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 7008              		.loc 1 1847 0
 7009 0206 0023     		movs	r3, #0
 7010 0208 7B61     		str	r3, [r7, #20]
 7011 020a 1CE0     		b	.L344
ARM GAS  /tmp/ccHz27EZ.s 			page 155


 7012              	.L345:
1848:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7013              		.loc 1 1848 0 discriminator 3
 7014 020c BB69     		ldr	r3, [r7, #24]
 7015 020e 3233     		adds	r3, r3, #50
 7016 0210 DA00     		lsls	r2, r3, #3
 7017 0212 7B69     		ldr	r3, [r7, #20]
 7018 0214 1344     		add	r3, r3, r2
 7019 0216 2E4A     		ldr	r2, .L349+48
 7020 0218 1168     		ldr	r1, [r2]
 7021 021a BA69     		ldr	r2, [r7, #24]
 7022 021c 0A44     		add	r2, r2, r1
 7023 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7024 0220 D209     		lsrs	r2, r2, #7
 7025 0222 D1B2     		uxtb	r1, r2
 7026 0224 2F4A     		ldr	r2, .L349+68
 7027 0226 D154     		strb	r1, [r2, r3]
1849:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 7028              		.loc 1 1849 0 discriminator 3
 7029 0228 294B     		ldr	r3, .L349+48
 7030 022a 1A68     		ldr	r2, [r3]
 7031 022c BB69     		ldr	r3, [r7, #24]
 7032 022e 1344     		add	r3, r3, r2
 7033 0230 274A     		ldr	r2, .L349+48
 7034 0232 1168     		ldr	r1, [r2]
 7035 0234 BA69     		ldr	r2, [r7, #24]
 7036 0236 0A44     		add	r2, r2, r1
 7037 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7038 023a 5200     		lsls	r2, r2, #1
 7039 023c D2B2     		uxtb	r2, r2
 7040 023e 1A70     		strb	r2, [r3]
1847:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7041              		.loc 1 1847 0 discriminator 3
 7042 0240 7B69     		ldr	r3, [r7, #20]
 7043 0242 0133     		adds	r3, r3, #1
 7044 0244 7B61     		str	r3, [r7, #20]
 7045              	.L344:
1847:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7046              		.loc 1 1847 0 is_stmt 0 discriminator 1
 7047 0246 7B69     		ldr	r3, [r7, #20]
 7048 0248 072B     		cmp	r3, #7
 7049 024a DFDD     		ble	.L345
1845:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 7050              		.loc 1 1845 0 is_stmt 1 discriminator 2
 7051 024c BB69     		ldr	r3, [r7, #24]
 7052 024e 0133     		adds	r3, r3, #1
 7053 0250 BB61     		str	r3, [r7, #24]
 7054              	.L343:
1845:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 7055              		.loc 1 1845 0 is_stmt 0 discriminator 1
 7056 0252 BB69     		ldr	r3, [r7, #24]
 7057 0254 312B     		cmp	r3, #49
 7058 0256 D6DD     		ble	.L346
1850:bluetooth_rxtx.c **** 			}
1851:bluetooth_rxtx.c **** 		}
1852:bluetooth_rxtx.c **** 
1853:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
ARM GAS  /tmp/ccHz27EZ.s 			page 156


 7059              		.loc 1 1853 0 is_stmt 1
 7060 0258 244B     		ldr	r3, .L349+76
 7061 025a 1B68     		ldr	r3, [r3]
 7062 025c 2148     		ldr	r0, .L349+68
 7063 025e 9847     		blx	r3
 7064 0260 B860     		str	r0, [r7, #8]
1854:bluetooth_rxtx.c **** 		if (!ret) break;
 7065              		.loc 1 1854 0
 7066 0262 BB68     		ldr	r3, [r7, #8]
 7067 0264 002B     		cmp	r3, #0
 7068 0266 00D1     		bne	.L335
 7069 0268 0CE0     		b	.L347
 7070              	.L335:
1855:bluetooth_rxtx.c **** 
1856:bluetooth_rxtx.c **** 	rx_continue:
1857:bluetooth_rxtx.c **** 		rx_tc = 0;
 7071              		.loc 1 1857 0
 7072 026a 164B     		ldr	r3, .L349+36
 7073 026c 0022     		movs	r2, #0
 7074 026e 1A60     		str	r2, [r3]
1858:bluetooth_rxtx.c **** 		rx_err = 0;
 7075              		.loc 1 1858 0
 7076 0270 154B     		ldr	r3, .L349+40
 7077 0272 0022     		movs	r2, #0
 7078 0274 1A60     		str	r2, [r3]
 7079              	.L322:
 7080              	.LBE3:
1752:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7081              		.loc 1 1752 0
 7082 0276 1E4B     		ldr	r3, .L349+80
 7083 0278 1B78     		ldrb	r3, [r3]
 7084 027a DBB2     		uxtb	r3, r3
 7085 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7086 027e 9A42     		cmp	r2, r3
 7087 0280 3FF4E3AE 		beq	.L348
 7088              	.L347:
1859:bluetooth_rxtx.c **** 	}
1860:bluetooth_rxtx.c **** 
1861:bluetooth_rxtx.c **** 	// disable USB interrupts
1862:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7089              		.loc 1 1862 0
 7090 0284 1B4B     		ldr	r3, .L349+84
 7091 0286 4FF08072 		mov	r2, #16777216
 7092 028a 1A60     		str	r2, [r3]
1863:bluetooth_rxtx.c **** 
1864:bluetooth_rxtx.c **** 	// reset the radio completely
1865:bluetooth_rxtx.c **** 	cc2400_idle();
 7093              		.loc 1 1865 0
 7094 028c FFF7FEFF 		bl	cc2400_idle
1866:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7095              		.loc 1 1866 0
 7096 0290 FFF7FEFF 		bl	dio_ssp_stop
1867:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7097              		.loc 1 1867 0
 7098 0294 FFF7FEFF 		bl	cs_trigger_disable
1868:bluetooth_rxtx.c **** }
 7099              		.loc 1 1868 0
ARM GAS  /tmp/ccHz27EZ.s 			page 157


 7100 0298 2037     		adds	r7, r7, #32
 7101              		.cfi_def_cfa_offset 8
 7102 029a BD46     		mov	sp, r7
 7103              		.cfi_def_cfa_register 13
 7104              		@ sp needed
 7105 029c 80BD     		pop	{r7, pc}
 7106              	.L350:
 7107 029e 00BF     		.align	2
 7108              	.L349:
 7109 02a0 00000000 		.word	modulation
 7110 02a4 00000000 		.word	mode
 7111 02a8 00E100E0 		.word	-536813312
 7112 02ac 3CC00920 		.word	537509948
 7113 02b0 00000000 		.word	requested_channel
 7114 02b4 00000000 		.word	channel
 7115 02b8 00000000 		.word	do_hop
 7116 02bc 00000000 		.word	cs_trigger
 7117 02c0 00000000 		.word	cs_threshold_cur
 7118 02c4 00000000 		.word	rx_tc
 7119 02c8 00000000 		.word	rx_err
 7120 02cc 00000000 		.word	active_rxbuf
 7121 02d0 00000000 		.word	idle_rxbuf
 7122 02d4 00000000 		.word	status
 7123 02d8 00000000 		.word	cs_no_squelch
 7124 02dc 00000000 		.word	rssi_max
 7125 02e0 00000000 		.word	keepalive_trigger
 7126 02e4 00000000 		.word	unpacked
 7127 02e8 90010000 		.word	unpacked+400
 7128 02ec 00000000 		.word	data_cb
 7129 02f0 00000000 		.word	requested_mode
 7130 02f4 80E100E0 		.word	-536813184
 7131              		.cfi_endproc
 7132              	.LFE33:
 7134              		.section	.text.bt_le_sync,"ax",%progbits
 7135              		.align	2
 7136              		.global	bt_le_sync
 7137              		.thumb
 7138              		.thumb_func
 7140              	bt_le_sync:
 7141              	.LFB34:
1869:bluetooth_rxtx.c **** 
1870:bluetooth_rxtx.c **** 
1871:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1872:bluetooth_rxtx.c **** {
 7142              		.loc 1 1872 0
 7143              		.cfi_startproc
 7144              		@ args = 0, pretend = 0, frame = 112
 7145              		@ frame_needed = 1, uses_anonymous_args = 0
 7146 0000 90B5     		push	{r4, r7, lr}
 7147              		.cfi_def_cfa_offset 12
 7148              		.cfi_offset 4, -12
 7149              		.cfi_offset 7, -8
 7150              		.cfi_offset 14, -4
 7151 0002 9DB0     		sub	sp, sp, #116
 7152              		.cfi_def_cfa_offset 128
 7153 0004 00AF     		add	r7, sp, #0
 7154              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccHz27EZ.s 			page 158


 7155 0006 0346     		mov	r3, r0
 7156 0008 FB71     		strb	r3, [r7, #7]
1873:bluetooth_rxtx.c **** 	int i, j;
1874:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger; //gjlee
1875:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1876:bluetooth_rxtx.c **** 	j = 0;
 7157              		.loc 1 1876 0
 7158 000a 0023     		movs	r3, #0
 7159 000c 7B66     		str	r3, [r7, #100]
1877:bluetooth_rxtx.c **** 
1878:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 7160              		.loc 1 1878 0
 7161 000e 954B     		ldr	r3, .L399
 7162 0010 0122     		movs	r2, #1
 7163 0012 1A70     		strb	r2, [r3]
1879:bluetooth_rxtx.c **** 	mode = active_mode;
 7164              		.loc 1 1879 0
 7165 0014 944A     		ldr	r2, .L399+4
 7166 0016 FB79     		ldrb	r3, [r7, #7]
 7167 0018 1370     		strb	r3, [r2]
1880:bluetooth_rxtx.c **** 
1881:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 7168              		.loc 1 1881 0
 7169 001a 944B     		ldr	r3, .L399+8
 7170 001c 0122     		movs	r2, #1
 7171 001e 1A75     		strb	r2, [r3, #20]
1882:bluetooth_rxtx.c **** 
1883:bluetooth_rxtx.c **** 	// enable USB interrupts
1884:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 7172              		.loc 1 1884 0
 7173 0020 934B     		ldr	r3, .L399+12
 7174 0022 4FF08072 		mov	r2, #16777216
 7175 0026 1A60     		str	r2, [r3]
1885:bluetooth_rxtx.c **** 
1886:bluetooth_rxtx.c **** 	RXLED_CLR;
 7176              		.loc 1 1886 0
 7177 0028 924B     		ldr	r3, .L399+16
 7178 002a 1022     		movs	r2, #16
 7179 002c 1A60     		str	r2, [r3]
1887:bluetooth_rxtx.c **** 
1888:bluetooth_rxtx.c **** 	queue_init();
 7180              		.loc 1 1888 0
 7181 002e FFF7FEFF 		bl	queue_init
1889:bluetooth_rxtx.c **** 	dio_ssp_init();
 7182              		.loc 1 1889 0
 7183 0032 FFF7FEFF 		bl	dio_ssp_init
1890:bluetooth_rxtx.c **** 	dma_init_le();
 7184              		.loc 1 1890 0
 7185 0036 FFF7FEFF 		bl	dma_init_le
1891:bluetooth_rxtx.c **** 	dio_ssp_start();
 7186              		.loc 1 1891 0
 7187 003a FFF7FEFF 		bl	dio_ssp_start
1892:bluetooth_rxtx.c **** 
1893:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 7188              		.loc 1 1893 0
 7189 003e 8B4B     		ldr	r3, .L399+8
 7190 0040 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 159


 7191 0042 1846     		mov	r0, r3
 7192 0044 FFF7FEFF 		bl	rbit
 7193 0048 0346     		mov	r3, r0
 7194 004a 1846     		mov	r0, r3
 7195 004c FFF7FEFF 		bl	cc2400_rx_sync
1894:bluetooth_rxtx.c **** 	
1895:bluetooth_rxtx.c **** 	//gjlee
1896:bluetooth_rxtx.c **** 	cs_trigger_enable();
 7196              		.loc 1 1896 0
 7197 0050 FFF7FEFF 		bl	cs_trigger_enable
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 7198              		.loc 1 1898 0
 7199 0054 63E2     		b	.L352
 7200              	.L398:
 7201              	.LBB4:
1899:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7202              		.loc 1 1899 0
 7203 0056 884B     		ldr	r3, .L399+20
 7204 0058 1B88     		ldrh	r3, [r3]	@ movhi
 7205 005a 9BB2     		uxth	r3, r3
 7206 005c 002B     		cmp	r3, #0
 7207 005e 29D0     		beq	.L353
1900:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7208              		.loc 1 1900 0
 7209 0060 6420     		movs	r0, #100
 7210 0062 FFF7FEFF 		bl	cc2400_strobe
1901:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 7211              		.loc 1 1901 0
 7212 0066 00BF     		nop
 7213              	.L354:
 7214              		.loc 1 1901 0 is_stmt 0 discriminator 1
 7215 0068 FFF7FEFF 		bl	cc2400_status
 7216 006c 0346     		mov	r3, r0
 7217 006e 03F00403 		and	r3, r3, #4
 7218 0072 002B     		cmp	r3, #0
 7219 0074 F8D1     		bne	.L354
1902:bluetooth_rxtx.c **** 
1903:bluetooth_rxtx.c **** 			/* Retune */
1904:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 7220              		.loc 1 1904 0 is_stmt 1
 7221 0076 814B     		ldr	r3, .L399+24
 7222 0078 1B88     		ldrh	r3, [r3]	@ movhi
 7223 007a 9BB2     		uxth	r3, r3
 7224 007c 013B     		subs	r3, r3, #1
 7225 007e 9BB2     		uxth	r3, r3
 7226 0080 0220     		movs	r0, #2
 7227 0082 1946     		mov	r1, r3
 7228 0084 FFF7FEFF 		bl	cc2400_set
1905:bluetooth_rxtx.c **** 
1906:bluetooth_rxtx.c **** 			/* Wait for lock */
1907:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 7229              		.loc 1 1907 0
 7230 0088 6120     		movs	r0, #97
 7231 008a FFF7FEFF 		bl	cc2400_strobe
1908:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 7232              		.loc 1 1908 0
ARM GAS  /tmp/ccHz27EZ.s 			page 160


 7233 008e 00BF     		nop
 7234              	.L355:
 7235              		.loc 1 1908 0 is_stmt 0 discriminator 1
 7236 0090 FFF7FEFF 		bl	cc2400_status
 7237 0094 0346     		mov	r3, r0
 7238 0096 03F00403 		and	r3, r3, #4
 7239 009a 002B     		cmp	r3, #0
 7240 009c F8D0     		beq	.L355
1909:bluetooth_rxtx.c **** 
1910:bluetooth_rxtx.c **** 			/* RX mode */
1911:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 7241              		.loc 1 1911 0 is_stmt 1
 7242 009e 6220     		movs	r0, #98
 7243 00a0 FFF7FEFF 		bl	cc2400_strobe
1912:bluetooth_rxtx.c **** 
1913:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 7244              		.loc 1 1913 0
 7245 00a4 744B     		ldr	r3, .L399+20
 7246 00a6 1B88     		ldrh	r3, [r3]	@ movhi
 7247 00a8 9AB2     		uxth	r2, r3
 7248 00aa 754B     		ldr	r3, .L399+28
 7249 00ac 1A80     		strh	r2, [r3]	@ movhi
1914:bluetooth_rxtx.c **** 			requested_channel = 0;
 7250              		.loc 1 1914 0
 7251 00ae 724B     		ldr	r3, .L399+20
 7252 00b0 0022     		movs	r2, #0
 7253 00b2 1A80     		strh	r2, [r3]	@ movhi
 7254              	.L353:
1915:bluetooth_rxtx.c **** 		}
1916:bluetooth_rxtx.c **** 
1917:bluetooth_rxtx.c **** 		RXLED_CLR;
 7255              		.loc 1 1917 0
 7256 00b4 6F4B     		ldr	r3, .L399+16
 7257 00b6 1022     		movs	r2, #16
 7258 00b8 1A60     		str	r2, [r3]
1918:bluetooth_rxtx.c **** 
1919:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1920:bluetooth_rxtx.c **** 		rssi_reset();
 7259              		.loc 1 1920 0
 7260 00ba FFF7FEFF 		bl	rssi_reset
1921:bluetooth_rxtx.c **** 		
1922:bluetooth_rxtx.c **** 		//gjlee
1923:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 7261              		.loc 1 1923 0
 7262 00be 8023     		movs	r3, #128
 7263 00c0 87F86330 		strb	r3, [r7, #99]
1924:bluetooth_rxtx.c **** 
1925:bluetooth_rxtx.c **** 		while(!(cc2400_status() & SYNC_RECEIVED));
 7264              		.loc 1 1925 0
 7265 00c4 00BF     		nop
 7266              	.L356:
 7267              		.loc 1 1925 0 is_stmt 0 discriminator 1
 7268 00c6 FFF7FEFF 		bl	cc2400_status
 7269 00ca 0346     		mov	r3, r0
 7270 00cc 03F01003 		and	r3, r3, #16
 7271 00d0 002B     		cmp	r3, #0
 7272 00d2 F8D0     		beq	.L356
ARM GAS  /tmp/ccHz27EZ.s 			page 161


1926:bluetooth_rxtx.c **** 
1927:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode){
 7273              		.loc 1 1927 0 is_stmt 1
 7274 00d4 0CE0     		b	.L357
 7275              	.L359:
1928:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 7276              		.loc 1 1928 0
 7277 00d6 0620     		movs	r0, #6
 7278 00d8 FFF7FEFF 		bl	cc2400_get
 7279 00dc 0346     		mov	r3, r0
 7280 00de 1B0A     		lsrs	r3, r3, #8
 7281 00e0 9BB2     		uxth	r3, r3
 7282 00e2 87F86230 		strb	r3, [r7, #98]
1929:bluetooth_rxtx.c **** 			rssi_add_pkt(rssi);
 7283              		.loc 1 1929 0
 7284 00e6 97F96230 		ldrsb	r3, [r7, #98]
 7285 00ea 1846     		mov	r0, r3
 7286 00ec FFF7FEFF 		bl	rssi_add_pkt
 7287              	.L357:
1927:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 7288              		.loc 1 1927 0
 7289 00f0 644B     		ldr	r3, .L399+32
 7290 00f2 1B68     		ldr	r3, [r3]
 7291 00f4 002B     		cmp	r3, #0
 7292 00f6 0ED1     		bne	.L358
1927:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 7293              		.loc 1 1927 0 is_stmt 0 discriminator 1
 7294 00f8 634B     		ldr	r3, .L399+36
 7295 00fa 1B68     		ldr	r3, [r3]
 7296 00fc 002B     		cmp	r3, #0
 7297 00fe 0AD1     		bne	.L358
1927:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 7298              		.loc 1 1927 0 discriminator 2
 7299 0100 624B     		ldr	r3, .L399+40
 7300 0102 1B78     		ldrb	r3, [r3]
 7301 0104 DBB2     		uxtb	r3, r3
 7302 0106 002B     		cmp	r3, #0
 7303 0108 05D1     		bne	.L358
1927:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 7304              		.loc 1 1927 0 discriminator 3
 7305 010a 614B     		ldr	r3, .L399+44
 7306 010c 1B78     		ldrb	r3, [r3]
 7307 010e DBB2     		uxtb	r3, r3
 7308 0110 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7309 0112 9A42     		cmp	r2, r3
 7310 0114 DFD0     		beq	.L359
 7311              	.L358:
1930:bluetooth_rxtx.c **** 		}
1931:bluetooth_rxtx.c **** 
1932:bluetooth_rxtx.c **** 		//while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode);
1933:bluetooth_rxtx.c **** 
1934:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 7312              		.loc 1 1934 0 is_stmt 1
 7313 0116 5E4B     		ldr	r3, .L399+44
 7314 0118 1B78     		ldrb	r3, [r3]
 7315 011a DBB2     		uxtb	r3, r3
 7316 011c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
ARM GAS  /tmp/ccHz27EZ.s 			page 162


 7317 011e 9A42     		cmp	r2, r3
 7318 0120 00D0     		beq	.L360
1935:bluetooth_rxtx.c **** 			goto cleanup;
 7319              		.loc 1 1935 0
 7320 0122 03E2     		b	.L397
 7321              	.L360:
1936:bluetooth_rxtx.c **** 		}
1937:bluetooth_rxtx.c **** 
1938:bluetooth_rxtx.c **** 		if (rx_err) {
 7322              		.loc 1 1938 0
 7323 0124 584B     		ldr	r3, .L399+36
 7324 0126 1B68     		ldr	r3, [r3]
 7325 0128 002B     		cmp	r3, #0
 7326 012a 07D0     		beq	.L362
1939:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 7327              		.loc 1 1939 0
 7328 012c 594B     		ldr	r3, .L399+48
 7329 012e 1B78     		ldrb	r3, [r3]
 7330 0130 DBB2     		uxtb	r3, r3
 7331 0132 43F00203 		orr	r3, r3, #2
 7332 0136 DAB2     		uxtb	r2, r3
 7333 0138 564B     		ldr	r3, .L399+48
 7334 013a 1A70     		strb	r2, [r3]
 7335              	.L362:
1940:bluetooth_rxtx.c **** 		}
1941:bluetooth_rxtx.c **** 
1942:bluetooth_rxtx.c **** 		if (do_hop)
 7336              		.loc 1 1942 0
 7337 013c 534B     		ldr	r3, .L399+40
 7338 013e 1B78     		ldrb	r3, [r3]
 7339 0140 DBB2     		uxtb	r3, r3
 7340 0142 002B     		cmp	r3, #0
 7341 0144 00D0     		beq	.L363
1943:bluetooth_rxtx.c **** 			goto rx_flush;
 7342              		.loc 1 1943 0
 7343 0146 2FE1     		b	.L364
 7344              	.L363:
1944:bluetooth_rxtx.c **** 
1945:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1946:bluetooth_rxtx.c **** 		if (!rx_tc)
 7345              		.loc 1 1946 0
 7346 0148 4E4B     		ldr	r3, .L399+32
 7347 014a 1B68     		ldr	r3, [r3]
 7348 014c 002B     		cmp	r3, #0
 7349 014e 00D1     		bne	.L365
 7350 0150 E5E1     		b	.L352
 7351              	.L365:
1947:bluetooth_rxtx.c **** 			continue;
1948:bluetooth_rxtx.c **** 		
1949:bluetooth_rxtx.c **** 		//gjlee
1950:bluetooth_rxtx.c **** 		rssi_update_pkt();
 7352              		.loc 1 1950 0
 7353 0152 FFF7FEFF 		bl	rssi_update_pkt
1951:bluetooth_rxtx.c **** 
1952:bluetooth_rxtx.c **** 		/////////////////////
1953:bluetooth_rxtx.c **** 		// process the packet
1954:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 163


1955:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1956:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7354              		.loc 1 1956 0
 7355 0156 07F10803 		add	r3, r7, #8
 7356 015a FB65     		str	r3, [r7, #92]
1957:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7357              		.loc 1 1957 0
 7358 015c 434B     		ldr	r3, .L399+8
 7359 015e 1B68     		ldr	r3, [r3]
 7360 0160 BB60     		str	r3, [r7, #8]
1958:bluetooth_rxtx.c **** 
1959:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7361              		.loc 1 1959 0
 7362 0162 464B     		ldr	r3, .L399+24
 7363 0164 1B88     		ldrh	r3, [r3]	@ movhi
 7364 0166 9BB2     		uxth	r3, r3
 7365 0168 DBB2     		uxtb	r3, r3
 7366 016a 623B     		subs	r3, r3, #98
 7367 016c DBB2     		uxtb	r3, r3
 7368 016e 1846     		mov	r0, r3
 7369 0170 FFF7FEFF 		bl	btle_channel_index
 7370 0174 0346     		mov	r3, r0
 7371 0176 1A46     		mov	r2, r3
 7372 0178 1346     		mov	r3, r2
 7373 017a 5B00     		lsls	r3, r3, #1
 7374 017c 1344     		add	r3, r3, r2
 7375 017e 1B01     		lsls	r3, r3, #4
 7376 0180 454A     		ldr	r2, .L399+52
 7377 0182 1344     		add	r3, r3, r2
 7378 0184 BB65     		str	r3, [r7, #88]
1960:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 7379              		.loc 1 1960 0
 7380 0186 0023     		movs	r3, #0
 7381 0188 FB66     		str	r3, [r7, #108]
 7382 018a 34E0     		b	.L366
 7383              	.L369:
 7384              	.LBB5:
1961:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7385              		.loc 1 1961 0 discriminator 3
 7386 018c 434A     		ldr	r2, .L399+56
 7387 018e FB6E     		ldr	r3, [r7, #108]
 7388 0190 1344     		add	r3, r3, r2
 7389 0192 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7390 0194 1A06     		lsls	r2, r3, #24
1962:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7391              		.loc 1 1962 0 discriminator 3
 7392 0196 FB6E     		ldr	r3, [r7, #108]
 7393 0198 0133     		adds	r3, r3, #1
 7394 019a 4049     		ldr	r1, .L399+56
 7395 019c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7396 019e 1B04     		lsls	r3, r3, #16
 7397 01a0 1A43     		orrs	r2, r2, r3
1963:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 7398              		.loc 1 1963 0 discriminator 3
 7399 01a2 FB6E     		ldr	r3, [r7, #108]
 7400 01a4 0233     		adds	r3, r3, #2
 7401 01a6 3D49     		ldr	r1, .L399+56
ARM GAS  /tmp/ccHz27EZ.s 			page 164


 7402 01a8 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7403 01aa 1B02     		lsls	r3, r3, #8
 7404 01ac 1343     		orrs	r3, r3, r2
1964:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7405              		.loc 1 1964 0 discriminator 3
 7406 01ae FA6E     		ldr	r2, [r7, #108]
 7407 01b0 0332     		adds	r2, r2, #3
 7408 01b2 3A49     		ldr	r1, .L399+56
 7409 01b4 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7410 01b6 1343     		orrs	r3, r3, r2
1961:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7411              		.loc 1 1961 0 discriminator 3
 7412 01b8 7B65     		str	r3, [r7, #84]
1965:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7413              		.loc 1 1965 0 discriminator 3
 7414 01ba FB6E     		ldr	r3, [r7, #108]
 7415 01bc 002B     		cmp	r3, #0
 7416 01be 00DA     		bge	.L367
 7417 01c0 0333     		adds	r3, r3, #3
 7418              	.L367:
 7419 01c2 9B10     		asrs	r3, r3, #2
 7420 01c4 5C1C     		adds	r4, r3, #1
 7421 01c6 786D     		ldr	r0, [r7, #84]
 7422 01c8 FFF7FEFF 		bl	rbit
 7423 01cc 0146     		mov	r1, r0
 7424 01ce FB6E     		ldr	r3, [r7, #108]
 7425 01d0 002B     		cmp	r3, #0
 7426 01d2 00DA     		bge	.L368
 7427 01d4 0333     		adds	r3, r3, #3
 7428              	.L368:
 7429 01d6 9B10     		asrs	r3, r3, #2
 7430 01d8 9B00     		lsls	r3, r3, #2
 7431 01da BA6D     		ldr	r2, [r7, #88]
 7432 01dc 1344     		add	r3, r3, r2
 7433 01de 1B68     		ldr	r3, [r3]
 7434 01e0 81EA0302 		eor	r2, r1, r3
 7435 01e4 A300     		lsls	r3, r4, #2
 7436 01e6 07F17001 		add	r1, r7, #112
 7437 01ea 0B44     		add	r3, r3, r1
 7438 01ec 43F8682C 		str	r2, [r3, #-104]
 7439              	.LBE5:
1960:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7440              		.loc 1 1960 0 discriminator 3
 7441 01f0 FB6E     		ldr	r3, [r7, #108]
 7442 01f2 0433     		adds	r3, r3, #4
 7443 01f4 FB66     		str	r3, [r7, #108]
 7444              	.L366:
1960:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7445              		.loc 1 1960 0 is_stmt 0 discriminator 1
 7446 01f6 FB6E     		ldr	r3, [r7, #108]
 7447 01f8 032B     		cmp	r3, #3
 7448 01fa C7DD     		ble	.L369
1966:bluetooth_rxtx.c **** 		}
1967:bluetooth_rxtx.c **** 
1968:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7449              		.loc 1 1968 0 is_stmt 1
 7450 01fc FB6D     		ldr	r3, [r7, #92]
ARM GAS  /tmp/ccHz27EZ.s 			page 165


 7451 01fe 0533     		adds	r3, r3, #5
 7452 0200 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7453 0202 03F03F03 		and	r3, r3, #63
 7454 0206 0233     		adds	r3, r3, #2
 7455 0208 3B65     		str	r3, [r7, #80]
1969:bluetooth_rxtx.c **** 		if (len > 39)
 7456              		.loc 1 1969 0
 7457 020a 3B6D     		ldr	r3, [r7, #80]
 7458 020c 272B     		cmp	r3, #39
 7459 020e 00D9     		bls	.L370
1970:bluetooth_rxtx.c **** 			goto rx_flush;
 7460              		.loc 1 1970 0
 7461 0210 CAE0     		b	.L364
 7462              	.L370:
1971:bluetooth_rxtx.c **** 
1972:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1973:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1974:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 7463              		.loc 1 1974 0
 7464 0212 3B6D     		ldr	r3, [r7, #80]
 7465 0214 0633     		adds	r3, r3, #6
 7466 0216 9B08     		lsrs	r3, r3, #2
 7467 0218 FB64     		str	r3, [r7, #76]
1975:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 7468              		.loc 1 1975 0
 7469 021a FB6C     		ldr	r3, [r7, #76]
 7470 021c 0A2B     		cmp	r3, #10
 7471 021e 0DD8     		bhi	.L371
1976:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 7472              		.loc 1 1976 0
 7473 0220 00BF     		nop
 7474              	.L373:
 7475              		.loc 1 1976 0 is_stmt 0 discriminator 2
 7476 0222 1F4B     		ldr	r3, .L399+60
 7477 0224 1A68     		ldr	r2, [r3]
 7478 0226 FB6C     		ldr	r3, [r7, #76]
 7479 0228 9B00     		lsls	r3, r3, #2
 7480 022a 1C49     		ldr	r1, .L399+56
 7481 022c 0B44     		add	r3, r3, r1
 7482 022e 9A42     		cmp	r2, r3
 7483 0230 0FD2     		bcs	.L372
 7484              		.loc 1 1976 0 discriminator 1
 7485 0232 154B     		ldr	r3, .L399+36
 7486 0234 1B68     		ldr	r3, [r3]
 7487 0236 002B     		cmp	r3, #0
 7488 0238 F3D0     		beq	.L373
 7489 023a 0AE0     		b	.L372
 7490              	.L371:
1977:bluetooth_rxtx.c **** 				;
1978:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1979:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 7491              		.loc 1 1979 0 is_stmt 1
 7492 023c 00BF     		nop
 7493              	.L374:
 7494              		.loc 1 1979 0 is_stmt 0 discriminator 2
 7495 023e 194B     		ldr	r3, .L399+64
 7496 0240 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 166


 7497 0242 03F00103 		and	r3, r3, #1
 7498 0246 002B     		cmp	r3, #0
 7499 0248 03D0     		beq	.L372
 7500              		.loc 1 1979 0 discriminator 1
 7501 024a 0F4B     		ldr	r3, .L399+36
 7502 024c 1B68     		ldr	r3, [r3]
 7503 024e 002B     		cmp	r3, #0
 7504 0250 F5D0     		beq	.L374
 7505              	.L372:
1980:bluetooth_rxtx.c **** 				;
1981:bluetooth_rxtx.c **** 		}
1982:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7506              		.loc 1 1982 0 is_stmt 1
 7507 0252 154A     		ldr	r2, .L399+68
 7508 0254 144B     		ldr	r3, .L399+68
 7509 0256 1B68     		ldr	r3, [r3]
 7510 0258 23F00103 		bic	r3, r3, #1
 7511 025c 1360     		str	r3, [r2]
1983:bluetooth_rxtx.c **** 
1984:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1985:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 7512              		.loc 1 1985 0
 7513 025e 0423     		movs	r3, #4
 7514 0260 FB66     		str	r3, [r7, #108]
 7515 0262 58E0     		b	.L375
 7516              	.L400:
 7517              		.align	2
 7518              	.L399:
 7519 0264 00000000 		.word	modulation
 7520 0268 00000000 		.word	mode
 7521 026c 00000000 		.word	le
 7522 0270 00E100E0 		.word	-536813312
 7523 0274 3CC00920 		.word	537509948
 7524 0278 00000000 		.word	requested_channel
 7525 027c 00000000 		.word	channel
 7526 0280 00000000 		.word	saved_request
 7527 0284 00000000 		.word	rx_tc
 7528 0288 00000000 		.word	rx_err
 7529 028c 00000000 		.word	do_hop
 7530 0290 00000000 		.word	requested_mode
 7531 0294 00000000 		.word	status
 7532 0298 FC000000 		.word	whitening_word
 7533 029c 00000000 		.word	rxbuf1
 7534 02a0 04410050 		.word	1342193924
 7535 02a4 10410050 		.word	1342193936
 7536 02a8 24000340 		.word	1073938468
 7537              	.L378:
 7538              	.LBB6:
1986:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7539              		.loc 1 1986 0 discriminator 3
 7540 02ac A64A     		ldr	r2, .L401
 7541 02ae FB6E     		ldr	r3, [r7, #108]
 7542 02b0 1344     		add	r3, r3, r2
 7543 02b2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7544 02b4 1A06     		lsls	r2, r3, #24
1987:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7545              		.loc 1 1987 0 discriminator 3
ARM GAS  /tmp/ccHz27EZ.s 			page 167


 7546 02b6 FB6E     		ldr	r3, [r7, #108]
 7547 02b8 0133     		adds	r3, r3, #1
 7548 02ba A349     		ldr	r1, .L401
 7549 02bc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7550 02be 1B04     		lsls	r3, r3, #16
 7551 02c0 1A43     		orrs	r2, r2, r3
1988:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 7552              		.loc 1 1988 0 discriminator 3
 7553 02c2 FB6E     		ldr	r3, [r7, #108]
 7554 02c4 0233     		adds	r3, r3, #2
 7555 02c6 A049     		ldr	r1, .L401
 7556 02c8 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7557 02ca 1B02     		lsls	r3, r3, #8
 7558 02cc 1343     		orrs	r3, r3, r2
1989:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7559              		.loc 1 1989 0 discriminator 3
 7560 02ce FA6E     		ldr	r2, [r7, #108]
 7561 02d0 0332     		adds	r2, r2, #3
 7562 02d2 9D49     		ldr	r1, .L401
 7563 02d4 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7564 02d6 1343     		orrs	r3, r3, r2
1986:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7565              		.loc 1 1986 0 discriminator 3
 7566 02d8 BB64     		str	r3, [r7, #72]
1990:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7567              		.loc 1 1990 0 discriminator 3
 7568 02da FB6E     		ldr	r3, [r7, #108]
 7569 02dc 002B     		cmp	r3, #0
 7570 02de 00DA     		bge	.L376
 7571 02e0 0333     		adds	r3, r3, #3
 7572              	.L376:
 7573 02e2 9B10     		asrs	r3, r3, #2
 7574 02e4 5C1C     		adds	r4, r3, #1
 7575 02e6 B86C     		ldr	r0, [r7, #72]
 7576 02e8 FFF7FEFF 		bl	rbit
 7577 02ec 0146     		mov	r1, r0
 7578 02ee FB6E     		ldr	r3, [r7, #108]
 7579 02f0 002B     		cmp	r3, #0
 7580 02f2 00DA     		bge	.L377
 7581 02f4 0333     		adds	r3, r3, #3
 7582              	.L377:
 7583 02f6 9B10     		asrs	r3, r3, #2
 7584 02f8 9B00     		lsls	r3, r3, #2
 7585 02fa BA6D     		ldr	r2, [r7, #88]
 7586 02fc 1344     		add	r3, r3, r2
 7587 02fe 1B68     		ldr	r3, [r3]
 7588 0300 81EA0302 		eor	r2, r1, r3
 7589 0304 A300     		lsls	r3, r4, #2
 7590 0306 07F17001 		add	r1, r7, #112
 7591 030a 0B44     		add	r3, r3, r1
 7592 030c 43F8682C 		str	r2, [r3, #-104]
 7593              	.LBE6:
1985:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7594              		.loc 1 1985 0 discriminator 3
 7595 0310 FB6E     		ldr	r3, [r7, #108]
 7596 0312 0433     		adds	r3, r3, #4
 7597 0314 FB66     		str	r3, [r7, #108]
ARM GAS  /tmp/ccHz27EZ.s 			page 168


 7598              	.L375:
1985:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7599              		.loc 1 1985 0 is_stmt 0 discriminator 1
 7600 0316 FB6E     		ldr	r3, [r7, #108]
 7601 0318 2B2B     		cmp	r3, #43
 7602 031a C7DD     		ble	.L378
1991:bluetooth_rxtx.c **** 		}
1992:bluetooth_rxtx.c **** 
1993:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7603              		.loc 1 1993 0 is_stmt 1
 7604 031c 8B4B     		ldr	r3, .L401+4
 7605 031e 1B69     		ldr	r3, [r3, #16]
 7606 0320 002B     		cmp	r3, #0
 7607 0322 23D0     		beq	.L379
 7608              	.LBB7:
1994:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7609              		.loc 1 1994 0
 7610 0324 894B     		ldr	r3, .L401+4
 7611 0326 D968     		ldr	r1, [r3, #12]
 7612 0328 FB6D     		ldr	r3, [r7, #92]
 7613 032a 1A1D     		adds	r2, r3, #4
 7614 032c 3B6D     		ldr	r3, [r7, #80]
 7615 032e 0846     		mov	r0, r1
 7616 0330 1146     		mov	r1, r2
 7617 0332 1A46     		mov	r2, r3
 7618 0334 FFF7FEFF 		bl	btle_crcgen_lut
 7619 0338 7864     		str	r0, [r7, #68]
1995:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7620              		.loc 1 1995 0
 7621 033a 3B6D     		ldr	r3, [r7, #80]
 7622 033c 0633     		adds	r3, r3, #6
 7623 033e FA6D     		ldr	r2, [r7, #92]
 7624 0340 1344     		add	r3, r3, r2
 7625 0342 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7626 0344 1A04     		lsls	r2, r3, #16
1996:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 7627              		.loc 1 1996 0
 7628 0346 3B6D     		ldr	r3, [r7, #80]
 7629 0348 0533     		adds	r3, r3, #5
 7630 034a F96D     		ldr	r1, [r7, #92]
 7631 034c 0B44     		add	r3, r3, r1
 7632 034e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7633 0350 1B02     		lsls	r3, r3, #8
 7634 0352 1343     		orrs	r3, r3, r2
1997:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7635              		.loc 1 1997 0
 7636 0354 3A6D     		ldr	r2, [r7, #80]
 7637 0356 0432     		adds	r2, r2, #4
 7638 0358 F96D     		ldr	r1, [r7, #92]
 7639 035a 0A44     		add	r2, r2, r1
 7640 035c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7641 035e 1343     		orrs	r3, r3, r2
1995:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7642              		.loc 1 1995 0
 7643 0360 3B64     		str	r3, [r7, #64]
1998:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7644              		.loc 1 1998 0
ARM GAS  /tmp/ccHz27EZ.s 			page 169


 7645 0362 7A6C     		ldr	r2, [r7, #68]
 7646 0364 3B6C     		ldr	r3, [r7, #64]
 7647 0366 9A42     		cmp	r2, r3
 7648 0368 00D0     		beq	.L379
1999:bluetooth_rxtx.c **** 				goto rx_flush;
 7649              		.loc 1 1999 0
 7650 036a 1DE0     		b	.L364
 7651              	.L379:
 7652              	.LBE7:
2000:bluetooth_rxtx.c **** 		}
2001:bluetooth_rxtx.c **** 
2002:bluetooth_rxtx.c **** 
2003:bluetooth_rxtx.c **** 		RXLED_SET;
 7653              		.loc 1 2003 0
 7654 036c 784B     		ldr	r3, .L401+8
 7655 036e 1022     		movs	r2, #16
 7656 0370 1A60     		str	r2, [r3]
2004:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7657              		.loc 1 2004 0
 7658 0372 784B     		ldr	r3, .L401+12
 7659 0374 1B68     		ldr	r3, [r3]
 7660 0376 07F10802 		add	r2, r7, #8
 7661 037a 1046     		mov	r0, r2
 7662 037c 9847     		blx	r3
2005:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7663              		.loc 1 2005 0
 7664 037e 07F10803 		add	r3, r7, #8
 7665 0382 0120     		movs	r0, #1
 7666 0384 1946     		mov	r1, r3
 7667 0386 FFF7FEFF 		bl	enqueue
2006:bluetooth_rxtx.c **** 		enqueue_rssi();
 7668              		.loc 1 2006 0
 7669 038a FFF7FEFF 		bl	enqueue_rssi
2007:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7670              		.loc 1 2007 0
 7671 038e 724B     		ldr	r3, .L401+16
 7672 0390 1B68     		ldr	r3, [r3]
 7673 0392 C3F31303 		ubfx	r3, r3, #0, #20
 7674 0396 40F63542 		movw	r2, #3125
 7675 039a 02FB03F2 		mul	r2, r2, r3
 7676 039e 6F4B     		ldr	r3, .L401+20
 7677 03a0 1B68     		ldr	r3, [r3]
 7678 03a2 1344     		add	r3, r3, r2
 7679 03a4 694A     		ldr	r2, .L401+4
 7680 03a6 1364     		str	r3, [r2, #64]
 7681              	.L364:
2008:bluetooth_rxtx.c **** 
2009:bluetooth_rxtx.c **** 	rx_flush:
2010:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7682              		.loc 1 2010 0
 7683 03a8 6120     		movs	r0, #97
 7684 03aa FFF7FEFF 		bl	cc2400_strobe
2011:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7685              		.loc 1 2011 0
 7686 03ae 00BF     		nop
 7687              	.L380:
 7688              		.loc 1 2011 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccHz27EZ.s 			page 170


 7689 03b0 FFF7FEFF 		bl	cc2400_status
 7690 03b4 0346     		mov	r3, r0
 7691 03b6 03F00403 		and	r3, r3, #4
 7692 03ba 002B     		cmp	r3, #0
 7693 03bc F8D0     		beq	.L380
2012:bluetooth_rxtx.c **** 
2013:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2014:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7694              		.loc 1 2014 0 is_stmt 1
 7695 03be 684A     		ldr	r2, .L401+24
 7696 03c0 674B     		ldr	r3, .L401+24
 7697 03c2 1B68     		ldr	r3, [r3]
 7698 03c4 23F00103 		bic	r3, r3, #1
 7699 03c8 1360     		str	r3, [r2]
2015:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7700              		.loc 1 2015 0
 7701 03ca 03E0     		b	.L381
 7702              	.L382:
 7703              	.LBB8:
2016:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7704              		.loc 1 2016 0
 7705 03cc 654B     		ldr	r3, .L401+28
 7706 03ce 1B68     		ldr	r3, [r3]
 7707 03d0 87F83F30 		strb	r3, [r7, #63]
 7708              	.L381:
 7709              	.LBE8:
2015:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7710              		.loc 1 2015 0
 7711 03d4 644B     		ldr	r3, .L401+32
 7712 03d6 1B68     		ldr	r3, [r3]
 7713 03d8 03F00403 		and	r3, r3, #4
 7714 03dc 002B     		cmp	r3, #0
 7715 03de F5D1     		bne	.L382
2017:bluetooth_rxtx.c **** 		}
2018:bluetooth_rxtx.c **** 
2019:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2020:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 7716              		.loc 1 2020 0
 7717 03e0 5D4B     		ldr	r3, .L401+16
 7718 03e2 1B68     		ldr	r3, [r3]
 7719 03e4 C3F31303 		ubfx	r3, r3, #0, #20
 7720 03e8 40F63542 		movw	r2, #3125
 7721 03ec 02FB03F2 		mul	r2, r2, r3
 7722 03f0 5A4B     		ldr	r3, .L401+20
 7723 03f2 1B68     		ldr	r3, [r3]
 7724 03f4 1344     		add	r3, r3, r2
 7725 03f6 BB66     		str	r3, [r7, #104]
2021:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7726              		.loc 1 2021 0
 7727 03f8 544B     		ldr	r3, .L401+4
 7728 03fa 1A6C     		ldr	r2, [r3, #64]
 7729 03fc BB6E     		ldr	r3, [r7, #104]
 7730 03fe 9A42     		cmp	r2, r3
 7731 0400 05D9     		bls	.L383
2022:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 7732              		.loc 1 2022 0
 7733 0402 BB6E     		ldr	r3, [r7, #104]
ARM GAS  /tmp/ccHz27EZ.s 			page 171


 7734 0404 03F14343 		add	r3, r3, #-1023410176
 7735 0408 03F5A003 		add	r3, r3, #5242880
 7736 040c BB66     		str	r3, [r7, #104]
 7737              	.L383:
2023:bluetooth_rxtx.c **** 		if  ( // timeout
2024:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7738              		.loc 1 2024 0
 7739 040e 4F4B     		ldr	r3, .L401+4
 7740 0410 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2023:bluetooth_rxtx.c **** 		if  ( // timeout
 7741              		.loc 1 2023 0
 7742 0412 032B     		cmp	r3, #3
 7743 0414 03D0     		beq	.L384
 7744              		.loc 1 2024 0
 7745 0416 4D4B     		ldr	r3, .L401+4
 7746 0418 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7747 041a 022B     		cmp	r3, #2
 7748 041c 06D1     		bne	.L385
 7749              	.L384:
2025:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7750              		.loc 1 2025 0
 7751 041e 4B4B     		ldr	r3, .L401+4
 7752 0420 1B6C     		ldr	r3, [r3, #64]
 7753 0422 BA6E     		ldr	r2, [r7, #104]
 7754 0424 D31A     		subs	r3, r2, r3
 7755 0426 514A     		ldr	r2, .L401+36
 7756 0428 9342     		cmp	r3, r2
 7757 042a 03D8     		bhi	.L386
 7758              	.L385:
2026:bluetooth_rxtx.c **** 			// jam finished
2027:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7759              		.loc 1 2027 0
 7760 042c 504B     		ldr	r3, .L401+40
 7761 042e 1B68     		ldr	r3, [r3]
 7762 0430 012B     		cmp	r3, #1
 7763 0432 37D1     		bne	.L387
 7764              	.L386:
2028:bluetooth_rxtx.c **** 			)
2029:bluetooth_rxtx.c **** 		{
2030:bluetooth_rxtx.c **** 			reset_le();
 7765              		.loc 1 2030 0
 7766 0434 FFF7FEFF 		bl	reset_le
2031:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7767              		.loc 1 2031 0
 7768 0438 4D4B     		ldr	r3, .L401+40
 7769 043a 0022     		movs	r2, #0
 7770 043c 1A60     		str	r2, [r3]
2032:bluetooth_rxtx.c **** 			TXLED_CLR;
 7771              		.loc 1 2032 0
 7772 043e 4D4B     		ldr	r3, .L401+44
 7773 0440 4FF48072 		mov	r2, #256
 7774 0444 1A60     		str	r2, [r3]
2033:bluetooth_rxtx.c **** 
2034:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7775              		.loc 1 2034 0
 7776 0446 4C4B     		ldr	r3, .L401+48
 7777 0448 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 172


 7778 044a DBB2     		uxtb	r3, r3
 7779 044c 012B     		cmp	r3, #1
 7780 044e 06D1     		bne	.L388
2035:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7781              		.loc 1 2035 0
 7782 0450 494B     		ldr	r3, .L401+48
 7783 0452 0022     		movs	r2, #0
 7784 0454 1A70     		strb	r2, [r3]
2036:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7785              		.loc 1 2036 0
 7786 0456 494B     		ldr	r3, .L401+52
 7787 0458 0022     		movs	r2, #0
 7788 045a 1A70     		strb	r2, [r3]
2037:bluetooth_rxtx.c **** 				goto cleanup;
 7789              		.loc 1 2037 0
 7790 045c 66E0     		b	.L397
 7791              	.L388:
2038:bluetooth_rxtx.c **** 			}
2039:bluetooth_rxtx.c **** 
2040:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2041:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7792              		.loc 1 2041 0
 7793 045e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7794 0460 0A2B     		cmp	r3, #10
 7795 0462 01D1     		bne	.L389
2042:bluetooth_rxtx.c **** 				goto cleanup;
 7796              		.loc 1 2042 0
 7797 0464 00BF     		nop
 7798 0466 61E0     		b	.L397
 7799              	.L389:
2043:bluetooth_rxtx.c **** 
2044:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7800              		.loc 1 2044 0
 7801 0468 384B     		ldr	r3, .L401+4
 7802 046a 0122     		movs	r2, #1
 7803 046c 1A75     		strb	r2, [r3, #20]
2045:bluetooth_rxtx.c **** 
2046:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7804              		.loc 1 2046 0
 7805 046e 6420     		movs	r0, #100
 7806 0470 FFF7FEFF 		bl	cc2400_strobe
2047:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7807              		.loc 1 2047 0
 7808 0474 00BF     		nop
 7809              	.L390:
 7810              		.loc 1 2047 0 is_stmt 0 discriminator 1
 7811 0476 FFF7FEFF 		bl	cc2400_status
 7812 047a 0346     		mov	r3, r0
 7813 047c 03F00403 		and	r3, r3, #4
 7814 0480 002B     		cmp	r3, #0
 7815 0482 F8D1     		bne	.L390
2048:bluetooth_rxtx.c **** 
2049:bluetooth_rxtx.c **** 			/* Retune */
2050:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7816              		.loc 1 2050 0 is_stmt 1
 7817 0484 3E4B     		ldr	r3, .L401+56
 7818 0486 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccHz27EZ.s 			page 173


 7819 0488 9BB2     		uxth	r3, r3
 7820 048a 002B     		cmp	r3, #0
 7821 048c 03D0     		beq	.L391
 7822              		.loc 1 2050 0 is_stmt 0 discriminator 1
 7823 048e 3C4B     		ldr	r3, .L401+56
 7824 0490 1B88     		ldrh	r3, [r3]	@ movhi
 7825 0492 9BB2     		uxth	r3, r3
 7826 0494 01E0     		b	.L392
 7827              	.L391:
 7828              		.loc 1 2050 0 discriminator 2
 7829 0496 40F66213 		movw	r3, #2402
 7830              	.L392:
 7831              		.loc 1 2050 0 discriminator 4
 7832 049a 3A4A     		ldr	r2, .L401+60
 7833 049c 1380     		strh	r3, [r2]	@ movhi
2051:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7834              		.loc 1 2051 0 is_stmt 1 discriminator 4
 7835 049e 3A4B     		ldr	r3, .L401+64
 7836 04a0 0122     		movs	r2, #1
 7837 04a2 1A60     		str	r2, [r3]
 7838              	.L387:
2052:bluetooth_rxtx.c **** 		}
2053:bluetooth_rxtx.c **** 
2054:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7839              		.loc 1 2054 0
 7840 04a4 294B     		ldr	r3, .L401+4
 7841 04a6 DB88     		ldrh	r3, [r3, #6]
 7842 04a8 2C20     		movs	r0, #44
 7843 04aa 1946     		mov	r1, r3
 7844 04ac FFF7FEFF 		bl	cc2400_set
2055:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7845              		.loc 1 2055 0
 7846 04b0 264B     		ldr	r3, .L401+4
 7847 04b2 9B88     		ldrh	r3, [r3, #4]
 7848 04b4 2D20     		movs	r0, #45
 7849 04b6 1946     		mov	r1, r3
 7850 04b8 FFF7FEFF 		bl	cc2400_set
2056:bluetooth_rxtx.c **** 
2057:bluetooth_rxtx.c **** 		if (do_hop)
 7851              		.loc 1 2057 0
 7852 04bc 334B     		ldr	r3, .L401+68
 7853 04be 1B78     		ldrb	r3, [r3]
 7854 04c0 DBB2     		uxtb	r3, r3
 7855 04c2 002B     		cmp	r3, #0
 7856 04c4 01D0     		beq	.L393
2058:bluetooth_rxtx.c **** 			hop();
 7857              		.loc 1 2058 0
 7858 04c6 FFF7FEFF 		bl	hop
 7859              	.L393:
2059:bluetooth_rxtx.c **** 
2060:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2061:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7860              		.loc 1 2061 0
 7861 04ca 294B     		ldr	r3, .L401+40
 7862 04cc 1B68     		ldr	r3, [r3]
 7863 04ce 002B     		cmp	r3, #0
 7864 04d0 07DD     		ble	.L394
ARM GAS  /tmp/ccHz27EZ.s 			page 174


2062:bluetooth_rxtx.c **** 			le_jam();
 7865              		.loc 1 2062 0
 7866 04d2 FFF7FEFF 		bl	le_jam
2063:bluetooth_rxtx.c **** 			--le_jam_count;
 7867              		.loc 1 2063 0
 7868 04d6 264B     		ldr	r3, .L401+40
 7869 04d8 1B68     		ldr	r3, [r3]
 7870 04da 013B     		subs	r3, r3, #1
 7871 04dc 244A     		ldr	r2, .L401+40
 7872 04de 1360     		str	r3, [r2]
 7873 04e0 17E0     		b	.L395
 7874              	.L394:
2064:bluetooth_rxtx.c **** 		} else {
2065:bluetooth_rxtx.c **** 			/* RX mode */
2066:bluetooth_rxtx.c **** 			dma_init_le();
 7875              		.loc 1 2066 0
 7876 04e2 FFF7FEFF 		bl	dma_init_le
2067:bluetooth_rxtx.c **** 			dio_ssp_start();
 7877              		.loc 1 2067 0
 7878 04e6 FFF7FEFF 		bl	dio_ssp_start
2068:bluetooth_rxtx.c **** 
2069:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7879              		.loc 1 2069 0
 7880 04ea 274B     		ldr	r3, .L401+64
 7881 04ec 1B68     		ldr	r3, [r3]
 7882 04ee 002B     		cmp	r3, #0
 7883 04f0 0CD0     		beq	.L396
2070:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7884              		.loc 1 2070 0
 7885 04f2 164B     		ldr	r3, .L401+4
 7886 04f4 1B68     		ldr	r3, [r3]
 7887 04f6 1846     		mov	r0, r3
 7888 04f8 FFF7FEFF 		bl	rbit
 7889 04fc 0346     		mov	r3, r0
 7890 04fe 1846     		mov	r0, r3
 7891 0500 FFF7FEFF 		bl	cc2400_rx_sync
2071:bluetooth_rxtx.c **** 				restart_jamming = 0;
 7892              		.loc 1 2071 0
 7893 0504 204B     		ldr	r3, .L401+64
 7894 0506 0022     		movs	r2, #0
 7895 0508 1A60     		str	r2, [r3]
 7896 050a 02E0     		b	.L395
 7897              	.L396:
2072:bluetooth_rxtx.c **** 			} else {
2073:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7898              		.loc 1 2073 0
 7899 050c 6220     		movs	r0, #98
 7900 050e FFF7FEFF 		bl	cc2400_strobe
 7901              	.L395:
2074:bluetooth_rxtx.c **** 			}
2075:bluetooth_rxtx.c **** 		}
2076:bluetooth_rxtx.c **** 
2077:bluetooth_rxtx.c **** 		rx_tc = 0;
 7902              		.loc 1 2077 0
 7903 0512 1F4B     		ldr	r3, .L401+72
 7904 0514 0022     		movs	r2, #0
 7905 0516 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 175


2078:bluetooth_rxtx.c **** 		rx_err = 0;
 7906              		.loc 1 2078 0
 7907 0518 1E4B     		ldr	r3, .L401+76
 7908 051a 0022     		movs	r2, #0
 7909 051c 1A60     		str	r2, [r3]
 7910              	.L352:
 7911              	.LBE4:
1898:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7912              		.loc 1 1898 0
 7913 051e 174B     		ldr	r3, .L401+52
 7914 0520 1B78     		ldrb	r3, [r3]
 7915 0522 DBB2     		uxtb	r3, r3
 7916 0524 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7917 0526 9A42     		cmp	r2, r3
 7918 0528 3FF495AD 		beq	.L398
 7919              	.L397:
2079:bluetooth_rxtx.c **** 	}
2080:bluetooth_rxtx.c **** 
2081:bluetooth_rxtx.c **** cleanup:
2082:bluetooth_rxtx.c **** 
2083:bluetooth_rxtx.c **** 	// disable USB interrupts
2084:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7920              		.loc 1 2084 0
 7921 052c 1A4B     		ldr	r3, .L401+80
 7922 052e 4FF08072 		mov	r2, #16777216
 7923 0532 1A60     		str	r2, [r3]
2085:bluetooth_rxtx.c **** 
2086:bluetooth_rxtx.c **** 	// reset the radio completely
2087:bluetooth_rxtx.c **** 	cc2400_idle();
 7924              		.loc 1 2087 0
 7925 0534 FFF7FEFF 		bl	cc2400_idle
2088:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7926              		.loc 1 2088 0
 7927 0538 FFF7FEFF 		bl	dio_ssp_stop
2089:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7928              		.loc 1 2089 0
 7929 053c FFF7FEFF 		bl	cs_trigger_disable
2090:bluetooth_rxtx.c **** }
 7930              		.loc 1 2090 0
 7931 0540 7437     		adds	r7, r7, #116
 7932              		.cfi_def_cfa_offset 12
 7933 0542 BD46     		mov	sp, r7
 7934              		.cfi_def_cfa_register 13
 7935              		@ sp needed
 7936 0544 90BD     		pop	{r4, r7, pc}
 7937              	.L402:
 7938 0546 00BF     		.align	2
 7939              	.L401:
 7940 0548 00000000 		.word	rxbuf1
 7941 054c 00000000 		.word	le
 7942 0550 38C00920 		.word	537509944
 7943 0554 00000000 		.word	packet_cb
 7944 0558 00000000 		.word	clkn
 7945 055c 08400040 		.word	1073758216
 7946 0560 24000340 		.word	1073938468
 7947 0564 08000340 		.word	1073938440
 7948 0568 0C000340 		.word	1073938444
ARM GAS  /tmp/ccHz27EZ.s 			page 176


 7949 056c 80F0FA02 		.word	50000000
 7950 0570 00000000 		.word	le_jam_count
 7951 0574 3CC00920 		.word	537509948
 7952 0578 00000000 		.word	jam_mode
 7953 057c 00000000 		.word	requested_mode
 7954 0580 00000000 		.word	saved_request
 7955 0584 00000000 		.word	channel
 7956 0588 D4000000 		.word	restart_jamming.4702
 7957 058c 00000000 		.word	do_hop
 7958 0590 00000000 		.word	rx_tc
 7959 0594 00000000 		.word	rx_err
 7960 0598 80E100E0 		.word	-536813184
 7961              		.cfi_endproc
 7962              	.LFE34:
 7964              		.section	.text.cb_follow_le,"ax",%progbits
 7965              		.align	2
 7966              		.global	cb_follow_le
 7967              		.thumb
 7968              		.thumb_func
 7970              	cb_follow_le:
 7971              	.LFB35:
2091:bluetooth_rxtx.c **** 
2092:bluetooth_rxtx.c **** 
2093:bluetooth_rxtx.c **** 
2094:bluetooth_rxtx.c **** /* low energy connection following
2095:bluetooth_rxtx.c ****  * follows a known AA around */
2096:bluetooth_rxtx.c **** int cb_follow_le() {
 7972              		.loc 1 2096 0
 7973              		.cfi_startproc
 7974              		@ args = 0, pretend = 0, frame = 48
 7975              		@ frame_needed = 1, uses_anonymous_args = 0
 7976 0000 80B5     		push	{r7, lr}
 7977              		.cfi_def_cfa_offset 8
 7978              		.cfi_offset 7, -8
 7979              		.cfi_offset 14, -4
 7980 0002 8CB0     		sub	sp, sp, #48
 7981              		.cfi_def_cfa_offset 56
 7982 0004 00AF     		add	r7, sp, #0
 7983              		.cfi_def_cfa_register 7
2097:bluetooth_rxtx.c **** 	int i, j, k;
2098:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 7984              		.loc 1 2098 0
 7985 0006 6C4B     		ldr	r3, .L419
 7986 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7987 000a 9BB2     		uxth	r3, r3
 7988 000c DBB2     		uxtb	r3, r3
 7989 000e 623B     		subs	r3, r3, #98
 7990 0010 DBB2     		uxtb	r3, r3
 7991 0012 1846     		mov	r0, r3
 7992 0014 FFF7FEFF 		bl	btle_channel_index
 7993 0018 0346     		mov	r3, r0
 7994 001a 1A46     		mov	r2, r3
 7995 001c 674B     		ldr	r3, .L419+4
 7996 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7997 0020 3B62     		str	r3, [r7, #32]
2099:bluetooth_rxtx.c **** 
2100:bluetooth_rxtx.c **** 	u32 access_address = 0;
ARM GAS  /tmp/ccHz27EZ.s 			page 177


 7998              		.loc 1 2100 0
 7999 0022 0023     		movs	r3, #0
 8000 0024 FB61     		str	r3, [r7, #28]
2101:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8001              		.loc 1 2101 0
 8002 0026 0023     		movs	r3, #0
 8003 0028 FB62     		str	r3, [r7, #44]
 8004 002a 0EE0     		b	.L404
 8005              	.L405:
2102:bluetooth_rxtx.c **** 		access_address >>= 1;
 8006              		.loc 1 2102 0 discriminator 3
 8007 002c FB69     		ldr	r3, [r7, #28]
 8008 002e 5B08     		lsrs	r3, r3, #1
 8009 0030 FB61     		str	r3, [r7, #28]
2103:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 8010              		.loc 1 2103 0 discriminator 3
 8011 0032 634A     		ldr	r2, .L419+8
 8012 0034 FB6A     		ldr	r3, [r7, #44]
 8013 0036 1344     		add	r3, r3, r2
 8014 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8015 003a DB07     		lsls	r3, r3, #31
 8016 003c 1A46     		mov	r2, r3
 8017 003e FB69     		ldr	r3, [r7, #28]
 8018 0040 1343     		orrs	r3, r3, r2
 8019 0042 FB61     		str	r3, [r7, #28]
2101:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8020              		.loc 1 2101 0 discriminator 3
 8021 0044 FB6A     		ldr	r3, [r7, #44]
 8022 0046 0133     		adds	r3, r3, #1
 8023 0048 FB62     		str	r3, [r7, #44]
 8024              	.L404:
2101:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8025              		.loc 1 2101 0 is_stmt 0 discriminator 1
 8026 004a FB6A     		ldr	r3, [r7, #44]
 8027 004c 1E2B     		cmp	r3, #30
 8028 004e EDDD     		ble	.L405
2104:bluetooth_rxtx.c **** 	}
2105:bluetooth_rxtx.c **** 
2106:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 8029              		.loc 1 2106 0 is_stmt 1
 8030 0050 1F23     		movs	r3, #31
 8031 0052 FB62     		str	r3, [r7, #44]
 8032 0054 A6E0     		b	.L406
 8033              	.L417:
2107:bluetooth_rxtx.c **** 		access_address >>= 1;
 8034              		.loc 1 2107 0
 8035 0056 FB69     		ldr	r3, [r7, #28]
 8036 0058 5B08     		lsrs	r3, r3, #1
 8037 005a FB61     		str	r3, [r7, #28]
2108:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 8038              		.loc 1 2108 0
 8039 005c 584A     		ldr	r2, .L419+8
 8040 005e FB6A     		ldr	r3, [r7, #44]
 8041 0060 1344     		add	r3, r3, r2
 8042 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8043 0064 DB07     		lsls	r3, r3, #31
 8044 0066 1A46     		mov	r2, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 178


 8045 0068 FB69     		ldr	r3, [r7, #28]
 8046 006a 1343     		orrs	r3, r3, r2
 8047 006c FB61     		str	r3, [r7, #28]
2109:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 8048              		.loc 1 2109 0
 8049 006e 554B     		ldr	r3, .L419+12
 8050 0070 1A68     		ldr	r2, [r3]
 8051 0072 FB69     		ldr	r3, [r7, #28]
 8052 0074 9A42     		cmp	r2, r3
 8053 0076 40F09280 		bne	.L407
2110:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 8054              		.loc 1 2110 0
 8055 007a 0023     		movs	r3, #0
 8056 007c BB62     		str	r3, [r7, #40]
 8057 007e 48E0     		b	.L408
 8058              	.L414:
 8059              	.LBB9:
2111:bluetooth_rxtx.c **** 				u8 byte = 0;
 8060              		.loc 1 2111 0
 8061 0080 0023     		movs	r3, #0
 8062 0082 FB76     		strb	r3, [r7, #27]
2112:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 8063              		.loc 1 2112 0
 8064 0084 0023     		movs	r3, #0
 8065 0086 7B62     		str	r3, [r7, #36]
 8066 0088 37E0     		b	.L409
 8067              	.L413:
 8068              	.LBB10:
2113:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8069              		.loc 1 2113 0
 8070 008a BB6A     		ldr	r3, [r7, #40]
 8071 008c DA00     		lsls	r2, r3, #3
 8072 008e 7B6A     		ldr	r3, [r7, #36]
 8073 0090 1A44     		add	r2, r2, r3
 8074 0092 FB6A     		ldr	r3, [r7, #44]
 8075 0094 1344     		add	r3, r3, r2
 8076 0096 1F3B     		subs	r3, r3, #31
 8077 0098 3B61     		str	r3, [r7, #16]
2114:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 8078              		.loc 1 2114 0
 8079 009a 3B69     		ldr	r3, [r7, #16]
 8080 009c B3F5487F 		cmp	r3, #800
 8081 00a0 00DB     		blt	.L410
 8082 00a2 2DE0     		b	.L411
 8083              	.L410:
2115:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 8084              		.loc 1 2115 0
 8085 00a4 464A     		ldr	r2, .L419+8
 8086 00a6 3B69     		ldr	r3, [r7, #16]
 8087 00a8 1344     		add	r3, r3, r2
 8088 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8089 00ac 7B61     		str	r3, [r7, #20]
2116:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 8090              		.loc 1 2116 0
 8091 00ae BB6A     		ldr	r3, [r7, #40]
 8092 00b0 032B     		cmp	r3, #3
 8093 00b2 16DD     		ble	.L412
ARM GAS  /tmp/ccHz27EZ.s 			page 179


2117:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 8094              		.loc 1 2117 0
 8095 00b4 444A     		ldr	r2, .L419+16
 8096 00b6 3B6A     		ldr	r3, [r7, #32]
 8097 00b8 1344     		add	r3, r3, r2
 8098 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8099 00bc 1A46     		mov	r2, r3
 8100 00be 7B69     		ldr	r3, [r7, #20]
 8101 00c0 5340     		eors	r3, r3, r2
 8102 00c2 7B61     		str	r3, [r7, #20]
2118:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 8103              		.loc 1 2118 0
 8104 00c4 3B6A     		ldr	r3, [r7, #32]
 8105 00c6 0133     		adds	r3, r3, #1
 8106 00c8 1946     		mov	r1, r3
 8107 00ca 404B     		ldr	r3, .L419+20
 8108 00cc A1FB0323 		umull	r2, r3, r1, r3
 8109 00d0 C81A     		subs	r0, r1, r3
 8110 00d2 4008     		lsrs	r0, r0, #1
 8111 00d4 0344     		add	r3, r3, r0
 8112 00d6 9A09     		lsrs	r2, r3, #6
 8113 00d8 1346     		mov	r3, r2
 8114 00da DB01     		lsls	r3, r3, #7
 8115 00dc 9B1A     		subs	r3, r3, r2
 8116 00de CA1A     		subs	r2, r1, r3
 8117 00e0 3A62     		str	r2, [r7, #32]
 8118              	.L412:
2119:bluetooth_rxtx.c **** 					}
2120:bluetooth_rxtx.c **** 					byte |= bit << k;
 8119              		.loc 1 2120 0 discriminator 2
 8120 00e2 7A69     		ldr	r2, [r7, #20]
 8121 00e4 7B6A     		ldr	r3, [r7, #36]
 8122 00e6 02FA03F3 		lsl	r3, r2, r3
 8123 00ea DAB2     		uxtb	r2, r3
 8124 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 8125 00ee 1343     		orrs	r3, r3, r2
 8126 00f0 DBB2     		uxtb	r3, r3
 8127 00f2 FB76     		strb	r3, [r7, #27]
 8128              	.LBE10:
2112:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8129              		.loc 1 2112 0 discriminator 2
 8130 00f4 7B6A     		ldr	r3, [r7, #36]
 8131 00f6 0133     		adds	r3, r3, #1
 8132 00f8 7B62     		str	r3, [r7, #36]
 8133              	.L409:
2112:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8134              		.loc 1 2112 0 is_stmt 0 discriminator 1
 8135 00fa 7B6A     		ldr	r3, [r7, #36]
 8136 00fc 072B     		cmp	r3, #7
 8137 00fe C4DD     		ble	.L413
 8138              	.L411:
2121:bluetooth_rxtx.c **** 				}
2122:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 8139              		.loc 1 2122 0 is_stmt 1 discriminator 2
 8140 0100 334B     		ldr	r3, .L419+24
 8141 0102 1A68     		ldr	r2, [r3]
 8142 0104 BB6A     		ldr	r3, [r7, #40]
ARM GAS  /tmp/ccHz27EZ.s 			page 180


 8143 0106 1344     		add	r3, r3, r2
 8144 0108 FA7E     		ldrb	r2, [r7, #27]
 8145 010a 1A70     		strb	r2, [r3]
 8146              	.LBE9:
2110:bluetooth_rxtx.c **** 				u8 byte = 0;
 8147              		.loc 1 2110 0 discriminator 2
 8148 010c BB6A     		ldr	r3, [r7, #40]
 8149 010e 0133     		adds	r3, r3, #1
 8150 0110 BB62     		str	r3, [r7, #40]
 8151              	.L408:
2110:bluetooth_rxtx.c **** 				u8 byte = 0;
 8152              		.loc 1 2110 0 is_stmt 0 discriminator 1
 8153 0112 BB6A     		ldr	r3, [r7, #40]
 8154 0114 2D2B     		cmp	r3, #45
 8155 0116 B3DD     		ble	.L414
2123:bluetooth_rxtx.c **** 			}
2124:bluetooth_rxtx.c **** 
2125:bluetooth_rxtx.c **** 			// verify CRC
2126:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 8156              		.loc 1 2126 0 is_stmt 1
 8157 0118 2A4B     		ldr	r3, .L419+12
 8158 011a 1B69     		ldr	r3, [r3, #16]
 8159 011c 002B     		cmp	r3, #0
 8160 011e 2ED0     		beq	.L415
 8161              	.LBB11:
2127:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 8162              		.loc 1 2127 0
 8163 0120 2B4B     		ldr	r3, .L419+24
 8164 0122 1B68     		ldr	r3, [r3]
 8165 0124 0533     		adds	r3, r3, #5
 8166 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8167 0128 03F03F03 		and	r3, r3, #63
 8168 012c 0233     		adds	r3, r3, #2
 8169 012e FB60     		str	r3, [r7, #12]
2128:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 8170              		.loc 1 2128 0
 8171 0130 244B     		ldr	r3, .L419+12
 8172 0132 DA68     		ldr	r2, [r3, #12]
 8173 0134 264B     		ldr	r3, .L419+24
 8174 0136 1B68     		ldr	r3, [r3]
 8175 0138 0433     		adds	r3, r3, #4
 8176 013a 1046     		mov	r0, r2
 8177 013c 1946     		mov	r1, r3
 8178 013e FA68     		ldr	r2, [r7, #12]
 8179 0140 FFF7FEFF 		bl	btle_crcgen_lut
 8180 0144 B860     		str	r0, [r7, #8]
2129:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 8181              		.loc 1 2129 0
 8182 0146 224B     		ldr	r3, .L419+24
 8183 0148 1A68     		ldr	r2, [r3]
 8184 014a FB68     		ldr	r3, [r7, #12]
 8185 014c 0633     		adds	r3, r3, #6
 8186 014e 1344     		add	r3, r3, r2
 8187 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8188 0152 1A04     		lsls	r2, r3, #16
2130:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 8189              		.loc 1 2130 0
ARM GAS  /tmp/ccHz27EZ.s 			page 181


 8190 0154 1E4B     		ldr	r3, .L419+24
 8191 0156 1968     		ldr	r1, [r3]
 8192 0158 FB68     		ldr	r3, [r7, #12]
 8193 015a 0533     		adds	r3, r3, #5
 8194 015c 0B44     		add	r3, r3, r1
 8195 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8196 0160 1B02     		lsls	r3, r3, #8
 8197 0162 1343     		orrs	r3, r3, r2
2131:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 8198              		.loc 1 2131 0
 8199 0164 1A4A     		ldr	r2, .L419+24
 8200 0166 1268     		ldr	r2, [r2]
 8201 0168 F968     		ldr	r1, [r7, #12]
 8202 016a 0431     		adds	r1, r1, #4
 8203 016c 0A44     		add	r2, r2, r1
 8204 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8205 0170 1343     		orrs	r3, r3, r2
2129:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 8206              		.loc 1 2129 0
 8207 0172 7B60     		str	r3, [r7, #4]
2132:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 8208              		.loc 1 2132 0
 8209 0174 BA68     		ldr	r2, [r7, #8]
 8210 0176 7B68     		ldr	r3, [r7, #4]
 8211 0178 9A42     		cmp	r2, r3
 8212 017a 00D0     		beq	.L415
2133:bluetooth_rxtx.c **** 					break;
 8213              		.loc 1 2133 0
 8214 017c 17E0     		b	.L416
 8215              	.L415:
 8216              	.LBE11:
2134:bluetooth_rxtx.c **** 			}
2135:bluetooth_rxtx.c **** 
2136:bluetooth_rxtx.c **** 			// send to PC
2137:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 8217              		.loc 1 2137 0
 8218 017e 144B     		ldr	r3, .L419+24
 8219 0180 1B68     		ldr	r3, [r3]
 8220 0182 0120     		movs	r0, #1
 8221 0184 1946     		mov	r1, r3
 8222 0186 FFF7FEFF 		bl	enqueue
2138:bluetooth_rxtx.c **** 			RXLED_SET;
 8223              		.loc 1 2138 0
 8224 018a 124B     		ldr	r3, .L419+28
 8225 018c 1022     		movs	r2, #16
 8226 018e 1A60     		str	r2, [r3]
2139:bluetooth_rxtx.c **** 
2140:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 8227              		.loc 1 2140 0
 8228 0190 114B     		ldr	r3, .L419+32
 8229 0192 1B68     		ldr	r3, [r3]
 8230 0194 0E4A     		ldr	r2, .L419+24
 8231 0196 1268     		ldr	r2, [r2]
 8232 0198 1046     		mov	r0, r2
 8233 019a 9847     		blx	r3
2141:bluetooth_rxtx.c **** 
2142:bluetooth_rxtx.c **** 			break;
ARM GAS  /tmp/ccHz27EZ.s 			page 182


 8234              		.loc 1 2142 0
 8235 019c 07E0     		b	.L416
 8236              	.L407:
2106:bluetooth_rxtx.c **** 		access_address >>= 1;
 8237              		.loc 1 2106 0 discriminator 2
 8238 019e FB6A     		ldr	r3, [r7, #44]
 8239 01a0 0133     		adds	r3, r3, #1
 8240 01a2 FB62     		str	r3, [r7, #44]
 8241              	.L406:
2106:bluetooth_rxtx.c **** 		access_address >>= 1;
 8242              		.loc 1 2106 0 is_stmt 0 discriminator 1
 8243 01a4 FB6A     		ldr	r3, [r7, #44]
 8244 01a6 B3F5D87F 		cmp	r3, #432
 8245 01aa FFF654AF 		blt	.L417
 8246              	.L416:
2143:bluetooth_rxtx.c **** 		}
2144:bluetooth_rxtx.c **** 	}
2145:bluetooth_rxtx.c **** 
2146:bluetooth_rxtx.c **** 	return 1;
 8247              		.loc 1 2146 0 is_stmt 1
 8248 01ae 0123     		movs	r3, #1
2147:bluetooth_rxtx.c **** }
 8249              		.loc 1 2147 0
 8250 01b0 1846     		mov	r0, r3
 8251 01b2 3037     		adds	r7, r7, #48
 8252              		.cfi_def_cfa_offset 8
 8253 01b4 BD46     		mov	sp, r7
 8254              		.cfi_def_cfa_register 13
 8255              		@ sp needed
 8256 01b6 80BD     		pop	{r7, pc}
 8257              	.L420:
 8258              		.align	2
 8259              	.L419:
 8260 01b8 00000000 		.word	channel
 8261 01bc AC000000 		.word	whitening_index
 8262 01c0 00000000 		.word	unpacked
 8263 01c4 00000000 		.word	le
 8264 01c8 2C000000 		.word	whitening
 8265 01cc 11080402 		.word	33818641
 8266 01d0 00000000 		.word	idle_rxbuf
 8267 01d4 38C00920 		.word	537509944
 8268 01d8 00000000 		.word	packet_cb
 8269              		.cfi_endproc
 8270              	.LFE35:
 8272              		.section	.text.connection_follow_cb,"ax",%progbits
 8273              		.align	2
 8274              		.global	connection_follow_cb
 8275              		.thumb
 8276              		.thumb_func
 8278              	connection_follow_cb:
 8279              	.LFB36:
2148:bluetooth_rxtx.c **** 
2149:bluetooth_rxtx.c **** /**
2150:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2151:bluetooth_rxtx.c ****  */
2152:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 8280              		.loc 1 2152 0
ARM GAS  /tmp/ccHz27EZ.s 			page 183


 8281              		.cfi_startproc
 8282              		@ args = 0, pretend = 0, frame = 40
 8283              		@ frame_needed = 1, uses_anonymous_args = 0
 8284 0000 80B5     		push	{r7, lr}
 8285              		.cfi_def_cfa_offset 8
 8286              		.cfi_offset 7, -8
 8287              		.cfi_offset 14, -4
 8288 0002 8AB0     		sub	sp, sp, #40
 8289              		.cfi_def_cfa_offset 48
 8290 0004 00AF     		add	r7, sp, #0
 8291              		.cfi_def_cfa_register 7
 8292 0006 7860     		str	r0, [r7, #4]
2153:bluetooth_rxtx.c **** 	int i;
2154:bluetooth_rxtx.c **** 	u32 aa = 0;
 8293              		.loc 1 2154 0
 8294 0008 0023     		movs	r3, #0
 8295 000a 3B62     		str	r3, [r7, #32]
2155:bluetooth_rxtx.c **** 
2156:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2157:bluetooth_rxtx.c **** #define HEADER_IDX 4
2158:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2159:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2160:bluetooth_rxtx.c **** 
2161:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 8296              		.loc 1 2161 0
 8297 000c 7B68     		ldr	r3, [r7, #4]
 8298 000e FB61     		str	r3, [r7, #28]
2162:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 8299              		.loc 1 2162 0
 8300 0010 7B68     		ldr	r3, [r7, #4]
 8301 0012 1B79     		ldrb	r3, [r3, #4]
 8302 0014 FB76     		strb	r3, [r7, #27]
2163:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 8303              		.loc 1 2163 0
 8304 0016 7B68     		ldr	r3, [r7, #4]
 8305 0018 0533     		adds	r3, r3, #5
 8306 001a 7B61     		str	r3, [r7, #20]
2164:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 8307              		.loc 1 2164 0
 8308 001c 7B68     		ldr	r3, [r7, #4]
 8309 001e 0633     		adds	r3, r3, #6
 8310 0020 3B61     		str	r3, [r7, #16]
2165:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 8311              		.loc 1 2165 0
 8312 0022 7B69     		ldr	r3, [r7, #20]
 8313 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8314 0026 0633     		adds	r3, r3, #6
 8315 0028 1A46     		mov	r2, r3
 8316 002a 7B68     		ldr	r3, [r7, #4]
 8317 002c 1344     		add	r3, r3, r2
 8318 002e FB60     		str	r3, [r7, #12]
2166:bluetooth_rxtx.c **** 
2167:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 8319              		.loc 1 2167 0
 8320 0030 8B4B     		ldr	r3, .L431
 8321 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8322 0034 022B     		cmp	r3, #2
ARM GAS  /tmp/ccHz27EZ.s 			page 184


 8323 0036 1CD1     		bne	.L422
2168:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2169:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 8324              		.loc 1 2169 0
 8325 0038 894B     		ldr	r3, .L431
 8326 003a 0322     		movs	r2, #3
 8327 003c 1A75     		strb	r2, [r3, #20]
2170:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 8328              		.loc 1 2170 0
 8329 003e 894B     		ldr	r3, .L431+4
 8330 0040 1B68     		ldr	r3, [r3]
 8331 0042 874A     		ldr	r2, .L431
 8332 0044 9361     		str	r3, [r2, #24]
2171:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 8333              		.loc 1 2171 0
 8334 0046 864B     		ldr	r3, .L431
 8335 0048 DB8B     		ldrh	r3, [r3, #30]
 8336 004a 013B     		subs	r3, r3, #1
 8337 004c 9AB2     		uxth	r2, r3
 8338 004e 844B     		ldr	r3, .L431
 8339 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2172:bluetooth_rxtx.c **** 		le.conn_count = 0;
 8340              		.loc 1 2172 0
 8341 0052 834B     		ldr	r3, .L431
 8342 0054 0022     		movs	r2, #0
 8343 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2173:bluetooth_rxtx.c **** 		le.update_pending = 0;
 8344              		.loc 1 2173 0
 8345 0058 814B     		ldr	r3, .L431
 8346 005a 0022     		movs	r2, #0
 8347 005c 9A62     		str	r2, [r3, #40]
2174:bluetooth_rxtx.c **** 
2175:bluetooth_rxtx.c **** 		// hue hue hue
2176:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 8348              		.loc 1 2176 0
 8349 005e 824B     		ldr	r3, .L431+8
 8350 0060 1B78     		ldrb	r3, [r3]
 8351 0062 DBB2     		uxtb	r3, r3
 8352 0064 002B     		cmp	r3, #0
 8353 0066 00F0F780 		beq	.L421
2177:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 8354              		.loc 1 2177 0
 8355 006a 804B     		ldr	r3, .L431+12
 8356 006c 2822     		movs	r2, #40
 8357 006e 1A60     		str	r2, [r3]
 8358 0070 F2E0     		b	.L421
 8359              	.L422:
2178:bluetooth_rxtx.c **** 
2179:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 8360              		.loc 1 2179 0
 8361 0072 7B4B     		ldr	r3, .L431
 8362 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8363 0076 032B     		cmp	r3, #3
 8364 0078 6FD1     		bne	.L425
 8365              	.LBB12:
2180:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 8366              		.loc 1 2180 0
ARM GAS  /tmp/ccHz27EZ.s 			page 185


 8367 007a FB7E     		ldrb	r3, [r7, #27]
 8368 007c 03F00303 		and	r3, r3, #3
 8369 0080 FB72     		strb	r3, [r7, #11]
2181:bluetooth_rxtx.c **** 
2182:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2183:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 8370              		.loc 1 2183 0
 8371 0082 774B     		ldr	r3, .L431
 8372 0084 9B6A     		ldr	r3, [r3, #40]
 8373 0086 002B     		cmp	r3, #0
 8374 0088 21D0     		beq	.L426
 8375              		.loc 1 2183 0 is_stmt 0 discriminator 1
 8376 008a 754B     		ldr	r3, .L431
 8377 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8378 008e 9AB2     		uxth	r2, r3
 8379 0090 734B     		ldr	r3, .L431
 8380 0092 9B8D     		ldrh	r3, [r3, #44]
 8381 0094 9A42     		cmp	r2, r3
 8382 0096 1AD1     		bne	.L426
2184:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2185:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 8383              		.loc 1 2185 0 is_stmt 1
 8384 0098 724B     		ldr	r3, .L431+4
 8385 009a 1B68     		ldr	r3, [r3]
 8386 009c 704A     		ldr	r2, .L431
 8387 009e 9361     		str	r3, [r2, #24]
2186:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 8388              		.loc 1 2186 0
 8389 00a0 6F4B     		ldr	r3, .L431
 8390 00a2 DA8D     		ldrh	r2, [r3, #46]
 8391 00a4 6E4B     		ldr	r3, .L431
 8392 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2187:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 8393              		.loc 1 2187 0
 8394 00a8 6D4B     		ldr	r3, .L431
 8395 00aa DB8D     		ldrh	r3, [r3, #46]
 8396 00ac 013B     		subs	r3, r3, #1
 8397 00ae 9AB2     		uxth	r2, r3
 8398 00b0 6B4B     		ldr	r3, .L431
 8399 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2188:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 8400              		.loc 1 2188 0
 8401 00b4 6A4B     		ldr	r3, .L431
 8402 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 8403 00ba 694B     		ldr	r3, .L431
 8404 00bc 83F82220 		strb	r2, [r3, #34]
2189:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 8405              		.loc 1 2189 0
 8406 00c0 674B     		ldr	r3, .L431
 8407 00c2 5A8E     		ldrh	r2, [r3, #50]
 8408 00c4 664B     		ldr	r3, .L431
 8409 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2190:bluetooth_rxtx.c **** 			le.update_pending = 0;
 8410              		.loc 1 2190 0
 8411 00c8 654B     		ldr	r3, .L431
 8412 00ca 0022     		movs	r2, #0
 8413 00cc 9A62     		str	r2, [r3, #40]
ARM GAS  /tmp/ccHz27EZ.s 			page 186


 8414              	.L426:
2191:bluetooth_rxtx.c **** 		}
2192:bluetooth_rxtx.c **** 
2193:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 8415              		.loc 1 2193 0
 8416 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 8417 00d0 032B     		cmp	r3, #3
 8418 00d2 41D1     		bne	.L427
 8419              		.loc 1 2193 0 is_stmt 0 discriminator 1
 8420 00d4 3B69     		ldr	r3, [r7, #16]
 8421 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8422 00d8 002B     		cmp	r3, #0
 8423 00da 3DD1     		bne	.L427
2194:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2195:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2196:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 8424              		.loc 1 2196 0 is_stmt 1
 8425 00dc 7B68     		ldr	r3, [r7, #4]
 8426 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 8427 00e0 5F4B     		ldr	r3, .L431
 8428 00e2 83F83020 		strb	r2, [r3, #48]
2197:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 8429              		.loc 1 2197 0
 8430 00e6 7B68     		ldr	r3, [r7, #4]
 8431 00e8 0833     		adds	r3, r3, #8
 8432 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8433 00ec 9AB2     		uxth	r2, r3
 8434 00ee 7B68     		ldr	r3, [r7, #4]
 8435 00f0 0933     		adds	r3, r3, #9
 8436 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8437 00f4 9BB2     		uxth	r3, r3
 8438 00f6 1B02     		lsls	r3, r3, #8
 8439 00f8 9BB2     		uxth	r3, r3
 8440 00fa 1344     		add	r3, r3, r2
 8441 00fc 9AB2     		uxth	r2, r3
 8442 00fe 584B     		ldr	r3, .L431
 8443 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2198:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 8444              		.loc 1 2198 0
 8445 0102 7B68     		ldr	r3, [r7, #4]
 8446 0104 0A33     		adds	r3, r3, #10
 8447 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8448 0108 9AB2     		uxth	r2, r3
 8449 010a 7B68     		ldr	r3, [r7, #4]
 8450 010c 0B33     		adds	r3, r3, #11
 8451 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8452 0110 9BB2     		uxth	r3, r3
 8453 0112 1B02     		lsls	r3, r3, #8
 8454 0114 9BB2     		uxth	r3, r3
 8455 0116 1344     		add	r3, r3, r2
 8456 0118 9AB2     		uxth	r2, r3
 8457 011a 514B     		ldr	r3, .L431
 8458 011c DA85     		strh	r2, [r3, #46]	@ movhi
2199:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 8459              		.loc 1 2199 0
 8460 011e 7B68     		ldr	r3, [r7, #4]
 8461 0120 1033     		adds	r3, r3, #16
ARM GAS  /tmp/ccHz27EZ.s 			page 187


 8462 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8463 0124 9AB2     		uxth	r2, r3
 8464 0126 7B68     		ldr	r3, [r7, #4]
 8465 0128 1133     		adds	r3, r3, #17
 8466 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8467 012c 9BB2     		uxth	r3, r3
 8468 012e 1B02     		lsls	r3, r3, #8
 8469 0130 9BB2     		uxth	r3, r3
 8470 0132 1344     		add	r3, r3, r2
 8471 0134 9AB2     		uxth	r2, r3
 8472 0136 4A4B     		ldr	r3, .L431
 8473 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2200:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 8474              		.loc 1 2200 0
 8475 013a 494B     		ldr	r3, .L431
 8476 013c 9B8D     		ldrh	r3, [r3, #44]
 8477 013e 1A46     		mov	r2, r3
 8478 0140 474B     		ldr	r3, .L431
 8479 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8480 0144 9BB2     		uxth	r3, r3
 8481 0146 D31A     		subs	r3, r2, r3
 8482 0148 47F6FE72 		movw	r2, #32766
 8483 014c 9342     		cmp	r3, r2
 8484 014e 03DC     		bgt	.L427
2201:bluetooth_rxtx.c **** 				le.update_pending = 1;
 8485              		.loc 1 2201 0
 8486 0150 434B     		ldr	r3, .L431
 8487 0152 0122     		movs	r2, #1
 8488 0154 9A62     		str	r2, [r3, #40]
 8489              	.LBE12:
 8490 0156 7FE0     		b	.L421
 8491              	.L427:
 8492 0158 7EE0     		b	.L421
 8493              	.L425:
2202:bluetooth_rxtx.c **** 		}
2203:bluetooth_rxtx.c **** 
2204:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 8494              		.loc 1 2204 0
 8495 015a 414B     		ldr	r3, .L431
 8496 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8497 015e 012B     		cmp	r3, #1
 8498 0160 7AD1     		bne	.L421
 8499              	.LBB13:
2205:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 8500              		.loc 1 2205 0
 8501 0162 7B68     		ldr	r3, [r7, #4]
 8502 0164 0433     		adds	r3, r3, #4
 8503 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8504 0168 03F00F03 		and	r3, r3, #15
 8505 016c BB72     		strb	r3, [r7, #10]
2206:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 8506              		.loc 1 2206 0
 8507 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 8508 0170 052B     		cmp	r3, #5
 8509 0172 71D1     		bne	.L421
2207:bluetooth_rxtx.c **** 			// This is a connect packet
2208:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
ARM GAS  /tmp/ccHz27EZ.s 			page 188


2209:bluetooth_rxtx.c **** 			if (le.target_set &&
 8510              		.loc 1 2209 0
 8511 0174 3A4B     		ldr	r3, .L431
 8512 0176 DB6B     		ldr	r3, [r3, #60]
 8513 0178 002B     		cmp	r3, #0
 8514 017a 14D0     		beq	.L428
2210:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8515              		.loc 1 2210 0 discriminator 1
 8516 017c 7B68     		ldr	r3, [r7, #4]
 8517 017e 0633     		adds	r3, r3, #6
 8518 0180 3B48     		ldr	r0, .L431+16
 8519 0182 1946     		mov	r1, r3
 8520 0184 0622     		movs	r2, #6
 8521 0186 FFF7FEFF 		bl	memcmp
 8522 018a 0346     		mov	r3, r0
2209:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8523              		.loc 1 2209 0 discriminator 1
 8524 018c 002B     		cmp	r3, #0
 8525 018e 0AD0     		beq	.L428
2211:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8526              		.loc 1 2211 0
 8527 0190 7B68     		ldr	r3, [r7, #4]
 8528 0192 0C33     		adds	r3, r3, #12
 8529 0194 3648     		ldr	r0, .L431+16
 8530 0196 1946     		mov	r1, r3
 8531 0198 0622     		movs	r2, #6
 8532 019a FFF7FEFF 		bl	memcmp
 8533 019e 0346     		mov	r3, r0
2210:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8534              		.loc 1 2210 0
 8535 01a0 002B     		cmp	r3, #0
 8536 01a2 00D0     		beq	.L428
2212:bluetooth_rxtx.c **** 				return;
 8537              		.loc 1 2212 0
 8538 01a4 58E0     		b	.L421
 8539              	.L428:
2213:bluetooth_rxtx.c **** 			}
2214:bluetooth_rxtx.c **** 
2215:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8540              		.loc 1 2215 0
 8541 01a6 2E4B     		ldr	r3, .L431
 8542 01a8 0222     		movs	r2, #2
 8543 01aa 1A75     		strb	r2, [r3, #20]
2216:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8544              		.loc 1 2216 0
 8545 01ac 2C4B     		ldr	r3, .L431
 8546 01ae 0022     		movs	r2, #0
 8547 01b0 1A61     		str	r2, [r3, #16]
2217:bluetooth_rxtx.c **** 
2218:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8548              		.loc 1 2218 0
 8549 01b2 0023     		movs	r3, #0
 8550 01b4 7B62     		str	r3, [r7, #36]
 8551 01b6 11E0     		b	.L429
 8552              	.L430:
2219:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8553              		.loc 1 2219 0 discriminator 3
ARM GAS  /tmp/ccHz27EZ.s 			page 189


 8554 01b8 7B6A     		ldr	r3, [r7, #36]
 8555 01ba 1233     		adds	r3, r3, #18
 8556 01bc 1A46     		mov	r2, r3
 8557 01be 7B68     		ldr	r3, [r7, #4]
 8558 01c0 1344     		add	r3, r3, r2
 8559 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8560 01c4 1A46     		mov	r2, r3
 8561 01c6 7B6A     		ldr	r3, [r7, #36]
 8562 01c8 DB00     		lsls	r3, r3, #3
 8563 01ca 02FA03F3 		lsl	r3, r2, r3
 8564 01ce 1A46     		mov	r2, r3
 8565 01d0 3B6A     		ldr	r3, [r7, #32]
 8566 01d2 1343     		orrs	r3, r3, r2
 8567 01d4 3B62     		str	r3, [r7, #32]
2218:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8568              		.loc 1 2218 0 discriminator 3
 8569 01d6 7B6A     		ldr	r3, [r7, #36]
 8570 01d8 0133     		adds	r3, r3, #1
 8571 01da 7B62     		str	r3, [r7, #36]
 8572              	.L429:
2218:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8573              		.loc 1 2218 0 is_stmt 0 discriminator 1
 8574 01dc 7B6A     		ldr	r3, [r7, #36]
 8575 01de 032B     		cmp	r3, #3
 8576 01e0 EADD     		ble	.L430
2220:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8577              		.loc 1 2220 0 is_stmt 1
 8578 01e2 386A     		ldr	r0, [r7, #32]
 8579 01e4 FFF7FEFF 		bl	le_set_access_address
2221:bluetooth_rxtx.c **** 
2222:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2223:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8580              		.loc 1 2223 0
 8581 01e8 7B68     		ldr	r3, [r7, #4]
 8582 01ea 1833     		adds	r3, r3, #24
 8583 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8584 01ee 1A04     		lsls	r2, r3, #16
2224:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8585              		.loc 1 2224 0
 8586 01f0 7B68     		ldr	r3, [r7, #4]
 8587 01f2 1733     		adds	r3, r3, #23
 8588 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8589 01f6 1B02     		lsls	r3, r3, #8
 8590 01f8 1343     		orrs	r3, r3, r2
2225:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8591              		.loc 1 2225 0
 8592 01fa 7A68     		ldr	r2, [r7, #4]
 8593 01fc 1632     		adds	r2, r2, #22
 8594 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8595 0200 1343     		orrs	r3, r3, r2
2223:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8596              		.loc 1 2223 0
 8597 0202 1A46     		mov	r2, r3
 8598 0204 164B     		ldr	r3, .L431
 8599 0206 9A60     		str	r2, [r3, #8]
2226:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8600              		.loc 1 2226 0
ARM GAS  /tmp/ccHz27EZ.s 			page 190


 8601 0208 154B     		ldr	r3, .L431
 8602 020a 9B68     		ldr	r3, [r3, #8]
 8603 020c 1846     		mov	r0, r3
 8604 020e FFF7FEFF 		bl	rbit
 8605 0212 0246     		mov	r2, r0
 8606 0214 124B     		ldr	r3, .L431
 8607 0216 DA60     		str	r2, [r3, #12]
2227:bluetooth_rxtx.c **** 
2228:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2229:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8608              		.loc 1 2229 0
 8609 0218 7B68     		ldr	r3, [r7, #4]
 8610 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8611 021c 104B     		ldr	r3, .L431
 8612 021e 83F82220 		strb	r2, [r3, #34]
2230:bluetooth_rxtx.c **** 
2231:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2232:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8613              		.loc 1 2232 0
 8614 0222 7B68     		ldr	r3, [r7, #4]
 8615 0224 1A33     		adds	r3, r3, #26
 8616 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8617 0228 9AB2     		uxth	r2, r3
 8618 022a 0D4B     		ldr	r3, .L431
 8619 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2233:bluetooth_rxtx.c **** 
2234:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2235:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8620              		.loc 1 2235 0
 8621 022e 7B68     		ldr	r3, [r7, #4]
 8622 0230 1C33     		adds	r3, r3, #28
 8623 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8624 0234 9AB2     		uxth	r2, r3
 8625 0236 0A4B     		ldr	r3, .L431
 8626 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2236:bluetooth_rxtx.c **** 
2237:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2238:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8627              		.loc 1 2238 0
 8628 023a 7B68     		ldr	r3, [r7, #4]
 8629 023c 2733     		adds	r3, r3, #39
 8630 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8631 0240 03F01F03 		and	r3, r3, #31
 8632 0244 DAB2     		uxtb	r2, r3
 8633 0246 064B     		ldr	r3, .L431
 8634 0248 9A75     		strb	r2, [r3, #22]
2239:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 8635              		.loc 1 2239 0
 8636 024a 054B     		ldr	r3, .L431
 8637 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8638 024e 044B     		ldr	r3, .L431
 8639 0250 5A75     		strb	r2, [r3, #21]
2240:bluetooth_rxtx.c **** 
2241:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2242:bluetooth_rxtx.c **** 			do_hop = 1;
 8640              		.loc 1 2242 0
 8641 0252 084B     		ldr	r3, .L431+20
ARM GAS  /tmp/ccHz27EZ.s 			page 191


 8642 0254 0122     		movs	r2, #1
 8643 0256 1A70     		strb	r2, [r3]
 8644              	.L421:
 8645              	.LBE13:
2243:bluetooth_rxtx.c **** 		}
2244:bluetooth_rxtx.c **** 	}
2245:bluetooth_rxtx.c **** }
 8646              		.loc 1 2245 0
 8647 0258 2837     		adds	r7, r7, #40
 8648              		.cfi_def_cfa_offset 8
 8649 025a BD46     		mov	sp, r7
 8650              		.cfi_def_cfa_register 13
 8651              		@ sp needed
 8652 025c 80BD     		pop	{r7, pc}
 8653              	.L432:
 8654 025e 00BF     		.align	2
 8655              	.L431:
 8656 0260 00000000 		.word	le
 8657 0264 00000000 		.word	clkn
 8658 0268 00000000 		.word	jam_mode
 8659 026c 00000000 		.word	le_jam_count
 8660 0270 34000000 		.word	le+52
 8661 0274 00000000 		.word	do_hop
 8662              		.cfi_endproc
 8663              	.LFE36:
 8665              		.section	.text.bt_follow_le,"ax",%progbits
 8666              		.align	2
 8667              		.global	bt_follow_le
 8668              		.thumb
 8669              		.thumb_func
 8671              	bt_follow_le:
 8672              	.LFB37:
2246:bluetooth_rxtx.c **** 
2247:bluetooth_rxtx.c **** void bt_follow_le() {
 8673              		.loc 1 2247 0
 8674              		.cfi_startproc
 8675              		@ args = 0, pretend = 0, frame = 0
 8676              		@ frame_needed = 1, uses_anonymous_args = 0
 8677 0000 80B5     		push	{r7, lr}
 8678              		.cfi_def_cfa_offset 8
 8679              		.cfi_offset 7, -8
 8680              		.cfi_offset 14, -4
 8681 0002 00AF     		add	r7, sp, #0
 8682              		.cfi_def_cfa_register 7
2248:bluetooth_rxtx.c **** 	reset_le();
 8683              		.loc 1 2248 0
 8684 0004 FFF7FEFF 		bl	reset_le
2249:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8685              		.loc 1 2249 0
 8686 0008 044B     		ldr	r3, .L434
 8687 000a 054A     		ldr	r2, .L434+4
 8688 000c 1A60     		str	r2, [r3]
2250:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 8689              		.loc 1 2250 0
 8690 000e 0920     		movs	r0, #9
 8691 0010 FFF7FEFF 		bl	bt_le_sync
2251:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccHz27EZ.s 			page 192


2252:bluetooth_rxtx.c **** 	/* old non-sync mode
2253:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2254:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2255:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2256:bluetooth_rxtx.c **** 	*/
2257:bluetooth_rxtx.c **** 
2258:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8692              		.loc 1 2258 0
 8693 0014 034B     		ldr	r3, .L434+8
 8694 0016 0022     		movs	r2, #0
 8695 0018 1A70     		strb	r2, [r3]
2259:bluetooth_rxtx.c **** }
 8696              		.loc 1 2259 0
 8697 001a 80BD     		pop	{r7, pc}
 8698              	.L435:
 8699              		.align	2
 8700              	.L434:
 8701 001c 00000000 		.word	packet_cb
 8702 0020 00000000 		.word	connection_follow_cb
 8703 0024 00000000 		.word	mode
 8704              		.cfi_endproc
 8705              	.LFE37:
 8707              		.section	.text.le_promisc_state,"ax",%progbits
 8708              		.align	2
 8709              		.global	le_promisc_state
 8710              		.thumb
 8711              		.thumb_func
 8713              	le_promisc_state:
 8714              	.LFB38:
2260:bluetooth_rxtx.c **** 
2261:bluetooth_rxtx.c **** // issue state change message
2262:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8715              		.loc 1 2262 0
 8716              		.cfi_startproc
 8717              		@ args = 0, pretend = 0, frame = 72
 8718              		@ frame_needed = 1, uses_anonymous_args = 0
 8719 0000 80B5     		push	{r7, lr}
 8720              		.cfi_def_cfa_offset 8
 8721              		.cfi_offset 7, -8
 8722              		.cfi_offset 14, -4
 8723 0002 92B0     		sub	sp, sp, #72
 8724              		.cfi_def_cfa_offset 80
 8725 0004 00AF     		add	r7, sp, #0
 8726              		.cfi_def_cfa_register 7
 8727 0006 0346     		mov	r3, r0
 8728 0008 B960     		str	r1, [r7, #8]
 8729 000a 7A60     		str	r2, [r7, #4]
 8730 000c FB73     		strb	r3, [r7, #15]
2263:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8731              		.loc 1 2263 0
 8732 000e 07F11403 		add	r3, r7, #20
 8733 0012 0022     		movs	r2, #0
 8734 0014 1A60     		str	r2, [r3]
 8735 0016 0433     		adds	r3, r3, #4
 8736 0018 0022     		movs	r2, #0
 8737 001a 1A60     		str	r2, [r3]
 8738 001c 0433     		adds	r3, r3, #4
ARM GAS  /tmp/ccHz27EZ.s 			page 193


 8739 001e 0022     		movs	r2, #0
 8740 0020 1A60     		str	r2, [r3]
 8741 0022 0433     		adds	r3, r3, #4
 8742 0024 0022     		movs	r2, #0
 8743 0026 1A60     		str	r2, [r3]
 8744 0028 0433     		adds	r3, r3, #4
 8745 002a 0022     		movs	r2, #0
 8746 002c 1A60     		str	r2, [r3]
 8747 002e 0433     		adds	r3, r3, #4
 8748 0030 0022     		movs	r2, #0
 8749 0032 1A60     		str	r2, [r3]
 8750 0034 0433     		adds	r3, r3, #4
 8751 0036 0022     		movs	r2, #0
 8752 0038 1A60     		str	r2, [r3]
 8753 003a 0433     		adds	r3, r3, #4
 8754 003c 0022     		movs	r2, #0
 8755 003e 1A60     		str	r2, [r3]
 8756 0040 0433     		adds	r3, r3, #4
 8757 0042 0022     		movs	r2, #0
 8758 0044 1A60     		str	r2, [r3]
 8759 0046 0433     		adds	r3, r3, #4
 8760 0048 0022     		movs	r2, #0
 8761 004a 1A60     		str	r2, [r3]
 8762 004c 0433     		adds	r3, r3, #4
 8763 004e 0022     		movs	r2, #0
 8764 0050 1A60     		str	r2, [r3]
 8765 0052 0433     		adds	r3, r3, #4
 8766 0054 0022     		movs	r2, #0
 8767 0056 1A60     		str	r2, [r3]
 8768 0058 0433     		adds	r3, r3, #4
 8769 005a 0022     		movs	r2, #0
 8770 005c 1A80     		strh	r2, [r3]	@ movhi
 8771 005e 0233     		adds	r3, r3, #2
2264:bluetooth_rxtx.c **** 	if (len > 49)
 8772              		.loc 1 2264 0
 8773 0060 7B68     		ldr	r3, [r7, #4]
 8774 0062 312B     		cmp	r3, #49
 8775 0064 01D9     		bls	.L437
2265:bluetooth_rxtx.c **** 		len = 49;
 8776              		.loc 1 2265 0
 8777 0066 3123     		movs	r3, #49
 8778 0068 7B60     		str	r3, [r7, #4]
 8779              	.L437:
2266:bluetooth_rxtx.c **** 
2267:bluetooth_rxtx.c **** 	buf[0] = type;
 8780              		.loc 1 2267 0
 8781 006a FB7B     		ldrb	r3, [r7, #15]
 8782 006c 3B75     		strb	r3, [r7, #20]
2268:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8783              		.loc 1 2268 0
 8784 006e 07F11403 		add	r3, r7, #20
 8785 0072 0133     		adds	r3, r3, #1
 8786 0074 1846     		mov	r0, r3
 8787 0076 B968     		ldr	r1, [r7, #8]
 8788 0078 7A68     		ldr	r2, [r7, #4]
 8789 007a FFF7FEFF 		bl	memcpy
2269:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
ARM GAS  /tmp/ccHz27EZ.s 			page 194


 8790              		.loc 1 2269 0
 8791 007e 07F11403 		add	r3, r7, #20
 8792 0082 0520     		movs	r0, #5
 8793 0084 1946     		mov	r1, r3
 8794 0086 FFF7FEFF 		bl	enqueue
2270:bluetooth_rxtx.c **** }
 8795              		.loc 1 2270 0
 8796 008a 4837     		adds	r7, r7, #72
 8797              		.cfi_def_cfa_offset 8
 8798 008c BD46     		mov	sp, r7
 8799              		.cfi_def_cfa_register 13
 8800              		@ sp needed
 8801 008e 80BD     		pop	{r7, pc}
 8802              		.cfi_endproc
 8803              	.LFE38:
 8805              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8806              		.align	2
 8807              		.global	promisc_recover_hop_increment
 8808              		.thumb
 8809              		.thumb_func
 8811              	promisc_recover_hop_increment:
 8812              	.LFB39:
2271:bluetooth_rxtx.c **** 
2272:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2273:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2274:bluetooth_rxtx.c **** 
2275:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8813              		.loc 1 2275 0
 8814              		.cfi_startproc
 8815              		@ args = 0, pretend = 0, frame = 16
 8816              		@ frame_needed = 1, uses_anonymous_args = 0
 8817 0000 80B5     		push	{r7, lr}
 8818              		.cfi_def_cfa_offset 8
 8819              		.cfi_offset 7, -8
 8820              		.cfi_offset 14, -4
 8821 0002 84B0     		sub	sp, sp, #16
 8822              		.cfi_def_cfa_offset 24
 8823 0004 00AF     		add	r7, sp, #0
 8824              		.cfi_def_cfa_register 7
 8825 0006 7860     		str	r0, [r7, #4]
2276:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2277:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8826              		.loc 1 2277 0
 8827 0008 554B     		ldr	r3, .L445
 8828 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8829 000c 9BB2     		uxth	r3, r3
 8830 000e 40F66412 		movw	r2, #2404
 8831 0012 9342     		cmp	r3, r2
 8832 0014 14D1     		bne	.L439
2278:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8833              		.loc 1 2278 0
 8834 0016 534B     		ldr	r3, .L445+4
 8835 0018 1B68     		ldr	r3, [r3]
 8836 001a C3F31303 		ubfx	r3, r3, #0, #20
 8837 001e 40F63542 		movw	r2, #3125
 8838 0022 02FB03F2 		mul	r2, r2, r3
 8839 0026 504B     		ldr	r3, .L445+8
ARM GAS  /tmp/ccHz27EZ.s 			page 195


 8840 0028 1B68     		ldr	r3, [r3]
 8841 002a 1344     		add	r3, r3, r2
 8842 002c 4F4A     		ldr	r2, .L445+12
 8843 002e 1360     		str	r3, [r2]
2279:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8844              		.loc 1 2279 0
 8845 0030 4F4B     		ldr	r3, .L445+16
 8846 0032 40F66612 		movw	r2, #2406
 8847 0036 1A80     		strh	r2, [r3]	@ movhi
2280:bluetooth_rxtx.c **** 		do_hop = 1;
 8848              		.loc 1 2280 0
 8849 0038 4E4B     		ldr	r3, .L445+20
 8850 003a 0122     		movs	r2, #1
 8851 003c 1A70     		strb	r2, [r3]
 8852 003e 8BE0     		b	.L438
 8853              	.L439:
2281:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8854              		.loc 1 2281 0
 8855 0040 474B     		ldr	r3, .L445
 8856 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8857 0044 9BB2     		uxth	r3, r3
 8858 0046 40F66612 		movw	r2, #2406
 8859 004a 9342     		cmp	r3, r2
 8860 004c 7DD1     		bne	.L441
 8861              	.LBB14:
2282:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8862              		.loc 1 2282 0
 8863 004e 454B     		ldr	r3, .L445+4
 8864 0050 1B68     		ldr	r3, [r3]
 8865 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8866 0056 40F63542 		movw	r2, #3125
 8867 005a 02FB03F2 		mul	r2, r2, r3
 8868 005e 424B     		ldr	r3, .L445+8
 8869 0060 1B68     		ldr	r3, [r3]
 8870 0062 1344     		add	r3, r3, r2
 8871 0064 FB60     		str	r3, [r7, #12]
2283:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 8872              		.loc 1 2283 0
 8873 0066 414B     		ldr	r3, .L445+12
 8874 0068 1B68     		ldr	r3, [r3]
 8875 006a FA68     		ldr	r2, [r7, #12]
 8876 006c 9A42     		cmp	r2, r3
 8877 006e 05D2     		bcs	.L442
2284:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8878              		.loc 1 2284 0
 8879 0070 FB68     		ldr	r3, [r7, #12]
 8880 0072 03F14343 		add	r3, r3, #-1023410176
 8881 0076 03F5A003 		add	r3, r3, #5242880
 8882 007a FB60     		str	r3, [r7, #12]
 8883              	.L442:
2285:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2286:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8884              		.loc 1 2286 0
 8885 007c 3B4B     		ldr	r3, .L445+12
 8886 007e 1B68     		ldr	r3, [r3]
 8887 0080 FA68     		ldr	r2, [r7, #12]
 8888 0082 D21A     		subs	r2, r2, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 196


 8889 0084 3C4B     		ldr	r3, .L445+24
 8890 0086 DB8B     		ldrh	r3, [r3, #30]
 8891 0088 1946     		mov	r1, r3
 8892 008a 43F2D403 		movw	r3, #12500
 8893 008e 03FB01F3 		mul	r3, r3, r1
 8894 0092 D90F     		lsrs	r1, r3, #31
 8895 0094 0B44     		add	r3, r3, r1
 8896 0096 5B10     		asrs	r3, r3, #1
 8897 0098 1344     		add	r3, r3, r2
 8898 009a 374A     		ldr	r2, .L445+24
 8899 009c D28B     		ldrh	r2, [r2, #30]
 8900 009e 1146     		mov	r1, r2
 8901 00a0 43F2D402 		movw	r2, #12500
 8902 00a4 02FB01F2 		mul	r2, r2, r1
 8903 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8904 00ac BB60     		str	r3, [r7, #8]
2287:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2288:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8905              		.loc 1 2288 0
 8906 00ae BB68     		ldr	r3, [r7, #8]
 8907 00b0 242B     		cmp	r3, #36
 8908 00b2 42D8     		bhi	.L443
2289:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2290:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8909              		.loc 1 2290 0
 8910 00b4 314A     		ldr	r2, .L445+28
 8911 00b6 BB68     		ldr	r3, [r7, #8]
 8912 00b8 1344     		add	r3, r3, r2
 8913 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8914 00bc 2E4B     		ldr	r3, .L445+24
 8915 00be 9A75     		strb	r2, [r3, #22]
2291:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8916              		.loc 1 2291 0
 8917 00c0 2D4B     		ldr	r3, .L445+24
 8918 00c2 DB8B     		ldrh	r3, [r3, #30]
 8919 00c4 5B08     		lsrs	r3, r3, #1
 8920 00c6 9AB2     		uxth	r2, r3
 8921 00c8 2B4B     		ldr	r3, .L445+24
 8922 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2292:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8923              		.loc 1 2292 0
 8924 00cc 2A4B     		ldr	r3, .L445+24
 8925 00ce 0022     		movs	r2, #0
 8926 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2293:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8927              		.loc 1 2293 0
 8928 00d2 294B     		ldr	r3, .L445+24
 8929 00d4 0022     		movs	r2, #0
 8930 00d6 9A61     		str	r2, [r3, #24]
2294:bluetooth_rxtx.c **** 			do_hop = 0;
 8931              		.loc 1 2294 0
 8932 00d8 264B     		ldr	r3, .L445+20
 8933 00da 0022     		movs	r2, #0
 8934 00dc 1A70     		strb	r2, [r3]
2295:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2296:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8935              		.loc 1 2296 0
ARM GAS  /tmp/ccHz27EZ.s 			page 197


 8936 00de 264B     		ldr	r3, .L445+24
 8937 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8938 00e2 5A1C     		adds	r2, r3, #1
 8939 00e4 264B     		ldr	r3, .L445+32
 8940 00e6 82FB0301 		smull	r0, r1, r2, r3
 8941 00ea 5318     		adds	r3, r2, r1
 8942 00ec 5911     		asrs	r1, r3, #5
 8943 00ee D317     		asrs	r3, r2, #31
 8944 00f0 C91A     		subs	r1, r1, r3
 8945 00f2 0B46     		mov	r3, r1
 8946 00f4 DB00     		lsls	r3, r3, #3
 8947 00f6 0B44     		add	r3, r3, r1
 8948 00f8 9B00     		lsls	r3, r3, #2
 8949 00fa 0B44     		add	r3, r3, r1
 8950 00fc D11A     		subs	r1, r2, r3
 8951 00fe CAB2     		uxtb	r2, r1
 8952 0100 1D4B     		ldr	r3, .L445+24
 8953 0102 5A75     		strb	r2, [r3, #21]
2297:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8954              		.loc 1 2297 0
 8955 0104 1C4B     		ldr	r3, .L445+24
 8956 0106 0322     		movs	r2, #3
 8957 0108 1A75     		strb	r2, [r3, #20]
2298:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8958              		.loc 1 2298 0
 8959 010a 1B4B     		ldr	r3, .L445+24
 8960 010c 0022     		movs	r2, #0
 8961 010e 1A61     		str	r2, [r3, #16]
2299:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8962              		.loc 1 2299 0
 8963 0110 1C4B     		ldr	r3, .L445+36
 8964 0112 0322     		movs	r2, #3
 8965 0114 1A70     		strb	r2, [r3]
2300:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8966              		.loc 1 2300 0
 8967 0116 1C4B     		ldr	r3, .L445+40
 8968 0118 1C4A     		ldr	r2, .L445+44
 8969 011a 1A60     		str	r2, [r3]
2301:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8970              		.loc 1 2301 0
 8971 011c 0320     		movs	r0, #3
 8972 011e 1C49     		ldr	r1, .L445+48
 8973 0120 0122     		movs	r2, #1
 8974 0122 FFF7FEFF 		bl	le_promisc_state
2302:bluetooth_rxtx.c **** 
2303:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8975              		.loc 1 2303 0
 8976 0126 1B4B     		ldr	r3, .L445+52
 8977 0128 1B78     		ldrb	r3, [r3]
 8978 012a DBB2     		uxtb	r3, r3
 8979 012c 002B     		cmp	r3, #0
 8980 012e 03D0     		beq	.L444
2304:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 8981              		.loc 1 2304 0
 8982 0130 194B     		ldr	r3, .L445+56
 8983 0132 2822     		movs	r2, #40
 8984 0134 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 198


2305:bluetooth_rxtx.c **** 
2306:bluetooth_rxtx.c **** 			return;
 8985              		.loc 1 2306 0
 8986 0136 0FE0     		b	.L438
 8987              	.L444:
 8988 0138 0EE0     		b	.L438
 8989              	.L443:
2307:bluetooth_rxtx.c **** 		}
2308:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8990              		.loc 1 2308 0
 8991 013a 0D4B     		ldr	r3, .L445+16
 8992 013c 40F66412 		movw	r2, #2404
 8993 0140 1A80     		strh	r2, [r3]	@ movhi
2309:bluetooth_rxtx.c **** 		do_hop = 1;
 8994              		.loc 1 2309 0
 8995 0142 0C4B     		ldr	r3, .L445+20
 8996 0144 0122     		movs	r2, #1
 8997 0146 1A70     		strb	r2, [r3]
 8998              	.LBE14:
 8999 0148 06E0     		b	.L438
 9000              	.L441:
2310:bluetooth_rxtx.c **** 	}
2311:bluetooth_rxtx.c **** 	else {
2312:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 9001              		.loc 1 2312 0
 9002 014a 094B     		ldr	r3, .L445+16
 9003 014c 40F66412 		movw	r2, #2404
 9004 0150 1A80     		strh	r2, [r3]	@ movhi
2313:bluetooth_rxtx.c **** 		do_hop = 1;
 9005              		.loc 1 2313 0
 9006 0152 084B     		ldr	r3, .L445+20
 9007 0154 0122     		movs	r2, #1
 9008 0156 1A70     		strb	r2, [r3]
 9009              	.L438:
2314:bluetooth_rxtx.c **** 	}
2315:bluetooth_rxtx.c **** }
 9010              		.loc 1 2315 0
 9011 0158 1037     		adds	r7, r7, #16
 9012              		.cfi_def_cfa_offset 8
 9013 015a BD46     		mov	sp, r7
 9014              		.cfi_def_cfa_register 13
 9015              		@ sp needed
 9016 015c 80BD     		pop	{r7, pc}
 9017              	.L446:
 9018 015e 00BF     		.align	2
 9019              	.L445:
 9020 0160 00000000 		.word	channel
 9021 0164 00000000 		.word	clkn
 9022 0168 08400040 		.word	1073758216
 9023 016c D8000000 		.word	first_ts.4803
 9024 0170 00000000 		.word	hop_direct_channel
 9025 0174 00000000 		.word	do_hop
 9026 0178 00000000 		.word	le
 9027 017c D4000000 		.word	hop_interval_lut
 9028 0180 A7C867DD 		.word	-580400985
 9029 0184 00000000 		.word	hop_mode
 9030 0188 00000000 		.word	packet_cb
ARM GAS  /tmp/ccHz27EZ.s 			page 199


 9031 018c 00000000 		.word	connection_follow_cb
 9032 0190 16000000 		.word	le+22
 9033 0194 00000000 		.word	jam_mode
 9034 0198 00000000 		.word	le_jam_count
 9035              		.cfi_endproc
 9036              	.LFE39:
 9038              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 9039              		.align	2
 9040              		.global	promisc_recover_hop_interval
 9041              		.thumb
 9042              		.thumb_func
 9044              	promisc_recover_hop_interval:
 9045              	.LFB40:
2316:bluetooth_rxtx.c **** 
2317:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 9046              		.loc 1 2317 0
 9047              		.cfi_startproc
 9048              		@ args = 0, pretend = 0, frame = 24
 9049              		@ frame_needed = 1, uses_anonymous_args = 0
 9050 0000 80B5     		push	{r7, lr}
 9051              		.cfi_def_cfa_offset 8
 9052              		.cfi_offset 7, -8
 9053              		.cfi_offset 14, -4
 9054 0002 86B0     		sub	sp, sp, #24
 9055              		.cfi_def_cfa_offset 32
 9056 0004 00AF     		add	r7, sp, #0
 9057              		.cfi_def_cfa_register 7
 9058 0006 7860     		str	r0, [r7, #4]
2318:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2319:bluetooth_rxtx.c **** 
2320:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 9059              		.loc 1 2320 0
 9060 0008 334B     		ldr	r3, .L455
 9061 000a 1B68     		ldr	r3, [r3]
 9062 000c C3F31303 		ubfx	r3, r3, #0, #20
 9063 0010 40F63542 		movw	r2, #3125
 9064 0014 02FB03F2 		mul	r2, r2, r3
 9065 0018 304B     		ldr	r3, .L455+4
 9066 001a 1B68     		ldr	r3, [r3]
 9067 001c 1344     		add	r3, r3, r2
 9068 001e 7B61     		str	r3, [r7, #20]
2321:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 9069              		.loc 1 2321 0
 9070 0020 2F4B     		ldr	r3, .L455+8
 9071 0022 1B68     		ldr	r3, [r3]
 9072 0024 7A69     		ldr	r2, [r7, #20]
 9073 0026 9A42     		cmp	r2, r3
 9074 0028 03D2     		bcs	.L448
2322:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 9075              		.loc 1 2322 0
 9076 002a 7A69     		ldr	r2, [r7, #20]
 9077 002c 2D4B     		ldr	r3, .L455+12
 9078 002e 1344     		add	r3, r3, r2
 9079 0030 7B61     		str	r3, [r7, #20]
 9080              	.L448:
2323:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 9081              		.loc 1 2323 0
ARM GAS  /tmp/ccHz27EZ.s 			page 200


 9082 0032 2B4B     		ldr	r3, .L455+8
 9083 0034 1B68     		ldr	r3, [r3]
 9084 0036 7A69     		ldr	r2, [r7, #20]
 9085 0038 D31A     		subs	r3, r2, r3
 9086 003a 3B61     		str	r3, [r7, #16]
2324:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2325:bluetooth_rxtx.c **** 
2326:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2327:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 9087              		.loc 1 2327 0
 9088 003c 3B69     		ldr	r3, [r7, #16]
 9089 003e 46F2A712 		movw	r2, #24999
 9090 0042 9342     		cmp	r3, r2
 9091 0044 00D8     		bhi	.L449
2328:bluetooth_rxtx.c **** 		return;
 9092              		.loc 1 2328 0
 9093 0046 43E0     		b	.L447
 9094              	.L449:
2329:bluetooth_rxtx.c **** 
2330:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 9095              		.loc 1 2330 0
 9096 0048 274B     		ldr	r3, .L455+16
 9097 004a D3F80021 		ldr	r2, [r3, #256]
 9098 004e 3B69     		ldr	r3, [r7, #16]
 9099 0050 9A42     		cmp	r2, r3
 9100 0052 03D9     		bls	.L451
2331:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 9101              		.loc 1 2331 0
 9102 0054 244A     		ldr	r2, .L455+16
 9103 0056 3B69     		ldr	r3, [r7, #16]
 9104 0058 C2F80031 		str	r3, [r2, #256]
 9105              	.L451:
2332:bluetooth_rxtx.c **** 
2333:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 9106              		.loc 1 2333 0
 9107 005c 224B     		ldr	r3, .L455+16
 9108 005e D3F80031 		ldr	r3, [r3, #256]
 9109 0062 03F56133 		add	r3, r3, #230400
 9110 0066 03F25233 		addw	r3, r3, #850
 9111 006a 204A     		ldr	r2, .L455+20
 9112 006c A2FB0323 		umull	r2, r3, r2, r3
 9113 0070 9B0C     		lsrs	r3, r3, #18
 9114 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2334:bluetooth_rxtx.c **** 
2335:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 9115              		.loc 1 2335 0
 9116 0074 1E4B     		ldr	r3, .L455+24
 9117 0076 DB8B     		ldrh	r3, [r3, #30]
 9118 0078 FA89     		ldrh	r2, [r7, #14]
 9119 007a 9A42     		cmp	r2, r3
 9120 007c 1ED1     		bne	.L452
2336:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2337:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 9121              		.loc 1 2337 0
 9122 007e 1A4B     		ldr	r3, .L455+16
 9123 0080 D3F80431 		ldr	r3, [r3, #260]
 9124 0084 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccHz27EZ.s 			page 201


 9125 0086 184A     		ldr	r2, .L455+16
 9126 0088 C2F80431 		str	r3, [r2, #260]
2338:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 9127              		.loc 1 2338 0
 9128 008c 164B     		ldr	r3, .L455+16
 9129 008e D3F80431 		ldr	r3, [r3, #260]
 9130 0092 052B     		cmp	r3, #5
 9131 0094 19D1     		bne	.L454
2339:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 9132              		.loc 1 2339 0
 9133 0096 174B     		ldr	r3, .L455+28
 9134 0098 174A     		ldr	r2, .L455+32
 9135 009a 1A60     		str	r2, [r3]
2340:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 9136              		.loc 1 2340 0
 9137 009c 174B     		ldr	r3, .L455+36
 9138 009e 40F66412 		movw	r2, #2404
 9139 00a2 1A80     		strh	r2, [r3]	@ movhi
2341:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 9140              		.loc 1 2341 0
 9141 00a4 164B     		ldr	r3, .L455+40
 9142 00a6 0422     		movs	r2, #4
 9143 00a8 1A70     		strb	r2, [r3]
2342:bluetooth_rxtx.c **** 			do_hop = 1;
 9144              		.loc 1 2342 0
 9145 00aa 164B     		ldr	r3, .L455+44
 9146 00ac 0122     		movs	r2, #1
 9147 00ae 1A70     		strb	r2, [r3]
2343:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 9148              		.loc 1 2343 0
 9149 00b0 0220     		movs	r0, #2
 9150 00b2 1549     		ldr	r1, .L455+48
 9151 00b4 0222     		movs	r2, #2
 9152 00b6 FFF7FEFF 		bl	le_promisc_state
 9153 00ba 06E0     		b	.L454
 9154              	.L452:
2344:bluetooth_rxtx.c **** 		}
2345:bluetooth_rxtx.c **** 	} else {
2346:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 9155              		.loc 1 2346 0
 9156 00bc 0C4A     		ldr	r2, .L455+24
 9157 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 9158 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2347:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 9159              		.loc 1 2347 0
 9160 00c2 094B     		ldr	r3, .L455+16
 9161 00c4 0022     		movs	r2, #0
 9162 00c6 C3F80421 		str	r2, [r3, #260]
 9163              	.L454:
2348:bluetooth_rxtx.c **** 	}
2349:bluetooth_rxtx.c **** 
2350:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 9164              		.loc 1 2350 0
 9165 00ca 054A     		ldr	r2, .L455+8
 9166 00cc 7B69     		ldr	r3, [r7, #20]
 9167 00ce 1360     		str	r3, [r2]
 9168              	.L447:
ARM GAS  /tmp/ccHz27EZ.s 			page 202


2351:bluetooth_rxtx.c **** }
 9169              		.loc 1 2351 0
 9170 00d0 1837     		adds	r7, r7, #24
 9171              		.cfi_def_cfa_offset 8
 9172 00d2 BD46     		mov	sp, r7
 9173              		.cfi_def_cfa_register 13
 9174              		@ sp needed
 9175 00d4 80BD     		pop	{r7, pc}
 9176              	.L456:
 9177 00d6 00BF     		.align	2
 9178              	.L455:
 9179 00d8 00000000 		.word	clkn
 9180 00dc 08400040 		.word	1073758216
 9181 00e0 DC000000 		.word	prev_clk.4809
 9182 00e4 C0ABC6C2 		.word	-1027167296
 9183 00e8 00000000 		.word	le_promisc
 9184 00ec C1A91991 		.word	-1860589119
 9185 00f0 00000000 		.word	le
 9186 00f4 00000000 		.word	packet_cb
 9187 00f8 00000000 		.word	promisc_recover_hop_increment
 9188 00fc 00000000 		.word	hop_direct_channel
 9189 0100 00000000 		.word	hop_mode
 9190 0104 00000000 		.word	do_hop
 9191 0108 1E000000 		.word	le+30
 9192              		.cfi_endproc
 9193              	.LFE40:
 9195              		.section	.text.promisc_follow_cb,"ax",%progbits
 9196              		.align	2
 9197              		.global	promisc_follow_cb
 9198              		.thumb
 9199              		.thumb_func
 9201              	promisc_follow_cb:
 9202              	.LFB41:
2352:bluetooth_rxtx.c **** 
2353:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 9203              		.loc 1 2353 0
 9204              		.cfi_startproc
 9205              		@ args = 0, pretend = 0, frame = 16
 9206              		@ frame_needed = 1, uses_anonymous_args = 0
 9207 0000 80B5     		push	{r7, lr}
 9208              		.cfi_def_cfa_offset 8
 9209              		.cfi_offset 7, -8
 9210              		.cfi_offset 14, -4
 9211 0002 84B0     		sub	sp, sp, #16
 9212              		.cfi_def_cfa_offset 24
 9213 0004 00AF     		add	r7, sp, #0
 9214              		.cfi_def_cfa_register 7
 9215 0006 7860     		str	r0, [r7, #4]
2354:bluetooth_rxtx.c **** 	int i;
2355:bluetooth_rxtx.c **** 
2356:bluetooth_rxtx.c **** 	// get the CRCInit
2357:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 9216              		.loc 1 2357 0
 9217 0008 284B     		ldr	r3, .L461
 9218 000a 1B69     		ldr	r3, [r3, #16]
 9219 000c 002B     		cmp	r3, #0
 9220 000e 49D1     		bne	.L457
ARM GAS  /tmp/ccHz27EZ.s 			page 203


 9221              		.loc 1 2357 0 is_stmt 0 discriminator 1
 9222 0010 7B68     		ldr	r3, [r7, #4]
 9223 0012 0433     		adds	r3, r3, #4
 9224 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9225 0016 012B     		cmp	r3, #1
 9226 0018 44D1     		bne	.L457
 9227              		.loc 1 2357 0 discriminator 2
 9228 001a 7B68     		ldr	r3, [r7, #4]
 9229 001c 0533     		adds	r3, r3, #5
 9230 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9231 0020 002B     		cmp	r3, #0
 9232 0022 3FD1     		bne	.L457
 9233              	.LBB15:
2358:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 9234              		.loc 1 2358 0 is_stmt 1
 9235 0024 7B68     		ldr	r3, [r7, #4]
 9236 0026 0833     		adds	r3, r3, #8
 9237 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9238 002a 1A04     		lsls	r2, r3, #16
 9239 002c 7B68     		ldr	r3, [r7, #4]
 9240 002e 0733     		adds	r3, r3, #7
 9241 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9242 0032 1B02     		lsls	r3, r3, #8
 9243 0034 1343     		orrs	r3, r3, r2
 9244 0036 7A68     		ldr	r2, [r7, #4]
 9245 0038 0632     		adds	r2, r2, #6
 9246 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9247 003c 1343     		orrs	r3, r3, r2
 9248 003e BB60     		str	r3, [r7, #8]
2359:bluetooth_rxtx.c **** 
2360:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 9249              		.loc 1 2360 0
 9250 0040 7B68     		ldr	r3, [r7, #4]
 9251 0042 0433     		adds	r3, r3, #4
 9252 0044 B868     		ldr	r0, [r7, #8]
 9253 0046 1946     		mov	r1, r3
 9254 0048 0222     		movs	r2, #2
 9255 004a FFF7FEFF 		bl	btle_reverse_crc
 9256 004e 0246     		mov	r2, r0
 9257 0050 164B     		ldr	r3, .L461
 9258 0052 9A60     		str	r2, [r3, #8]
2361:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 9259              		.loc 1 2361 0
 9260 0054 154B     		ldr	r3, .L461
 9261 0056 0022     		movs	r2, #0
 9262 0058 DA60     		str	r2, [r3, #12]
2362:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9263              		.loc 1 2362 0
 9264 005a 0023     		movs	r3, #0
 9265 005c FB60     		str	r3, [r7, #12]
 9266 005e 13E0     		b	.L459
 9267              	.L460:
2363:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 9268              		.loc 1 2363 0 discriminator 3
 9269 0060 124B     		ldr	r3, .L461
 9270 0062 DA68     		ldr	r2, [r3, #12]
 9271 0064 114B     		ldr	r3, .L461
ARM GAS  /tmp/ccHz27EZ.s 			page 204


 9272 0066 9968     		ldr	r1, [r3, #8]
 9273 0068 FB68     		ldr	r3, [r7, #12]
 9274 006a 21FA03F3 		lsr	r3, r1, r3
 9275 006e 03F00101 		and	r1, r3, #1
 9276 0072 FB68     		ldr	r3, [r7, #12]
 9277 0074 C3F11703 		rsb	r3, r3, #23
 9278 0078 01FA03F3 		lsl	r3, r1, r3
 9279 007c 1343     		orrs	r3, r3, r2
 9280 007e 0B4A     		ldr	r2, .L461
 9281 0080 D360     		str	r3, [r2, #12]
2362:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9282              		.loc 1 2362 0 discriminator 3
 9283 0082 FB68     		ldr	r3, [r7, #12]
 9284 0084 0133     		adds	r3, r3, #1
 9285 0086 FB60     		str	r3, [r7, #12]
 9286              	.L459:
2362:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9287              		.loc 1 2362 0 is_stmt 0 discriminator 1
 9288 0088 FB68     		ldr	r3, [r7, #12]
 9289 008a 172B     		cmp	r3, #23
 9290 008c E8DD     		ble	.L460
2364:bluetooth_rxtx.c **** 
2365:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 9291              		.loc 1 2365 0 is_stmt 1
 9292 008e 074B     		ldr	r3, .L461
 9293 0090 0122     		movs	r2, #1
 9294 0092 1A61     		str	r2, [r3, #16]
2366:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 9295              		.loc 1 2366 0
 9296 0094 064B     		ldr	r3, .L461+4
 9297 0096 074A     		ldr	r2, .L461+8
 9298 0098 1A60     		str	r2, [r3]
2367:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 9299              		.loc 1 2367 0
 9300 009a 0120     		movs	r0, #1
 9301 009c 0649     		ldr	r1, .L461+12
 9302 009e 0322     		movs	r2, #3
 9303 00a0 FFF7FEFF 		bl	le_promisc_state
 9304              	.L457:
 9305              	.LBE15:
2368:bluetooth_rxtx.c **** 	}
2369:bluetooth_rxtx.c **** }
 9306              		.loc 1 2369 0
 9307 00a4 1037     		adds	r7, r7, #16
 9308              		.cfi_def_cfa_offset 8
 9309 00a6 BD46     		mov	sp, r7
 9310              		.cfi_def_cfa_register 13
 9311              		@ sp needed
 9312 00a8 80BD     		pop	{r7, pc}
 9313              	.L462:
 9314 00aa 00BF     		.align	2
 9315              	.L461:
 9316 00ac 00000000 		.word	le
 9317 00b0 00000000 		.word	packet_cb
 9318 00b4 00000000 		.word	promisc_recover_hop_interval
 9319 00b8 08000000 		.word	le+8
 9320              		.cfi_endproc
ARM GAS  /tmp/ccHz27EZ.s 			page 205


 9321              	.LFE41:
 9323              		.section	.text.see_aa,"ax",%progbits
 9324              		.align	2
 9325              		.global	see_aa
 9326              		.thumb
 9327              		.thumb_func
 9329              	see_aa:
 9330              	.LFB42:
2370:bluetooth_rxtx.c **** 
2371:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2372:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 9331              		.loc 1 2372 0
 9332              		.cfi_startproc
 9333              		@ args = 0, pretend = 0, frame = 24
 9334              		@ frame_needed = 1, uses_anonymous_args = 0
 9335              		@ link register save eliminated.
 9336 0000 80B4     		push	{r7}
 9337              		.cfi_def_cfa_offset 4
 9338              		.cfi_offset 7, -4
 9339 0002 87B0     		sub	sp, sp, #28
 9340              		.cfi_def_cfa_offset 32
 9341 0004 00AF     		add	r7, sp, #0
 9342              		.cfi_def_cfa_register 7
 9343 0006 7860     		str	r0, [r7, #4]
2373:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 9344              		.loc 1 2373 0
 9345 0008 4FF0FF33 		mov	r3, #-1
 9346 000c 3B61     		str	r3, [r7, #16]
 9347 000e 4FF0FF33 		mov	r3, #-1
 9348 0012 FB60     		str	r3, [r7, #12]
2374:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9349              		.loc 1 2374 0
 9350 0014 0023     		movs	r3, #0
 9351 0016 7B61     		str	r3, [r7, #20]
 9352 0018 15E0     		b	.L464
 9353              	.L467:
2375:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9354              		.loc 1 2375 0
 9355 001a 224A     		ldr	r2, .L472
 9356 001c 7B69     		ldr	r3, [r7, #20]
 9357 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 9358 0022 7B68     		ldr	r3, [r7, #4]
 9359 0024 9A42     		cmp	r2, r3
 9360 0026 0BD1     		bne	.L465
2376:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 9361              		.loc 1 2376 0
 9362 0028 1E4A     		ldr	r2, .L472
 9363 002a 7B69     		ldr	r3, [r7, #20]
 9364 002c DB00     		lsls	r3, r3, #3
 9365 002e 1344     		add	r3, r3, r2
 9366 0030 5B68     		ldr	r3, [r3, #4]
 9367 0032 5A1C     		adds	r2, r3, #1
 9368 0034 1B49     		ldr	r1, .L472
 9369 0036 7B69     		ldr	r3, [r7, #20]
 9370 0038 DB00     		lsls	r3, r3, #3
 9371 003a 0B44     		add	r3, r3, r1
 9372 003c 5A60     		str	r2, [r3, #4]
ARM GAS  /tmp/ccHz27EZ.s 			page 206


2377:bluetooth_rxtx.c **** 			return;
 9373              		.loc 1 2377 0
 9374 003e 2CE0     		b	.L463
 9375              	.L465:
2374:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9376              		.loc 1 2374 0 discriminator 2
 9377 0040 7B69     		ldr	r3, [r7, #20]
 9378 0042 0133     		adds	r3, r3, #1
 9379 0044 7B61     		str	r3, [r7, #20]
 9380              	.L464:
2374:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9381              		.loc 1 2374 0 is_stmt 0 discriminator 1
 9382 0046 7B69     		ldr	r3, [r7, #20]
 9383 0048 1F2B     		cmp	r3, #31
 9384 004a E6DD     		ble	.L467
2378:bluetooth_rxtx.c **** 		}
2379:bluetooth_rxtx.c **** 
2380:bluetooth_rxtx.c **** 	// evict someone
2381:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9385              		.loc 1 2381 0 is_stmt 1
 9386 004c 0023     		movs	r3, #0
 9387 004e 7B61     		str	r3, [r7, #20]
 9388 0050 15E0     		b	.L468
 9389              	.L471:
2382:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9390              		.loc 1 2382 0
 9391 0052 144A     		ldr	r2, .L472
 9392 0054 7B69     		ldr	r3, [r7, #20]
 9393 0056 DB00     		lsls	r3, r3, #3
 9394 0058 1344     		add	r3, r3, r2
 9395 005a 5A68     		ldr	r2, [r3, #4]
 9396 005c 3B69     		ldr	r3, [r7, #16]
 9397 005e 9A42     		cmp	r2, r3
 9398 0060 02DB     		blt	.L469
 9399              		.loc 1 2382 0 is_stmt 0 discriminator 1
 9400 0062 3B69     		ldr	r3, [r7, #16]
 9401 0064 002B     		cmp	r3, #0
 9402 0066 07DA     		bge	.L470
 9403              	.L469:
2383:bluetooth_rxtx.c **** 			killme = i;
 9404              		.loc 1 2383 0 is_stmt 1
 9405 0068 7B69     		ldr	r3, [r7, #20]
 9406 006a FB60     		str	r3, [r7, #12]
2384:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 9407              		.loc 1 2384 0
 9408 006c 0D4A     		ldr	r2, .L472
 9409 006e 7B69     		ldr	r3, [r7, #20]
 9410 0070 DB00     		lsls	r3, r3, #3
 9411 0072 1344     		add	r3, r3, r2
 9412 0074 5B68     		ldr	r3, [r3, #4]
 9413 0076 3B61     		str	r3, [r7, #16]
 9414              	.L470:
2381:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9415              		.loc 1 2381 0 discriminator 2
 9416 0078 7B69     		ldr	r3, [r7, #20]
 9417 007a 0133     		adds	r3, r3, #1
 9418 007c 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccHz27EZ.s 			page 207


 9419              	.L468:
2381:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9420              		.loc 1 2381 0 is_stmt 0 discriminator 1
 9421 007e 7B69     		ldr	r3, [r7, #20]
 9422 0080 1F2B     		cmp	r3, #31
 9423 0082 E6DD     		ble	.L471
2385:bluetooth_rxtx.c **** 		}
2386:bluetooth_rxtx.c **** 
2387:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 9424              		.loc 1 2387 0 is_stmt 1
 9425 0084 0749     		ldr	r1, .L472
 9426 0086 FB68     		ldr	r3, [r7, #12]
 9427 0088 7A68     		ldr	r2, [r7, #4]
 9428 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2388:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 9429              		.loc 1 2388 0
 9430 008e 054A     		ldr	r2, .L472
 9431 0090 FB68     		ldr	r3, [r7, #12]
 9432 0092 DB00     		lsls	r3, r3, #3
 9433 0094 1344     		add	r3, r3, r2
 9434 0096 0122     		movs	r2, #1
 9435 0098 5A60     		str	r2, [r3, #4]
 9436              	.L463:
2389:bluetooth_rxtx.c **** }
 9437              		.loc 1 2389 0
 9438 009a 1C37     		adds	r7, r7, #28
 9439              		.cfi_def_cfa_offset 4
 9440 009c BD46     		mov	sp, r7
 9441              		.cfi_def_cfa_register 13
 9442              		@ sp needed
 9443 009e 5DF8047B 		ldr	r7, [sp], #4
 9444              		.cfi_restore 7
 9445              		.cfi_def_cfa_offset 0
 9446 00a2 7047     		bx	lr
 9447              	.L473:
 9448              		.align	2
 9449              	.L472:
 9450 00a4 00000000 		.word	le_promisc
 9451              		.cfi_endproc
 9452              	.LFE42:
 9454              		.section	.rodata
 9455 08eb 00       		.align	2
 9456              	.LC0:
 9457 08ec 01000000 		.word	1
 9458 08f0 01000000 		.word	1
 9459 08f4 01000000 		.word	1
 9460 08f8 01000000 		.word	1
 9461              		.section	.text.cb_le_promisc,"ax",%progbits
 9462              		.align	2
 9463              		.global	cb_le_promisc
 9464              		.thumb
 9465              		.thumb_func
 9467              	cb_le_promisc:
 9468              	.LFB43:
2390:bluetooth_rxtx.c **** 
2391:bluetooth_rxtx.c **** /* le promiscuous mode */
2392:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
ARM GAS  /tmp/ccHz27EZ.s 			page 208


 9469              		.loc 1 2392 0
 9470              		.cfi_startproc
 9471              		@ args = 0, pretend = 0, frame = 128
 9472              		@ frame_needed = 1, uses_anonymous_args = 0
 9473 0000 90B5     		push	{r4, r7, lr}
 9474              		.cfi_def_cfa_offset 12
 9475              		.cfi_offset 4, -12
 9476              		.cfi_offset 7, -8
 9477              		.cfi_offset 14, -4
 9478 0002 A1B0     		sub	sp, sp, #132
 9479              		.cfi_def_cfa_offset 144
 9480 0004 00AF     		add	r7, sp, #0
 9481              		.cfi_def_cfa_register 7
 9482 0006 7860     		str	r0, [r7, #4]
2393:bluetooth_rxtx.c **** 	int i, j, k;
2394:bluetooth_rxtx.c **** 	int idx;
2395:bluetooth_rxtx.c **** 
2396:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2397:bluetooth_rxtx.c **** 	char desired[4][16] = {
 9483              		.loc 1 2397 0
 9484 0008 07F11C03 		add	r3, r7, #28
 9485 000c 4022     		movs	r2, #64
 9486 000e 1846     		mov	r0, r3
 9487 0010 0021     		movs	r1, #0
 9488 0012 FFF7FEFF 		bl	memset
 9489 0016 0123     		movs	r3, #1
 9490 0018 3B77     		strb	r3, [r7, #28]
 9491 001a 0123     		movs	r3, #1
 9492 001c 87F82C30 		strb	r3, [r7, #44]
 9493 0020 0123     		movs	r3, #1
 9494 0022 87F82F30 		strb	r3, [r7, #47]
 9495 0026 0123     		movs	r3, #1
 9496 0028 87F83C30 		strb	r3, [r7, #60]
 9497 002c 0123     		movs	r3, #1
 9498 002e 87F83E30 		strb	r3, [r7, #62]
 9499 0032 0123     		movs	r3, #1
 9500 0034 87F84C30 		strb	r3, [r7, #76]
 9501 0038 0123     		movs	r3, #1
 9502 003a 87F84E30 		strb	r3, [r7, #78]
 9503 003e 0123     		movs	r3, #1
 9504 0040 87F84F30 		strb	r3, [r7, #79]
2398:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2399:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2400:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2401:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2402:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2403:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2404:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2405:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2406:bluetooth_rxtx.c **** 	};
2407:bluetooth_rxtx.c **** 
2408:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 9505              		.loc 1 2408 0
 9506 0044 0023     		movs	r3, #0
 9507 0046 FB67     		str	r3, [r7, #124]
 9508 0048 41E0     		b	.L475
 9509              	.L478:
ARM GAS  /tmp/ccHz27EZ.s 			page 209


2409:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9510              		.loc 1 2409 0
 9511 004a A54B     		ldr	r3, .L505
 9512 004c 1B88     		ldrh	r3, [r3]	@ movhi
 9513 004e 9BB2     		uxth	r3, r3
 9514 0050 DBB2     		uxtb	r3, r3
 9515 0052 623B     		subs	r3, r3, #98
 9516 0054 DBB2     		uxtb	r3, r3
 9517 0056 1846     		mov	r0, r3
 9518 0058 FFF7FEFF 		bl	btle_channel_index
 9519 005c 0346     		mov	r3, r0
 9520 005e 1A46     		mov	r2, r3
 9521 0060 A04B     		ldr	r3, .L505+4
 9522 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9523 0064 3B67     		str	r3, [r7, #112]
2410:bluetooth_rxtx.c **** 
2411:bluetooth_rxtx.c **** 		// whiten the desired data
2412:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9524              		.loc 1 2412 0
 9525 0066 0023     		movs	r3, #0
 9526 0068 BB67     		str	r3, [r7, #120]
 9527 006a 2AE0     		b	.L476
 9528              	.L477:
2413:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9529              		.loc 1 2413 0 discriminator 3
 9530 006c FB6F     		ldr	r3, [r7, #124]
 9531 006e 1B01     		lsls	r3, r3, #4
 9532 0070 07F18002 		add	r2, r7, #128
 9533 0074 1A44     		add	r2, r2, r3
 9534 0076 BB6F     		ldr	r3, [r7, #120]
 9535 0078 1344     		add	r3, r3, r2
 9536 007a 643B     		subs	r3, r3, #100
 9537 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9538 007e 9A49     		ldr	r1, .L505+8
 9539 0080 3B6F     		ldr	r3, [r7, #112]
 9540 0082 0B44     		add	r3, r3, r1
 9541 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9542 0086 5340     		eors	r3, r3, r2
 9543 0088 D9B2     		uxtb	r1, r3
 9544 008a FB6F     		ldr	r3, [r7, #124]
 9545 008c 1B01     		lsls	r3, r3, #4
 9546 008e 07F18002 		add	r2, r7, #128
 9547 0092 1A44     		add	r2, r2, r3
 9548 0094 BB6F     		ldr	r3, [r7, #120]
 9549 0096 1344     		add	r3, r3, r2
 9550 0098 643B     		subs	r3, r3, #100
 9551 009a 0A46     		mov	r2, r1
 9552 009c 1A70     		strb	r2, [r3]
2414:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9553              		.loc 1 2414 0 discriminator 3
 9554 009e 3B6F     		ldr	r3, [r7, #112]
 9555 00a0 0133     		adds	r3, r3, #1
 9556 00a2 1946     		mov	r1, r3
 9557 00a4 914B     		ldr	r3, .L505+12
 9558 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9559 00aa C81A     		subs	r0, r1, r3
 9560 00ac 4008     		lsrs	r0, r0, #1
ARM GAS  /tmp/ccHz27EZ.s 			page 210


 9561 00ae 0344     		add	r3, r3, r0
 9562 00b0 9A09     		lsrs	r2, r3, #6
 9563 00b2 1346     		mov	r3, r2
 9564 00b4 DB01     		lsls	r3, r3, #7
 9565 00b6 9B1A     		subs	r3, r3, r2
 9566 00b8 CA1A     		subs	r2, r1, r3
 9567 00ba 3A67     		str	r2, [r7, #112]
2412:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9568              		.loc 1 2412 0 discriminator 3
 9569 00bc BB6F     		ldr	r3, [r7, #120]
 9570 00be 0133     		adds	r3, r3, #1
 9571 00c0 BB67     		str	r3, [r7, #120]
 9572              	.L476:
2412:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9573              		.loc 1 2412 0 is_stmt 0 discriminator 1
 9574 00c2 BB6F     		ldr	r3, [r7, #120]
 9575 00c4 0F2B     		cmp	r3, #15
 9576 00c6 D1DD     		ble	.L477
2408:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9577              		.loc 1 2408 0 is_stmt 1 discriminator 2
 9578 00c8 FB6F     		ldr	r3, [r7, #124]
 9579 00ca 0133     		adds	r3, r3, #1
 9580 00cc FB67     		str	r3, [r7, #124]
 9581              	.L475:
2408:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9582              		.loc 1 2408 0 is_stmt 0 discriminator 1
 9583 00ce FB6F     		ldr	r3, [r7, #124]
 9584 00d0 032B     		cmp	r3, #3
 9585 00d2 BADD     		ble	.L478
2415:bluetooth_rxtx.c **** 		}
2416:bluetooth_rxtx.c **** 	}
2417:bluetooth_rxtx.c **** 
2418:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2419:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9586              		.loc 1 2419 0 is_stmt 1
 9587 00d4 2023     		movs	r3, #32
 9588 00d6 FB67     		str	r3, [r7, #124]
 9589 00d8 D0E0     		b	.L479
 9590              	.L499:
 9591              	.LBB16:
2420:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9592              		.loc 1 2420 0
 9593 00da 854B     		ldr	r3, .L505+16
 9594 00dc 07F10C04 		add	r4, r7, #12
 9595 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9596 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2421:bluetooth_rxtx.c **** 		int matching = -1;
 9597              		.loc 1 2421 0
 9598 00e6 4FF0FF33 		mov	r3, #-1
 9599 00ea FB66     		str	r3, [r7, #108]
2422:bluetooth_rxtx.c **** 
2423:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9600              		.loc 1 2423 0
 9601 00ec 0023     		movs	r3, #0
 9602 00ee BB67     		str	r3, [r7, #120]
 9603 00f0 26E0     		b	.L480
 9604              	.L485:
ARM GAS  /tmp/ccHz27EZ.s 			page 211


2424:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9605              		.loc 1 2424 0
 9606 00f2 0023     		movs	r3, #0
 9607 00f4 7B67     		str	r3, [r7, #116]
 9608 00f6 1DE0     		b	.L481
 9609              	.L484:
2425:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9610              		.loc 1 2425 0
 9611 00f8 FA6F     		ldr	r2, [r7, #124]
 9612 00fa 7B6F     		ldr	r3, [r7, #116]
 9613 00fc 1344     		add	r3, r3, r2
 9614 00fe 1A46     		mov	r2, r3
 9615 0100 7B68     		ldr	r3, [r7, #4]
 9616 0102 1344     		add	r3, r3, r2
 9617 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9618 0106 BB6F     		ldr	r3, [r7, #120]
 9619 0108 1B01     		lsls	r3, r3, #4
 9620 010a 07F18001 		add	r1, r7, #128
 9621 010e 1944     		add	r1, r1, r3
 9622 0110 7B6F     		ldr	r3, [r7, #116]
 9623 0112 0B44     		add	r3, r3, r1
 9624 0114 643B     		subs	r3, r3, #100
 9625 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9626 0118 9A42     		cmp	r2, r3
 9627 011a 08D0     		beq	.L482
2426:bluetooth_rxtx.c **** 					ok[j] = 0;
 9628              		.loc 1 2426 0
 9629 011c BB6F     		ldr	r3, [r7, #120]
 9630 011e 9B00     		lsls	r3, r3, #2
 9631 0120 07F18002 		add	r2, r7, #128
 9632 0124 1344     		add	r3, r3, r2
 9633 0126 0022     		movs	r2, #0
 9634 0128 43F8742C 		str	r2, [r3, #-116]
2427:bluetooth_rxtx.c **** 					break;
 9635              		.loc 1 2427 0
 9636 012c 05E0     		b	.L483
 9637              	.L482:
2424:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9638              		.loc 1 2424 0 discriminator 2
 9639 012e 7B6F     		ldr	r3, [r7, #116]
 9640 0130 0133     		adds	r3, r3, #1
 9641 0132 7B67     		str	r3, [r7, #116]
 9642              	.L481:
2424:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9643              		.loc 1 2424 0 is_stmt 0 discriminator 1
 9644 0134 7B6F     		ldr	r3, [r7, #116]
 9645 0136 0F2B     		cmp	r3, #15
 9646 0138 DEDD     		ble	.L484
 9647              	.L483:
2423:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9648              		.loc 1 2423 0 is_stmt 1 discriminator 2
 9649 013a BB6F     		ldr	r3, [r7, #120]
 9650 013c 0133     		adds	r3, r3, #1
 9651 013e BB67     		str	r3, [r7, #120]
 9652              	.L480:
2423:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9653              		.loc 1 2423 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccHz27EZ.s 			page 212


 9654 0140 BB6F     		ldr	r3, [r7, #120]
 9655 0142 032B     		cmp	r3, #3
 9656 0144 D5DD     		ble	.L485
2428:bluetooth_rxtx.c **** 				}
2429:bluetooth_rxtx.c **** 			}
2430:bluetooth_rxtx.c **** 		}
2431:bluetooth_rxtx.c **** 
2432:bluetooth_rxtx.c **** 		// see if any match
2433:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9657              		.loc 1 2433 0 is_stmt 1
 9658 0146 0023     		movs	r3, #0
 9659 0148 BB67     		str	r3, [r7, #120]
 9660 014a 0EE0     		b	.L486
 9661              	.L489:
2434:bluetooth_rxtx.c **** 			if (ok[j]) {
 9662              		.loc 1 2434 0
 9663 014c BB6F     		ldr	r3, [r7, #120]
 9664 014e 9B00     		lsls	r3, r3, #2
 9665 0150 07F18002 		add	r2, r7, #128
 9666 0154 1344     		add	r3, r3, r2
 9667 0156 53F8743C 		ldr	r3, [r3, #-116]
 9668 015a 002B     		cmp	r3, #0
 9669 015c 02D0     		beq	.L487
2435:bluetooth_rxtx.c **** 				matching = j;
 9670              		.loc 1 2435 0
 9671 015e BB6F     		ldr	r3, [r7, #120]
 9672 0160 FB66     		str	r3, [r7, #108]
2436:bluetooth_rxtx.c **** 				break;
 9673              		.loc 1 2436 0
 9674 0162 05E0     		b	.L488
 9675              	.L487:
2433:bluetooth_rxtx.c **** 			if (ok[j]) {
 9676              		.loc 1 2433 0 discriminator 2
 9677 0164 BB6F     		ldr	r3, [r7, #120]
 9678 0166 0133     		adds	r3, r3, #1
 9679 0168 BB67     		str	r3, [r7, #120]
 9680              	.L486:
2433:bluetooth_rxtx.c **** 			if (ok[j]) {
 9681              		.loc 1 2433 0 is_stmt 0 discriminator 1
 9682 016a BB6F     		ldr	r3, [r7, #120]
 9683 016c 032B     		cmp	r3, #3
 9684 016e EDDD     		ble	.L489
 9685              	.L488:
2437:bluetooth_rxtx.c **** 			}
2438:bluetooth_rxtx.c **** 		}
2439:bluetooth_rxtx.c **** 
2440:bluetooth_rxtx.c **** 		// skip if no match
2441:bluetooth_rxtx.c **** 		if (matching < 0)
 9686              		.loc 1 2441 0 is_stmt 1
 9687 0170 FB6E     		ldr	r3, [r7, #108]
 9688 0172 002B     		cmp	r3, #0
 9689 0174 7FDB     		blt	.L491
2442:bluetooth_rxtx.c **** 			continue;
2443:bluetooth_rxtx.c **** 
2444:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2445:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9690              		.loc 1 2445 0
ARM GAS  /tmp/ccHz27EZ.s 			page 213


 9691 0176 5A4B     		ldr	r3, .L505
 9692 0178 1B88     		ldrh	r3, [r3]	@ movhi
 9693 017a 9BB2     		uxth	r3, r3
 9694 017c DBB2     		uxtb	r3, r3
 9695 017e 623B     		subs	r3, r3, #98
 9696 0180 DBB2     		uxtb	r3, r3
 9697 0182 1846     		mov	r0, r3
 9698 0184 FFF7FEFF 		bl	btle_channel_index
 9699 0188 0346     		mov	r3, r0
 9700 018a 1A46     		mov	r2, r3
 9701 018c 554B     		ldr	r3, .L505+4
 9702 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9703 0190 3B67     		str	r3, [r7, #112]
2446:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9704              		.loc 1 2446 0
 9705 0192 0023     		movs	r3, #0
 9706 0194 BB67     		str	r3, [r7, #120]
 9707 0196 4CE0     		b	.L492
 9708              	.L498:
 9709              	.LBB17:
2447:bluetooth_rxtx.c **** 			u8 byte = 0;
 9710              		.loc 1 2447 0
 9711 0198 0023     		movs	r3, #0
 9712 019a 87F86B30 		strb	r3, [r7, #107]
2448:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9713              		.loc 1 2448 0
 9714 019e 0023     		movs	r3, #0
 9715 01a0 7B67     		str	r3, [r7, #116]
 9716 01a2 39E0     		b	.L493
 9717              	.L497:
 9718              	.LBB18:
2449:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9719              		.loc 1 2449 0
 9720 01a4 BB6F     		ldr	r3, [r7, #120]
 9721 01a6 DA00     		lsls	r2, r3, #3
 9722 01a8 7B6F     		ldr	r3, [r7, #116]
 9723 01aa 1A44     		add	r2, r2, r3
 9724 01ac FB6F     		ldr	r3, [r7, #124]
 9725 01ae 1344     		add	r3, r3, r2
 9726 01b0 203B     		subs	r3, r3, #32
 9727 01b2 3B66     		str	r3, [r7, #96]
2450:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9728              		.loc 1 2450 0
 9729 01b4 3B6E     		ldr	r3, [r7, #96]
 9730 01b6 B3F5487F 		cmp	r3, #800
 9731 01ba 00DB     		blt	.L494
 9732 01bc 2FE0     		b	.L495
 9733              	.L494:
2451:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9734              		.loc 1 2451 0
 9735 01be 3B6E     		ldr	r3, [r7, #96]
 9736 01c0 7A68     		ldr	r2, [r7, #4]
 9737 01c2 1344     		add	r3, r3, r2
 9738 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9739 01c6 7B66     		str	r3, [r7, #100]
2452:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9740              		.loc 1 2452 0
ARM GAS  /tmp/ccHz27EZ.s 			page 214


 9741 01c8 BB6F     		ldr	r3, [r7, #120]
 9742 01ca 032B     		cmp	r3, #3
 9743 01cc 16DD     		ble	.L496
2453:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9744              		.loc 1 2453 0
 9745 01ce 464A     		ldr	r2, .L505+8
 9746 01d0 3B6F     		ldr	r3, [r7, #112]
 9747 01d2 1344     		add	r3, r3, r2
 9748 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9749 01d6 1A46     		mov	r2, r3
 9750 01d8 7B6E     		ldr	r3, [r7, #100]
 9751 01da 5340     		eors	r3, r3, r2
 9752 01dc 7B66     		str	r3, [r7, #100]
2454:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9753              		.loc 1 2454 0
 9754 01de 3B6F     		ldr	r3, [r7, #112]
 9755 01e0 0133     		adds	r3, r3, #1
 9756 01e2 1946     		mov	r1, r3
 9757 01e4 414B     		ldr	r3, .L505+12
 9758 01e6 A1FB0323 		umull	r2, r3, r1, r3
 9759 01ea C81A     		subs	r0, r1, r3
 9760 01ec 4008     		lsrs	r0, r0, #1
 9761 01ee 0344     		add	r3, r3, r0
 9762 01f0 9A09     		lsrs	r2, r3, #6
 9763 01f2 1346     		mov	r3, r2
 9764 01f4 DB01     		lsls	r3, r3, #7
 9765 01f6 9B1A     		subs	r3, r3, r2
 9766 01f8 CA1A     		subs	r2, r1, r3
 9767 01fa 3A67     		str	r2, [r7, #112]
 9768              	.L496:
2455:bluetooth_rxtx.c **** 				}
2456:bluetooth_rxtx.c **** 				byte |= bit << k;
 9769              		.loc 1 2456 0 discriminator 2
 9770 01fc 7A6E     		ldr	r2, [r7, #100]
 9771 01fe 7B6F     		ldr	r3, [r7, #116]
 9772 0200 02FA03F3 		lsl	r3, r2, r3
 9773 0204 DAB2     		uxtb	r2, r3
 9774 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9775 020a 1343     		orrs	r3, r3, r2
 9776 020c DBB2     		uxtb	r3, r3
 9777 020e 87F86B30 		strb	r3, [r7, #107]
 9778              	.LBE18:
2448:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9779              		.loc 1 2448 0 discriminator 2
 9780 0212 7B6F     		ldr	r3, [r7, #116]
 9781 0214 0133     		adds	r3, r3, #1
 9782 0216 7B67     		str	r3, [r7, #116]
 9783              	.L493:
2448:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9784              		.loc 1 2448 0 is_stmt 0 discriminator 1
 9785 0218 7B6F     		ldr	r3, [r7, #116]
 9786 021a 072B     		cmp	r3, #7
 9787 021c C2DD     		ble	.L497
 9788              	.L495:
2457:bluetooth_rxtx.c **** 			}
2458:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9789              		.loc 1 2458 0 is_stmt 1 discriminator 2
ARM GAS  /tmp/ccHz27EZ.s 			page 215


 9790 021e 354B     		ldr	r3, .L505+20
 9791 0220 1A68     		ldr	r2, [r3]
 9792 0222 BB6F     		ldr	r3, [r7, #120]
 9793 0224 1344     		add	r3, r3, r2
 9794 0226 97F86B20 		ldrb	r2, [r7, #107]
 9795 022a 1A70     		strb	r2, [r3]
 9796              	.LBE17:
2446:bluetooth_rxtx.c **** 			u8 byte = 0;
 9797              		.loc 1 2446 0 discriminator 2
 9798 022c BB6F     		ldr	r3, [r7, #120]
 9799 022e 0133     		adds	r3, r3, #1
 9800 0230 BB67     		str	r3, [r7, #120]
 9801              	.L492:
2446:bluetooth_rxtx.c **** 			u8 byte = 0;
 9802              		.loc 1 2446 0 is_stmt 0 discriminator 1
 9803 0232 BB6F     		ldr	r3, [r7, #120]
 9804 0234 092B     		cmp	r3, #9
 9805 0236 AFDD     		ble	.L498
2459:bluetooth_rxtx.c **** 		}
2460:bluetooth_rxtx.c **** 
2461:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9806              		.loc 1 2461 0 is_stmt 1
 9807 0238 2E4B     		ldr	r3, .L505+20
 9808 023a 1B68     		ldr	r3, [r3]
 9809 023c 0333     		adds	r3, r3, #3
 9810 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9811 0240 1A06     		lsls	r2, r3, #24
2462:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9812              		.loc 1 2462 0
 9813 0242 2C4B     		ldr	r3, .L505+20
 9814 0244 1B68     		ldr	r3, [r3]
 9815 0246 0233     		adds	r3, r3, #2
 9816 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9817 024a 1B04     		lsls	r3, r3, #16
2461:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9818              		.loc 1 2461 0
 9819 024c 1A43     		orrs	r2, r2, r3
2463:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9820              		.loc 1 2463 0
 9821 024e 294B     		ldr	r3, .L505+20
 9822 0250 1B68     		ldr	r3, [r3]
 9823 0252 0133     		adds	r3, r3, #1
 9824 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9825 0256 1B02     		lsls	r3, r3, #8
2462:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9826              		.loc 1 2462 0
 9827 0258 1343     		orrs	r3, r3, r2
2464:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9828              		.loc 1 2464 0
 9829 025a 264A     		ldr	r2, .L505+20
 9830 025c 1268     		ldr	r2, [r2]
 9831 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2463:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9832              		.loc 1 2463 0
 9833 0260 1343     		orrs	r3, r3, r2
2461:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9834              		.loc 1 2461 0
ARM GAS  /tmp/ccHz27EZ.s 			page 216


 9835 0262 FB65     		str	r3, [r7, #92]
2465:bluetooth_rxtx.c **** 		see_aa(aa);
 9836              		.loc 1 2465 0
 9837 0264 F86D     		ldr	r0, [r7, #92]
 9838 0266 FFF7FEFF 		bl	see_aa
2466:bluetooth_rxtx.c **** 
2467:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 9839              		.loc 1 2467 0
 9840 026a 224B     		ldr	r3, .L505+20
 9841 026c 1B68     		ldr	r3, [r3]
 9842 026e 0120     		movs	r0, #1
 9843 0270 1946     		mov	r1, r3
 9844 0272 FFF7FEFF 		bl	enqueue
 9845              	.L491:
 9846              	.LBE16:
2419:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9847              		.loc 1 2419 0 discriminator 2
 9848 0276 FB6F     		ldr	r3, [r7, #124]
 9849 0278 0133     		adds	r3, r3, #1
 9850 027a FB67     		str	r3, [r7, #124]
 9851              	.L479:
2419:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9852              		.loc 1 2419 0 is_stmt 0 discriminator 1
 9853 027c FB6F     		ldr	r3, [r7, #124]
 9854 027e B3F53C7F 		cmp	r3, #752
 9855 0282 FFF62AAF 		blt	.L499
2468:bluetooth_rxtx.c **** 
2469:bluetooth_rxtx.c **** 	}
2470:bluetooth_rxtx.c **** 
2471:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2472:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 9856              		.loc 1 2472 0 is_stmt 1
 9857 0286 0023     		movs	r3, #0
 9858 0288 FB67     		str	r3, [r7, #124]
 9859 028a 20E0     		b	.L500
 9860              	.L503:
2473:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9861              		.loc 1 2473 0
 9862 028c 1A4A     		ldr	r2, .L505+24
 9863 028e FB6F     		ldr	r3, [r7, #124]
 9864 0290 DB00     		lsls	r3, r3, #3
 9865 0292 1344     		add	r3, r3, r2
 9866 0294 5B68     		ldr	r3, [r3, #4]
 9867 0296 032B     		cmp	r3, #3
 9868 0298 16DD     		ble	.L501
2474:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9869              		.loc 1 2474 0
 9870 029a 174A     		ldr	r2, .L505+24
 9871 029c FB6F     		ldr	r3, [r7, #124]
 9872 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9873 02a2 1846     		mov	r0, r3
 9874 02a4 FFF7FEFF 		bl	le_set_access_address
2475:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 9875              		.loc 1 2475 0
 9876 02a8 144B     		ldr	r3, .L505+28
 9877 02aa 154A     		ldr	r2, .L505+32
 9878 02ac 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 217


2476:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 9879              		.loc 1 2476 0
 9880 02ae 154B     		ldr	r3, .L505+36
 9881 02b0 154A     		ldr	r2, .L505+40
 9882 02b2 1A60     		str	r2, [r3]
2477:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9883              		.loc 1 2477 0
 9884 02b4 154B     		ldr	r3, .L505+44
 9885 02b6 0022     		movs	r2, #0
 9886 02b8 1A61     		str	r2, [r3, #16]
2478:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9887              		.loc 1 2478 0
 9888 02ba 0020     		movs	r0, #0
 9889 02bc 1349     		ldr	r1, .L505+44
 9890 02be 0422     		movs	r2, #4
 9891 02c0 FFF7FEFF 		bl	le_promisc_state
2479:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2480:bluetooth_rxtx.c **** 			return 0;
 9892              		.loc 1 2480 0
 9893 02c4 0023     		movs	r3, #0
 9894 02c6 06E0     		b	.L504
 9895              	.L501:
2472:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9896              		.loc 1 2472 0 discriminator 2
 9897 02c8 FB6F     		ldr	r3, [r7, #124]
 9898 02ca 0133     		adds	r3, r3, #1
 9899 02cc FB67     		str	r3, [r7, #124]
 9900              	.L500:
2472:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9901              		.loc 1 2472 0 is_stmt 0 discriminator 1
 9902 02ce FB6F     		ldr	r3, [r7, #124]
 9903 02d0 1F2B     		cmp	r3, #31
 9904 02d2 DBDD     		ble	.L503
2481:bluetooth_rxtx.c **** 		}
2482:bluetooth_rxtx.c **** 	}
2483:bluetooth_rxtx.c **** 
2484:bluetooth_rxtx.c **** 	return 1;
 9905              		.loc 1 2484 0 is_stmt 1
 9906 02d4 0123     		movs	r3, #1
 9907              	.L504:
2485:bluetooth_rxtx.c **** }
 9908              		.loc 1 2485 0 discriminator 1
 9909 02d6 1846     		mov	r0, r3
 9910 02d8 8437     		adds	r7, r7, #132
 9911              		.cfi_def_cfa_offset 12
 9912 02da BD46     		mov	sp, r7
 9913              		.cfi_def_cfa_register 13
 9914              		@ sp needed
 9915 02dc 90BD     		pop	{r4, r7, pc}
 9916              	.L506:
 9917 02de 00BF     		.align	2
 9918              	.L505:
 9919 02e0 00000000 		.word	channel
 9920 02e4 AC000000 		.word	whitening_index
 9921 02e8 2C000000 		.word	whitening
 9922 02ec 11080402 		.word	33818641
 9923 02f0 EC080000 		.word	.LC0
ARM GAS  /tmp/ccHz27EZ.s 			page 218


 9924 02f4 00000000 		.word	idle_rxbuf
 9925 02f8 00000000 		.word	le_promisc
 9926 02fc 00000000 		.word	data_cb
 9927 0300 00000000 		.word	cb_follow_le
 9928 0304 00000000 		.word	packet_cb
 9929 0308 00000000 		.word	promisc_follow_cb
 9930 030c 00000000 		.word	le
 9931              		.cfi_endproc
 9932              	.LFE43:
 9934              		.section	.text.bt_promisc_le,"ax",%progbits
 9935              		.align	2
 9936              		.global	bt_promisc_le
 9937              		.thumb
 9938              		.thumb_func
 9940              	bt_promisc_le:
 9941              	.LFB44:
2486:bluetooth_rxtx.c **** 
2487:bluetooth_rxtx.c **** void bt_promisc_le() {
 9942              		.loc 1 2487 0
 9943              		.cfi_startproc
 9944              		@ args = 0, pretend = 0, frame = 0
 9945              		@ frame_needed = 1, uses_anonymous_args = 0
 9946 0000 80B5     		push	{r7, lr}
 9947              		.cfi_def_cfa_offset 8
 9948              		.cfi_offset 7, -8
 9949              		.cfi_offset 14, -4
 9950 0002 00AF     		add	r7, sp, #0
 9951              		.cfi_def_cfa_register 7
2488:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9952              		.loc 1 2488 0
 9953 0004 2CE0     		b	.L508
 9954              	.L513:
2489:bluetooth_rxtx.c **** 		reset_le_promisc();
 9955              		.loc 1 2489 0
 9956 0006 FFF7FEFF 		bl	reset_le_promisc
2490:bluetooth_rxtx.c **** 
2491:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2492:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9957              		.loc 1 2492 0
 9958 000a 184B     		ldr	r3, .L514
 9959 000c 1B88     		ldrh	r3, [r3]	@ movhi
 9960 000e 9BB2     		uxth	r3, r3
 9961 0010 03F00103 		and	r3, r3, #1
 9962 0014 002B     		cmp	r3, #0
 9963 0016 03D0     		beq	.L509
2493:bluetooth_rxtx.c **** 			channel = 2440;
 9964              		.loc 1 2493 0
 9965 0018 144B     		ldr	r3, .L514
 9966 001a 40F68812 		movw	r2, #2440
 9967 001e 1A80     		strh	r2, [r3]	@ movhi
 9968              	.L509:
2494:bluetooth_rxtx.c **** 
2495:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2496:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9969              		.loc 1 2496 0
 9970 0020 134B     		ldr	r3, .L514+4
 9971 0022 DB6B     		ldr	r3, [r3, #60]
ARM GAS  /tmp/ccHz27EZ.s 			page 219


 9972 0024 002B     		cmp	r3, #0
 9973 0026 07D1     		bne	.L510
2497:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2498:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9974              		.loc 1 2498 0
 9975 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2499:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9976              		.loc 1 2499 0
 9977 002c 114B     		ldr	r3, .L514+8
 9978 002e 124A     		ldr	r2, .L514+12
 9979 0030 1A60     		str	r2, [r3]
2500:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9980              		.loc 1 2500 0
 9981 0032 0A20     		movs	r0, #10
 9982 0034 FFF7FEFF 		bl	bt_generic_le
 9983              	.L510:
2501:bluetooth_rxtx.c **** 		}
2502:bluetooth_rxtx.c **** 
2503:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2504:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9984              		.loc 1 2504 0
 9985 0038 104B     		ldr	r3, .L514+16
 9986 003a 1B78     		ldrb	r3, [r3]
 9987 003c DBB2     		uxtb	r3, r3
 9988 003e 0A2B     		cmp	r3, #10
 9989 0040 00D0     		beq	.L511
2505:bluetooth_rxtx.c **** 			break;
 9990              		.loc 1 2505 0
 9991 0042 12E0     		b	.L507
 9992              	.L511:
2506:bluetooth_rxtx.c **** 
2507:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9993              		.loc 1 2507 0
 9994 0044 0020     		movs	r0, #0
 9995 0046 0A49     		ldr	r1, .L514+4
 9996 0048 0422     		movs	r2, #4
 9997 004a FFF7FEFF 		bl	le_promisc_state
2508:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9998              		.loc 1 2508 0
 9999 004e 0C4B     		ldr	r3, .L514+20
 10000 0050 0C4A     		ldr	r2, .L514+24
 10001 0052 1A60     		str	r2, [r3]
2509:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 10002              		.loc 1 2509 0
 10003 0054 064B     		ldr	r3, .L514+4
 10004 0056 0022     		movs	r2, #0
 10005 0058 1A61     		str	r2, [r3, #16]
2510:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 10006              		.loc 1 2510 0
 10007 005a 0A20     		movs	r0, #10
 10008 005c FFF7FEFF 		bl	bt_le_sync
 10009              	.L508:
2488:bluetooth_rxtx.c **** 		reset_le_promisc();
 10010              		.loc 1 2488 0
 10011 0060 064B     		ldr	r3, .L514+16
 10012 0062 1B78     		ldrb	r3, [r3]
 10013 0064 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 220


 10014 0066 0A2B     		cmp	r3, #10
 10015 0068 CDD0     		beq	.L513
 10016              	.L507:
2511:bluetooth_rxtx.c **** 	}
2512:bluetooth_rxtx.c **** }
 10017              		.loc 1 2512 0
 10018 006a 80BD     		pop	{r7, pc}
 10019              	.L515:
 10020              		.align	2
 10021              	.L514:
 10022 006c 00000000 		.word	channel
 10023 0070 00000000 		.word	le
 10024 0074 00000000 		.word	data_cb
 10025 0078 00000000 		.word	cb_le_promisc
 10026 007c 00000000 		.word	requested_mode
 10027 0080 00000000 		.word	packet_cb
 10028 0084 00000000 		.word	promisc_follow_cb
 10029              		.cfi_endproc
 10030              	.LFE44:
 10032              		.section	.rodata
 10033              		.align	2
 10034              	.LC1:
 10035 08fc 42       		.byte	66
 10036 08fd 17       		.byte	23
 10037 08fe FF       		.byte	-1
 10038 08ff FF       		.byte	-1
 10039 0900 FF       		.byte	-1
 10040 0901 FF       		.byte	-1
 10041 0902 FF       		.byte	-1
 10042 0903 FF       		.byte	-1
 10043 0904 03       		.byte	3
 10044 0905 03       		.byte	3
 10045 0906 AA       		.byte	-86
 10046 0907 FE       		.byte	-2
 10047 0908 0C       		.byte	12
 10048 0909 16       		.byte	22
 10049 090a AA       		.byte	-86
 10050 090b FE       		.byte	-2
 10051 090c 10       		.byte	16
 10052 090d F0       		.byte	-16
 10053 090e 02       		.byte	2
 10054 090f 00       		.byte	0
 10055 0910 00       		.byte	0
 10056 0911 00       		.byte	0
 10057 0912 00       		.byte	0
 10058 0913 65       		.byte	101
 10059 0914 07       		.byte	7
 10060 0915 FF       		.byte	-1
 10061 0916 FF       		.byte	-1
 10062 0917 FF       		.byte	-1
 10063              		.section	.text.bt_slave_le,"ax",%progbits
 10064              		.align	2
 10065              		.global	bt_slave_le
 10066              		.thumb
 10067              		.thumb_func
 10069              	bt_slave_le:
 10070              	.LFB45:
ARM GAS  /tmp/ccHz27EZ.s 			page 221


2513:bluetooth_rxtx.c **** 
2514:bluetooth_rxtx.c **** void bt_slave_le() {
 10071              		.loc 1 2514 0
 10072              		.cfi_startproc
 10073              		@ args = 0, pretend = 0, frame = 48
 10074              		@ frame_needed = 1, uses_anonymous_args = 0
 10075 0000 B0B5     		push	{r4, r5, r7, lr}
 10076              		.cfi_def_cfa_offset 16
 10077              		.cfi_offset 4, -16
 10078              		.cfi_offset 5, -12
 10079              		.cfi_offset 7, -8
 10080              		.cfi_offset 14, -4
 10081 0002 8CB0     		sub	sp, sp, #48
 10082              		.cfi_def_cfa_offset 64
 10083 0004 00AF     		add	r7, sp, #0
 10084              		.cfi_def_cfa_register 7
2515:bluetooth_rxtx.c **** 	u32 calc_crc;
2516:bluetooth_rxtx.c **** 	int i;
2517:bluetooth_rxtx.c **** 	u32 seq = 0; //gjlee
 10085              		.loc 1 2517 0
 10086 0006 0023     		movs	r3, #0
 10087 0008 BB62     		str	r3, [r7, #40]
2518:bluetooth_rxtx.c **** 
2519:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 10088              		.loc 1 2519 0
 10089 000a 3B4B     		ldr	r3, .L521
 10090 000c 3C1D     		adds	r4, r7, #4
 10091 000e 1D46     		mov	r5, r3
 10092 0010 2868     		ldr	r0, [r5]	@ unaligned
 10093 0012 6968     		ldr	r1, [r5, #4]	@ unaligned
 10094 0014 AA68     		ldr	r2, [r5, #8]	@ unaligned
 10095 0016 EB68     		ldr	r3, [r5, #12]	@ unaligned
 10096 0018 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 10097 001a 2869     		ldr	r0, [r5, #16]	@ unaligned
 10098 001c 6969     		ldr	r1, [r5, #20]	@ unaligned
 10099 001e AA69     		ldr	r2, [r5, #24]	@ unaligned
 10100 0020 07C4     		stmia	r4!, {r0, r1, r2}
2520:bluetooth_rxtx.c **** 		// LL header
2521:bluetooth_rxtx.c **** 		//0x42, 0x1d,
2522:bluetooth_rxtx.c **** 		//0x42, 0x06,
2523:bluetooth_rxtx.c **** 		//0x42, 0x0f,
2524:bluetooth_rxtx.c **** 		0x42, 0x17,
2525:bluetooth_rxtx.c **** 
2526:bluetooth_rxtx.c **** 		// advertising address
2527:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2528:bluetooth_rxtx.c **** 
2529:bluetooth_rxtx.c **** 		// advertising data
2530:bluetooth_rxtx.c **** 		0x03, 0x03, 0xaa, 0xfe, 
2531:bluetooth_rxtx.c **** 
2532:bluetooth_rxtx.c **** 		//0x12, 0x16, 0xaa, 0xfe, 0x10, 0xf0, 0x02, 0x76, 0x62, 0x2e, 0x65, 0x73, 0x74, 0x69, 0x9d, 0x6f,
2533:bluetooth_rxtx.c **** 		//0x54, 0x75, 0xc5, 0x8c, 0xc7, 0x33, 0x45, 0xe7, 0x2a,
2534:bluetooth_rxtx.c **** 		0x0c, 0x16, 0xaa, 0xfe, 
2535:bluetooth_rxtx.c **** 		
2536:bluetooth_rxtx.c **** 		0x10, 0xf0, 0x02, 0x00, 0x00, 0x00, 0x00, 0x65, 0x07,
2537:bluetooth_rxtx.c **** 
2538:bluetooth_rxtx.c **** 		// CRC (calc)
2539:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
ARM GAS  /tmp/ccHz27EZ.s 			page 222


2540:bluetooth_rxtx.c **** 	};
2541:bluetooth_rxtx.c **** 
2542:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 10101              		.loc 1 2542 0
 10102 0022 1923     		movs	r3, #25
 10103 0024 87F82730 		strb	r3, [r7, #39]
2543:bluetooth_rxtx.c **** 
2544:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2545:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 10104              		.loc 1 2545 0
 10105 0028 0023     		movs	r3, #0
 10106 002a FB62     		str	r3, [r7, #44]
 10107 002c 0EE0     		b	.L517
 10108              	.L518:
2546:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10109              		.loc 1 2546 0 discriminator 3
 10110 002e FB6A     		ldr	r3, [r7, #44]
 10111 0030 0233     		adds	r3, r3, #2
 10112 0032 FA6A     		ldr	r2, [r7, #44]
 10113 0034 C2F10502 		rsb	r2, r2, #5
 10114 0038 3049     		ldr	r1, .L521+4
 10115 003a 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 10116 003c 07F13001 		add	r1, r7, #48
 10117 0040 0B44     		add	r3, r3, r1
 10118 0042 03F82C2C 		strb	r2, [r3, #-44]
2545:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10119              		.loc 1 2545 0 discriminator 3
 10120 0046 FB6A     		ldr	r3, [r7, #44]
 10121 0048 0133     		adds	r3, r3, #1
 10122 004a FB62     		str	r3, [r7, #44]
 10123              	.L517:
2545:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10124              		.loc 1 2545 0 is_stmt 0 discriminator 1
 10125 004c FB6A     		ldr	r3, [r7, #44]
 10126 004e 052B     		cmp	r3, #5
 10127 0050 EDDD     		ble	.L518
2547:bluetooth_rxtx.c **** 	
2548:bluetooth_rxtx.c **** 
2549:bluetooth_rxtx.c **** 	// spam advertising packets
2550:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 10128              		.loc 1 2550 0 is_stmt 1
 10129 0052 49E0     		b	.L519
 10130              	.L520:
2551:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10131              		.loc 1 2551 0
 10132 0054 2A4B     		ldr	r3, .L521+8
 10133 0056 4FF08072 		mov	r2, #16777216
 10134 005a 1A60     		str	r2, [r3]
2552:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 10135              		.loc 1 2552 0
 10136 005c 284B     		ldr	r3, .L521+8
 10137 005e 4FF08062 		mov	r2, #67108864
 10138 0062 1A60     		str	r2, [r3]
2553:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 10139              		.loc 1 2553 0
 10140 0064 97F82730 		ldrb	r3, [r7, #39]
 10141 0068 0333     		adds	r3, r3, #3
ARM GAS  /tmp/ccHz27EZ.s 			page 223


 10142 006a DAB2     		uxtb	r2, r3
 10143 006c 3B1D     		adds	r3, r7, #4
 10144 006e 2548     		ldr	r0, .L521+12
 10145 0070 1146     		mov	r1, r2
 10146 0072 1A46     		mov	r2, r3
 10147 0074 FFF7FEFF 		bl	le_transmit
2554:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 10148              		.loc 1 2554 0
 10149 0078 234B     		ldr	r3, .L521+16
 10150 007a 4FF08072 		mov	r2, #16777216
 10151 007e 1A60     		str	r2, [r3]
2555:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 10152              		.loc 1 2555 0
 10153 0080 214B     		ldr	r3, .L521+16
 10154 0082 4FF08062 		mov	r2, #67108864
 10155 0086 1A60     		str	r2, [r3]
2556:bluetooth_rxtx.c **** 		
2557:bluetooth_rxtx.c **** 		//gjlee
2558:bluetooth_rxtx.c **** 		seq++;
 10156              		.loc 1 2558 0
 10157 0088 BB6A     		ldr	r3, [r7, #40]
 10158 008a 0133     		adds	r3, r3, #1
 10159 008c BB62     		str	r3, [r7, #40]
2559:bluetooth_rxtx.c **** 		//adv_ind[19] = (seq >>  0) & 0xff;
2560:bluetooth_rxtx.c **** 		//adv_ind[20] = (seq >>  8) & 0xff;
2561:bluetooth_rxtx.c **** 		//adv_ind[21] = (seq >> 16) & 0xff;
2562:bluetooth_rxtx.c **** 		//adv_ind[22] = (seq >> 24) & 0xff;
2563:bluetooth_rxtx.c **** 		
2564:bluetooth_rxtx.c **** 		calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 10160              		.loc 1 2564 0
 10161 008e 1F4B     		ldr	r3, .L521+20
 10162 0090 D968     		ldr	r1, [r3, #12]
 10163 0092 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 10164 0096 3A1D     		adds	r2, r7, #4
 10165 0098 0846     		mov	r0, r1
 10166 009a 1146     		mov	r1, r2
 10167 009c 1A46     		mov	r2, r3
 10168 009e FFF7FEFF 		bl	btle_calc_crc
 10169 00a2 3862     		str	r0, [r7, #32]
2565:bluetooth_rxtx.c **** 		adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 10170              		.loc 1 2565 0
 10171 00a4 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 10172 00a8 3A6A     		ldr	r2, [r7, #32]
 10173 00aa D2B2     		uxtb	r2, r2
 10174 00ac 07F13001 		add	r1, r7, #48
 10175 00b0 0B44     		add	r3, r3, r1
 10176 00b2 03F82C2C 		strb	r2, [r3, #-44]
2566:bluetooth_rxtx.c **** 		adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 10177              		.loc 1 2566 0
 10178 00b6 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 10179 00ba 0133     		adds	r3, r3, #1
 10180 00bc 3A6A     		ldr	r2, [r7, #32]
 10181 00be 120A     		lsrs	r2, r2, #8
 10182 00c0 D2B2     		uxtb	r2, r2
 10183 00c2 07F13001 		add	r1, r7, #48
 10184 00c6 0B44     		add	r3, r3, r1
 10185 00c8 03F82C2C 		strb	r2, [r3, #-44]
ARM GAS  /tmp/ccHz27EZ.s 			page 224


2567:bluetooth_rxtx.c **** 		adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 10186              		.loc 1 2567 0
 10187 00cc 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 10188 00d0 0233     		adds	r3, r3, #2
 10189 00d2 3A6A     		ldr	r2, [r7, #32]
 10190 00d4 120C     		lsrs	r2, r2, #16
 10191 00d6 D2B2     		uxtb	r2, r2
 10192 00d8 07F13001 		add	r1, r7, #48
 10193 00dc 0B44     		add	r3, r3, r1
 10194 00de 03F82C2C 		strb	r2, [r3, #-44]
2568:bluetooth_rxtx.c **** 		
2569:bluetooth_rxtx.c **** 		msleep(200); //jychoi: control beacon transmission time
 10195              		.loc 1 2569 0
 10196 00e2 C820     		movs	r0, #200
 10197 00e4 FFF7FEFF 		bl	msleep
 10198              	.L519:
2550:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10199              		.loc 1 2550 0
 10200 00e8 094B     		ldr	r3, .L521+24
 10201 00ea 1B78     		ldrb	r3, [r3]
 10202 00ec DBB2     		uxtb	r3, r3
 10203 00ee 0C2B     		cmp	r3, #12
 10204 00f0 B0D0     		beq	.L520
2570:bluetooth_rxtx.c **** 	}
2571:bluetooth_rxtx.c **** }
 10205              		.loc 1 2571 0
 10206 00f2 3037     		adds	r7, r7, #48
 10207              		.cfi_def_cfa_offset 16
 10208 00f4 BD46     		mov	sp, r7
 10209              		.cfi_def_cfa_register 13
 10210              		@ sp needed
 10211 00f6 B0BD     		pop	{r4, r5, r7, pc}
 10212              	.L522:
 10213              		.align	2
 10214              	.L521:
 10215 00f8 FC080000 		.word	.LC1
 10216 00fc 00000000 		.word	slave_mac_address
 10217 0100 80E100E0 		.word	-536813184
 10218 0104 D6BE898E 		.word	-1903575338
 10219 0108 00E100E0 		.word	-536813312
 10220 010c 00000000 		.word	le
 10221 0110 00000000 		.word	requested_mode
 10222              		.cfi_endproc
 10223              	.LFE45:
 10225              		.section	.text.specan,"ax",%progbits
 10226              		.align	2
 10227              		.global	specan
 10228              		.thumb
 10229              		.thumb_func
 10231              	specan:
 10232              	.LFB46:
2572:bluetooth_rxtx.c **** 
2573:bluetooth_rxtx.c **** /* spectrum analysis */
2574:bluetooth_rxtx.c **** void specan()
2575:bluetooth_rxtx.c **** {
 10233              		.loc 1 2575 0
 10234              		.cfi_startproc
ARM GAS  /tmp/ccHz27EZ.s 			page 225


 10235              		@ args = 0, pretend = 0, frame = 64
 10236              		@ frame_needed = 1, uses_anonymous_args = 0
 10237 0000 90B5     		push	{r4, r7, lr}
 10238              		.cfi_def_cfa_offset 12
 10239              		.cfi_offset 4, -12
 10240              		.cfi_offset 7, -8
 10241              		.cfi_offset 14, -4
 10242 0002 91B0     		sub	sp, sp, #68
 10243              		.cfi_def_cfa_offset 80
 10244 0004 00AF     		add	r7, sp, #0
 10245              		.cfi_def_cfa_register 7
2576:bluetooth_rxtx.c **** 	u8 epstat;
2577:bluetooth_rxtx.c **** 	u16 f;
2578:bluetooth_rxtx.c **** 	u8 i = 0;
 10246              		.loc 1 2578 0
 10247 0006 0023     		movs	r3, #0
 10248 0008 87F83D30 		strb	r3, [r7, #61]
2579:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2580:bluetooth_rxtx.c **** 
2581:bluetooth_rxtx.c **** 	RXLED_SET;
 10249              		.loc 1 2581 0
 10250 000c 5A4B     		ldr	r3, .L534
 10251 000e 1022     		movs	r2, #16
 10252 0010 1A60     		str	r2, [r3]
2582:bluetooth_rxtx.c **** 
2583:bluetooth_rxtx.c **** 	queue_init();
 10253              		.loc 1 2583 0
 10254 0012 FFF7FEFF 		bl	queue_init
2584:bluetooth_rxtx.c **** 
2585:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2586:bluetooth_rxtx.c **** 	PAEN_SET;
 10255              		.loc 1 2586 0
 10256 0016 594B     		ldr	r3, .L534+4
 10257 0018 8022     		movs	r2, #128
 10258 001a 1A60     		str	r2, [r3]
2587:bluetooth_rxtx.c **** 	//HGM_SET;
2588:bluetooth_rxtx.c **** #endif
2589:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10259              		.loc 1 2589 0
 10260 001c 1220     		movs	r0, #18
 10261 001e 42F62231 		movw	r1, #11042
 10262 0022 FFF7FEFF 		bl	cc2400_set
2590:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10263              		.loc 1 2590 0
 10264 0026 1420     		movs	r0, #20
 10265 0028 41F24B31 		movw	r1, #4939
 10266 002c FFF7FEFF 		bl	cc2400_set
2591:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10267              		.loc 1 2591 0
 10268 0030 2020     		movs	r0, #32
 10269 0032 40F20111 		movw	r1, #257
 10270 0036 FFF7FEFF 		bl	cc2400_set
2592:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10271              		.loc 1 2592 0
 10272 003a 0320     		movs	r0, #3
 10273 003c 2921     		movs	r1, #41
 10274 003e FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccHz27EZ.s 			page 226


2593:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2594:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10275              		.loc 1 2594 0
 10276 0042 00BF     		nop
 10277              	.L524:
 10278              		.loc 1 2594 0 is_stmt 0 discriminator 1
 10279 0044 FFF7FEFF 		bl	cc2400_status
 10280 0048 0346     		mov	r3, r0
 10281 004a 03F04003 		and	r3, r3, #64
 10282 004e 002B     		cmp	r3, #0
 10283 0050 F8D0     		beq	.L524
2595:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10284              		.loc 1 2595 0 is_stmt 1
 10285 0052 00BF     		nop
 10286              	.L525:
 10287              		.loc 1 2595 0 is_stmt 0 discriminator 1
 10288 0054 FFF7FEFF 		bl	cc2400_status
 10289 0058 0346     		mov	r3, r0
 10290 005a 03F00403 		and	r3, r3, #4
 10291 005e 002B     		cmp	r3, #0
 10292 0060 F8D1     		bne	.L525
2596:bluetooth_rxtx.c **** 
2597:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 10293              		.loc 1 2597 0 is_stmt 1
 10294 0062 7AE0     		b	.L526
 10295              	.L533:
2598:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10296              		.loc 1 2598 0
 10297 0064 464B     		ldr	r3, .L534+8
 10298 0066 1B88     		ldrh	r3, [r3]	@ movhi
 10299 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 10300 006a 6FE0     		b	.L527
 10301              	.L532:
 10302              	.LBB19:
2599:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10303              		.loc 1 2599 0
 10304 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 10305 006e 013B     		subs	r3, r3, #1
 10306 0070 9BB2     		uxth	r3, r3
 10307 0072 0220     		movs	r0, #2
 10308 0074 1946     		mov	r1, r3
 10309 0076 FFF7FEFF 		bl	cc2400_set
2600:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10310              		.loc 1 2600 0
 10311 007a 6120     		movs	r0, #97
 10312 007c FFF7FEFF 		bl	cc2400_strobe
2601:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10313              		.loc 1 2601 0
 10314 0080 00BF     		nop
 10315              	.L528:
 10316              		.loc 1 2601 0 is_stmt 0 discriminator 1
 10317 0082 FFF7FEFF 		bl	cc2400_status
 10318 0086 0346     		mov	r3, r0
 10319 0088 03F00403 		and	r3, r3, #4
 10320 008c 002B     		cmp	r3, #0
 10321 008e F8D0     		beq	.L528
2602:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
ARM GAS  /tmp/ccHz27EZ.s 			page 227


 10322              		.loc 1 2602 0 is_stmt 1
 10323 0090 6220     		movs	r0, #98
 10324 0092 FFF7FEFF 		bl	cc2400_strobe
2603:bluetooth_rxtx.c **** 
2604:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2605:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 10325              		.loc 1 2605 0
 10326 0096 4FF4FA73 		mov	r3, #500
 10327 009a 7B60     		str	r3, [r7, #4]
 10328 009c 00BF     		nop
 10329              	.L529:
 10330              		.loc 1 2605 0 is_stmt 0 discriminator 2
 10331 009e 7B68     		ldr	r3, [r7, #4]
 10332 00a0 013B     		subs	r3, r3, #1
 10333 00a2 7B60     		str	r3, [r7, #4]
 10334 00a4 002B     		cmp	r3, #0
 10335 00a6 FAD1     		bne	.L529
2606:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 10336              		.loc 1 2606 0 is_stmt 1
 10337 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10338 00ac 1346     		mov	r3, r2
 10339 00ae 5B00     		lsls	r3, r3, #1
 10340 00b0 1344     		add	r3, r3, r2
 10341 00b2 FA8F     		ldrh	r2, [r7, #62]
 10342 00b4 120A     		lsrs	r2, r2, #8
 10343 00b6 92B2     		uxth	r2, r2
 10344 00b8 D2B2     		uxtb	r2, r2
 10345 00ba 07F14001 		add	r1, r7, #64
 10346 00be 0B44     		add	r3, r3, r1
 10347 00c0 03F8382C 		strb	r2, [r3, #-56]
2607:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 10348              		.loc 1 2607 0
 10349 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10350 00c8 1346     		mov	r3, r2
 10351 00ca 5B00     		lsls	r3, r3, #1
 10352 00cc 1344     		add	r3, r3, r2
 10353 00ce 0133     		adds	r3, r3, #1
 10354 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 10355 00d2 D2B2     		uxtb	r2, r2
 10356 00d4 07F14001 		add	r1, r7, #64
 10357 00d8 0B44     		add	r3, r3, r1
 10358 00da 03F8382C 		strb	r2, [r3, #-56]
2608:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 10359              		.loc 1 2608 0
 10360 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10361 00e2 1346     		mov	r3, r2
 10362 00e4 5B00     		lsls	r3, r3, #1
 10363 00e6 1344     		add	r3, r3, r2
 10364 00e8 9C1C     		adds	r4, r3, #2
 10365 00ea 0620     		movs	r0, #6
 10366 00ec FFF7FEFF 		bl	cc2400_get
 10367 00f0 0346     		mov	r3, r0
 10368 00f2 1B0A     		lsrs	r3, r3, #8
 10369 00f4 9BB2     		uxth	r3, r3
 10370 00f6 DAB2     		uxtb	r2, r3
 10371 00f8 07F14003 		add	r3, r7, #64
 10372 00fc 2344     		add	r3, r3, r4
ARM GAS  /tmp/ccHz27EZ.s 			page 228


 10373 00fe 03F8382C 		strb	r2, [r3, #-56]
2609:bluetooth_rxtx.c **** 			i++;
 10374              		.loc 1 2609 0
 10375 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10376 0106 0133     		adds	r3, r3, #1
 10377 0108 87F83D30 		strb	r3, [r7, #61]
2610:bluetooth_rxtx.c **** 			if (i == 16) {
 10378              		.loc 1 2610 0
 10379 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10380 0110 102B     		cmp	r3, #16
 10381 0112 0DD1     		bne	.L530
2611:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 10382              		.loc 1 2611 0
 10383 0114 07F10803 		add	r3, r7, #8
 10384 0118 0420     		movs	r0, #4
 10385 011a 1946     		mov	r1, r3
 10386 011c FFF7FEFF 		bl	enqueue
2612:bluetooth_rxtx.c **** 				i = 0;
 10387              		.loc 1 2612 0
 10388 0120 0023     		movs	r3, #0
 10389 0122 87F83D30 		strb	r3, [r7, #61]
2613:bluetooth_rxtx.c **** 
2614:bluetooth_rxtx.c **** 				handle_usb(clkn);
 10390              		.loc 1 2614 0
 10391 0126 174B     		ldr	r3, .L534+12
 10392 0128 1B68     		ldr	r3, [r3]
 10393 012a 1846     		mov	r0, r3
 10394 012c FFF7FEFF 		bl	handle_usb
 10395              	.L530:
2615:bluetooth_rxtx.c **** 			}
2616:bluetooth_rxtx.c **** 
2617:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10396              		.loc 1 2617 0
 10397 0130 6420     		movs	r0, #100
 10398 0132 FFF7FEFF 		bl	cc2400_strobe
2618:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 10399              		.loc 1 2618 0
 10400 0136 00BF     		nop
 10401              	.L531:
 10402              		.loc 1 2618 0 is_stmt 0 discriminator 1
 10403 0138 FFF7FEFF 		bl	cc2400_status
 10404 013c 0346     		mov	r3, r0
 10405 013e 03F00403 		and	r3, r3, #4
 10406 0142 002B     		cmp	r3, #0
 10407 0144 F8D1     		bne	.L531
 10408              	.LBE19:
2598:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10409              		.loc 1 2598 0 is_stmt 1 discriminator 2
 10410 0146 FB8F     		ldrh	r3, [r7, #62]
 10411 0148 0133     		adds	r3, r3, #1
 10412 014a FB87     		strh	r3, [r7, #62]	@ movhi
 10413              	.L527:
2598:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10414              		.loc 1 2598 0 is_stmt 0 discriminator 1
 10415 014c FA8F     		ldrh	r2, [r7, #62]
 10416 014e 0E4B     		ldr	r3, .L534+16
 10417 0150 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccHz27EZ.s 			page 229


 10418 0152 9BB2     		uxth	r3, r3
 10419 0154 0133     		adds	r3, r3, #1
 10420 0156 9A42     		cmp	r2, r3
 10421 0158 88DB     		blt	.L532
 10422              	.L526:
2597:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10423              		.loc 1 2597 0 is_stmt 1
 10424 015a 0C4B     		ldr	r3, .L534+20
 10425 015c 1B78     		ldrb	r3, [r3]
 10426 015e DBB2     		uxtb	r3, r3
 10427 0160 042B     		cmp	r3, #4
 10428 0162 3FF47FAF 		beq	.L533
2619:bluetooth_rxtx.c **** 		}
2620:bluetooth_rxtx.c **** 	}
2621:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10429              		.loc 1 2621 0
 10430 0166 0A4B     		ldr	r3, .L534+24
 10431 0168 0022     		movs	r2, #0
 10432 016a 1A70     		strb	r2, [r3]
2622:bluetooth_rxtx.c **** 	RXLED_CLR;
 10433              		.loc 1 2622 0
 10434 016c 094B     		ldr	r3, .L534+28
 10435 016e 1022     		movs	r2, #16
 10436 0170 1A60     		str	r2, [r3]
2623:bluetooth_rxtx.c **** }
 10437              		.loc 1 2623 0
 10438 0172 4437     		adds	r7, r7, #68
 10439              		.cfi_def_cfa_offset 12
 10440 0174 BD46     		mov	sp, r7
 10441              		.cfi_def_cfa_register 13
 10442              		@ sp needed
 10443 0176 90BD     		pop	{r4, r7, pc}
 10444              	.L535:
 10445              		.align	2
 10446              	.L534:
 10447 0178 38C00920 		.word	537509944
 10448 017c 58C00920 		.word	537509976
 10449 0180 00000000 		.word	low_freq
 10450 0184 00000000 		.word	clkn
 10451 0188 00000000 		.word	high_freq
 10452 018c 00000000 		.word	requested_mode
 10453 0190 00000000 		.word	mode
 10454 0194 3CC00920 		.word	537509948
 10455              		.cfi_endproc
 10456              	.LFE46:
 10458              		.section	.rodata
 10459              		.align	2
 10460              	.LC2:
 10461 0918 6C09     		.short	2412
 10462 091a 8509     		.short	2437
 10463 091c 9E09     		.short	2462
 10464              		.section	.text.led_specan,"ax",%progbits
 10465              		.align	2
 10466              		.global	led_specan
 10467              		.thumb
 10468              		.thumb_func
 10470              	led_specan:
ARM GAS  /tmp/ccHz27EZ.s 			page 230


 10471              	.LFB47:
2624:bluetooth_rxtx.c **** 
2625:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2626:bluetooth_rxtx.c **** void led_specan()
2627:bluetooth_rxtx.c **** {
 10472              		.loc 1 2627 0
 10473              		.cfi_startproc
 10474              		@ args = 0, pretend = 0, frame = 16
 10475              		@ frame_needed = 1, uses_anonymous_args = 0
 10476 0000 80B5     		push	{r7, lr}
 10477              		.cfi_def_cfa_offset 8
 10478              		.cfi_offset 7, -8
 10479              		.cfi_offset 14, -4
 10480 0002 84B0     		sub	sp, sp, #16
 10481              		.cfi_def_cfa_offset 24
 10482 0004 00AF     		add	r7, sp, #0
 10483              		.cfi_def_cfa_register 7
2628:bluetooth_rxtx.c **** 	int8_t lvl;
2629:bluetooth_rxtx.c **** 	u8 i = 0;
 10484              		.loc 1 2629 0
 10485 0006 0023     		movs	r3, #0
 10486 0008 FB73     		strb	r3, [r7, #15]
2630:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 10487              		.loc 1 2630 0
 10488 000a 5B4A     		ldr	r2, .L553
 10489 000c 07F10803 		add	r3, r7, #8
 10490 0010 1068     		ldr	r0, [r2]	@ unaligned
 10491 0012 1860     		str	r0, [r3]	@ unaligned
 10492 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 10493 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2631:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2632:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2633:bluetooth_rxtx.c **** 
2634:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2635:bluetooth_rxtx.c **** 	PAEN_SET;
 10494              		.loc 1 2635 0
 10495 0018 584B     		ldr	r3, .L553+4
 10496 001a 8022     		movs	r2, #128
 10497 001c 1A60     		str	r2, [r3]
2636:bluetooth_rxtx.c **** 	//HGM_SET;
2637:bluetooth_rxtx.c **** #endif
2638:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10498              		.loc 1 2638 0
 10499 001e 1220     		movs	r0, #18
 10500 0020 42F62231 		movw	r1, #11042
 10501 0024 FFF7FEFF 		bl	cc2400_set
2639:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10502              		.loc 1 2639 0
 10503 0028 1420     		movs	r0, #20
 10504 002a 41F24B31 		movw	r1, #4939
 10505 002e FFF7FEFF 		bl	cc2400_set
2640:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10506              		.loc 1 2640 0
 10507 0032 2020     		movs	r0, #32
 10508 0034 40F20111 		movw	r1, #257
 10509 0038 FFF7FEFF 		bl	cc2400_set
2641:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
ARM GAS  /tmp/ccHz27EZ.s 			page 231


 10510              		.loc 1 2641 0
 10511 003c 0320     		movs	r0, #3
 10512 003e 2921     		movs	r1, #41
 10513 0040 FFF7FEFF 		bl	cc2400_set
2642:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 10514              		.loc 1 2642 0
 10515 0044 0620     		movs	r0, #6
 10516 0046 F121     		movs	r1, #241
 10517 0048 FFF7FEFF 		bl	cc2400_set
2643:bluetooth_rxtx.c **** 
2644:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10518              		.loc 1 2644 0
 10519 004c 00BF     		nop
 10520              	.L537:
 10521              		.loc 1 2644 0 is_stmt 0 discriminator 1
 10522 004e FFF7FEFF 		bl	cc2400_status
 10523 0052 0346     		mov	r3, r0
 10524 0054 03F04003 		and	r3, r3, #64
 10525 0058 002B     		cmp	r3, #0
 10526 005a F8D0     		beq	.L537
2645:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10527              		.loc 1 2645 0 is_stmt 1
 10528 005c 00BF     		nop
 10529              	.L538:
 10530              		.loc 1 2645 0 is_stmt 0 discriminator 1
 10531 005e FFF7FEFF 		bl	cc2400_status
 10532 0062 0346     		mov	r3, r0
 10533 0064 03F00403 		and	r3, r3, #4
 10534 0068 002B     		cmp	r3, #0
 10535 006a F8D1     		bne	.L538
2646:bluetooth_rxtx.c **** 
2647:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 10536              		.loc 1 2647 0 is_stmt 1
 10537 006c 79E0     		b	.L539
 10538              	.L552:
 10539              	.LBB20:
2648:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10540              		.loc 1 2648 0
 10541 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10542 0070 5B00     		lsls	r3, r3, #1
 10543 0072 07F11002 		add	r2, r7, #16
 10544 0076 1344     		add	r3, r3, r2
 10545 0078 33F8083C 		ldrh	r3, [r3, #-8]
 10546 007c 013B     		subs	r3, r3, #1
 10547 007e 9BB2     		uxth	r3, r3
 10548 0080 0220     		movs	r0, #2
 10549 0082 1946     		mov	r1, r3
 10550 0084 FFF7FEFF 		bl	cc2400_set
2649:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10551              		.loc 1 2649 0
 10552 0088 6120     		movs	r0, #97
 10553 008a FFF7FEFF 		bl	cc2400_strobe
2650:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10554              		.loc 1 2650 0
 10555 008e 00BF     		nop
 10556              	.L540:
 10557              		.loc 1 2650 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccHz27EZ.s 			page 232


 10558 0090 FFF7FEFF 		bl	cc2400_status
 10559 0094 0346     		mov	r3, r0
 10560 0096 03F00403 		and	r3, r3, #4
 10561 009a 002B     		cmp	r3, #0
 10562 009c F8D0     		beq	.L540
2651:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10563              		.loc 1 2651 0 is_stmt 1
 10564 009e 6220     		movs	r0, #98
 10565 00a0 FFF7FEFF 		bl	cc2400_strobe
2652:bluetooth_rxtx.c **** 
2653:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2654:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10566              		.loc 1 2654 0
 10567 00a4 4FF4FA73 		mov	r3, #500
 10568 00a8 7B60     		str	r3, [r7, #4]
 10569 00aa 00BF     		nop
 10570              	.L541:
 10571              		.loc 1 2654 0 is_stmt 0 discriminator 2
 10572 00ac 7B68     		ldr	r3, [r7, #4]
 10573 00ae 013B     		subs	r3, r3, #1
 10574 00b0 7B60     		str	r3, [r7, #4]
 10575 00b2 002B     		cmp	r3, #0
 10576 00b4 FAD1     		bne	.L541
2655:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 10577              		.loc 1 2655 0 is_stmt 1
 10578 00b6 0620     		movs	r0, #6
 10579 00b8 FFF7FEFF 		bl	cc2400_get
 10580 00bc 0346     		mov	r3, r0
 10581 00be 1B0A     		lsrs	r3, r3, #8
 10582 00c0 9BB2     		uxth	r3, r3
 10583 00c2 BB73     		strb	r3, [r7, #14]
2656:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 10584              		.loc 1 2656 0
 10585 00c4 2E4B     		ldr	r3, .L553+8
 10586 00c6 1B78     		ldrb	r3, [r3]
 10587 00c8 DBB2     		uxtb	r3, r3
 10588 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10589 00ce 5BB2     		sxtb	r3, r3
 10590 00d0 9A42     		cmp	r2, r3
 10591 00d2 15DD     		ble	.L542
2657:bluetooth_rxtx.c ****             switch (i) {
 10592              		.loc 1 2657 0
 10593 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10594 00d6 012B     		cmp	r3, #1
 10595 00d8 09D0     		beq	.L544
 10596 00da 022B     		cmp	r3, #2
 10597 00dc 0BD0     		beq	.L545
 10598 00de 002B     		cmp	r3, #0
 10599 00e0 00D0     		beq	.L546
 10600 00e2 21E0     		b	.L547
 10601              	.L546:
2658:bluetooth_rxtx.c ****                 case 0:
2659:bluetooth_rxtx.c ****                     TXLED_SET;
 10602              		.loc 1 2659 0
 10603 00e4 274B     		ldr	r3, .L553+12
 10604 00e6 4FF48072 		mov	r2, #256
 10605 00ea 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccHz27EZ.s 			page 233


2660:bluetooth_rxtx.c ****                     break;
 10606              		.loc 1 2660 0
 10607 00ec 07E0     		b	.L543
 10608              	.L544:
2661:bluetooth_rxtx.c ****                 case 1:
2662:bluetooth_rxtx.c ****                     RXLED_SET;
 10609              		.loc 1 2662 0
 10610 00ee 254B     		ldr	r3, .L553+12
 10611 00f0 1022     		movs	r2, #16
 10612 00f2 1A60     		str	r2, [r3]
2663:bluetooth_rxtx.c ****                     break;
 10613              		.loc 1 2663 0
 10614 00f4 03E0     		b	.L543
 10615              	.L545:
2664:bluetooth_rxtx.c ****                 case 2:
2665:bluetooth_rxtx.c ****                     USRLED_SET;
 10616              		.loc 1 2665 0
 10617 00f6 234B     		ldr	r3, .L553+12
 10618 00f8 0222     		movs	r2, #2
 10619 00fa 1A60     		str	r2, [r3]
2666:bluetooth_rxtx.c ****                     break;
 10620              		.loc 1 2666 0
 10621 00fc 00BF     		nop
 10622              	.L543:
 10623 00fe 13E0     		b	.L547
 10624              	.L542:
2667:bluetooth_rxtx.c ****             }
2668:bluetooth_rxtx.c ****         }
2669:bluetooth_rxtx.c ****         else {
2670:bluetooth_rxtx.c ****             switch (i) {
 10625              		.loc 1 2670 0
 10626 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10627 0102 012B     		cmp	r3, #1
 10628 0104 08D0     		beq	.L548
 10629 0106 022B     		cmp	r3, #2
 10630 0108 0AD0     		beq	.L549
 10631 010a 002B     		cmp	r3, #0
 10632 010c 0CD1     		bne	.L547
2671:bluetooth_rxtx.c ****                 case 0:
2672:bluetooth_rxtx.c ****                     TXLED_CLR;
 10633              		.loc 1 2672 0
 10634 010e 1E4B     		ldr	r3, .L553+16
 10635 0110 4FF48072 		mov	r2, #256
 10636 0114 1A60     		str	r2, [r3]
2673:bluetooth_rxtx.c ****                     break;
 10637              		.loc 1 2673 0
 10638 0116 07E0     		b	.L547
 10639              	.L548:
2674:bluetooth_rxtx.c ****                 case 1:
2675:bluetooth_rxtx.c ****                     RXLED_CLR;
 10640              		.loc 1 2675 0
 10641 0118 1B4B     		ldr	r3, .L553+16
 10642 011a 1022     		movs	r2, #16
 10643 011c 1A60     		str	r2, [r3]
2676:bluetooth_rxtx.c ****                     break;
 10644              		.loc 1 2676 0
 10645 011e 03E0     		b	.L547
ARM GAS  /tmp/ccHz27EZ.s 			page 234


 10646              	.L549:
2677:bluetooth_rxtx.c ****                 case 2:
2678:bluetooth_rxtx.c ****                     USRLED_CLR;
 10647              		.loc 1 2678 0
 10648 0120 194B     		ldr	r3, .L553+16
 10649 0122 0222     		movs	r2, #2
 10650 0124 1A60     		str	r2, [r3]
2679:bluetooth_rxtx.c ****                     break;
 10651              		.loc 1 2679 0
 10652 0126 00BF     		nop
 10653              	.L547:
2680:bluetooth_rxtx.c ****             }
2681:bluetooth_rxtx.c ****         }
2682:bluetooth_rxtx.c **** 
2683:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10654              		.loc 1 2683 0
 10655 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10656 012a 5A1C     		adds	r2, r3, #1
 10657 012c 174B     		ldr	r3, .L553+20
 10658 012e 83FB0231 		smull	r3, r1, r3, r2
 10659 0132 D317     		asrs	r3, r2, #31
 10660 0134 C91A     		subs	r1, r1, r3
 10661 0136 0B46     		mov	r3, r1
 10662 0138 5B00     		lsls	r3, r3, #1
 10663 013a 0B44     		add	r3, r3, r1
 10664 013c D11A     		subs	r1, r2, r3
 10665 013e 0B46     		mov	r3, r1
 10666 0140 FB73     		strb	r3, [r7, #15]
2684:bluetooth_rxtx.c **** 
2685:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10667              		.loc 1 2685 0
 10668 0142 134B     		ldr	r3, .L553+24
 10669 0144 1B68     		ldr	r3, [r3]
 10670 0146 1846     		mov	r0, r3
 10671 0148 FFF7FEFF 		bl	handle_usb
2686:bluetooth_rxtx.c ****         //wait(1);
2687:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10672              		.loc 1 2687 0
 10673 014c 6420     		movs	r0, #100
 10674 014e FFF7FEFF 		bl	cc2400_strobe
2688:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10675              		.loc 1 2688 0
 10676 0152 00BF     		nop
 10677              	.L551:
 10678              		.loc 1 2688 0 is_stmt 0 discriminator 1
 10679 0154 FFF7FEFF 		bl	cc2400_status
 10680 0158 0346     		mov	r3, r0
 10681 015a 03F00403 		and	r3, r3, #4
 10682 015e 002B     		cmp	r3, #0
 10683 0160 F8D1     		bne	.L551
 10684              	.L539:
 10685              	.LBE20:
2647:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10686              		.loc 1 2647 0 is_stmt 1
 10687 0162 0C4B     		ldr	r3, .L553+28
 10688 0164 1B78     		ldrb	r3, [r3]
 10689 0166 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccHz27EZ.s 			page 235


 10690 0168 072B     		cmp	r3, #7
 10691 016a 80D0     		beq	.L552
2689:bluetooth_rxtx.c **** 	}
2690:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10692              		.loc 1 2690 0
 10693 016c 0A4B     		ldr	r3, .L553+32
 10694 016e 0022     		movs	r2, #0
 10695 0170 1A70     		strb	r2, [r3]
2691:bluetooth_rxtx.c **** }
 10696              		.loc 1 2691 0
 10697 0172 1037     		adds	r7, r7, #16
 10698              		.cfi_def_cfa_offset 8
 10699 0174 BD46     		mov	sp, r7
 10700              		.cfi_def_cfa_register 13
 10701              		@ sp needed
 10702 0176 80BD     		pop	{r7, pc}
 10703              	.L554:
 10704              		.align	2
 10705              	.L553:
 10706 0178 18090000 		.word	.LC2
 10707 017c 58C00920 		.word	537509976
 10708 0180 00000000 		.word	rssi_threshold
 10709 0184 38C00920 		.word	537509944
 10710 0188 3CC00920 		.word	537509948
 10711 018c 56555555 		.word	1431655766
 10712 0190 00000000 		.word	clkn
 10713 0194 00000000 		.word	requested_mode
 10714 0198 00000000 		.word	mode
 10715              		.cfi_endproc
 10716              	.LFE47:
 10718              		.section	.text.main,"ax",%progbits
 10719              		.align	2
 10720              		.global	main
 10721              		.thumb
 10722              		.thumb_func
 10724              	main:
 10725              	.LFB48:
2692:bluetooth_rxtx.c **** 
2693:bluetooth_rxtx.c **** int main()
2694:bluetooth_rxtx.c **** {
 10726              		.loc 1 2694 0
 10727              		.cfi_startproc
 10728              		@ args = 0, pretend = 0, frame = 0
 10729              		@ frame_needed = 1, uses_anonymous_args = 0
 10730 0000 80B5     		push	{r7, lr}
 10731              		.cfi_def_cfa_offset 8
 10732              		.cfi_offset 7, -8
 10733              		.cfi_offset 14, -4
 10734 0002 00AF     		add	r7, sp, #0
 10735              		.cfi_def_cfa_register 7
2695:bluetooth_rxtx.c **** 	ubertooth_init();
 10736              		.loc 1 2695 0
 10737 0004 FFF7FEFF 		bl	ubertooth_init
2696:bluetooth_rxtx.c **** 	clkn_init();
 10738              		.loc 1 2696 0
 10739 0008 FFF7FEFF 		bl	clkn_init
2697:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
ARM GAS  /tmp/ccHz27EZ.s 			page 236


 10740              		.loc 1 2697 0
 10741 000c 4248     		ldr	r0, .L575
 10742 000e FFF7FEFF 		bl	ubertooth_usb_init
 10743              	.L573:
2698:bluetooth_rxtx.c **** 
2699:bluetooth_rxtx.c **** 	while (1) {
2700:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10744              		.loc 1 2700 0
 10745 0012 424B     		ldr	r3, .L575+4
 10746 0014 1B68     		ldr	r3, [r3]
 10747 0016 1846     		mov	r0, r3
 10748 0018 FFF7FEFF 		bl	handle_usb
2701:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 10749              		.loc 1 2701 0
 10750 001c 404B     		ldr	r3, .L575+8
 10751 001e 1B78     		ldrb	r3, [r3]
 10752 0020 DAB2     		uxtb	r2, r3
 10753 0022 404B     		ldr	r3, .L575+12
 10754 0024 1B78     		ldrb	r3, [r3]
 10755 0026 DBB2     		uxtb	r3, r3
 10756 0028 9A42     		cmp	r2, r3
 10757 002a 74D0     		beq	.L556
2702:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10758              		.loc 1 2702 0
 10759 002c 3C4B     		ldr	r3, .L575+8
 10760 002e 1B78     		ldrb	r3, [r3]
 10761 0030 DBB2     		uxtb	r3, r3
 10762 0032 0D2B     		cmp	r3, #13
 10763 0034 6ED8     		bhi	.L574
 10764 0036 01A2     		adr	r2, .L559
 10765 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 10766              		.p2align 2
 10767              	.L559:
 10768 003c 0F010000 		.word	.L558+1
 10769 0040 81000000 		.word	.L560+1
 10770 0044 15010000 		.word	.L574+1
 10771 0048 AB000000 		.word	.L561+1
 10772 004c EF000000 		.word	.L562+1
 10773 0050 BB000000 		.word	.L563+1
 10774 0054 E1000000 		.word	.L564+1
 10775 0058 F5000000 		.word	.L565+1
 10776 005c 8D000000 		.word	.L566+1
 10777 0060 99000000 		.word	.L567+1
 10778 0064 9F000000 		.word	.L568+1
 10779 0068 75000000 		.word	.L569+1
 10780 006c A5000000 		.word	.L570+1
 10781 0070 FB000000 		.word	.L571+1
 10782              		.p2align 1
 10783              	.L569:
2703:bluetooth_rxtx.c **** 				 case MODE_RESET:
2704:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2705:bluetooth_rxtx.c **** 					wait(1);
 10784              		.loc 1 2705 0
 10785 0074 0120     		movs	r0, #1
 10786 0076 FFF7FEFF 		bl	wait
2706:bluetooth_rxtx.c **** 					reset();
 10787              		.loc 1 2706 0
ARM GAS  /tmp/ccHz27EZ.s 			page 237


 10788 007a FFF7FEFF 		bl	reset
2707:bluetooth_rxtx.c **** 					break;
 10789              		.loc 1 2707 0
 10790 007e 4AE0     		b	.L556
 10791              	.L560:
2708:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2709:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10792              		.loc 1 2709 0
 10793 0080 284B     		ldr	r3, .L575+12
 10794 0082 0122     		movs	r2, #1
 10795 0084 1A70     		strb	r2, [r3]
2710:bluetooth_rxtx.c **** 					bt_stream_rx();
 10796              		.loc 1 2710 0
 10797 0086 FFF7FEFF 		bl	bt_stream_rx
2711:bluetooth_rxtx.c **** 					break;
 10798              		.loc 1 2711 0
 10799 008a 44E0     		b	.L556
 10800              	.L566:
2712:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2713:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10801              		.loc 1 2713 0
 10802 008c 254B     		ldr	r3, .L575+12
 10803 008e 0822     		movs	r2, #8
 10804 0090 1A70     		strb	r2, [r3]
2714:bluetooth_rxtx.c **** 					bt_stream_rx();
 10805              		.loc 1 2714 0
 10806 0092 FFF7FEFF 		bl	bt_stream_rx
2715:bluetooth_rxtx.c **** 					break;
 10807              		.loc 1 2715 0
 10808 0096 3EE0     		b	.L556
 10809              	.L567:
2716:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2717:bluetooth_rxtx.c **** 					bt_follow_le();
 10810              		.loc 1 2717 0
 10811 0098 FFF7FEFF 		bl	bt_follow_le
2718:bluetooth_rxtx.c **** 					break;
 10812              		.loc 1 2718 0
 10813 009c 3BE0     		b	.L556
 10814              	.L568:
2719:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2720:bluetooth_rxtx.c **** 					bt_promisc_le();
 10815              		.loc 1 2720 0
 10816 009e FFF7FEFF 		bl	bt_promisc_le
2721:bluetooth_rxtx.c **** 					break;
 10817              		.loc 1 2721 0
 10818 00a2 38E0     		b	.L556
 10819              	.L570:
2722:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2723:bluetooth_rxtx.c **** 					bt_slave_le();
 10820              		.loc 1 2723 0
 10821 00a4 FFF7FEFF 		bl	bt_slave_le
2724:bluetooth_rxtx.c **** 					break;
 10822              		.loc 1 2724 0
 10823 00a8 35E0     		b	.L556
 10824              	.L561:
2725:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2726:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
ARM GAS  /tmp/ccHz27EZ.s 			page 238


 10825              		.loc 1 2726 0
 10826 00aa 1E4B     		ldr	r3, .L575+12
 10827 00ac 0322     		movs	r2, #3
 10828 00ae 1A70     		strb	r2, [r3]
2727:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 10829              		.loc 1 2727 0
 10830 00b0 1D48     		ldr	r0, .L575+16
 10831 00b2 1E49     		ldr	r1, .L575+20
 10832 00b4 FFF7FEFF 		bl	cc2400_txtest
2728:bluetooth_rxtx.c **** 					break;
 10833              		.loc 1 2728 0
 10834 00b8 2DE0     		b	.L556
 10835              	.L563:
2729:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2730:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10836              		.loc 1 2730 0
 10837 00ba 1A4B     		ldr	r3, .L575+12
 10838 00bc 0522     		movs	r2, #5
 10839 00be 1A70     		strb	r2, [r3]
2731:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10840              		.loc 1 2731 0
 10841 00c0 1A48     		ldr	r0, .L575+20
 10842 00c2 FFF7FEFF 		bl	cc2400_rangetest
2732:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 10843              		.loc 1 2732 0
 10844 00c6 174B     		ldr	r3, .L575+12
 10845 00c8 0022     		movs	r2, #0
 10846 00ca 1A70     		strb	r2, [r3]
2733:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 10847              		.loc 1 2733 0
 10848 00cc 144B     		ldr	r3, .L575+8
 10849 00ce 1B78     		ldrb	r3, [r3]
 10850 00d0 DBB2     		uxtb	r3, r3
 10851 00d2 052B     		cmp	r3, #5
 10852 00d4 03D1     		bne	.L572
2734:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 10853              		.loc 1 2734 0
 10854 00d6 124B     		ldr	r3, .L575+8
 10855 00d8 0022     		movs	r2, #0
 10856 00da 1A70     		strb	r2, [r3]
2735:bluetooth_rxtx.c **** 					break;
 10857              		.loc 1 2735 0
 10858 00dc 1BE0     		b	.L556
 10859              	.L572:
 10860 00de 1AE0     		b	.L556
 10861              	.L564:
2736:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2737:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10862              		.loc 1 2737 0
 10863 00e0 104B     		ldr	r3, .L575+12
 10864 00e2 0622     		movs	r2, #6
 10865 00e4 1A70     		strb	r2, [r3]
2738:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 10866              		.loc 1 2738 0
 10867 00e6 1148     		ldr	r0, .L575+20
 10868 00e8 FFF7FEFF 		bl	cc2400_repeater
2739:bluetooth_rxtx.c **** 					break;
ARM GAS  /tmp/ccHz27EZ.s 			page 239


 10869              		.loc 1 2739 0
 10870 00ec 13E0     		b	.L556
 10871              	.L562:
2740:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2741:bluetooth_rxtx.c **** 					specan();
 10872              		.loc 1 2741 0
 10873 00ee FFF7FEFF 		bl	specan
2742:bluetooth_rxtx.c **** 					break;
 10874              		.loc 1 2742 0
 10875 00f2 10E0     		b	.L556
 10876              	.L565:
2743:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2744:bluetooth_rxtx.c **** 					led_specan();
 10877              		.loc 1 2744 0
 10878 00f4 FFF7FEFF 		bl	led_specan
2745:bluetooth_rxtx.c **** 					break;
 10879              		.loc 1 2745 0
 10880 00f8 0DE0     		b	.L556
 10881              	.L571:
2746:bluetooth_rxtx.c **** 				case MODE_EGO:
2747:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10882              		.loc 1 2747 0
 10883 00fa 0A4B     		ldr	r3, .L575+12
 10884 00fc 0D22     		movs	r2, #13
 10885 00fe 1A70     		strb	r2, [r3]
2748:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10886              		.loc 1 2748 0
 10887 0100 0B4B     		ldr	r3, .L575+24
 10888 0102 1B78     		ldrb	r3, [r3]
 10889 0104 DBB2     		uxtb	r3, r3
 10890 0106 1846     		mov	r0, r3
 10891 0108 FFF7FEFF 		bl	ego_main
2749:bluetooth_rxtx.c **** 					break;
 10892              		.loc 1 2749 0
 10893 010c 03E0     		b	.L556
 10894              	.L558:
2750:bluetooth_rxtx.c **** 				case MODE_IDLE:
2751:bluetooth_rxtx.c **** 					cc2400_idle();
 10895              		.loc 1 2751 0
 10896 010e FFF7FEFF 		bl	cc2400_idle
2752:bluetooth_rxtx.c **** 					break;
 10897              		.loc 1 2752 0
 10898 0112 00E0     		b	.L556
 10899              	.L574:
2753:bluetooth_rxtx.c **** 				default:
2754:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2755:bluetooth_rxtx.c **** 					break;
 10900              		.loc 1 2755 0
 10901 0114 00BF     		nop
 10902              	.L556:
2756:bluetooth_rxtx.c **** 			}
2757:bluetooth_rxtx.c **** 	}
 10903              		.loc 1 2757 0 discriminator 1
 10904 0116 7CE7     		b	.L573
 10905              	.L576:
 10906              		.align	2
 10907              	.L575:
ARM GAS  /tmp/ccHz27EZ.s 			page 240


 10908 0118 00000000 		.word	vendor_request_handler
 10909 011c 00000000 		.word	clkn
 10910 0120 00000000 		.word	requested_mode
 10911 0124 00000000 		.word	mode
 10912 0128 00000000 		.word	modulation
 10913 012c 00000000 		.word	channel
 10914 0130 00000000 		.word	ego_mode
 10915              		.cfi_endproc
 10916              	.LFE48:
 10918              		.bss
 10919              		.align	2
 10920              	restart_jamming.4702:
 10921 00d4 00000000 		.space	4
 10922              		.align	2
 10923              	first_ts.4803:
 10924 00d8 00000000 		.space	4
 10925              		.align	2
 10926              	prev_clk.4809:
 10927 00dc 00000000 		.space	4
 10928              		.text
 10929              	.Letext0:
 10930              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10931              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10932              		.file 4 "../common/ubertooth.h"
 10933              		.file 5 "bluetooth_le.h"
 10934              		.file 6 "bluetooth.h"
 10935              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccHz27EZ.s 			page 241


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccHz27EZ.s:19     .data:0000000000000000 $d
     /tmp/ccHz27EZ.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccHz27EZ.s:29     .rodata:0000000000000000 $d
     /tmp/ccHz27EZ.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccHz27EZ.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccHz27EZ.s:80     .rodata:000000000000002c whitening
     /tmp/ccHz27EZ.s:211    .rodata:00000000000000ac whitening_index
     /tmp/ccHz27EZ.s:255    .rodata:00000000000000d4 hop_interval_lut
     /tmp/ccHz27EZ.s:296    .rodata:00000000000000fc whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccHz27EZ.s:782    .rodata:000000000000087c compile_info
                            *COM*:0000000000000004 clkn
     /tmp/ccHz27EZ.s:791    .bss:0000000000000000 hop_mode
     /tmp/ccHz27EZ.s:792    .bss:0000000000000000 $d
     /tmp/ccHz27EZ.s:796    .bss:0000000000000001 do_hop
     /tmp/ccHz27EZ.s:801    .bss:0000000000000002 cs_no_squelch
     /tmp/ccHz27EZ.s:807    .data:0000000000000004 cs_threshold_req
     /tmp/ccHz27EZ.s:812    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccHz27EZ.s:822    .bss:0000000000000004 hop_direct_channel
     /tmp/ccHz27EZ.s:828    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccHz27EZ.s:838    .bss:000000000000000c idle_buf_channel
     /tmp/ccHz27EZ.s:844    .bss:000000000000000e active_buf_channel
     /tmp/ccHz27EZ.s:850    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccHz27EZ.s:859    .data:0000000000000008 active_rxbuf
     /tmp/ccHz27EZ.s:865    .data:000000000000000c idle_rxbuf
     /tmp/ccHz27EZ.s:871    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccHz27EZ.s:890    .bss:0000000000000018 le_jam_count
     /tmp/ccHz27EZ.s:896    .bss:000000000000001c data_cb
     /tmp/ccHz27EZ.s:902    .bss:0000000000000020 packet_cb
     /tmp/ccHz27EZ.s:908    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccHz27EZ.s:914    .bss:00000000000000c2 mode
     /tmp/ccHz27EZ.s:919    .bss:00000000000000c3 requested_mode
     /tmp/ccHz27EZ.s:924    .bss:00000000000000c4 jam_mode
     /tmp/ccHz27EZ.s:929    .bss:00000000000000c5 ego_mode
     /tmp/ccHz27EZ.s:934    .bss:00000000000000c6 modulation
     /tmp/ccHz27EZ.s:941    .data:0000000000000054 channel
     /tmp/ccHz27EZ.s:948    .bss:00000000000000c8 requested_channel
     /tmp/ccHz27EZ.s:954    .bss:00000000000000ca saved_request
     /tmp/ccHz27EZ.s:961    .data:0000000000000056 low_freq
     /tmp/ccHz27EZ.s:967    .data:0000000000000058 high_freq
ARM GAS  /tmp/ccHz27EZ.s 			page 242


     /tmp/ccHz27EZ.s:972    .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccHz27EZ.s:983    .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccHz27EZ.s:990    .bss:00000000000000cd rssi_count
     /tmp/ccHz27EZ.s:996    .bss:00000000000000d0 rssi_sum
                            *COM*:0000000000000001 rssi_avg
                            *COM*:0000000000000048 rssi_sample
     /tmp/ccHz27EZ.s:1001   .text.rssi_reset:0000000000000000 $t
     /tmp/ccHz27EZ.s:1005   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccHz27EZ.s:1048   .text.rssi_reset:0000000000000030 $d
     /tmp/ccHz27EZ.s:1058   .text.rssi_add:0000000000000000 $t
     /tmp/ccHz27EZ.s:1062   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccHz27EZ.s:1128   .text.rssi_add:000000000000005c $d
     /tmp/ccHz27EZ.s:1136   .text.rssi_add_pkt:0000000000000000 $t
     /tmp/ccHz27EZ.s:1140   .text.rssi_add_pkt:0000000000000000 rssi_add_pkt
     /tmp/ccHz27EZ.s:1248   .text.rssi_add_pkt:00000000000000b0 $d
     /tmp/ccHz27EZ.s:1259   .text.rssi_update_pkt:0000000000000000 $t
     /tmp/ccHz27EZ.s:1263   .text.rssi_update_pkt:0000000000000000 rssi_update_pkt
     /tmp/ccHz27EZ.s:1315   .text.rssi_update_pkt:000000000000003c $d
     /tmp/ccHz27EZ.s:1322   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccHz27EZ.s:1326   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccHz27EZ.s:1420   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccHz27EZ.s:1429   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccHz27EZ.s:1433   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccHz27EZ.s:1515   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccHz27EZ.s:1521   .text.enqueue_rssi:0000000000000000 $t
     /tmp/ccHz27EZ.s:1525   .text.enqueue_rssi:0000000000000000 enqueue_rssi
     /tmp/ccHz27EZ.s:1687   .text.enqueue_rssi:0000000000000114 $d
     /tmp/ccHz27EZ.s:1699   .text.enqueue:0000000000000000 $t
     /tmp/ccHz27EZ.s:1703   .text.enqueue:0000000000000000 enqueue
     /tmp/ccHz27EZ.s:1930   .text.enqueue:000000000000015c $d
     /tmp/ccHz27EZ.s:1945   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccHz27EZ.s:1950   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccHz27EZ.s:2131   .text.enqueue_with_ts:000000000000010c $d
     /tmp/ccHz27EZ.s:2138   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccHz27EZ.s:2142   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccHz27EZ.s:2217   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccHz27EZ.s:2225   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccHz27EZ.s:2229   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccHz27EZ.s:2270   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccHz27EZ.s:2278   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccHz27EZ.s:2282   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccHz27EZ.s:2323   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccHz27EZ.s:2335   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccHz27EZ.s:2339   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccHz27EZ.s:2376   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccHz27EZ.s:2437   .text.vendor_request_handler:0000000000000118 $t
     /tmp/ccHz27EZ.s:2837   .text.vendor_request_handler:00000000000003a8 $d
     /tmp/ccHz27EZ.s:2847   .text.vendor_request_handler:00000000000003c8 $t
     /tmp/ccHz27EZ.s:3231   .text.vendor_request_handler:0000000000000614 $d
     /tmp/ccHz27EZ.s:3249   .text.vendor_request_handler:0000000000000654 $t
ARM GAS  /tmp/ccHz27EZ.s 			page 243


     /tmp/ccHz27EZ.s:3639   .text.vendor_request_handler:00000000000008f4 $d
     /tmp/ccHz27EZ.s:3651   .text.vendor_request_handler:000000000000091c $t
     /tmp/ccHz27EZ.s:6483   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccHz27EZ.s:3935   .text.vendor_request_handler:0000000000000ad4 $d
     /tmp/ccHz27EZ.s:3945   .text.clkn_init:0000000000000000 $t
     /tmp/ccHz27EZ.s:3949   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccHz27EZ.s:4000   .text.clkn_init:0000000000000038 $d
     /tmp/ccHz27EZ.s:4010   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccHz27EZ.s:4015   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccHz27EZ.s:4184   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccHz27EZ.s:4196   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccHz27EZ.s:4201   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccHz27EZ.s:4243   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccHz27EZ.s:4252   .text.msleep:0000000000000000 $t
     /tmp/ccHz27EZ.s:4256   .text.msleep:0000000000000000 msleep
     /tmp/ccHz27EZ.s:4302   .text.msleep:0000000000000038 $d
     /tmp/ccHz27EZ.s:4308   .text.dma_init:0000000000000000 $t
     /tmp/ccHz27EZ.s:4312   .text.dma_init:0000000000000000 dma_init
     /tmp/ccHz27EZ.s:4486   .text.dma_init:0000000000000104 $d
     /tmp/ccHz27EZ.s:4521   .text.dma_init_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:4525   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccHz27EZ.s:4730   .text.dma_init_le:0000000000000134 $d
     /tmp/ccHz27EZ.s:4762   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccHz27EZ.s:4767   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccHz27EZ.s:4870   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccHz27EZ.s:4890   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccHz27EZ.s:4895   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccHz27EZ.s:4918   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccHz27EZ.s:4930   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/ccHz27EZ.s:4942   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/ccHz27EZ.s:4947   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccHz27EZ.s:4951   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccHz27EZ.s:5004   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccHz27EZ.s:5014   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccHz27EZ.s:5018   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccHz27EZ.s:5116   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccHz27EZ.s:5135   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccHz27EZ.s:5139   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccHz27EZ.s:5192   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccHz27EZ.s:5199   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccHz27EZ.s:5203   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccHz27EZ.s:5316   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccHz27EZ.s:5323   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccHz27EZ.s:5327   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccHz27EZ.s:5462   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccHz27EZ.s:5469   .text.le_transmit:0000000000000000 $t
     /tmp/ccHz27EZ.s:5474   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccHz27EZ.s:5814   .text.le_transmit:000000000000026c $d
     /tmp/ccHz27EZ.s:5826   .text.le_jam:0000000000000000 $t
     /tmp/ccHz27EZ.s:5831   .text.le_jam:0000000000000000 le_jam
     /tmp/ccHz27EZ.s:5914   .text.le_jam:000000000000008c $d
     /tmp/ccHz27EZ.s:5920   .text.hop:0000000000000000 $t
     /tmp/ccHz27EZ.s:5925   .text.hop:0000000000000000 hop
     /tmp/ccHz27EZ.s:6092   .text.hop:000000000000010c $d
     /tmp/ccHz27EZ.s:6103   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccHz27EZ.s:6108   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccHz27EZ.s:6457   .text.bt_stream_rx:0000000000000218 $d
ARM GAS  /tmp/ccHz27EZ.s 			page 244


     /tmp/ccHz27EZ.s:6479   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccHz27EZ.s:6527   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccHz27EZ.s:6532   .text.reset_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:6537   .text.reset_le:0000000000000000 reset_le
     /tmp/ccHz27EZ.s:6633   .text.reset_le:0000000000000084 $d
     /tmp/ccHz27EZ.s:6642   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccHz27EZ.s:6647   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccHz27EZ.s:6673   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccHz27EZ.s:6678   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:6683   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccHz27EZ.s:7109   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccHz27EZ.s:7135   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccHz27EZ.s:7140   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccHz27EZ.s:7519   .text.bt_le_sync:0000000000000264 $d
     /tmp/ccHz27EZ.s:7540   .text.bt_le_sync:00000000000002ac $t
     /tmp/ccHz27EZ.s:7940   .text.bt_le_sync:0000000000000548 $d
     /tmp/ccHz27EZ.s:10920  .bss:00000000000000d4 restart_jamming.4702
     /tmp/ccHz27EZ.s:7965   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:7970   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccHz27EZ.s:8260   .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccHz27EZ.s:8273   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccHz27EZ.s:8278   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccHz27EZ.s:8656   .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccHz27EZ.s:8666   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:8671   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccHz27EZ.s:8701   .text.bt_follow_le:000000000000001c $d
     /tmp/ccHz27EZ.s:8708   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccHz27EZ.s:8713   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccHz27EZ.s:8806   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccHz27EZ.s:8811   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccHz27EZ.s:9020   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccHz27EZ.s:10923  .bss:00000000000000d8 first_ts.4803
     /tmp/ccHz27EZ.s:9039   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccHz27EZ.s:9044   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccHz27EZ.s:9179   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccHz27EZ.s:10926  .bss:00000000000000dc prev_clk.4809
     /tmp/ccHz27EZ.s:9196   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccHz27EZ.s:9201   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccHz27EZ.s:9316   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccHz27EZ.s:9324   .text.see_aa:0000000000000000 $t
     /tmp/ccHz27EZ.s:9329   .text.see_aa:0000000000000000 see_aa
     /tmp/ccHz27EZ.s:9450   .text.see_aa:00000000000000a4 $d
     /tmp/ccHz27EZ.s:9462   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccHz27EZ.s:9467   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccHz27EZ.s:9919   .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccHz27EZ.s:9935   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:9940   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccHz27EZ.s:10022  .text.bt_promisc_le:000000000000006c $d
     /tmp/ccHz27EZ.s:10064  .text.bt_slave_le:0000000000000000 $t
     /tmp/ccHz27EZ.s:10069  .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccHz27EZ.s:10215  .text.bt_slave_le:00000000000000f8 $d
     /tmp/ccHz27EZ.s:10226  .text.specan:0000000000000000 $t
     /tmp/ccHz27EZ.s:10231  .text.specan:0000000000000000 specan
     /tmp/ccHz27EZ.s:10447  .text.specan:0000000000000178 $d
     /tmp/ccHz27EZ.s:10465  .text.led_specan:0000000000000000 $t
     /tmp/ccHz27EZ.s:10470  .text.led_specan:0000000000000000 led_specan
     /tmp/ccHz27EZ.s:10706  .text.led_specan:0000000000000178 $d
ARM GAS  /tmp/ccHz27EZ.s 			page 245


     /tmp/ccHz27EZ.s:10719  .text.main:0000000000000000 $t
     /tmp/ccHz27EZ.s:10724  .text.main:0000000000000000 main
     /tmp/ccHz27EZ.s:10768  .text.main:000000000000003c $d
     /tmp/ccHz27EZ.s:10782  .text.main:0000000000000074 $t
     /tmp/ccHz27EZ.s:10908  .text.main:0000000000000118 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
memset
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
dio_ssp_init
precalc
handle_usb
rbit
btle_crcgen_lut
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
